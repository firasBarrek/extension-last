{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "node_modules/angular-translate/dist/angular-translate.js",
    "node_modules/angulartics/src/angulartics.js",
    "node_modules/autofill-event/autofill-event.js",
    "node_modules/escape-html/index.js",
    "node_modules/extend/index.js",
    "node_modules/inherits/inherits_browser.js",
    "node_modules/lodash.debounce/index.js",
    "node_modules/lodash.get/index.js",
    "node_modules/lodash/_Symbol.js",
    "node_modules/lodash/_baseGetTag.js",
    "node_modules/lodash/_freeGlobal.js",
    "node_modules/lodash/_getPrototype.js",
    "node_modules/lodash/_getRawTag.js",
    "node_modules/lodash/_objectToString.js",
    "node_modules/lodash/_overArg.js",
    "node_modules/lodash/_root.js",
    "node_modules/lodash/isObjectLike.js",
    "node_modules/lodash/isPlainObject.js",
    "node_modules/node-uuid/uuid.js",
    "node_modules/process/browser.js",
    "node_modules/query-string/index.js",
    "node_modules/raven-js/plugins/angular.js",
    "node_modules/raven-js/src/utils.js",
    "node_modules/redux-thunk/lib/index.js",
    "node_modules/redux/lib/applyMiddleware.js",
    "node_modules/redux/lib/bindActionCreators.js",
    "node_modules/redux/lib/combineReducers.js",
    "node_modules/redux/lib/compose.js",
    "node_modules/redux/lib/createStore.js",
    "node_modules/redux/lib/index.js",
    "node_modules/redux/lib/utils/warning.js",
    "node_modules/retry/index.js",
    "node_modules/retry/lib/retry.js",
    "node_modules/retry/lib/retry_operation.js",
    "node_modules/scroll-into-view/scrollIntoView.js",
    "node_modules/seamless-immutable/src/seamless-immutable.js",
    "node_modules/strict-uri-encode/index.js",
    "node_modules/symbol-observable/index.js",
    "node_modules/symbol-observable/lib/index.js",
    "node_modules/symbol-observable/lib/ponyfill.js",
    "node_modules/tiny-emitter/index.js",
    "src/images/icons/cursor.svg",
    "src/images/icons/refresh.svg",
    "src/shared/bridge-events.js",
    "src/shared/bridge.js",
    "src/shared/discovery.coffee",
    "src/shared/frame-rpc.js",
    "src/shared/settings.js",
    "src/sidebar/analytics.js",
    "src/sidebar/annotation-mapper.js",
    "src/sidebar/annotation-metadata.js",
    "src/sidebar/annotation-ui.js",
    "src/sidebar/api-routes.js",
    "src/sidebar/build-thread.js",
    "src/sidebar/components/annotation-action-button.js",
    "src/sidebar/components/annotation-header.js",
    "src/sidebar/components/annotation-share-dialog.js",
    "src/sidebar/components/annotation-thread.js",
    "src/sidebar/components/annotation-viewer-content.js",
    "src/sidebar/components/annotation.js",
    "src/sidebar/components/dropdown-menu-btn.js",
    "src/sidebar/components/excerpt.js",
    "src/sidebar/components/group-list.js",
    "src/sidebar/components/help-link.js",
    "src/sidebar/components/help-panel.js",
    "src/sidebar/components/hypothesis-app.js",
    "src/sidebar/components/loggedout-message.js",
    "src/sidebar/components/login-control.js",
    "src/sidebar/components/markdown.js",
    "src/sidebar/components/moderation-banner.js",
    "src/sidebar/components/new-note-btn.js",
    "src/sidebar/components/publish-annotation-btn.js",
    "src/sidebar/components/search-input.js",
    "src/sidebar/components/search-status-bar.js",
    "src/sidebar/components/selection-tabs.js",
    "src/sidebar/components/share-dialog.js",
    "src/sidebar/components/sidebar-content.js",
    "src/sidebar/components/sidebar-tutorial.js",
    "src/sidebar/components/sort-dropdown.js",
    "src/sidebar/components/stream-content.js",
    "src/sidebar/components/svg-icon.js",
    "src/sidebar/components/tag-editor.js",
    "src/sidebar/components/thread-list.js",
    "src/sidebar/components/timestamp.js",
    "src/sidebar/components/top-bar.js",
    "src/sidebar/cross-origin-rpc.js",
    "src/sidebar/date-util.js",
    "src/sidebar/directive/h-autofocus.js",
    "src/sidebar/directive/h-branding.js",
    "src/sidebar/directive/h-on-touch.js",
    "src/sidebar/directive/h-tooltip.js",
    "src/sidebar/directive/spinner.js",
    "src/sidebar/directive/window-scroll.js",
    "src/sidebar/drafts.js",
    "src/sidebar/events.js",
    "src/sidebar/features.js",
    "src/sidebar/filter/url.js",
    "src/sidebar/flash.js",
    "src/sidebar/frame-sync.js",
    "src/sidebar/ga.js",
    "src/sidebar/get-api-url.js",
    "src/sidebar/groups.js",
    "src/sidebar/host-config.js",
    "src/sidebar/index.js",
    "src/sidebar/live-reload-client.js",
    "src/sidebar/local-storage.js",
    "src/sidebar/markdown-commands.js",
    "src/sidebar/media-embedder.js",
    "src/sidebar/oauth-auth.js",
    "src/sidebar/permissions.js",
    "src/sidebar/query-parser.coffee",
    "src/sidebar/raven.js",
    "src/sidebar/reducers/annotations.js",
    "src/sidebar/reducers/debug-middleware.js",
    "src/sidebar/reducers/frames.js",
    "src/sidebar/reducers/index.js",
    "src/sidebar/reducers/links.js",
    "src/sidebar/reducers/selection.js",
    "src/sidebar/reducers/session.js",
    "src/sidebar/reducers/util.js",
    "src/sidebar/reducers/viewer.js",
    "src/sidebar/render-markdown.js",
    "src/sidebar/retry-util.js",
    "src/sidebar/root-thread.js",
    "src/sidebar/search-client.js",
    "src/sidebar/search-filter.js",
    "src/sidebar/service-config.js",
    "src/sidebar/service-url.js",
    "src/sidebar/session.js",
    "src/sidebar/store.js",
    "src/sidebar/stream-filter.coffee",
    "src/sidebar/streamer.js",
    "src/sidebar/tabs.js",
    "src/sidebar/tags.js",
    "src/sidebar/templates/annotation-action-button.html",
    "src/sidebar/templates/annotation-header.html",
    "src/sidebar/templates/annotation-share-dialog.html",
    "src/sidebar/templates/annotation-thread.html",
    "src/sidebar/templates/annotation-viewer-content.html",
    "src/sidebar/templates/annotation.html",
    "src/sidebar/templates/dropdown-menu-btn.html",
    "src/sidebar/templates/excerpt.html",
    "src/sidebar/templates/group-list.html",
    "src/sidebar/templates/help-link.html",
    "src/sidebar/templates/help-panel.html",
    "src/sidebar/templates/hypothesis-app.html",
    "src/sidebar/templates/loggedout-message.html",
    "src/sidebar/templates/login-control.html",
    "src/sidebar/templates/markdown.html",
    "src/sidebar/templates/moderation-banner.html",
    "src/sidebar/templates/new-note-btn.html",
    "src/sidebar/templates/publish-annotation-btn.html",
    "src/sidebar/templates/search-input.html",
    "src/sidebar/templates/search-status-bar.html",
    "src/sidebar/templates/selection-tabs.html",
    "src/sidebar/templates/share-dialog.html",
    "src/sidebar/templates/sidebar-content.html",
    "src/sidebar/templates/sidebar-tutorial.html",
    "src/sidebar/templates/sort-dropdown.html",
    "src/sidebar/templates/stream-content.html",
    "src/sidebar/templates/tag-editor.html",
    "src/sidebar/templates/thread-list.html",
    "src/sidebar/templates/timestamp.html",
    "src/sidebar/templates/top-bar.html",
    "src/sidebar/time.js",
    "src/sidebar/translate.js",
    "src/sidebar/ui-constants.js",
    "src/sidebar/unicode.js",
    "src/sidebar/util/account-id.js",
    "src/sidebar/util/array-util.js",
    "src/sidebar/util/disable-opener-for-external-links.js",
    "src/sidebar/util/excerpt-overflow-monitor.js",
    "src/sidebar/util/is-third-party-service.js",
    "src/sidebar/util/memoize.js",
    "src/sidebar/util/oauth-client.js",
    "src/sidebar/util/random.js",
    "src/sidebar/util/scope-timeout.js",
    "src/sidebar/util/session-util.js",
    "src/sidebar/util/url-util.js",
    "/home/firas/Desktop/Hypothesis/client/src/sidebar/vendor/ui-bootstrap-custom-tpls-0.13.4.js",
    "src/sidebar/view-filter.js",
    "src/sidebar/virtual-thread-list.js",
    "src/sidebar/websocket.js"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvsHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACzXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACn6BA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5BA;AACA;AACA;AACA;AACA;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3pBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;;ACDA;AACA;;ACDA;;;;;;;AAMA,OAAO,UAAU;;;;;;;EAOf,uBAAuB;;;;;EAKvB,gBAAgB;;;;;;EAMhB,iBAAiB;;;;;;EAMjB,kBAAkB;;;;;EAKlB,mBAAmB;;;;;EAKnB,iCAAiC;;;;;EAKjC,kBAAkB;;;;;wyFAMoxF;;ACnDxyF;;AAEA,IAAI,eAAe,YAAY,EAAE,SAAS,iBAAiB,QAAQ,OAAO,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,EAAE,IAAI,aAAa,MAAM,IAAI,WAAW,aAAa,WAAW,cAAc,OAAO,WAAW,eAAe,MAAM,IAAI,WAAW,YAAY,WAAW,WAAW,MAAM,OAAO,eAAe,QAAQ,WAAW,KAAK,iBAAiB,OAAO,UAAU,aAAa,YAAY,aAAa,EAAE,IAAI,YAAY,iBAAiB,YAAY,WAAW,aAAa,IAAI,aAAa,iBAAiB,aAAa,cAAc,OAAO;;AAEhiB,SAAS,mBAAmB,KAAK,EAAE,IAAI,MAAM,QAAQ,MAAM,EAAE,KAAK,IAAI,IAAI,GAAG,OAAO,MAAM,IAAI,SAAS,IAAI,IAAI,QAAQ,KAAK,EAAE,KAAK,KAAK,IAAI,MAAM,OAAO,aAAa,EAAE,OAAO,MAAM,KAAK;;AAE1L,SAAS,gBAAgB,UAAU,aAAa,EAAE,IAAI,EAAE,oBAAoB,cAAc,EAAE,MAAM,IAAI,UAAU;;AAJhH,IAAI,SAAS,QAAQ;;AAErB,IAAI,MAAM,QAAQ;;;;;;;AAalB,IAPM,SAOO,YAAY;EANvB,SAAA,SAAc;IAAA,gBAAA,MAAA;;IACZ,KAAK,QAAQ;IACb,KAAK,mBAAmB;IACxB,KAAK,qBAAqB;;;;;;;;;;EAmB5B,aAAa,QAAQ,CAAC;IACpB,KAAK;IACL,OAAO,SAAS,UAbR;MACR,MAAM,KAAK,KAAK,OAAO,IAAI,UAAC,MAAD;QAAA,OACzB,KAAK,QAAQ;;;;;;;;;;;;;;;;KA6Bd;IACD,KAAK;IACL,OAAO,SAAS,cAjBJ,QAAQ,QAAQ,OAAO;MAAA,IAAA,QAAA;;MACnC,IAAI,UAAU;MACd,IAAI,YAAY;;MAEhB,IAAI,QAAQ,SAAR,QAAc;QAChB,IAAI,WAAW;UAAE;;QACjB,YAAY;QACZ,MAAM,KAAK,MAAK,oBAAoB,QAAQ,UAAC,IAAD;UAAA,OAC1C,GAAG,KAAK,MAAM,SAAS;;;;MAI3B,IAAI,UAAU,SAAV,QAAW,QAAQ,IAAO;QAC5B,IAAI,WAAW,OAAO;UACpB;UACA;;;;MAIJ,IAAI,YAAY,OAAO,EAAC,SAAA,WAAU,KAAK;;;MAGvC,UAAU,IAAI,IAAI,QAAQ,QAAQ,QAAQ;;;MAG1C,QAAQ,KAAK,WAAW,OAAO;;;MAG/B,KAAK,MAAM,KAAK;QACd,SAAA;QACA,QAAQ;;;MAGV,OAAO;;;;;;;;;;;;KAiCN;IACD,KAAK;IACL,OAAO,SAAS,KAxBb,QAAiB;MAAA,IAAA,SAAA;;MAAA,KAAA,IAAA,OAAA,UAAA,QAAN,OAAM,MAAA,OAAA,IAAA,OAAA,IAAA,IAAA,OAAA,GAAA,OAAA,MAAA,QAAA;QAAN,KAAM,OAAA,KAAA,UAAA;;;MACpB,IAAI;MACJ,IAAI,OAAO,KAAK,KAAK,SAAS,OAAQ,YAAY;QAChD,KAAK,KAAK,KAAK,SAAS;QACxB,OAAO,KAAK,MAAM,GAAG,CAAC;;;MAGxB,IAAI,iBAAiB,SAAjB,eAAiB,GAAK;QACxB,OAAO,UAAA,OAAS;UACd,EAAE;UACF,OAAK,QAAS,MAAM,KAAK,OAAK,OAAO,OAAO,UAAC,GAAD;YAAA,OAAO,EAAE,YAAY;aAAG,IAAI,UAAC,GAAD;YAAA,OAAO;;UAC/E,MAAM;;;;MAIV,IAAI,WAAW,KAAK,MAAM,IAAI,UAAS,GAAG;QACxC,IAAI,IAAI,IAAI,QAAQ,UAAS,SAAS,QAAQ;UAC5C,IAAI,UAAU,WAAY,YAAA;YAAA,OAAM,QAAQ;aAAQ;UAChD,IAAI;YAAA,IAAA;;YACF,OAAO,CAAA,aAAA,EAAE,SAAQ,KAAV,MAAA,YAAA,CAAe,QAAf,OAAA,mBAA0B,MAAM,KAAK,QAArC,CAA4C,UAAS,KAAK,QAAQ;cACvE,aAAa;cACb,IAAI,KAAK;gBAAE,OAAO,OAAO;qBAAa;gBAAE,OAAO,QAAQ;;;YAEzD,OAAO,OAAO;YACd,IAAI,MAAM;YACV,OAAO,OAAO;;;;;QAKlB,OAAO,EAAE,MAAM,eAAe,EAAE;;;MAGlC,IAAI,gBAAgB,QAAQ,IAAI;;MAEhC,IAAI,IAAI;QACN,gBAAgB,cACb,KAAK,UAAA,SAAA;UAAA,OAAW,GAAG,MAAM;WACzB,MAAM,UAAA,OAAA;UAAA,OAAS,GAAG;;;;MAGvB,OAAO;;;;;;;;;;;KAuDN;IACD,KAAK;IACL,OAAO,SAAS,GA/Cf,QAAQ,UAAU;MACnB,IAAI,KAAK,iBAAiB,SAAS;QACjC,MAAM,IAAI,MAAJ,gBAAuB,SAAvB;;MAER,KAAK,iBAAiB,UAAU;MAChC,OAAO;;;;;;;;;KAwDN;IACD,KAAK;IACL,OAAO,SAAS,IAlDd,QAAQ;MACV,OAAO,KAAK,iBAAiB;MAC7B,OAAO;;;;;;;;;KA2DN;IACD,KAAK;IACL,OAAO,SAAS,UArDR,UAAU;MAClB,KAAK,mBAAmB,KAAK;MAC7B,OAAO;;;;EAyDT,OAAO;;;AArDT,OAAO,UAAU;owUAyDmvU;;AC3NpwU;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxHA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,IAAI,UAAU,OAAO,WAAW,cAAc,OAAO,OAAO,aAAa,WAAW,UAAU,KAAK,EAAE,OAAO,OAAO,SAAS,UAAU,KAAK,EAAE,OAAO,OAAO,OAAO,WAAW,cAAc,IAAI,gBAAgB,UAAU,QAAQ,OAAO,YAAY,WAAW,OAAO;;AAAtQ,IAAI,UAAU;;AAEd,OAAO,UAAU;;AAEjB,SAAS,IAAK,KAAK,KAAK,QAAQ,SAAS;IACrC,IAAI,EAAE,gBAAgB,MAAM,OAAO,IAAI,IAAI,KAAK,KAAK,QAAQ;IAC7D,IAAI,OAAO;IACX,KAAK,MA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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9HA;;;AAEA,IAAI,cAAc,QAAQ;AAC1B,IAAI,OAAO,QAAQ;;AAEnB,IAAI,SAAS,QAAQ;AACrB,IAAI,SAAS,QAAQ;;;;;;;;;;;;;;;;AAgBrB,SAAS,SAAS,YAAY,kBAAkB,cAAc,MAC5C,QAAQ,SAAS,UAAU;;EAE3C,IAAI,WAAW,KAAK;;;EAGpB,IAAI;;;;EAIJ,IAAI,iBAAiB;;;;;;;;;;;;;;EAcrB,IAAI,iBAAiB;;;EAGrB,IAAI,mBAAmB;;EAEvB,SAAS,6BAA6B,SAAS;IAC7C,IAAI,SAAS,QAAQ,QAAQ;IAC7B,IAAI,cAAc,QAAQ;;IAE1B,QAAQ;MACR,KAAK;MACL,KAAK;MACL,KAAK;QACH,YAAY,QAAQ,UAAU,KAAK;;;;;UAKjC,IAAI,IAAI,UAAU,OAAO,UAAU,MAAM,CAAC,aAAa,aAAa;YAClE,eAAe,IAAI,MAAM;;;QAG7B;MACF,KAAK;QACH,YAAY,QAAQ,UAAU,KAAK;;UAEjC,OAAO,eAAe,IAAI;;;;;;;;UAQ1B,IAAI,aAAa,iBAA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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "/*!\n * angular-translate - v2.18.1 - 2018-05-19\n * \n * Copyright (c) 2018 The angular-translate team, Pascal Precht; Licensed MIT\n */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define([], function () {\n      return (factory());\n    });\n  } else if (typeof module === 'object' && module.exports) {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    factory();\n  }\n}(this, function () {\n\n/**\n * @ngdoc overview\n * @name pascalprecht.translate\n *\n * @description\n * The main module which holds everything together.\n */\nrunTranslate.$inject = ['$translate'];\n$translate.$inject = ['$STORAGE_KEY', '$windowProvider', '$translateSanitizationProvider', 'pascalprechtTranslateOverrider'];\n$translateDefaultInterpolation.$inject = ['$interpolate', '$translateSanitization'];\ntranslateDirective.$inject = ['$translate', '$interpolate', '$compile', '$parse', '$rootScope'];\ntranslateAttrDirective.$inject = ['$translate', '$rootScope'];\ntranslateCloakDirective.$inject = ['$translate', '$rootScope'];\ntranslateFilterFactory.$inject = ['$parse', '$translate'];\n$translationCache.$inject = ['$cacheFactory'];\nangular.module('pascalprecht.translate', ['ng'])\n  .run(runTranslate);\n\nfunction runTranslate($translate) {\n\n  'use strict';\n\n  var key = $translate.storageKey(),\n    storage = $translate.storage();\n\n  var fallbackFromIncorrectStorageValue = function () {\n    var preferred = $translate.preferredLanguage();\n    if (angular.isString(preferred)) {\n      $translate.use(preferred);\n      // $translate.use() will also remember the language.\n      // So, we don't need to call storage.put() here.\n    } else {\n      storage.put(key, $translate.use());\n    }\n  };\n\n  fallbackFromIncorrectStorageValue.displayName = 'fallbackFromIncorrectStorageValue';\n\n  if (storage) {\n    if (!storage.get(key)) {\n      fallbackFromIncorrectStorageValue();\n    } else {\n      $translate.use(storage.get(key))['catch'](fallbackFromIncorrectStorageValue);\n    }\n  } else if (angular.isString($translate.preferredLanguage())) {\n    $translate.use($translate.preferredLanguage());\n  }\n}\n\nrunTranslate.displayName = 'runTranslate';\n\n/**\n * @ngdoc object\n * @name pascalprecht.translate.$translateSanitizationProvider\n *\n * @description\n *\n * Configurations for $translateSanitization\n */\nangular.module('pascalprecht.translate').provider('$translateSanitization', $translateSanitizationProvider);\n\nfunction $translateSanitizationProvider () {\n\n  'use strict';\n\n  var $sanitize,\n      $sce,\n      currentStrategy = null, // TODO change to either 'sanitize', 'escape' or ['sanitize', 'escapeParameters'] in 3.0.\n      hasConfiguredStrategy = false,\n      hasShownNoStrategyConfiguredWarning = false,\n      strategies;\n\n  /**\n   * Definition of a sanitization strategy function\n   * @callback StrategyFunction\n   * @param {string|object} value - value to be sanitized (either a string or an interpolated value map)\n   * @param {string} mode - either 'text' for a string (translation) or 'params' for the interpolated params\n   * @return {string|object}\n   */\n\n  /**\n   * @ngdoc property\n   * @name strategies\n   * @propertyOf pascalprecht.translate.$translateSanitizationProvider\n   *\n   * @description\n   * Following strategies are built-in:\n   * <dl>\n   *   <dt>sanitize</dt>\n   *   <dd>Sanitizes HTML in the translation text using $sanitize</dd>\n   *   <dt>escape</dt>\n   *   <dd>Escapes HTML in the translation</dd>\n   *   <dt>sanitizeParameters</dt>\n   *   <dd>Sanitizes HTML in the values of the interpolation parameters using $sanitize</dd>\n   *   <dt>escapeParameters</dt>\n   *   <dd>Escapes HTML in the values of the interpolation parameters</dd>\n   *   <dt>escaped</dt>\n   *   <dd>Support legacy strategy name 'escaped' for backwards compatibility (will be removed in 3.0)</dd>\n   * </dl>\n   *\n   */\n\n  strategies = {\n    sanitize: function (value, mode/*, context*/) {\n      if (mode === 'text') {\n        value = htmlSanitizeValue(value);\n      }\n      return value;\n    },\n    escape: function (value, mode/*, context*/) {\n      if (mode === 'text') {\n        value = htmlEscapeValue(value);\n      }\n      return value;\n    },\n    sanitizeParameters: function (value, mode/*, context*/) {\n      if (mode === 'params') {\n        value = mapInterpolationParameters(value, htmlSanitizeValue);\n      }\n      return value;\n    },\n    escapeParameters: function (value, mode/*, context*/) {\n      if (mode === 'params') {\n        value = mapInterpolationParameters(value, htmlEscapeValue);\n      }\n      return value;\n    },\n    sce: function (value, mode, context) {\n      if (mode === 'text') {\n        value = htmlTrustValue(value);\n      } else if (mode === 'params') {\n        if (context !== 'filter') {\n          // do html escape in filter context #1101\n          value = mapInterpolationParameters(value, htmlEscapeValue);\n        }\n      }\n      return value;\n    },\n    sceParameters: function (value, mode/*, context*/) {\n      if (mode === 'params') {\n        value = mapInterpolationParameters(value, htmlTrustValue);\n      }\n      return value;\n    }\n  };\n  // Support legacy strategy name 'escaped' for backwards compatibility.\n  // TODO should be removed in 3.0\n  strategies.escaped = strategies.escapeParameters;\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateSanitizationProvider#addStrategy\n   * @methodOf pascalprecht.translate.$translateSanitizationProvider\n   *\n   * @description\n   * Adds a sanitization strategy to the list of known strategies.\n   *\n   * @param {string} strategyName - unique key for a strategy\n   * @param {StrategyFunction} strategyFunction - strategy function\n   * @returns {object} this\n   */\n  this.addStrategy = function (strategyName, strategyFunction) {\n    strategies[strategyName] = strategyFunction;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateSanitizationProvider#removeStrategy\n   * @methodOf pascalprecht.translate.$translateSanitizationProvider\n   *\n   * @description\n   * Removes a sanitization strategy from the list of known strategies.\n   *\n   * @param {string} strategyName - unique key for a strategy\n   * @returns {object} this\n   */\n  this.removeStrategy = function (strategyName) {\n    delete strategies[strategyName];\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateSanitizationProvider#useStrategy\n   * @methodOf pascalprecht.translate.$translateSanitizationProvider\n   *\n   * @description\n   * Selects a sanitization strategy. When an array is provided the strategies will be executed in order.\n   *\n   * @param {string|StrategyFunction|array} strategy The sanitization strategy / strategies which should be used. Either a name of an existing strategy, a custom strategy function, or an array consisting of multiple names and / or custom functions.\n   * @returns {object} this\n   */\n  this.useStrategy = function (strategy) {\n    hasConfiguredStrategy = true;\n    currentStrategy = strategy;\n    return this;\n  };\n\n  /**\n   * @ngdoc object\n   * @name pascalprecht.translate.$translateSanitization\n   * @requires $injector\n   * @requires $log\n   *\n   * @description\n   * Sanitizes interpolation parameters and translated texts.\n   *\n   */\n  this.$get = ['$injector', '$log', function ($injector, $log) {\n\n    var cachedStrategyMap = {};\n\n    var applyStrategies = function (value, mode, context, selectedStrategies) {\n      angular.forEach(selectedStrategies, function (selectedStrategy) {\n        if (angular.isFunction(selectedStrategy)) {\n          value = selectedStrategy(value, mode, context);\n        } else if (angular.isFunction(strategies[selectedStrategy])) {\n          value = strategies[selectedStrategy](value, mode, context);\n        } else if (angular.isString(strategies[selectedStrategy])) {\n          if (!cachedStrategyMap[strategies[selectedStrategy]]) {\n            try {\n              cachedStrategyMap[strategies[selectedStrategy]] = $injector.get(strategies[selectedStrategy]);\n            } catch (e) {\n              cachedStrategyMap[strategies[selectedStrategy]] = function() {};\n              throw new Error('pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: \\'' + selectedStrategy + '\\'');\n            }\n          }\n          value = cachedStrategyMap[strategies[selectedStrategy]](value, mode, context);\n        } else {\n          throw new Error('pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: \\'' + selectedStrategy + '\\'');\n        }\n      });\n      return value;\n    };\n\n    // TODO: should be removed in 3.0\n    var showNoStrategyConfiguredWarning = function () {\n      if (!hasConfiguredStrategy && !hasShownNoStrategyConfiguredWarning) {\n        $log.warn('pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details.');\n        hasShownNoStrategyConfiguredWarning = true;\n      }\n    };\n\n    if ($injector.has('$sanitize')) {\n      $sanitize = $injector.get('$sanitize');\n    }\n    if ($injector.has('$sce')) {\n      $sce = $injector.get('$sce');\n    }\n\n    return {\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translateSanitization#useStrategy\n       * @methodOf pascalprecht.translate.$translateSanitization\n       *\n       * @description\n       * Selects a sanitization strategy. When an array is provided the strategies will be executed in order.\n       *\n       * @param {string|StrategyFunction|array} strategy The sanitization strategy / strategies which should be used. Either a name of an existing strategy, a custom strategy function, or an array consisting of multiple names and / or custom functions.\n       */\n      useStrategy: (function (self) {\n        return function (strategy) {\n          self.useStrategy(strategy);\n        };\n      })(this),\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translateSanitization#sanitize\n       * @methodOf pascalprecht.translate.$translateSanitization\n       *\n       * @description\n       * Sanitizes a value.\n       *\n       * @param {string|object} value The value which should be sanitized.\n       * @param {string} mode The current sanitization mode, either 'params' or 'text'.\n       * @param {string|StrategyFunction|array} [strategy] Optional custom strategy which should be used instead of the currently selected strategy.\n       * @param {string} [context] The context of this call: filter, service. Default is service\n       * @returns {string|object} sanitized value\n       */\n      sanitize: function (value, mode, strategy, context) {\n        if (!currentStrategy) {\n          showNoStrategyConfiguredWarning();\n        }\n\n        if (!strategy && strategy !== null) {\n          strategy = currentStrategy;\n        }\n\n        if (!strategy) {\n          return value;\n        }\n\n        if (!context) {\n          context = 'service';\n        }\n\n        var selectedStrategies = angular.isArray(strategy) ? strategy : [strategy];\n        return applyStrategies(value, mode, context, selectedStrategies);\n      }\n    };\n  }];\n\n  var htmlEscapeValue = function (value) {\n    var element = angular.element('<div></div>');\n    element.text(value); // not chainable, see #1044\n    return element.html();\n  };\n\n  var htmlSanitizeValue = function (value) {\n    if (!$sanitize) {\n      throw new Error('pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as \\'escape\\'.');\n    }\n    return $sanitize(value);\n  };\n\n  var htmlTrustValue = function (value) {\n    if (!$sce) {\n      throw new Error('pascalprecht.translate.$translateSanitization: Error cannot find $sce service.');\n    }\n    return $sce.trustAsHtml(value);\n  };\n\n  var mapInterpolationParameters = function (value, iteratee, stack) {\n    if (angular.isDate(value)) {\n      return value;\n    } else if (angular.isObject(value)) {\n      var result = angular.isArray(value) ? [] : {};\n\n      if (!stack) {\n        stack = [];\n      } else {\n        if (stack.indexOf(value) > -1) {\n          throw new Error('pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object');\n        }\n      }\n\n      stack.push(value);\n      angular.forEach(value, function (propertyValue, propertyKey) {\n\n        /* Skipping function properties. */\n        if (angular.isFunction(propertyValue)) {\n          return;\n        }\n\n        result[propertyKey] = mapInterpolationParameters(propertyValue, iteratee, stack);\n      });\n      stack.splice(-1, 1); // remove last\n\n      return result;\n    } else if (angular.isNumber(value)) {\n      return value;\n    } else if (value === true || value === false) {\n      return value;\n    } else if (!angular.isUndefined(value) && value !== null) {\n      return iteratee(value);\n    } else {\n      return value;\n    }\n  };\n}\n\n/**\n * @ngdoc object\n * @name pascalprecht.translate.$translateProvider\n * @description\n *\n * $translateProvider allows developers to register translation-tables, asynchronous loaders\n * and similar to configure translation behavior directly inside of a module.\n *\n */\nangular.module('pascalprecht.translate')\n  .constant('pascalprechtTranslateOverrider', {})\n  .provider('$translate', $translate);\n\nfunction $translate($STORAGE_KEY, $windowProvider, $translateSanitizationProvider, pascalprechtTranslateOverrider) {\n\n  'use strict';\n\n  var $translationTable = {},\n    $preferredLanguage,\n    $availableLanguageKeys = [],\n    $languageKeyAliases,\n    $fallbackLanguage,\n    $fallbackWasString,\n    $uses,\n    $nextLang,\n    $storageFactory,\n    $storageKey = $STORAGE_KEY,\n    $storagePrefix,\n    $missingTranslationHandlerFactory,\n    $interpolationFactory,\n    $interpolatorFactories = [],\n    $loaderFactory,\n    $cloakClassName = 'translate-cloak',\n    $loaderOptions,\n    $notFoundIndicatorLeft,\n    $notFoundIndicatorRight,\n    $postCompilingEnabled = false,\n    $forceAsyncReloadEnabled = false,\n    $nestedObjectDelimeter = '.',\n    $isReady = false,\n    $keepContent = false,\n    loaderCache,\n    directivePriority = 0,\n    statefulFilter = true,\n    postProcessFn,\n    uniformLanguageTagResolver = 'default',\n    languageTagResolver = {\n      'default' : function (tag) {\n        return (tag || '').split('-').join('_');\n      },\n      java : function (tag) {\n        var temp = (tag || '').split('-').join('_');\n        var parts = temp.split('_');\n        return parts.length > 1 ? (parts[0].toLowerCase() + '_' + parts[1].toUpperCase()) : temp;\n      },\n      bcp47 : function (tag) {\n        var temp = (tag || '').split('_').join('-');\n        var parts = temp.split('-');\n\n        switch (parts.length) {\n          case 1: // language only\n            parts[0] = parts[0].toLowerCase();\n            break;\n          case 2: // language-script or language-region\n            parts[0] = parts[0].toLowerCase();\n            if (parts[1].length === 4) { // parts[1] is script\n              parts[1] = parts[1].charAt(0).toUpperCase() + parts[1].slice(1).toLowerCase();\n            } else { // parts[1] is region\n              parts[1] = parts[1].toUpperCase();\n            }\n            break;\n          case 3: // language-script-region\n            parts[0] = parts[0].toLowerCase();\n            parts[1] = parts[1].charAt(0).toUpperCase() + parts[1].slice(1).toLowerCase();\n            parts[2] = parts[2].toUpperCase();\n            break;\n          default:\n            return temp;\n        }\n\n        return parts.join('-');\n      },\n      'iso639-1' : function (tag) {\n        var temp = (tag || '').split('_').join('-');\n        var parts = temp.split('-');\n        return parts[0].toLowerCase();\n      }\n    };\n\n  var version = '2.18.1';\n\n  // tries to determine the browsers language\n  var getFirstBrowserLanguage = function () {\n\n    // internal purpose only\n    if (angular.isFunction(pascalprechtTranslateOverrider.getLocale)) {\n      return pascalprechtTranslateOverrider.getLocale();\n    }\n\n    var nav = $windowProvider.$get().navigator,\n      browserLanguagePropertyKeys = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'],\n      i,\n      language;\n\n    // support for HTML 5.1 \"navigator.languages\"\n    if (angular.isArray(nav.languages)) {\n      for (i = 0; i < nav.languages.length; i++) {\n        language = nav.languages[i];\n        if (language && language.length) {\n          return language;\n        }\n      }\n    }\n\n    // support for other well known properties in browsers\n    for (i = 0; i < browserLanguagePropertyKeys.length; i++) {\n      language = nav[browserLanguagePropertyKeys[i]];\n      if (language && language.length) {\n        return language;\n      }\n    }\n\n    return null;\n  };\n  getFirstBrowserLanguage.displayName = 'angular-translate/service: getFirstBrowserLanguage';\n\n  // tries to determine the browsers locale\n  var getLocale = function () {\n    var locale = getFirstBrowserLanguage() || '';\n    if (languageTagResolver[uniformLanguageTagResolver]) {\n      locale = languageTagResolver[uniformLanguageTagResolver](locale);\n    }\n    return locale;\n  };\n  getLocale.displayName = 'angular-translate/service: getLocale';\n\n  /**\n   * @name indexOf\n   * @private\n   *\n   * @description\n   * indexOf polyfill. Kinda sorta.\n   *\n   * @param {array} array Array to search in.\n   * @param {string} searchElement Element to search for.\n   *\n   * @returns {int} Index of search element.\n   */\n  var indexOf = function (array, searchElement) {\n    for (var i = 0, len = array.length; i < len; i++) {\n      if (array[i] === searchElement) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  /**\n   * @name trim\n   * @private\n   *\n   * @description\n   * trim polyfill\n   *\n   * @returns {string} The string stripped of whitespace from both ends\n   */\n  var trim = function () {\n    return this.toString().replace(/^\\s+|\\s+$/g, '');\n  };\n\n  /**\n   * @name lowercase\n   * @private\n   *\n   * @description\n   * Return the lowercase string only if the type is string\n   *\n   * @returns {string} The string all in lowercase\n   */\n  var lowercase = function (string) {\n    return angular.isString(string) ? string.toLowerCase() : string;\n  };\n\n  var negotiateLocale = function (preferred) {\n    if (!preferred) {\n      return;\n    }\n\n    var avail = [],\n      locale = lowercase(preferred),\n      i = 0,\n      n = $availableLanguageKeys.length;\n\n    for (; i < n; i++) {\n      avail.push(lowercase($availableLanguageKeys[i]));\n    }\n\n    // Check for an exact match in our list of available keys\n    i = indexOf(avail, locale);\n    if (i > -1) {\n      return $availableLanguageKeys[i];\n    }\n\n    if ($languageKeyAliases) {\n      var alias;\n      for (var langKeyAlias in $languageKeyAliases) {\n        if ($languageKeyAliases.hasOwnProperty(langKeyAlias)) {\n          var hasWildcardKey = false;\n          var hasExactKey = Object.prototype.hasOwnProperty.call($languageKeyAliases, langKeyAlias) &&\n            lowercase(langKeyAlias) === lowercase(preferred);\n\n          if (langKeyAlias.slice(-1) === '*') {\n            hasWildcardKey = lowercase(langKeyAlias.slice(0, -1)) === lowercase(preferred.slice(0, langKeyAlias.length - 1));\n          }\n          if (hasExactKey || hasWildcardKey) {\n            alias = $languageKeyAliases[langKeyAlias];\n            if (indexOf(avail, lowercase(alias)) > -1) {\n              return alias;\n            }\n          }\n        }\n      }\n    }\n\n    // Check for a language code without region\n    var parts = preferred.split('_');\n\n    if (parts.length > 1 && indexOf(avail, lowercase(parts[0])) > -1) {\n      return parts[0];\n    }\n\n    // If everything fails, return undefined.\n    return;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#translations\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Registers a new translation table for specific language key.\n   *\n   * To register a translation table for specific language, pass a defined language\n   * key as first parameter.\n   *\n   * <pre>\n   *  // register translation table for language: 'de_DE'\n   *  $translateProvider.translations('de_DE', {\n   *    'GREETING': 'Hallo Welt!'\n   *  });\n   *\n   *  // register another one\n   *  $translateProvider.translations('en_US', {\n   *    'GREETING': 'Hello world!'\n   *  });\n   * </pre>\n   *\n   * When registering multiple translation tables for for the same language key,\n   * the actual translation table gets extended. This allows you to define module\n   * specific translation which only get added, once a specific module is loaded in\n   * your app.\n   *\n   * Invoking this method with no arguments returns the translation table which was\n   * registered with no language key. Invoking it with a language key returns the\n   * related translation table.\n   *\n   * @param {string} langKey A language key.\n   * @param {object} translationTable A plain old JavaScript object that represents a translation table.\n   *\n   */\n  var translations = function (langKey, translationTable) {\n\n    if (!langKey && !translationTable) {\n      return $translationTable;\n    }\n\n    if (langKey && !translationTable) {\n      if (angular.isString(langKey)) {\n        return $translationTable[langKey];\n      }\n    } else {\n      if (!angular.isObject($translationTable[langKey])) {\n        $translationTable[langKey] = {};\n      }\n      angular.extend($translationTable[langKey], flatObject(translationTable));\n    }\n    return this;\n  };\n\n  this.translations = translations;\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#cloakClassName\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   *\n   * Let's you change the class name for `translate-cloak` directive.\n   * Default class name is `translate-cloak`.\n   *\n   * @param {string} name translate-cloak class name\n   */\n  this.cloakClassName = function (name) {\n    if (!name) {\n      return $cloakClassName;\n    }\n    $cloakClassName = name;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#nestedObjectDelimeter\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   *\n   * Let's you change the delimiter for namespaced translations.\n   * Default delimiter is `.`.\n   *\n   * @param {string} delimiter namespace separator\n   */\n  this.nestedObjectDelimeter = function (delimiter) {\n    if (!delimiter) {\n      return $nestedObjectDelimeter;\n    }\n    $nestedObjectDelimeter = delimiter;\n    return this;\n  };\n\n  /**\n   * @name flatObject\n   * @private\n   *\n   * @description\n   * Flats an object. This function is used to flatten given translation data with\n   * namespaces, so they are later accessible via dot notation.\n   */\n  var flatObject = function (data, path, result, prevKey) {\n    var key, keyWithPath, keyWithShortPath, val;\n\n    if (!path) {\n      path = [];\n    }\n    if (!result) {\n      result = {};\n    }\n    for (key in data) {\n      if (!Object.prototype.hasOwnProperty.call(data, key)) {\n        continue;\n      }\n      val = data[key];\n      if (angular.isObject(val)) {\n        flatObject(val, path.concat(key), result, key);\n      } else {\n        keyWithPath = path.length ? ('' + path.join($nestedObjectDelimeter) + $nestedObjectDelimeter + key) : key;\n        if (path.length && key === prevKey) {\n          // Create shortcut path (foo.bar == foo.bar.bar)\n          keyWithShortPath = '' + path.join($nestedObjectDelimeter);\n          // Link it to original path\n          result[keyWithShortPath] = '@:' + keyWithPath;\n        }\n        result[keyWithPath] = val;\n      }\n    }\n    return result;\n  };\n  flatObject.displayName = 'flatObject';\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#addInterpolation\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Adds interpolation services to angular-translate, so it can manage them.\n   *\n   * @param {object} factory Interpolation service factory\n   */\n  this.addInterpolation = function (factory) {\n    $interpolatorFactories.push(factory);\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useMessageFormatInterpolation\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use interpolation functionality of messageformat.js.\n   * This is useful when having high level pluralization and gender selection.\n   */\n  this.useMessageFormatInterpolation = function () {\n    return this.useInterpolation('$translateMessageFormatInterpolation');\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useInterpolation\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate which interpolation style to use as default, application-wide.\n   * Simply pass a factory/service name. The interpolation service has to implement\n   * the correct interface.\n   *\n   * @param {string} factory Interpolation service name.\n   */\n  this.useInterpolation = function (factory) {\n    $interpolationFactory = factory;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useSanitizeStrategy\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Simply sets a sanitation strategy type.\n   *\n   * @param {string} value Strategy type.\n   */\n  this.useSanitizeValueStrategy = function (value) {\n    $translateSanitizationProvider.useStrategy(value);\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#preferredLanguage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells the module which of the registered translation tables to use for translation\n   * at initial startup by passing a language key. Similar to `$translateProvider#use`\n   * only that it says which language to **prefer**.\n   * It is recommended to call this after {@link pascalprecht.translate.$translate#fallbackLanguage fallbackLanguage()}.\n   *\n   * @param {string} langKey A language key.\n   */\n  this.preferredLanguage = function (langKey) {\n    if (langKey) {\n      setupPreferredLanguage(langKey);\n      return this;\n    }\n    return $preferredLanguage;\n  };\n  var setupPreferredLanguage = function (langKey) {\n    if (langKey) {\n      $preferredLanguage = langKey;\n    }\n    return $preferredLanguage;\n  };\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#translationNotFoundIndicator\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Sets an indicator which is used when a translation isn't found. E.g. when\n   * setting the indicator as 'X' and one tries to translate a translation id\n   * called `NOT_FOUND`, this will result in `X NOT_FOUND X`.\n   *\n   * Internally this methods sets a left indicator and a right indicator using\n   * `$translateProvider.translationNotFoundIndicatorLeft()` and\n   * `$translateProvider.translationNotFoundIndicatorRight()`.\n   *\n   * **Note**: These methods automatically add a whitespace between the indicators\n   * and the translation id.\n   *\n   * @param {string} indicator An indicator, could be any string.\n   */\n  this.translationNotFoundIndicator = function (indicator) {\n    this.translationNotFoundIndicatorLeft(indicator);\n    this.translationNotFoundIndicatorRight(indicator);\n    return this;\n  };\n\n  /**\n   * ngdoc function\n   * @name pascalprecht.translate.$translateProvider#translationNotFoundIndicatorLeft\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Sets an indicator which is used when a translation isn't found left to the\n   * translation id.\n   *\n   * @param {string} indicator An indicator.\n   */\n  this.translationNotFoundIndicatorLeft = function (indicator) {\n    if (!indicator) {\n      return $notFoundIndicatorLeft;\n    }\n    $notFoundIndicatorLeft = indicator;\n    return this;\n  };\n\n  /**\n   * ngdoc function\n   * @name pascalprecht.translate.$translateProvider#translationNotFoundIndicatorLeft\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Sets an indicator which is used when a translation isn't found right to the\n   * translation id.\n   *\n   * @param {string} indicator An indicator.\n   */\n  this.translationNotFoundIndicatorRight = function (indicator) {\n    if (!indicator) {\n      return $notFoundIndicatorRight;\n    }\n    $notFoundIndicatorRight = indicator;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#fallbackLanguage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells the module which of the registered translation tables to use when missing translations\n   * at initial startup by passing a language key. Similar to `$translateProvider#use`\n   * only that it says which language to **fallback**.\n   *\n   * @param {string||array} langKey A language key.\n   *\n   */\n  this.fallbackLanguage = function (langKey) {\n    fallbackStack(langKey);\n    return this;\n  };\n\n  var fallbackStack = function (langKey) {\n    if (langKey) {\n      if (angular.isString(langKey)) {\n        $fallbackWasString = true;\n        $fallbackLanguage = [langKey];\n      } else if (angular.isArray(langKey)) {\n        $fallbackWasString = false;\n        $fallbackLanguage = langKey;\n      }\n      if (angular.isString($preferredLanguage) && indexOf($fallbackLanguage, $preferredLanguage) < 0) {\n        $fallbackLanguage.push($preferredLanguage);\n      }\n\n      return this;\n    } else {\n      if ($fallbackWasString) {\n        return $fallbackLanguage[0];\n      } else {\n        return $fallbackLanguage;\n      }\n    }\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#use\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Set which translation table to use for translation by given language key. When\n   * trying to 'use' a language which isn't provided, it'll throw an error.\n   *\n   * You actually don't have to use this method since `$translateProvider#preferredLanguage`\n   * does the job too.\n   *\n   * @param {string} langKey A language key.\n   */\n  this.use = function (langKey) {\n    if (langKey) {\n      if (!$translationTable[langKey] && (!$loaderFactory)) {\n        // only throw an error, when not loading translation data asynchronously\n        throw new Error('$translateProvider couldn\\'t find translationTable for langKey: \\'' + langKey + '\\'');\n      }\n      $uses = langKey;\n      return this;\n    }\n    return $uses;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#resolveClientLocale\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * This returns the current browser/client's language key. The result is processed with the configured uniform tag resolver.\n   *\n   * @returns {string} the current client/browser language key\n   */\n  this.resolveClientLocale = function () {\n    return getLocale();\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#storageKey\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells the module which key must represent the choosed language by a user in the storage.\n   *\n   * @param {string} key A key for the storage.\n   */\n  var storageKey = function (key) {\n    if (!key) {\n      if ($storagePrefix) {\n        return $storagePrefix + $storageKey;\n      }\n      return $storageKey;\n    }\n    $storageKey = key;\n    return this;\n  };\n\n  this.storageKey = storageKey;\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useUrlLoader\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use `$translateUrlLoader` extension service as loader.\n   *\n   * @param {string} url Url\n   * @param {Object=} options Optional configuration object\n   */\n  this.useUrlLoader = function (url, options) {\n    return this.useLoader('$translateUrlLoader', angular.extend({url : url}, options));\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useStaticFilesLoader\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use `$translateStaticFilesLoader` extension service as loader.\n   *\n   * @param {Object=} options Optional configuration object\n   */\n  this.useStaticFilesLoader = function (options) {\n    return this.useLoader('$translateStaticFilesLoader', options);\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useLoader\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use any other service as loader.\n   *\n   * @param {string} loaderFactory Factory name to use\n   * @param {Object=} options Optional configuration object\n   */\n  this.useLoader = function (loaderFactory, options) {\n    $loaderFactory = loaderFactory;\n    $loaderOptions = options || {};\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useLocalStorage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use `$translateLocalStorage` service as storage layer.\n   *\n   */\n  this.useLocalStorage = function () {\n    return this.useStorage('$translateLocalStorage');\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useCookieStorage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use `$translateCookieStorage` service as storage layer.\n   */\n  this.useCookieStorage = function () {\n    return this.useStorage('$translateCookieStorage');\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useStorage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use custom service as storage layer.\n   */\n  this.useStorage = function (storageFactory) {\n    $storageFactory = storageFactory;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#storagePrefix\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Sets prefix for storage key.\n   *\n   * @param {string} prefix Storage key prefix\n   */\n  this.storagePrefix = function (prefix) {\n    if (!prefix) {\n      return prefix;\n    }\n    $storagePrefix = prefix;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useMissingTranslationHandlerLog\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use built-in log handler when trying to translate\n   * a translation Id which doesn't exist.\n   *\n   * This is actually a shortcut method for `useMissingTranslationHandler()`.\n   *\n   */\n  this.useMissingTranslationHandlerLog = function () {\n    return this.useMissingTranslationHandler('$translateMissingTranslationHandlerLog');\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useMissingTranslationHandler\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Expects a factory name which later gets instantiated with `$injector`.\n   * This method can be used to tell angular-translate to use a custom\n   * missingTranslationHandler. Just build a factory which returns a function\n   * and expects a translation id as argument.\n   *\n   * Example:\n   * <pre>\n   *  app.config(function ($translateProvider) {\n   *    $translateProvider.useMissingTranslationHandler('customHandler');\n   *  });\n   *\n   *  app.factory('customHandler', function (dep1, dep2) {\n   *    return function (translationId) {\n   *      // something with translationId and dep1 and dep2\n   *    };\n   *  });\n   * </pre>\n   *\n   * @param {string} factory Factory name\n   */\n  this.useMissingTranslationHandler = function (factory) {\n    $missingTranslationHandlerFactory = factory;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#usePostCompiling\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * If post compiling is enabled, all translated values will be processed\n   * again with AngularJS' $compile.\n   *\n   * Example:\n   * <pre>\n   *  app.config(function ($translateProvider) {\n   *    $translateProvider.usePostCompiling(true);\n   *  });\n   * </pre>\n   *\n   * @param {string} factory Factory name\n   */\n  this.usePostCompiling = function (value) {\n    $postCompilingEnabled = !(!value);\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#forceAsyncReload\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * If force async reload is enabled, async loader will always be called\n   * even if $translationTable already contains the language key, adding\n   * possible new entries to the $translationTable.\n   *\n   * Example:\n   * <pre>\n   *  app.config(function ($translateProvider) {\n   *    $translateProvider.forceAsyncReload(true);\n   *  });\n   * </pre>\n   *\n   * @param {boolean} value - valid values are true or false\n   */\n  this.forceAsyncReload = function (value) {\n    $forceAsyncReloadEnabled = !(!value);\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#uniformLanguageTag\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate which language tag should be used as a result when determining\n   * the current browser language.\n   *\n   * This setting must be set before invoking {@link pascalprecht.translate.$translateProvider#methods_determinePreferredLanguage determinePreferredLanguage()}.\n   *\n   * <pre>\n   * $translateProvider\n   *   .uniformLanguageTag('bcp47')\n   *   .determinePreferredLanguage()\n   * </pre>\n   *\n   * The resolver currently supports:\n   * * default\n   *     (traditionally: hyphens will be converted into underscores, i.e. en-US => en_US)\n   *     en-US => en_US\n   *     en_US => en_US\n   *     en-us => en_us\n   * * java\n   *     like default, but the second part will be always in uppercase\n   *     en-US => en_US\n   *     en_US => en_US\n   *     en-us => en_US\n   * * BCP 47 (RFC 4646 & 4647)\n   *     EN => en\n   *     en-US => en-US\n   *     en_US => en-US\n   *     en-us => en-US\n   *     sr-latn => sr-Latn\n   *     sr-latn-rs => sr-Latn-RS\n   *\n   * See also:\n   * * http://en.wikipedia.org/wiki/IETF_language_tag\n   * * http://www.w3.org/International/core/langtags/\n   * * http://tools.ietf.org/html/bcp47\n   *\n   * @param {string|object} options - options (or standard)\n   * @param {string} options.standard - valid values are 'default', 'bcp47', 'java'\n   */\n  this.uniformLanguageTag = function (options) {\n\n    if (!options) {\n      options = {};\n    } else if (angular.isString(options)) {\n      options = {\n        standard : options\n      };\n    }\n\n    uniformLanguageTagResolver = options.standard;\n\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#determinePreferredLanguage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to try to determine on its own which language key\n   * to set as preferred language. When `fn` is given, angular-translate uses it\n   * to determine a language key, otherwise it uses the built-in `getLocale()`\n   * method.\n   *\n   * The `getLocale()` returns a language key in the format `[lang]_[country]` or\n   * `[lang]` depending on what the browser provides.\n   *\n   * Use this method at your own risk, since not all browsers return a valid\n   * locale (see {@link pascalprecht.translate.$translateProvider#methods_uniformLanguageTag uniformLanguageTag()}).\n   *\n   * @param {Function=} fn Function to determine a browser's locale\n   */\n  this.determinePreferredLanguage = function (fn) {\n\n    var locale = (fn && angular.isFunction(fn)) ? fn() : getLocale();\n\n    if (!$availableLanguageKeys.length) {\n      $preferredLanguage = locale;\n    } else {\n      $preferredLanguage = negotiateLocale(locale) || locale;\n    }\n\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#registerAvailableLanguageKeys\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Registers a set of language keys the app will work with. Use this method in\n   * combination with\n   * {@link pascalprecht.translate.$translateProvider#determinePreferredLanguage determinePreferredLanguage}.\n   * When available languages keys are registered, angular-translate\n   * tries to find the best fitting language key depending on the browsers locale,\n   * considering your language key convention.\n   *\n   * @param {object} languageKeys Array of language keys the your app will use\n   * @param {object=} aliases Alias map.\n   */\n  this.registerAvailableLanguageKeys = function (languageKeys, aliases) {\n    if (languageKeys) {\n      $availableLanguageKeys = languageKeys;\n      if (aliases) {\n        $languageKeyAliases = aliases;\n      }\n      return this;\n    }\n    return $availableLanguageKeys;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useLoaderCache\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Registers a cache for internal $http based loaders.\n   * {@link pascalprecht.translate.$translationCache $translationCache}.\n   * When false the cache will be disabled (default). When true or undefined\n   * the cache will be a default (see $cacheFactory). When an object it will\n   * be treat as a cache object itself: the usage is $http({cache: cache})\n   *\n   * @param {object} cache boolean, string or cache-object\n   */\n  this.useLoaderCache = function (cache) {\n    if (cache === false) {\n      // disable cache\n      loaderCache = undefined;\n    } else if (cache === true) {\n      // enable cache using AJS defaults\n      loaderCache = true;\n    } else if (typeof(cache) === 'undefined') {\n      // enable cache using default\n      loaderCache = '$translationCache';\n    } else if (cache) {\n      // enable cache using given one (see $cacheFactory)\n      loaderCache = cache;\n    }\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#directivePriority\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Sets the default priority of the translate directive. The standard value is `0`.\n   * Calling this function without an argument will return the current value.\n   *\n   * @param {number} priority for the translate-directive\n   */\n  this.directivePriority = function (priority) {\n    if (priority === undefined) {\n      // getter\n      return directivePriority;\n    } else {\n      // setter with chaining\n      directivePriority = priority;\n      return this;\n    }\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#statefulFilter\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Since AngularJS 1.3, filters which are not stateless (depending at the scope)\n   * have to explicit define this behavior.\n   * Sets whether the translate filter should be stateful or stateless. The standard value is `true`\n   * meaning being stateful.\n   * Calling this function without an argument will return the current value.\n   *\n   * @param {boolean} state - defines the state of the filter\n   */\n  this.statefulFilter = function (state) {\n    if (state === undefined) {\n      // getter\n      return statefulFilter;\n    } else {\n      // setter with chaining\n      statefulFilter = state;\n      return this;\n    }\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#postProcess\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * The post processor will be intercept right after the translation result. It can modify the result.\n   *\n   * @param {object} fn Function or service name (string) to be called after the translation value has been set / resolved. The function itself will enrich every value being processed and then continue the normal resolver process\n   */\n  this.postProcess = function (fn) {\n    if (fn) {\n      postProcessFn = fn;\n    } else {\n      postProcessFn = undefined;\n    }\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#keepContent\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * If keepContent is set to true than translate directive will always use innerHTML\n   * as a default translation\n   *\n   * Example:\n   * <pre>\n   *  app.config(function ($translateProvider) {\n   *    $translateProvider.keepContent(true);\n   *  });\n   * </pre>\n   *\n   * @param {boolean} value - valid values are true or false\n   */\n  this.keepContent = function (value) {\n    $keepContent = !(!value);\n    return this;\n  };\n\n  /**\n   * @ngdoc object\n   * @name pascalprecht.translate.$translate\n   * @requires $interpolate\n   * @requires $log\n   * @requires $rootScope\n   * @requires $q\n   *\n   * @description\n   * The `$translate` service is the actual core of angular-translate. It expects a translation id\n   * and optional interpolate parameters to translate contents.\n   *\n   * <pre>\n   *  $translate('HEADLINE_TEXT').then(function (translation) {\n   *    $scope.translatedText = translation;\n   *  });\n   * </pre>\n   *\n   * @param {string|array} translationId A token which represents a translation id\n   *                                     This can be optionally an array of translation ids which\n   *                                     results that the function returns an object where each key\n   *                                     is the translation id and the value the translation.\n   * @param {object=} [interpolateParams={}] An object hash for dynamic values\n   * @param {string=} [interpolationId=undefined] The id of the interpolation to use (use default unless set via useInterpolation())\n   * @param {string=} [defaultTranslationText=undefined] the optional default translation text that is written as\n   *                                        as default text in case it is not found in any configured language\n   * @param {string=} [forceLanguage=false] A language to be used instead of the current language\n   * @param {string=} [sanitizeStrategy=undefined] force sanitize strategy for this call instead of using the configured one (use default unless set)\n   * @returns {object} promise\n   */\n  this.$get = ['$log', '$injector', '$rootScope', '$q', function ($log, $injector, $rootScope, $q) {\n\n    var Storage,\n      defaultInterpolator = $injector.get($interpolationFactory || '$translateDefaultInterpolation'),\n      pendingLoader = false,\n      interpolatorHashMap = {},\n      langPromises = {},\n      fallbackIndex,\n      startFallbackIteration;\n\n    var $translate = function (translationId, interpolateParams, interpolationId, defaultTranslationText, forceLanguage, sanitizeStrategy) {\n      if (!$uses && $preferredLanguage) {\n        $uses = $preferredLanguage;\n      }\n      var uses = (forceLanguage && forceLanguage !== $uses) ? // we don't want to re-negotiate $uses\n        (negotiateLocale(forceLanguage) || forceLanguage) : $uses;\n\n      // Check forceLanguage is present\n      if (forceLanguage) {\n        loadTranslationsIfMissing(forceLanguage);\n      }\n\n      // Duck detection: If the first argument is an array, a bunch of translations was requested.\n      // The result is an object.\n      if (angular.isArray(translationId)) {\n        // Inspired by Q.allSettled by Kris Kowal\n        // https://github.com/kriskowal/q/blob/b0fa72980717dc202ffc3cbf03b936e10ebbb9d7/q.js#L1553-1563\n        // This transforms all promises regardless resolved or rejected\n        var translateAll = function (translationIds) {\n          var results = {}; // storing the actual results\n          var promises = []; // promises to wait for\n          // Wraps the promise a) being always resolved and b) storing the link id->value\n          var translate = function (translationId) {\n            var deferred = $q.defer();\n            var regardless = function (value) {\n              results[translationId] = value;\n              deferred.resolve([translationId, value]);\n            };\n            // we don't care whether the promise was resolved or rejected; just store the values\n            $translate(translationId, interpolateParams, interpolationId, defaultTranslationText, forceLanguage, sanitizeStrategy).then(regardless, regardless);\n            return deferred.promise;\n          };\n          for (var i = 0, c = translationIds.length; i < c; i++) {\n            promises.push(translate(translationIds[i]));\n          }\n          // wait for all (including storing to results)\n          return $q.all(promises).then(function () {\n            // return the results\n            return results;\n          });\n        };\n        return translateAll(translationId);\n      }\n\n      var deferred = $q.defer();\n\n      // trim off any whitespace\n      if (translationId) {\n        translationId = trim.apply(translationId);\n      }\n\n      var promiseToWaitFor = (function () {\n        var promise = langPromises[uses] || langPromises[$preferredLanguage];\n\n        fallbackIndex = 0;\n\n        if ($storageFactory && !promise) {\n          // looks like there's no pending promise for $preferredLanguage or\n          // $uses. Maybe there's one pending for a language that comes from\n          // storage.\n          var langKey = Storage.get($storageKey);\n          promise = langPromises[langKey];\n\n          if ($fallbackLanguage && $fallbackLanguage.length) {\n            var index = indexOf($fallbackLanguage, langKey);\n            // maybe the language from storage is also defined as fallback language\n            // we increase the fallback language index to not search in that language\n            // as fallback, since it's probably the first used language\n            // in that case the index starts after the first element\n            fallbackIndex = (index === 0) ? 1 : 0;\n\n            // but we can make sure to ALWAYS fallback to preferred language at least\n            if (indexOf($fallbackLanguage, $preferredLanguage) < 0) {\n              $fallbackLanguage.push($preferredLanguage);\n            }\n          }\n        }\n        return promise;\n      }());\n\n      if (!promiseToWaitFor) {\n        // no promise to wait for? okay. Then there's no loader registered\n        // nor is a one pending for language that comes from storage.\n        // We can just translate.\n        determineTranslation(translationId, interpolateParams, interpolationId, defaultTranslationText, uses, sanitizeStrategy).then(deferred.resolve, deferred.reject);\n      } else {\n        var promiseResolved = function () {\n          // $uses may have changed while waiting\n          if (!forceLanguage) {\n            uses = $uses;\n          }\n          determineTranslation(translationId, interpolateParams, interpolationId, defaultTranslationText, uses, sanitizeStrategy).then(deferred.resolve, deferred.reject);\n        };\n        promiseResolved.displayName = 'promiseResolved';\n\n        promiseToWaitFor['finally'](promiseResolved)['catch'](angular.noop); // we don't care about errors here, already handled\n      }\n      return deferred.promise;\n    };\n\n    /**\n     * @name applyNotFoundIndicators\n     * @private\n     *\n     * @description\n     * Applies not fount indicators to given translation id, if needed.\n     * This function gets only executed, if a translation id doesn't exist,\n     * which is why a translation id is expected as argument.\n     *\n     * @param {string} translationId Translation id.\n     * @returns {string} Same as given translation id but applied with not found\n     * indicators.\n     */\n    var applyNotFoundIndicators = function (translationId) {\n      // applying notFoundIndicators\n      if ($notFoundIndicatorLeft) {\n        translationId = [$notFoundIndicatorLeft, translationId].join(' ');\n      }\n      if ($notFoundIndicatorRight) {\n        translationId = [translationId, $notFoundIndicatorRight].join(' ');\n      }\n      return translationId;\n    };\n\n    /**\n     * @name useLanguage\n     * @private\n     *\n     * @description\n     * Makes actual use of a language by setting a given language key as used\n     * language and informs registered interpolators to also use the given\n     * key as locale.\n     *\n     * @param {string} key Locale key.\n     */\n    var useLanguage = function (key) {\n      $uses = key;\n\n      // make sure to store new language key before triggering success event\n      if ($storageFactory) {\n        Storage.put($translate.storageKey(), $uses);\n      }\n\n      $rootScope.$emit('$translateChangeSuccess', {language : key});\n\n      // inform default interpolator\n      defaultInterpolator.setLocale($uses);\n\n      var eachInterpolator = function (interpolator, id) {\n        interpolatorHashMap[id].setLocale($uses);\n      };\n      eachInterpolator.displayName = 'eachInterpolatorLocaleSetter';\n\n      // inform all others too!\n      angular.forEach(interpolatorHashMap, eachInterpolator);\n      $rootScope.$emit('$translateChangeEnd', {language : key});\n    };\n\n    /**\n     * @name loadAsync\n     * @private\n     *\n     * @description\n     * Kicks off registered async loader using `$injector` and applies existing\n     * loader options. When resolved, it updates translation tables accordingly\n     * or rejects with given language key.\n     *\n     * @param {string} key Language key.\n     * @return {Promise} A promise.\n     */\n    var loadAsync = function (key) {\n      if (!key) {\n        throw 'No language key specified for loading.';\n      }\n\n      var deferred = $q.defer();\n\n      $rootScope.$emit('$translateLoadingStart', {language : key});\n      pendingLoader = true;\n\n      var cache = loaderCache;\n      if (typeof(cache) === 'string') {\n        // getting on-demand instance of loader\n        cache = $injector.get(cache);\n      }\n\n      var loaderOptions = angular.extend({}, $loaderOptions, {\n        key : key,\n        $http : angular.extend({}, {\n          cache : cache\n        }, $loaderOptions.$http)\n      });\n\n      var onLoaderSuccess = function (data) {\n        var translationTable = {};\n        $rootScope.$emit('$translateLoadingSuccess', {language : key});\n\n        if (angular.isArray(data)) {\n          angular.forEach(data, function (table) {\n            angular.extend(translationTable, flatObject(table));\n          });\n        } else {\n          angular.extend(translationTable, flatObject(data));\n        }\n        pendingLoader = false;\n        deferred.resolve({\n          key : key,\n          table : translationTable\n        });\n        $rootScope.$emit('$translateLoadingEnd', {language : key});\n      };\n      onLoaderSuccess.displayName = 'onLoaderSuccess';\n\n      var onLoaderError = function (key) {\n        $rootScope.$emit('$translateLoadingError', {language : key});\n        deferred.reject(key);\n        $rootScope.$emit('$translateLoadingEnd', {language : key});\n      };\n      onLoaderError.displayName = 'onLoaderError';\n\n      $injector.get($loaderFactory)(loaderOptions)\n        .then(onLoaderSuccess, onLoaderError);\n\n      return deferred.promise;\n    };\n\n    if ($storageFactory) {\n      Storage = $injector.get($storageFactory);\n\n      if (!Storage.get || !Storage.put) {\n        throw new Error('Couldn\\'t use storage \\'' + $storageFactory + '\\', missing get() or put() method!');\n      }\n    }\n\n    // if we have additional interpolations that were added via\n    // $translateProvider.addInterpolation(), we have to map'em\n    if ($interpolatorFactories.length) {\n      var eachInterpolationFactory = function (interpolatorFactory) {\n        var interpolator = $injector.get(interpolatorFactory);\n        // setting initial locale for each interpolation service\n        interpolator.setLocale($preferredLanguage || $uses);\n        // make'em recognizable through id\n        interpolatorHashMap[interpolator.getInterpolationIdentifier()] = interpolator;\n      };\n      eachInterpolationFactory.displayName = 'interpolationFactoryAdder';\n\n      angular.forEach($interpolatorFactories, eachInterpolationFactory);\n    }\n\n    /**\n     * @name getTranslationTable\n     * @private\n     *\n     * @description\n     * Returns a promise that resolves to the translation table\n     * or is rejected if an error occurred.\n     *\n     * @param langKey\n     * @returns {Q.promise}\n     */\n    var getTranslationTable = function (langKey) {\n      var deferred = $q.defer();\n      if (Object.prototype.hasOwnProperty.call($translationTable, langKey)) {\n        deferred.resolve($translationTable[langKey]);\n      } else if (langPromises[langKey]) {\n        var onResolve = function (data) {\n          translations(data.key, data.table);\n          deferred.resolve(data.table);\n        };\n        onResolve.displayName = 'translationTableResolver';\n        langPromises[langKey].then(onResolve, deferred.reject);\n      } else {\n        deferred.reject();\n      }\n      return deferred.promise;\n    };\n\n    /**\n     * @name getFallbackTranslation\n     * @private\n     *\n     * @description\n     * Returns a promise that will resolve to the translation\n     * or be rejected if no translation was found for the language.\n     * This function is currently only used for fallback language translation.\n     *\n     * @param langKey The language to translate to.\n     * @param translationId\n     * @param interpolateParams\n     * @param Interpolator\n     * @param sanitizeStrategy\n     * @returns {Q.promise}\n     */\n    var getFallbackTranslation = function (langKey, translationId, interpolateParams, Interpolator, sanitizeStrategy) {\n      var deferred = $q.defer();\n\n      var onResolve = function (translationTable) {\n        if (Object.prototype.hasOwnProperty.call(translationTable, translationId) && translationTable[translationId] !== null) {\n          Interpolator.setLocale(langKey);\n          var translation = translationTable[translationId];\n          if (translation.substr(0, 2) === '@:') {\n            getFallbackTranslation(langKey, translation.substr(2), interpolateParams, Interpolator, sanitizeStrategy)\n              .then(deferred.resolve, deferred.reject);\n          } else {\n            var interpolatedValue = Interpolator.interpolate(translationTable[translationId], interpolateParams, 'service', sanitizeStrategy, translationId);\n            interpolatedValue = applyPostProcessing(translationId, translationTable[translationId], interpolatedValue, interpolateParams, langKey);\n\n            deferred.resolve(interpolatedValue);\n\n          }\n          Interpolator.setLocale($uses);\n        } else {\n          deferred.reject();\n        }\n      };\n      onResolve.displayName = 'fallbackTranslationResolver';\n\n      getTranslationTable(langKey).then(onResolve, deferred.reject);\n\n      return deferred.promise;\n    };\n\n    /**\n     * @name getFallbackTranslationInstant\n     * @private\n     *\n     * @description\n     * Returns a translation\n     * This function is currently only used for fallback language translation.\n     *\n     * @param langKey The language to translate to.\n     * @param translationId\n     * @param interpolateParams\n     * @param Interpolator\n     * @param sanitizeStrategy sanitize strategy override\n     *\n     * @returns {string} translation\n     */\n    var getFallbackTranslationInstant = function (langKey, translationId, interpolateParams, Interpolator, sanitizeStrategy) {\n      var result, translationTable = $translationTable[langKey];\n\n      if (translationTable && Object.prototype.hasOwnProperty.call(translationTable, translationId) && translationTable[translationId] !== null) {\n        Interpolator.setLocale(langKey);\n        result = Interpolator.interpolate(translationTable[translationId], interpolateParams, 'filter', sanitizeStrategy, translationId);\n        result = applyPostProcessing(translationId, translationTable[translationId], result, interpolateParams, langKey, sanitizeStrategy);\n        // workaround for TrustedValueHolderType\n        if (!angular.isString(result) && angular.isFunction(result.$$unwrapTrustedValue)) {\n          var result2 = result.$$unwrapTrustedValue();\n          if (result2.substr(0, 2) === '@:') {\n            return getFallbackTranslationInstant(langKey, result2.substr(2), interpolateParams, Interpolator, sanitizeStrategy);\n          }\n        } else if (result.substr(0, 2) === '@:') {\n          return getFallbackTranslationInstant(langKey, result.substr(2), interpolateParams, Interpolator, sanitizeStrategy);\n        }\n        Interpolator.setLocale($uses);\n      }\n\n      return result;\n    };\n\n\n    /**\n     * @name translateByHandler\n     * @private\n     *\n     * Translate by missing translation handler.\n     *\n     * @param translationId\n     * @param interpolateParams\n     * @param defaultTranslationText\n     * @param sanitizeStrategy sanitize strategy override\n     *\n     * @returns translation created by $missingTranslationHandler or translationId is $missingTranslationHandler is\n     * absent\n     */\n    var translateByHandler = function (translationId, interpolateParams, defaultTranslationText, sanitizeStrategy) {\n      // If we have a handler factory - we might also call it here to determine if it provides\n      // a default text for a translationid that can't be found anywhere in our tables\n      if ($missingTranslationHandlerFactory) {\n        return $injector.get($missingTranslationHandlerFactory)(translationId, $uses, interpolateParams, defaultTranslationText, sanitizeStrategy);\n      } else {\n        return translationId;\n      }\n    };\n\n    /**\n     * @name resolveForFallbackLanguage\n     * @private\n     *\n     * Recursive helper function for fallbackTranslation that will sequentially look\n     * for a translation in the fallbackLanguages starting with fallbackLanguageIndex.\n     *\n     * @param fallbackLanguageIndex\n     * @param translationId\n     * @param interpolateParams\n     * @param Interpolator\n     * @param defaultTranslationText\n     * @param sanitizeStrategy\n     * @returns {Q.promise} Promise that will resolve to the translation.\n     */\n    var resolveForFallbackLanguage = function (fallbackLanguageIndex, translationId, interpolateParams, Interpolator, defaultTranslationText, sanitizeStrategy) {\n      var deferred = $q.defer();\n\n      if (fallbackLanguageIndex < $fallbackLanguage.length) {\n        var langKey = $fallbackLanguage[fallbackLanguageIndex];\n        getFallbackTranslation(langKey, translationId, interpolateParams, Interpolator, sanitizeStrategy).then(\n          function (data) {\n            deferred.resolve(data);\n          },\n          function () {\n            // Look in the next fallback language for a translation.\n            // It delays the resolving by passing another promise to resolve.\n            return resolveForFallbackLanguage(fallbackLanguageIndex + 1, translationId, interpolateParams, Interpolator, defaultTranslationText, sanitizeStrategy).then(deferred.resolve, deferred.reject);\n          }\n        );\n      } else {\n        // No translation found in any fallback language\n        // if a default translation text is set in the directive, then return this as a result\n        if (defaultTranslationText) {\n          deferred.resolve(defaultTranslationText);\n        } else {\n          var missingTranslationHandlerTranslation = translateByHandler(translationId, interpolateParams, defaultTranslationText);\n\n          // if no default translation is set and an error handler is defined, send it to the handler\n          // and then return the result if it isn't undefined\n          if ($missingTranslationHandlerFactory && missingTranslationHandlerTranslation) {\n            deferred.resolve(missingTranslationHandlerTranslation);\n          } else {\n            deferred.reject(applyNotFoundIndicators(translationId));\n          }\n        }\n      }\n      return deferred.promise;\n    };\n\n    /**\n     * @name resolveForFallbackLanguageInstant\n     * @private\n     *\n     * Recursive helper function for fallbackTranslation that will sequentially look\n     * for a translation in the fallbackLanguages starting with fallbackLanguageIndex.\n     *\n     * @param fallbackLanguageIndex\n     * @param translationId\n     * @param interpolateParams\n     * @param Interpolator\n     * @param sanitizeStrategy\n     * @returns {string} translation\n     */\n    var resolveForFallbackLanguageInstant = function (fallbackLanguageIndex, translationId, interpolateParams, Interpolator, sanitizeStrategy) {\n      var result;\n\n      if (fallbackLanguageIndex < $fallbackLanguage.length) {\n        var langKey = $fallbackLanguage[fallbackLanguageIndex];\n        result = getFallbackTranslationInstant(langKey, translationId, interpolateParams, Interpolator, sanitizeStrategy);\n        if (!result && result !== '') {\n          result = resolveForFallbackLanguageInstant(fallbackLanguageIndex + 1, translationId, interpolateParams, Interpolator);\n        }\n      }\n      return result;\n    };\n\n    /**\n     * Translates with the usage of the fallback languages.\n     *\n     * @param translationId\n     * @param interpolateParams\n     * @param Interpolator\n     * @param defaultTranslationText\n     * @param sanitizeStrategy\n     * @returns {Q.promise} Promise, that resolves to the translation.\n     */\n    var fallbackTranslation = function (translationId, interpolateParams, Interpolator, defaultTranslationText, sanitizeStrategy) {\n      // Start with the fallbackLanguage with index 0\n      return resolveForFallbackLanguage((startFallbackIteration > 0 ? startFallbackIteration : fallbackIndex), translationId, interpolateParams, Interpolator, defaultTranslationText, sanitizeStrategy);\n    };\n\n    /**\n     * Translates with the usage of the fallback languages.\n     *\n     * @param translationId\n     * @param interpolateParams\n     * @param Interpolator\n     * @param sanitizeStrategy\n     * @returns {String} translation\n     */\n    var fallbackTranslationInstant = function (translationId, interpolateParams, Interpolator, sanitizeStrategy) {\n      // Start with the fallbackLanguage with index 0\n      return resolveForFallbackLanguageInstant((startFallbackIteration > 0 ? startFallbackIteration : fallbackIndex), translationId, interpolateParams, Interpolator, sanitizeStrategy);\n    };\n\n    var determineTranslation = function (translationId, interpolateParams, interpolationId, defaultTranslationText, uses, sanitizeStrategy) {\n\n      var deferred = $q.defer();\n\n      var table = uses ? $translationTable[uses] : $translationTable,\n        Interpolator = (interpolationId) ? interpolatorHashMap[interpolationId] : defaultInterpolator;\n\n      // if the translation id exists, we can just interpolate it\n      if (table && Object.prototype.hasOwnProperty.call(table, translationId) && table[translationId] !== null) {\n        var translation = table[translationId];\n\n        // If using link, rerun $translate with linked translationId and return it\n        if (translation.substr(0, 2) === '@:') {\n\n          $translate(translation.substr(2), interpolateParams, interpolationId, defaultTranslationText, uses, sanitizeStrategy)\n            .then(deferred.resolve, deferred.reject);\n        } else {\n          //\n          var resolvedTranslation = Interpolator.interpolate(translation, interpolateParams, 'service', sanitizeStrategy, translationId);\n          resolvedTranslation = applyPostProcessing(translationId, translation, resolvedTranslation, interpolateParams, uses);\n          deferred.resolve(resolvedTranslation);\n        }\n      } else {\n        var missingTranslationHandlerTranslation;\n        // for logging purposes only (as in $translateMissingTranslationHandlerLog), value is not returned to promise\n        if ($missingTranslationHandlerFactory && !pendingLoader) {\n          missingTranslationHandlerTranslation = translateByHandler(translationId, interpolateParams, defaultTranslationText);\n        }\n\n        // since we couldn't translate the inital requested translation id,\n        // we try it now with one or more fallback languages, if fallback language(s) is\n        // configured.\n        if (uses && $fallbackLanguage && $fallbackLanguage.length) {\n          fallbackTranslation(translationId, interpolateParams, Interpolator, defaultTranslationText, sanitizeStrategy)\n            .then(function (translation) {\n              deferred.resolve(translation);\n            }, function (_translationId) {\n              deferred.reject(applyNotFoundIndicators(_translationId));\n            });\n        } else if ($missingTranslationHandlerFactory && !pendingLoader && missingTranslationHandlerTranslation) {\n          // looks like the requested translation id doesn't exists.\n          // Now, if there is a registered handler for missing translations and no\n          // asyncLoader is pending, we execute the handler\n          if (defaultTranslationText) {\n            deferred.resolve(defaultTranslationText);\n          } else {\n            deferred.resolve(missingTranslationHandlerTranslation);\n          }\n        } else {\n          if (defaultTranslationText) {\n            deferred.resolve(defaultTranslationText);\n          } else {\n            deferred.reject(applyNotFoundIndicators(translationId));\n          }\n        }\n      }\n      return deferred.promise;\n    };\n\n    var determineTranslationInstant = function (translationId, interpolateParams, interpolationId, uses, sanitizeStrategy) {\n\n      var result, table = uses ? $translationTable[uses] : $translationTable,\n        Interpolator = defaultInterpolator;\n\n      // if the interpolation id exists use custom interpolator\n      if (interpolatorHashMap && Object.prototype.hasOwnProperty.call(interpolatorHashMap, interpolationId)) {\n        Interpolator = interpolatorHashMap[interpolationId];\n      }\n\n      // if the translation id exists, we can just interpolate it\n      if (table && Object.prototype.hasOwnProperty.call(table, translationId) && table[translationId] !== null) {\n        var translation = table[translationId];\n\n        // If using link, rerun $translate with linked translationId and return it\n        if (translation.substr(0, 2) === '@:') {\n          result = determineTranslationInstant(translation.substr(2), interpolateParams, interpolationId, uses, sanitizeStrategy);\n        } else {\n          result = Interpolator.interpolate(translation, interpolateParams, 'filter', sanitizeStrategy, translationId);\n          result = applyPostProcessing(translationId, translation, result, interpolateParams, uses, sanitizeStrategy);\n        }\n      } else {\n        var missingTranslationHandlerTranslation;\n        // for logging purposes only (as in $translateMissingTranslationHandlerLog), value is not returned to promise\n        if ($missingTranslationHandlerFactory && !pendingLoader) {\n          missingTranslationHandlerTranslation = translateByHandler(translationId, interpolateParams, sanitizeStrategy);\n        }\n\n        // since we couldn't translate the inital requested translation id,\n        // we try it now with one or more fallback languages, if fallback language(s) is\n        // configured.\n        if (uses && $fallbackLanguage && $fallbackLanguage.length) {\n          fallbackIndex = 0;\n          result = fallbackTranslationInstant(translationId, interpolateParams, Interpolator, sanitizeStrategy);\n        } else if ($missingTranslationHandlerFactory && !pendingLoader && missingTranslationHandlerTranslation) {\n          // looks like the requested translation id doesn't exists.\n          // Now, if there is a registered handler for missing translations and no\n          // asyncLoader is pending, we execute the handler\n          result = missingTranslationHandlerTranslation;\n        } else {\n          result = applyNotFoundIndicators(translationId);\n        }\n      }\n\n      return result;\n    };\n\n    var clearNextLangAndPromise = function (key) {\n      if ($nextLang === key) {\n        $nextLang = undefined;\n      }\n      langPromises[key] = undefined;\n    };\n\n    var applyPostProcessing = function (translationId, translation, resolvedTranslation, interpolateParams, uses, sanitizeStrategy) {\n      var fn = postProcessFn;\n\n      if (fn) {\n\n        if (typeof(fn) === 'string') {\n          // getting on-demand instance\n          fn = $injector.get(fn);\n        }\n        if (fn) {\n          return fn(translationId, translation, resolvedTranslation, interpolateParams, uses, sanitizeStrategy);\n        }\n      }\n\n      return resolvedTranslation;\n    };\n\n    var loadTranslationsIfMissing = function (key) {\n      if (!$translationTable[key] && $loaderFactory && !langPromises[key]) {\n        langPromises[key] = loadAsync(key).then(function (translation) {\n          translations(translation.key, translation.table);\n          return translation;\n        });\n      }\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#preferredLanguage\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns the language key for the preferred language.\n     *\n     * @param {string} langKey language String or Array to be used as preferredLanguage (changing at runtime)\n     *\n     * @return {string} preferred language key\n     */\n    $translate.preferredLanguage = function (langKey) {\n      if (langKey) {\n        setupPreferredLanguage(langKey);\n      }\n      return $preferredLanguage;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#cloakClassName\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns the configured class name for `translate-cloak` directive.\n     *\n     * @return {string} cloakClassName\n     */\n    $translate.cloakClassName = function () {\n      return $cloakClassName;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#nestedObjectDelimeter\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns the configured delimiter for nested namespaces.\n     *\n     * @return {string} nestedObjectDelimeter\n     */\n    $translate.nestedObjectDelimeter = function () {\n      return $nestedObjectDelimeter;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#fallbackLanguage\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns the language key for the fallback languages or sets a new fallback stack.\n     * It is recommended to call this before {@link pascalprecht.translate.$translateProvider#preferredLanguage preferredLanguage()}.\n     *\n     * @param {string=} langKey language String or Array of fallback languages to be used (to change stack at runtime)\n     *\n     * @return {string||array} fallback language key\n     */\n    $translate.fallbackLanguage = function (langKey) {\n      if (langKey !== undefined && langKey !== null) {\n        fallbackStack(langKey);\n\n        // as we might have an async loader initiated and a new translation language might have been defined\n        // we need to add the promise to the stack also. So - iterate.\n        if ($loaderFactory) {\n          if ($fallbackLanguage && $fallbackLanguage.length) {\n            for (var i = 0, len = $fallbackLanguage.length; i < len; i++) {\n              if (!langPromises[$fallbackLanguage[i]]) {\n                langPromises[$fallbackLanguage[i]] = loadAsync($fallbackLanguage[i]);\n              }\n            }\n          }\n        }\n        $translate.use($translate.use());\n      }\n      if ($fallbackWasString) {\n        return $fallbackLanguage[0];\n      } else {\n        return $fallbackLanguage;\n      }\n\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#useFallbackLanguage\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Sets the first key of the fallback language stack to be used for translation.\n     * Therefore all languages in the fallback array BEFORE this key will be skipped!\n     *\n     * @param {string=} langKey Contains the langKey the iteration shall start with. Set to false if you want to\n     * get back to the whole stack\n     */\n    $translate.useFallbackLanguage = function (langKey) {\n      if (langKey !== undefined && langKey !== null) {\n        if (!langKey) {\n          startFallbackIteration = 0;\n        } else {\n          var langKeyPosition = indexOf($fallbackLanguage, langKey);\n          if (langKeyPosition > -1) {\n            startFallbackIteration = langKeyPosition;\n          }\n        }\n\n      }\n\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#proposedLanguage\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns the language key of language that is currently loaded asynchronously.\n     *\n     * @return {string} language key\n     */\n    $translate.proposedLanguage = function () {\n      return $nextLang;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#storage\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns registered storage.\n     *\n     * @return {object} Storage\n     */\n    $translate.storage = function () {\n      return Storage;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#negotiateLocale\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns a language key based on available languages and language aliases. If a\n     * language key cannot be resolved, returns undefined.\n     *\n     * If no or a falsy key is given, returns undefined.\n     *\n     * @param {string} [key] Language key\n     * @return {string|undefined} Language key or undefined if no language key is found.\n     */\n    $translate.negotiateLocale = negotiateLocale;\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#use\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Tells angular-translate which language to use by given language key. This method is\n     * used to change language at runtime. It also takes care of storing the language\n     * key in a configured store to let your app remember the choosed language.\n     *\n     * When trying to 'use' a language which isn't available it tries to load it\n     * asynchronously with registered loaders.\n     *\n     * Returns promise object with loaded language file data or string of the currently used language.\n     *\n     * If no or a falsy key is given it returns the currently used language key.\n     * The returned string will be ```undefined``` if setting up $translate hasn't finished.\n     * @example\n     * $translate.use(\"en_US\").then(function(data){\n       *   $scope.text = $translate(\"HELLO\");\n       * });\n     *\n     * @param {string=} key Language key\n     * @return {object|string} Promise with loaded language data or the language key if a falsy param was given.\n     */\n    $translate.use = function (key) {\n      if (!key) {\n        return $uses;\n      }\n\n      var deferred = $q.defer();\n      deferred.promise.then(null, angular.noop); // AJS \"Possibly unhandled rejection\"\n\n      $rootScope.$emit('$translateChangeStart', {language : key});\n\n      // Try to get the aliased language key\n      var aliasedKey = negotiateLocale(key);\n      // Ensure only registered language keys will be loaded\n      if ($availableLanguageKeys.length > 0 && !aliasedKey) {\n        return $q.reject(key);\n      }\n\n      if (aliasedKey) {\n        key = aliasedKey;\n      }\n\n      // if there isn't a translation table for the language we've requested,\n      // we load it asynchronously\n      $nextLang = key;\n      if (($forceAsyncReloadEnabled || !$translationTable[key]) && $loaderFactory && !langPromises[key]) {\n        langPromises[key] = loadAsync(key).then(function (translation) {\n          translations(translation.key, translation.table);\n          deferred.resolve(translation.key);\n          if ($nextLang === key) {\n            useLanguage(translation.key);\n          }\n          return translation;\n        }, function (key) {\n          $rootScope.$emit('$translateChangeError', {language : key});\n          deferred.reject(key);\n          $rootScope.$emit('$translateChangeEnd', {language : key});\n          return $q.reject(key);\n        });\n        langPromises[key]['finally'](function () {\n          clearNextLangAndPromise(key);\n        })['catch'](angular.noop); // we don't care about errors (clearing)\n      } else if (langPromises[key]) {\n        // we are already loading this asynchronously\n        // resolve our new deferred when the old langPromise is resolved\n        langPromises[key].then(function (translation) {\n          if ($nextLang === translation.key) {\n            useLanguage(translation.key);\n          }\n          deferred.resolve(translation.key);\n          return translation;\n        }, function (key) {\n          // find first available fallback language if that request has failed\n          if (!$uses && $fallbackLanguage && $fallbackLanguage.length > 0 && $fallbackLanguage[0] !== key) {\n            return $translate.use($fallbackLanguage[0]).then(deferred.resolve, deferred.reject);\n          } else {\n            return deferred.reject(key);\n          }\n        });\n      } else {\n        deferred.resolve(key);\n        useLanguage(key);\n      }\n\n      return deferred.promise;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#resolveClientLocale\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * This returns the current browser/client's language key. The result is processed with the configured uniform tag resolver.\n     *\n     * @returns {string} the current client/browser language key\n     */\n    $translate.resolveClientLocale = function () {\n      return getLocale();\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#storageKey\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns the key for the storage.\n     *\n     * @return {string} storage key\n     */\n    $translate.storageKey = function () {\n      return storageKey();\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#isPostCompilingEnabled\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns whether post compiling is enabled or not\n     *\n     * @return {bool} storage key\n     */\n    $translate.isPostCompilingEnabled = function () {\n      return $postCompilingEnabled;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#isForceAsyncReloadEnabled\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns whether force async reload is enabled or not\n     *\n     * @return {boolean} forceAsyncReload value\n     */\n    $translate.isForceAsyncReloadEnabled = function () {\n      return $forceAsyncReloadEnabled;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#isKeepContent\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns whether keepContent or not\n     *\n     * @return {boolean} keepContent value\n     */\n    $translate.isKeepContent = function () {\n      return $keepContent;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#refresh\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Refreshes a translation table pointed by the given langKey. If langKey is not specified,\n     * the module will drop all existent translation tables and load new version of those which\n     * are currently in use.\n     *\n     * Refresh means that the module will drop target translation table and try to load it again.\n     *\n     * In case there are no loaders registered the refresh() method will throw an Error.\n     *\n     * If the module is able to refresh translation tables refresh() method will broadcast\n     * $translateRefreshStart and $translateRefreshEnd events.\n     *\n     * @example\n     * // this will drop all currently existent translation tables and reload those which are\n     * // currently in use\n     * $translate.refresh();\n     * // this will refresh a translation table for the en_US language\n     * $translate.refresh('en_US');\n     *\n     * @param {string} langKey A language key of the table, which has to be refreshed\n     *\n     * @return {promise} Promise, which will be resolved in case a translation tables refreshing\n     * process is finished successfully, and reject if not.\n     */\n    $translate.refresh = function (langKey) {\n      if (!$loaderFactory) {\n        throw new Error('Couldn\\'t refresh translation table, no loader registered!');\n      }\n\n      $rootScope.$emit('$translateRefreshStart', {language : langKey});\n\n      var deferred = $q.defer(), updatedLanguages = {};\n\n      //private helper\n      function loadNewData(languageKey) {\n        var promise = loadAsync(languageKey);\n        //update the load promise cache for this language\n        langPromises[languageKey] = promise;\n        //register a data handler for the promise\n        promise.then(function (data) {\n            //clear the cache for this language\n            $translationTable[languageKey] = {};\n            //add the new data for this language\n            translations(languageKey, data.table);\n            //track that we updated this language\n            updatedLanguages[languageKey] = true;\n          },\n          //handle rejection to appease the $q validation\n          angular.noop);\n        return promise;\n      }\n\n      //set up post-processing\n      deferred.promise.then(\n        function () {\n          for (var key in $translationTable) {\n            if ($translationTable.hasOwnProperty(key)) {\n              //delete cache entries that were not updated\n              if (!(key in updatedLanguages)) {\n                delete $translationTable[key];\n              }\n            }\n          }\n          if ($uses) {\n            useLanguage($uses);\n          }\n        },\n        //handle rejection to appease the $q validation\n        angular.noop\n      )['finally'](\n        function () {\n          $rootScope.$emit('$translateRefreshEnd', {language : langKey});\n        }\n      );\n\n      if (!langKey) {\n        // if there's no language key specified we refresh ALL THE THINGS!\n        var languagesToReload = $fallbackLanguage && $fallbackLanguage.slice() || [];\n        if ($uses && languagesToReload.indexOf($uses) === -1) {\n          languagesToReload.push($uses);\n        }\n        $q.all(languagesToReload.map(loadNewData)).then(deferred.resolve, deferred.reject);\n\n      } else if ($translationTable[langKey]) {\n        //just refresh the specified language cache\n        loadNewData(langKey).then(deferred.resolve, deferred.reject);\n\n      } else {\n        deferred.reject();\n      }\n\n      return deferred.promise;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#instant\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns a translation instantly from the internal state of loaded translation. All rules\n     * regarding the current language, the preferred language of even fallback languages will be\n     * used except any promise handling. If a language was not found, an asynchronous loading\n     * will be invoked in the background.\n     *\n     * @param {string|array} translationId A token which represents a translation id\n     *                                     This can be optionally an array of translation ids which\n     *                                     results that the function's promise returns an object where\n     *                                     each key is the translation id and the value the translation.\n     * @param {object=} [interpolateParams={}] Params\n     * @param {string=} [interpolationId=undefined] The id of the interpolation to use (use default unless set via useInterpolation())\n     * @param {string=} [forceLanguage=false] A language to be used instead of the current language\n     * @param {string=} [sanitizeStrategy=undefined] force sanitize strategy for this call instead of using the configured one (use default unless set)\n     *\n     * @return {string|object} translation\n     */\n    $translate.instant = function (translationId, interpolateParams, interpolationId, forceLanguage, sanitizeStrategy) {\n\n      // we don't want to re-negotiate $uses\n      var uses = (forceLanguage && forceLanguage !== $uses) ? // we don't want to re-negotiate $uses\n        (negotiateLocale(forceLanguage) || forceLanguage) : $uses;\n\n      // Detect undefined and null values to shorten the execution and prevent exceptions\n      if (translationId === null || angular.isUndefined(translationId)) {\n        return translationId;\n      }\n\n      // Check forceLanguage is present\n      if (forceLanguage) {\n        loadTranslationsIfMissing(forceLanguage);\n      }\n\n      // Duck detection: If the first argument is an array, a bunch of translations was requested.\n      // The result is an object.\n      if (angular.isArray(translationId)) {\n        var results = {};\n        for (var i = 0, c = translationId.length; i < c; i++) {\n          results[translationId[i]] = $translate.instant(translationId[i], interpolateParams, interpolationId, forceLanguage, sanitizeStrategy);\n        }\n        return results;\n      }\n\n      // We discarded unacceptable values. So we just need to verify if translationId is empty String\n      if (angular.isString(translationId) && translationId.length < 1) {\n        return translationId;\n      }\n\n      // trim off any whitespace\n      if (translationId) {\n        translationId = trim.apply(translationId);\n      }\n\n      var result, possibleLangKeys = [];\n      if ($preferredLanguage) {\n        possibleLangKeys.push($preferredLanguage);\n      }\n      if (uses) {\n        possibleLangKeys.push(uses);\n      }\n      if ($fallbackLanguage && $fallbackLanguage.length) {\n        possibleLangKeys = possibleLangKeys.concat($fallbackLanguage);\n      }\n      for (var j = 0, d = possibleLangKeys.length; j < d; j++) {\n        var possibleLangKey = possibleLangKeys[j];\n        if ($translationTable[possibleLangKey]) {\n          if (typeof $translationTable[possibleLangKey][translationId] !== 'undefined') {\n            result = determineTranslationInstant(translationId, interpolateParams, interpolationId, uses, sanitizeStrategy);\n          }\n        }\n        if (typeof result !== 'undefined') {\n          break;\n        }\n      }\n\n      if (!result && result !== '') {\n        if ($notFoundIndicatorLeft || $notFoundIndicatorRight) {\n          result = applyNotFoundIndicators(translationId);\n        } else {\n          // Return translation of default interpolator if not found anything.\n          result = defaultInterpolator.interpolate(translationId, interpolateParams, 'filter', sanitizeStrategy);\n\n          // looks like the requested translation id doesn't exists.\n          // Now, if there is a registered handler for missing translations and no\n          // asyncLoader is pending, we execute the handler\n          var missingTranslationHandlerTranslation;\n          if ($missingTranslationHandlerFactory && !pendingLoader) {\n            missingTranslationHandlerTranslation = translateByHandler(translationId, interpolateParams, sanitizeStrategy);\n          }\n\n          if ($missingTranslationHandlerFactory && !pendingLoader && missingTranslationHandlerTranslation) {\n            result = missingTranslationHandlerTranslation;\n          }\n        }\n      }\n\n      return result;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#versionInfo\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns the current version information for the angular-translate library\n     *\n     * @return {string} angular-translate version\n     */\n    $translate.versionInfo = function () {\n      return version;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#loaderCache\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns the defined loaderCache.\n     *\n     * @return {boolean|string|object} current value of loaderCache\n     */\n    $translate.loaderCache = function () {\n      return loaderCache;\n    };\n\n    // internal purpose only\n    $translate.directivePriority = function () {\n      return directivePriority;\n    };\n\n    // internal purpose only\n    $translate.statefulFilter = function () {\n      return statefulFilter;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#isReady\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns whether the service is \"ready\" to translate (i.e. loading 1st language).\n     *\n     * See also {@link pascalprecht.translate.$translate#methods_onReady onReady()}.\n     *\n     * @return {boolean} current value of ready\n     */\n    $translate.isReady = function () {\n      return $isReady;\n    };\n\n    var $onReadyDeferred = $q.defer();\n    $onReadyDeferred.promise.then(function () {\n      $isReady = true;\n    });\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#onReady\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Calls the function provided or resolved the returned promise after the service is \"ready\" to translate (i.e. loading 1st language).\n     *\n     * See also {@link pascalprecht.translate.$translate#methods_isReady isReady()}.\n     *\n     * @param {Function=} fn Function to invoke when service is ready\n     * @return {object} Promise resolved when service is ready\n     */\n    $translate.onReady = function (fn) {\n      var deferred = $q.defer();\n      if (angular.isFunction(fn)) {\n        deferred.promise.then(fn);\n      }\n      if ($isReady) {\n        deferred.resolve();\n      } else {\n        $onReadyDeferred.promise.then(deferred.resolve);\n      }\n      return deferred.promise;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#getAvailableLanguageKeys\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * This function simply returns the registered language keys being defined before in the config phase\n     * With this, an application can use the array to provide a language selection dropdown or similar\n     * without any additional effort\n     *\n     * @returns {object} returns the list of possibly registered language keys and mapping or null if not defined\n     */\n    $translate.getAvailableLanguageKeys = function () {\n      if ($availableLanguageKeys.length > 0) {\n        return $availableLanguageKeys;\n      }\n      return null;\n    };\n\n    /**\n     * @ngdoc function\n     * @name pascalprecht.translate.$translate#getTranslationTable\n     * @methodOf pascalprecht.translate.$translate\n     *\n     * @description\n     * Returns translation table by the given language key.\n     *\n     * Unless a language is provided it returns a translation table of the current one.\n     * Note: If translation dictionary is currently downloading or in progress\n     * it will return null.\n     *\n     * @param {string} langKey A token which represents a translation id\n     *\n     * @return {object} a copy of angular-translate $translationTable\n     */\n    $translate.getTranslationTable = function (langKey) {\n      langKey = langKey || $translate.use();\n      if (langKey && $translationTable[langKey]) {\n        return angular.copy($translationTable[langKey]);\n      }\n      return null;\n    };\n\n    // Whenever $translateReady is being fired, this will ensure the state of $isReady\n    var globalOnReadyListener = $rootScope.$on('$translateReady', function () {\n      $onReadyDeferred.resolve();\n      globalOnReadyListener(); // one time only\n      globalOnReadyListener = null;\n    });\n    var globalOnChangeListener = $rootScope.$on('$translateChangeEnd', function () {\n      $onReadyDeferred.resolve();\n      globalOnChangeListener(); // one time only\n      globalOnChangeListener = null;\n    });\n\n    if ($loaderFactory) {\n\n      // If at least one async loader is defined and there are no\n      // (default) translations available we should try to load them.\n      if (angular.equals($translationTable, {})) {\n        if ($translate.use()) {\n          $translate.use($translate.use());\n        }\n      }\n\n      // Also, if there are any fallback language registered, we start\n      // loading them asynchronously as soon as we can.\n      if ($fallbackLanguage && $fallbackLanguage.length) {\n        var processAsyncResult = function (translation) {\n          translations(translation.key, translation.table);\n          $rootScope.$emit('$translateChangeEnd', {language : translation.key});\n          return translation;\n        };\n        for (var i = 0, len = $fallbackLanguage.length; i < len; i++) {\n          var fallbackLanguageId = $fallbackLanguage[i];\n          if ($forceAsyncReloadEnabled || !$translationTable[fallbackLanguageId]) {\n            langPromises[fallbackLanguageId] = loadAsync(fallbackLanguageId).then(processAsyncResult);\n          }\n        }\n      }\n    } else {\n      $rootScope.$emit('$translateReady', {language : $translate.use()});\n    }\n\n    return $translate;\n  }];\n}\n\n$translate.displayName = 'displayName';\n\n/**\n * @ngdoc object\n * @name pascalprecht.translate.$translateDefaultInterpolation\n * @requires $interpolate\n *\n * @description\n * Uses angular's `$interpolate` services to interpolate strings against some values.\n *\n * Be aware to configure a proper sanitization strategy.\n *\n * See also:\n * * {@link pascalprecht.translate.$translateSanitization}\n *\n * @return {object} $translateDefaultInterpolation Interpolator service\n */\nangular.module('pascalprecht.translate').factory('$translateDefaultInterpolation', $translateDefaultInterpolation);\n\nfunction $translateDefaultInterpolation ($interpolate, $translateSanitization) {\n\n  'use strict';\n\n  var $translateInterpolator = {},\n      $locale,\n      $identifier = 'default';\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateDefaultInterpolation#setLocale\n   * @methodOf pascalprecht.translate.$translateDefaultInterpolation\n   *\n   * @description\n   * Sets current locale (this is currently not use in this interpolation).\n   *\n   * @param {string} locale Language key or locale.\n   */\n  $translateInterpolator.setLocale = function (locale) {\n    $locale = locale;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateDefaultInterpolation#getInterpolationIdentifier\n   * @methodOf pascalprecht.translate.$translateDefaultInterpolation\n   *\n   * @description\n   * Returns an identifier for this interpolation service.\n   *\n   * @returns {string} $identifier\n   */\n  $translateInterpolator.getInterpolationIdentifier = function () {\n    return $identifier;\n  };\n\n  /**\n   * @deprecated will be removed in 3.0\n   * @see {@link pascalprecht.translate.$translateSanitization}\n   */\n  $translateInterpolator.useSanitizeValueStrategy = function (value) {\n    $translateSanitization.useStrategy(value);\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateDefaultInterpolation#interpolate\n   * @methodOf pascalprecht.translate.$translateDefaultInterpolation\n   *\n   * @description\n   * Interpolates given value agains given interpolate params using angulars\n   * `$interpolate` service.\n   *\n   * Since AngularJS 1.5, `value` must not be a string but can be anything input.\n   *\n   * @param {string} value translation\n   * @param {object} [interpolationParams={}] interpolation params\n   * @param {string} [context=undefined] current context (filter, directive, service)\n   * @param {string} [sanitizeStrategy=undefined] sanitize strategy (use default unless set)\n   * @param {string} translationId current translationId\n   *\n   * @returns {string} interpolated string\n   */\n  $translateInterpolator.interpolate = function (value, interpolationParams, context, sanitizeStrategy, translationId) { // jshint ignore:line\n    interpolationParams = interpolationParams || {};\n    interpolationParams = $translateSanitization.sanitize(interpolationParams, 'params', sanitizeStrategy, context);\n\n    var interpolatedText;\n    if (angular.isNumber(value)) {\n      // numbers are safe\n      interpolatedText = '' + value;\n    } else if (angular.isString(value)) {\n      // strings must be interpolated (that's the job here)\n      interpolatedText = $interpolate(value)(interpolationParams);\n      interpolatedText = $translateSanitization.sanitize(interpolatedText, 'text', sanitizeStrategy, context);\n    } else {\n      // neither a number or a string, cant interpolate => empty string\n      interpolatedText = '';\n    }\n\n    return interpolatedText;\n  };\n\n  return $translateInterpolator;\n}\n\n$translateDefaultInterpolation.displayName = '$translateDefaultInterpolation';\n\nangular.module('pascalprecht.translate').constant('$STORAGE_KEY', 'NG_TRANSLATE_LANG_KEY');\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc directive\n * @name pascalprecht.translate.directive:translate\n * @requires $interpolate,\n * @requires $compile,\n * @requires $parse,\n * @requires $rootScope\n * @restrict AE\n *\n * @description\n * Translates given translation id either through attribute or DOM content.\n * Internally it uses $translate service to translate the translation id. It possible to\n * pass an optional `translate-values` object literal as string into translation id.\n *\n * @param {string=} translate Translation id which could be either string or interpolated string.\n * @param {string=} translate-values Values to pass into translation id. Can be passed as object literal string or interpolated object.\n * @param {string=} translate-attr-ATTR translate Translation id and put it into ATTR attribute.\n * @param {string=} translate-default will be used unless translation was successful\n * @param {string=} translate-sanitize-strategy defines locally sanitize strategy\n * @param {boolean=} translate-compile (default true if present) defines locally activation of {@link pascalprecht.translate.$translateProvider#methods_usePostCompiling}\n * @param {boolean=} translate-keep-content (default true if present) defines that in case a KEY could not be translated, that the existing content is left in the innerHTML}\n *\n * @example\n   <example module=\"ngView\">\n    <file name=\"index.html\">\n      <div ng-controller=\"TranslateCtrl\">\n\n        <pre translate=\"TRANSLATION_ID\"></pre>\n        <pre translate>TRANSLATION_ID</pre>\n        <pre translate translate-attr-title=\"TRANSLATION_ID\"></pre>\n        <pre translate=\"{{translationId}}\"></pre>\n        <pre translate>{{translationId}}</pre>\n        <pre translate=\"WITH_VALUES\" translate-values=\"{value: 5}\"></pre>\n        <pre translate translate-values=\"{value: 5}\">WITH_VALUES</pre>\n        <pre translate=\"WITH_VALUES\" translate-values=\"{{values}}\"></pre>\n        <pre translate translate-values=\"{{values}}\">WITH_VALUES</pre>\n        <pre translate translate-attr-title=\"WITH_VALUES\" translate-values=\"{{values}}\"></pre>\n        <pre translate=\"WITH_CAMEL_CASE_KEY\" translate-value-camel-case-key=\"Hi\"></pre>\n\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngView', ['pascalprecht.translate'])\n\n      .config(function ($translateProvider) {\n\n        $translateProvider.translations('en',{\n          'TRANSLATION_ID': 'Hello there!',\n          'WITH_VALUES': 'The following value is dynamic: {{value}}',\n          'WITH_CAMEL_CASE_KEY': 'The interpolation key is camel cased: {{camelCaseKey}}'\n        }).preferredLanguage('en');\n\n      });\n\n      angular.module('ngView').controller('TranslateCtrl', function ($scope) {\n        $scope.translationId = 'TRANSLATION_ID';\n\n        $scope.values = {\n          value: 78\n        };\n      });\n    </file>\n    <file name=\"scenario.js\">\n      it('should translate', function () {\n        inject(function ($rootScope, $compile) {\n          $rootScope.translationId = 'TRANSLATION_ID';\n\n          element = $compile('<p translate=\"TRANSLATION_ID\"></p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.text()).toBe('Hello there!');\n\n          element = $compile('<p translate=\"{{translationId}}\"></p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.text()).toBe('Hello there!');\n\n          element = $compile('<p translate>TRANSLATION_ID</p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.text()).toBe('Hello there!');\n\n          element = $compile('<p translate>{{translationId}}</p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.text()).toBe('Hello there!');\n\n          element = $compile('<p translate translate-attr-title=\"TRANSLATION_ID\"></p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.attr('title')).toBe('Hello there!');\n\n          element = $compile('<p translate=\"WITH_CAMEL_CASE_KEY\" translate-value-camel-case-key=\"Hello\"></p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.text()).toBe('The interpolation key is camel cased: Hello');\n        });\n      });\n    </file>\n   </example>\n */\n.directive('translate', translateDirective);\nfunction translateDirective($translate, $interpolate, $compile, $parse, $rootScope) {\n\n  'use strict';\n\n  /**\n   * @name trim\n   * @private\n   *\n   * @description\n   * trim polyfill\n   *\n   * @returns {string} The string stripped of whitespace from both ends\n   */\n  var trim = function() {\n    return this.toString().replace(/^\\s+|\\s+$/g, '');\n  };\n\n  /**\n   * @name lowercase\n   * @private\n   *\n   * @description\n   * Return the lowercase string only if the type is string\n   *\n   * @returns {string} The string all in lowercase\n   */\n  var lowercase = function (string) {\n    return angular.isString(string) ? string.toLowerCase() : string;\n  };\n\n  return {\n    restrict: 'AE',\n    scope: true,\n    priority: $translate.directivePriority(),\n    compile: function (tElement, tAttr) {\n\n      var translateValuesExist = (tAttr.translateValues) ?\n        tAttr.translateValues : undefined;\n\n      var translateInterpolation = (tAttr.translateInterpolation) ?\n        tAttr.translateInterpolation : undefined;\n\n      var translateSanitizeStrategyExist = (tAttr.translateSanitizeStrategy) ?\n        tAttr.translateSanitizeStrategy : undefined;\n\n      var translateValueExist = tElement[0].outerHTML.match(/translate-value-+/i);\n\n      var interpolateRegExp = '^(.*)(' + $interpolate.startSymbol() + '.*' + $interpolate.endSymbol() + ')(.*)',\n          watcherRegExp = '^(.*)' + $interpolate.startSymbol() + '(.*)' + $interpolate.endSymbol() + '(.*)';\n\n      return function linkFn(scope, iElement, iAttr) {\n\n        scope.interpolateParams = {};\n        scope.preText = '';\n        scope.postText = '';\n        scope.translateNamespace = getTranslateNamespace(scope);\n        var translationIds = {};\n\n        var initInterpolationParams = function (interpolateParams, iAttr, tAttr) {\n          // initial setup\n          if (iAttr.translateValues) {\n            angular.extend(interpolateParams, $parse(iAttr.translateValues)(scope.$parent));\n          }\n          // initially fetch all attributes if existing and fill the params\n          if (translateValueExist) {\n            for (var attr in tAttr) {\n              if (Object.prototype.hasOwnProperty.call(iAttr, attr) && attr.substr(0, 14) === 'translateValue' && attr !== 'translateValues') {\n                var attributeName = lowercase(attr.substr(14, 1)) + attr.substr(15);\n                interpolateParams[attributeName] = tAttr[attr];\n              }\n            }\n          }\n        };\n\n        // Ensures any change of the attribute \"translate\" containing the id will\n        // be re-stored to the scope's \"translationId\".\n        // If the attribute has no content, the element's text value (white spaces trimmed off) will be used.\n        var observeElementTranslation = function (translationId) {\n\n          // Remove any old watcher\n          if (angular.isFunction(observeElementTranslation._unwatchOld)) {\n            observeElementTranslation._unwatchOld();\n            observeElementTranslation._unwatchOld = undefined;\n          }\n\n          if (angular.equals(translationId , '') || !angular.isDefined(translationId)) {\n            var iElementText = trim.apply(iElement.text());\n\n            // Resolve translation id by inner html if required\n            var interpolateMatches = iElementText.match(interpolateRegExp);\n            // Interpolate translation id if required\n            if (angular.isArray(interpolateMatches)) {\n              scope.preText = interpolateMatches[1];\n              scope.postText = interpolateMatches[3];\n              translationIds.translate = $interpolate(interpolateMatches[2])(scope.$parent);\n              var watcherMatches = iElementText.match(watcherRegExp);\n              if (angular.isArray(watcherMatches) && watcherMatches[2] && watcherMatches[2].length) {\n                observeElementTranslation._unwatchOld = scope.$watch(watcherMatches[2], function (newValue) {\n                  translationIds.translate = newValue;\n                  updateTranslations();\n                });\n              }\n            } else {\n              // do not assigne the translation id if it is empty.\n              translationIds.translate = !iElementText ? undefined : iElementText;\n            }\n          } else {\n            translationIds.translate = translationId;\n          }\n          updateTranslations();\n        };\n\n        var observeAttributeTranslation = function (translateAttr) {\n          iAttr.$observe(translateAttr, function (translationId) {\n            translationIds[translateAttr] = translationId;\n            updateTranslations();\n          });\n        };\n\n        // initial setup with values\n        initInterpolationParams(scope.interpolateParams, iAttr, tAttr);\n\n        var firstAttributeChangedEvent = true;\n        iAttr.$observe('translate', function (translationId) {\n          if (typeof translationId === 'undefined') {\n            // case of element \"<translate>xyz</translate>\"\n            observeElementTranslation('');\n          } else {\n            // case of regular attribute\n            if (translationId !== '' || !firstAttributeChangedEvent) {\n              translationIds.translate = translationId;\n              updateTranslations();\n            }\n          }\n          firstAttributeChangedEvent = false;\n        });\n\n        for (var translateAttr in iAttr) {\n          if (iAttr.hasOwnProperty(translateAttr) && translateAttr.substr(0, 13) === 'translateAttr' && translateAttr.length > 13) {\n            observeAttributeTranslation(translateAttr);\n          }\n        }\n\n        iAttr.$observe('translateDefault', function (value) {\n          scope.defaultText = value;\n          updateTranslations();\n        });\n\n        if (translateSanitizeStrategyExist) {\n          iAttr.$observe('translateSanitizeStrategy', function (value) {\n            scope.sanitizeStrategy = $parse(value)(scope.$parent);\n            updateTranslations();\n          });\n        }\n\n        if (translateValuesExist) {\n          iAttr.$observe('translateValues', function (interpolateParams) {\n            if (interpolateParams) {\n              scope.$parent.$watch(function () {\n                angular.extend(scope.interpolateParams, $parse(interpolateParams)(scope.$parent));\n              });\n            }\n          });\n        }\n\n        if (translateValueExist) {\n          var observeValueAttribute = function (attrName) {\n            iAttr.$observe(attrName, function (value) {\n              var attributeName = lowercase(attrName.substr(14, 1)) + attrName.substr(15);\n              scope.interpolateParams[attributeName] = value;\n            });\n          };\n          for (var attr in iAttr) {\n            if (Object.prototype.hasOwnProperty.call(iAttr, attr) && attr.substr(0, 14) === 'translateValue' && attr !== 'translateValues') {\n              observeValueAttribute(attr);\n            }\n          }\n        }\n\n        // Master update function\n        var updateTranslations = function () {\n          for (var key in translationIds) {\n            if (translationIds.hasOwnProperty(key) && translationIds[key] !== undefined) {\n              updateTranslation(key, translationIds[key], scope, scope.interpolateParams, scope.defaultText, scope.translateNamespace);\n            }\n          }\n        };\n\n        // Put translation processing function outside loop\n        var updateTranslation = function(translateAttr, translationId, scope, interpolateParams, defaultTranslationText, translateNamespace) {\n          if (translationId) {\n            // if translation id starts with '.' and translateNamespace given, prepend namespace\n            if (translateNamespace && translationId.charAt(0) === '.') {\n              translationId = translateNamespace + translationId;\n            }\n\n            $translate(translationId, interpolateParams, translateInterpolation, defaultTranslationText, scope.translateLanguage, scope.sanitizeStrategy)\n              .then(function (translation) {\n                applyTranslation(translation, scope, true, translateAttr);\n              }, function (translationId) {\n                applyTranslation(translationId, scope, false, translateAttr);\n              });\n          } else {\n            // as an empty string cannot be translated, we can solve this using successful=false\n            applyTranslation(translationId, scope, false, translateAttr);\n          }\n        };\n\n        var applyTranslation = function (value, scope, successful, translateAttr) {\n          if (!successful) {\n            if (typeof scope.defaultText !== 'undefined') {\n              value = scope.defaultText;\n            }\n          }\n          if (translateAttr === 'translate') {\n            // default translate into innerHTML\n            if (successful || (!successful && !$translate.isKeepContent() && typeof iAttr.translateKeepContent === 'undefined')) {\n              iElement.empty().append(scope.preText + value + scope.postText);\n            }\n            var globallyEnabled = $translate.isPostCompilingEnabled();\n            var locallyDefined = typeof tAttr.translateCompile !== 'undefined';\n            var locallyEnabled = locallyDefined && tAttr.translateCompile !== 'false';\n            if ((globallyEnabled && !locallyDefined) || locallyEnabled) {\n              $compile(iElement.contents())(scope);\n            }\n          } else {\n            // translate attribute\n            var attributeName = iAttr.$attr[translateAttr];\n            if (attributeName.substr(0, 5) === 'data-') {\n              // ensure html5 data prefix is stripped\n              attributeName = attributeName.substr(5);\n            }\n            attributeName = attributeName.substr(15);\n            iElement.attr(attributeName, value);\n          }\n        };\n\n        if (translateValuesExist || translateValueExist || iAttr.translateDefault) {\n          scope.$watch('interpolateParams', updateTranslations, true);\n        }\n\n        // Replaced watcher on translateLanguage with event listener\n        scope.$on('translateLanguageChanged', updateTranslations);\n\n        // Ensures the text will be refreshed after the current language was changed\n        // w/ $translate.use(...)\n        var unbind = $rootScope.$on('$translateChangeSuccess', updateTranslations);\n\n        // ensure translation will be looked up at least one\n        if (iElement.text().length) {\n          if (iAttr.translate) {\n            observeElementTranslation(iAttr.translate);\n          } else {\n            observeElementTranslation('');\n          }\n        } else if (iAttr.translate) {\n          // ensure attribute will be not skipped\n          observeElementTranslation(iAttr.translate);\n        }\n        updateTranslations();\n        scope.$on('$destroy', unbind);\n      };\n    }\n  };\n}\n\n/**\n * Returns the scope's namespace.\n * @private\n * @param scope\n * @returns {string}\n */\nfunction getTranslateNamespace(scope) {\n  'use strict';\n  if (scope.translateNamespace) {\n    return scope.translateNamespace;\n  }\n  if (scope.$parent) {\n    return getTranslateNamespace(scope.$parent);\n  }\n}\n\ntranslateDirective.displayName = 'translateDirective';\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc directive\n * @name pascalprecht.translate.directive:translate-attr\n * @restrict A\n *\n * @description\n * Translates attributes like translate-attr-ATTR, but with an object like ng-class.\n * Internally it uses `translate` service to translate translation id. It possible to\n * pass an optional `translate-values` object literal as string into translation id.\n *\n * @param {string=} translate-attr Object literal mapping attributes to translation ids.\n * @param {string=} translate-values Values to pass into the translation ids. Can be passed as object literal string.\n * @param {string=} translate-sanitize-strategy defines locally sanitize strategy\n *\n * @example\n   <example module=\"ngView\">\n    <file name=\"index.html\">\n      <div ng-controller=\"TranslateCtrl\">\n\n        <input translate-attr=\"{ placeholder: translationId, title: 'WITH_VALUES' }\" translate-values=\"{value: 5}\" />\n\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngView', ['pascalprecht.translate'])\n\n      .config(function ($translateProvider) {\n\n        $translateProvider.translations('en',{\n          'TRANSLATION_ID': 'Hello there!',\n          'WITH_VALUES': 'The following value is dynamic: {{value}}',\n        }).preferredLanguage('en');\n\n      });\n\n      angular.module('ngView').controller('TranslateCtrl', function ($scope) {\n        $scope.translationId = 'TRANSLATION_ID';\n\n        $scope.values = {\n          value: 78\n        };\n      });\n    </file>\n    <file name=\"scenario.js\">\n      it('should translate', function () {\n        inject(function ($rootScope, $compile) {\n          $rootScope.translationId = 'TRANSLATION_ID';\n\n          element = $compile('<input translate-attr=\"{ placeholder: translationId, title: 'WITH_VALUES' }\" translate-values=\"{ value: 5 }\" />')($rootScope);\n          $rootScope.$digest();\n          expect(element.attr('placeholder)).toBe('Hello there!');\n          expect(element.attr('title)).toBe('The following value is dynamic: 5');\n        });\n      });\n    </file>\n   </example>\n */\n.directive('translateAttr', translateAttrDirective);\nfunction translateAttrDirective($translate, $rootScope) {\n\n  'use strict';\n\n  return {\n    restrict: 'A',\n    priority: $translate.directivePriority(),\n    link: function linkFn(scope, element, attr) {\n\n      var translateAttr,\n          translateValues,\n          translateSanitizeStrategy,\n          previousAttributes = {};\n\n      // Main update translations function\n      var updateTranslations = function () {\n        angular.forEach(translateAttr, function (translationId, attributeName) {\n          if (!translationId) {\n            return;\n          }\n          previousAttributes[attributeName] = true;\n\n          // if translation id starts with '.' and translateNamespace given, prepend namespace\n          if (scope.translateNamespace && translationId.charAt(0) === '.') {\n            translationId = scope.translateNamespace + translationId;\n          }\n          $translate(translationId, translateValues, attr.translateInterpolation, undefined, scope.translateLanguage, translateSanitizeStrategy)\n            .then(function (translation) {\n              element.attr(attributeName, translation);\n            }, function (translationId) {\n              element.attr(attributeName, translationId);\n            });\n        });\n\n        // Removing unused attributes that were previously used\n        angular.forEach(previousAttributes, function (flag, attributeName) {\n          if (!translateAttr[attributeName]) {\n            element.removeAttr(attributeName);\n            delete previousAttributes[attributeName];\n          }\n        });\n      };\n\n      // Watch for attribute changes\n      watchAttribute(\n        scope,\n        attr.translateAttr,\n        function (newValue) { translateAttr = newValue; },\n        updateTranslations\n      );\n      // Watch for value changes\n      watchAttribute(\n        scope,\n        attr.translateValues,\n        function (newValue) { translateValues = newValue; },\n        updateTranslations\n      );\n      // Watch for sanitize strategy changes\n      watchAttribute(\n        scope,\n        attr.translateSanitizeStrategy,\n        function (newValue) { translateSanitizeStrategy = newValue; },\n        updateTranslations\n      );\n\n      if (attr.translateValues) {\n        scope.$watch(attr.translateValues, updateTranslations, true);\n      }\n\n      // Replaced watcher on translateLanguage with event listener\n      scope.$on('translateLanguageChanged', updateTranslations);\n\n      // Ensures the text will be refreshed after the current language was changed\n      // w/ $translate.use(...)\n      var unbind = $rootScope.$on('$translateChangeSuccess', updateTranslations);\n\n      updateTranslations();\n      scope.$on('$destroy', unbind);\n    }\n  };\n}\n\nfunction watchAttribute(scope, attribute, valueCallback, changeCallback) {\n  'use strict';\n  if (!attribute) {\n    return;\n  }\n  if (attribute.substr(0, 2) === '::') {\n    attribute = attribute.substr(2);\n  } else {\n    scope.$watch(attribute, function(newValue) {\n      valueCallback(newValue);\n      changeCallback();\n    }, true);\n  }\n  valueCallback(scope.$eval(attribute));\n}\n\ntranslateAttrDirective.displayName = 'translateAttrDirective';\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc directive\n * @name pascalprecht.translate.directive:translateCloak\n * @requires $translate\n * @restrict A\n *\n * $description\n * Adds a `translate-cloak` class name to the given element where this directive\n * is applied initially and removes it, once a loader has finished loading.\n *\n * This directive can be used to prevent initial flickering when loading translation\n * data asynchronously.\n *\n * The class name is defined in\n * {@link pascalprecht.translate.$translateProvider#cloakClassName $translate.cloakClassName()}.\n *\n * @param {string=} translate-cloak If a translationId is provided, it will be used for showing\n *                                  or hiding the cloak. Basically it relies on the translation\n *                                  resolve.\n */\n.directive('translateCloak', translateCloakDirective);\n\nfunction translateCloakDirective($translate, $rootScope) {\n\n  'use strict';\n\n  return {\n    compile : function (tElement) {\n      var applyCloak = function (element) {\n          element.addClass($translate.cloakClassName());\n        },\n        removeCloak = function (element) {\n          element.removeClass($translate.cloakClassName());\n        };\n      applyCloak(tElement);\n\n      return function linkFn(scope, iElement, iAttr) {\n        //Create bound functions that incorporate the active DOM element.\n        var iRemoveCloak = removeCloak.bind(this, iElement), iApplyCloak = applyCloak.bind(this, iElement);\n        if (iAttr.translateCloak && iAttr.translateCloak.length) {\n          // Register a watcher for the defined translation allowing a fine tuned cloak\n          iAttr.$observe('translateCloak', function (translationId) {\n            $translate(translationId).then(iRemoveCloak, iApplyCloak);\n          });\n          $rootScope.$on('$translateChangeSuccess', function () {\n            $translate(iAttr.translateCloak).then(iRemoveCloak, iApplyCloak);\n          });\n        } else {\n          $translate.onReady(iRemoveCloak);\n        }\n      };\n    }\n  };\n}\n\ntranslateCloakDirective.displayName = 'translateCloakDirective';\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc directive\n * @name pascalprecht.translate.directive:translateNamespace\n * @restrict A\n *\n * @description\n * Translates given translation id either through attribute or DOM content.\n * Internally it uses `translate` filter to translate translation id. It is possible to\n * pass an optional `translate-values` object literal as string into translation id.\n *\n * @param {string=} translate namespace name which could be either string or interpolated string.\n *\n * @example\n   <example module=\"ngView\">\n    <file name=\"index.html\">\n      <div translate-namespace=\"CONTENT\">\n\n        <div>\n            <h1 translate>.HEADERS.TITLE</h1>\n            <h1 translate>.HEADERS.WELCOME</h1>\n        </div>\n\n        <div translate-namespace=\".HEADERS\">\n            <h1 translate>.TITLE</h1>\n            <h1 translate>.WELCOME</h1>\n        </div>\n\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngView', ['pascalprecht.translate'])\n\n      .config(function ($translateProvider) {\n\n        $translateProvider.translations('en',{\n          'TRANSLATION_ID': 'Hello there!',\n          'CONTENT': {\n            'HEADERS': {\n                TITLE: 'Title'\n            }\n          },\n          'CONTENT.HEADERS.WELCOME': 'Welcome'\n        }).preferredLanguage('en');\n\n      });\n\n    </file>\n   </example>\n */\n.directive('translateNamespace', translateNamespaceDirective);\n\nfunction translateNamespaceDirective() {\n\n  'use strict';\n\n  return {\n    restrict: 'A',\n    scope: true,\n    compile: function () {\n      return {\n        pre: function (scope, iElement, iAttrs) {\n          scope.translateNamespace = _getTranslateNamespace(scope);\n\n          if (scope.translateNamespace && iAttrs.translateNamespace.charAt(0) === '.') {\n            scope.translateNamespace += iAttrs.translateNamespace;\n          } else {\n            scope.translateNamespace = iAttrs.translateNamespace;\n          }\n        }\n      };\n    }\n  };\n}\n\n/**\n * Returns the scope's namespace.\n * @private\n * @param scope\n * @returns {string}\n */\nfunction _getTranslateNamespace(scope) {\n  'use strict';\n  if (scope.translateNamespace) {\n    return scope.translateNamespace;\n  }\n  if (scope.$parent) {\n    return _getTranslateNamespace(scope.$parent);\n  }\n}\n\ntranslateNamespaceDirective.displayName = 'translateNamespaceDirective';\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc directive\n * @name pascalprecht.translate.directive:translateLanguage\n * @restrict A\n *\n * @description\n * Forces the language to the directives in the underlying scope.\n *\n * @param {string=} translate language that will be negotiated.\n *\n * @example\n   <example module=\"ngView\">\n    <file name=\"index.html\">\n      <div>\n\n        <div>\n            <h1 translate>HELLO</h1>\n        </div>\n\n        <div translate-language=\"de\">\n            <h1 translate>HELLO</h1>\n        </div>\n\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngView', ['pascalprecht.translate'])\n\n      .config(function ($translateProvider) {\n\n        $translateProvider\n          .translations('en',{\n            'HELLO': 'Hello world!'\n          })\n          .translations('de',{\n            'HELLO': 'Hallo Welt!'\n          })\n          .preferredLanguage('en');\n\n      });\n\n    </file>\n   </example>\n */\n.directive('translateLanguage', translateLanguageDirective);\n\nfunction translateLanguageDirective() {\n\n  'use strict';\n\n  return {\n    restrict: 'A',\n    scope: true,\n    compile: function () {\n      return function linkFn(scope, iElement, iAttrs) {\n\n        iAttrs.$observe('translateLanguage', function (newTranslateLanguage) {\n          scope.translateLanguage = newTranslateLanguage;\n        });\n\n        scope.$watch('translateLanguage', function(){\n          scope.$broadcast('translateLanguageChanged');\n        });\n      };\n    }\n  };\n}\n\ntranslateLanguageDirective.displayName = 'translateLanguageDirective';\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc filter\n * @name pascalprecht.translate.filter:translate\n * @requires $parse\n * @requires pascalprecht.translate.$translate\n * @function\n *\n * @description\n * Uses `$translate` service to translate contents. Accepts interpolate parameters\n * to pass dynamized values though translation.\n *\n * @param {string} translationId A translation id to be translated.\n * @param {*=} interpolateParams Optional object literal (as hash or string) to pass values into translation.\n *\n * @returns {string} Translated text.\n *\n * @example\n   <example module=\"ngView\">\n    <file name=\"index.html\">\n      <div ng-controller=\"TranslateCtrl\">\n\n        <pre>{{ 'TRANSLATION_ID' | translate }}</pre>\n        <pre>{{ translationId | translate }}</pre>\n        <pre>{{ 'WITH_VALUES' | translate:'{value: 5}' }}</pre>\n        <pre>{{ 'WITH_VALUES' | translate:values }}</pre>\n\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngView', ['pascalprecht.translate'])\n\n      .config(function ($translateProvider) {\n\n        $translateProvider.translations('en', {\n          'TRANSLATION_ID': 'Hello there!',\n          'WITH_VALUES': 'The following value is dynamic: {{value}}'\n        });\n        $translateProvider.preferredLanguage('en');\n\n      });\n\n      angular.module('ngView').controller('TranslateCtrl', function ($scope) {\n        $scope.translationId = 'TRANSLATION_ID';\n\n        $scope.values = {\n          value: 78\n        };\n      });\n    </file>\n   </example>\n */\n.filter('translate', translateFilterFactory);\n\nfunction translateFilterFactory($parse, $translate) {\n\n  'use strict';\n\n  var translateFilter = function (translationId, interpolateParams, interpolation, forceLanguage) {\n    if (!angular.isObject(interpolateParams)) {\n      var ctx = this || {\n        '__SCOPE_IS_NOT_AVAILABLE': 'More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f'\n        };\n      interpolateParams = $parse(interpolateParams)(ctx);\n    }\n\n    return $translate.instant(translationId, interpolateParams, interpolation, forceLanguage);\n  };\n\n  if ($translate.statefulFilter()) {\n    translateFilter.$stateful = true;\n  }\n\n  return translateFilter;\n}\n\ntranslateFilterFactory.displayName = 'translateFilterFactory';\n\nangular.module('pascalprecht.translate')\n\n/**\n * @ngdoc object\n * @name pascalprecht.translate.$translationCache\n * @requires $cacheFactory\n *\n * @description\n * The first time a translation table is used, it is loaded in the translation cache for quick retrieval. You\n * can load translation tables directly into the cache by consuming the\n * `$translationCache` service directly.\n *\n * @return {object} $cacheFactory object.\n */\n  .factory('$translationCache', $translationCache);\n\nfunction $translationCache($cacheFactory) {\n\n  'use strict';\n\n  return $cacheFactory('translations');\n}\n\n$translationCache.displayName = '$translationCache';\nreturn 'pascalprecht.translate';\n\n}));\n",
    "/**\n * @license Angulartics v0.17.2\n * (c) 2013 Luis Farzati http://luisfarzati.github.io/angulartics\n * License: MIT\n */\n(function(angular, analytics) {\n'use strict';\n\nvar angulartics = window.angulartics || (window.angulartics = {});\nangulartics.waitForVendorCount = 0;\nangulartics.waitForVendorApi = function (objectName, delay, containsField, registerFn, onTimeout) {\n  if (!onTimeout) { angulartics.waitForVendorCount++; }\n  if (!registerFn) { registerFn = containsField; containsField = undefined; }\n  if (!Object.prototype.hasOwnProperty.call(window, objectName) || (containsField !== undefined && window[objectName][containsField] === undefined)) {\n    setTimeout(function () { angulartics.waitForVendorApi(objectName, delay, containsField, registerFn, true); }, delay);\n  }\n  else {\n    angulartics.waitForVendorCount--;\n    registerFn(window[objectName]);\n  }\n};\n\n/**\n * @ngdoc overview\n * @name angulartics\n */\nangular.module('angulartics', [])\n.provider('$analytics', function () {\n  var settings = {\n    pageTracking: {\n      autoTrackFirstPage: true,\n      autoTrackVirtualPages: true,\n      trackRelativePath: false,\n      autoBasePath: false,\n      basePath: ''\n    },\n    eventTracking: {},\n    bufferFlushDelay: 1000, // Support only one configuration for buffer flush delay to simplify buffering\n    developerMode: false // Prevent sending data in local/development environment\n  };\n\n  // List of known handlers that plugins can register themselves for\n  var knownHandlers = [\n    'pageTrack',\n    'eventTrack',\n    'setAlias',\n    'setUsername',\n    'setAlias',\n    'setUserProperties',\n    'setUserPropertiesOnce',\n    'setSuperProperties',\n    'setSuperPropertiesOnce'\n  ];\n  // Cache and handler properties will match values in 'knownHandlers' as the buffering functons are installed.\n  var cache = {};\n  var handlers = {};\n\n  // General buffering handler\n  var bufferedHandler = function(handlerName){\n    return function(){\n      if(angulartics.waitForVendorCount){\n        if(!cache[handlerName]){ cache[handlerName] = []; }\n        cache[handlerName].push(arguments);\n      }\n    };\n  };\n\n  // As handlers are installed by plugins, they get pushed into a list and invoked in order.\n  var updateHandlers = function(handlerName, fn){\n    if(!handlers[handlerName]){\n      handlers[handlerName] = [];\n    }\n    handlers[handlerName].push(fn);\n    return function(){\n      var handlerArgs = arguments;\n      angular.forEach(handlers[handlerName], function(handler){\n        handler.apply(this, handlerArgs);\n      }, this);\n    };\n  };\n\n  // The api (returned by this provider) gets populated with handlers below.\n  var api = {\n    settings: settings\n  };\n\n  // Will run setTimeout if delay is > 0\n  // Runs immediately if no delay to make sure cache/buffer is flushed before anything else.\n  // Plugins should take care to register handlers by order of precedence.\n  var onTimeout = function(fn, delay){\n    if(delay){\n      setTimeout(fn, delay);\n    } else {\n      fn();\n    }\n  };\n\n  var provider = {\n    $get: function() { return api; },\n    api: api,\n    settings: settings,\n    virtualPageviews: function (value) { this.settings.pageTracking.autoTrackVirtualPages = value; },\n    firstPageview: function (value) { this.settings.pageTracking.autoTrackFirstPage = value; },\n    withBase: function (value) { this.settings.pageTracking.basePath = (value) ? angular.element('base').attr('href').slice(0, -1) : ''; },\n    withAutoBase: function (value) { this.settings.pageTracking.autoBasePath = value; },\n    developerMode: function(value) { this.settings.developerMode = value; }\n  };\n\n  // General function to register plugin handlers. Flushes buffers immediately upon registration according to the specified delay.\n  var register = function(handlerName, fn){\n    api[handlerName] = updateHandlers(handlerName, fn);\n    var handlerSettings = settings[handlerName];\n    var handlerDelay = (handlerSettings) ? handlerSettings.bufferFlushDelay : null;\n    var delay = (handlerDelay !== null) ? handlerDelay : settings.bufferFlushDelay;\n    angular.forEach(cache[handlerName], function (args, index) {\n      onTimeout(function () { fn.apply(this, args); }, index * delay);\n    });\n  };\n\n  var capitalize = function (input) {\n      return input.replace(/^./, function (match) {\n          return match.toUpperCase();\n      });\n  };\n\n  // Adds to the provider a 'register#{handlerName}' function that manages multiple plugins and buffer flushing.\n  var installHandlerRegisterFunction = function(handlerName){\n    var registerName = 'register'+capitalize(handlerName);\n    provider[registerName] = function(fn){\n      register(handlerName, fn);\n    };\n    api[handlerName] = updateHandlers(handlerName, bufferedHandler(handlerName));\n  };\n\n  // Set up register functions for each known handler\n  angular.forEach(knownHandlers, installHandlerRegisterFunction);\n  return provider;\n})\n\n.run(['$rootScope', '$window', '$analytics', '$injector', function ($rootScope, $window, $analytics, $injector) {\n  if ($analytics.settings.pageTracking.autoTrackFirstPage) {\n    $injector.invoke(['$location', function ($location) {\n      /* Only track the 'first page' if there are no routes or states on the page */\n      var noRoutesOrStates = true;\n      if ($injector.has('$route')) {\n         var $route = $injector.get('$route');\n         for (var route in $route.routes) {\n           noRoutesOrStates = false;\n           break;\n         }\n      } else if ($injector.has('$state')) {\n        var $state = $injector.get('$state');\n        for (var state in $state.get()) {\n          noRoutesOrStates = false;\n          break;\n        }\n      }\n      if (noRoutesOrStates) {\n        if ($analytics.settings.pageTracking.autoBasePath) {\n          $analytics.settings.pageTracking.basePath = $window.location.pathname;\n        }\n        if ($analytics.settings.trackRelativePath) {\n          var url = $analytics.settings.pageTracking.basePath + $location.url();\n          $analytics.pageTrack(url, $location);\n        } else {\n          $analytics.pageTrack($location.absUrl(), $location);\n        }\n      }\n    }]);\n  }\n\n  if ($analytics.settings.pageTracking.autoTrackVirtualPages) {\n    $injector.invoke(['$location', function ($location) {\n      if ($analytics.settings.pageTracking.autoBasePath) {\n        /* Add the full route to the base. */\n        $analytics.settings.pageTracking.basePath = $window.location.pathname + \"#\";\n      }\n      if ($injector.has('$route')) {\n        $rootScope.$on('$routeChangeSuccess', function (event, current) {\n          if (current && (current.$$route||current).redirectTo) return;\n          var url = $analytics.settings.pageTracking.basePath + $location.url();\n          $analytics.pageTrack(url, $location);\n        });\n      }\n      if ($injector.has('$state')) {\n        $rootScope.$on('$stateChangeSuccess', function (event, current) {\n          var url = $analytics.settings.pageTracking.basePath + $location.url();\n          $analytics.pageTrack(url, $location);\n        });\n      }\n    }]);\n  }\n  if ($analytics.settings.developerMode) {\n    angular.forEach($analytics, function(attr, name) {\n      if (typeof attr === 'function') {\n        $analytics[name] = function(){};\n      }\n    });\n  }\n}])\n\n.directive('analyticsOn', ['$analytics', function ($analytics) {\n  function isCommand(element) {\n    return ['a:','button:','button:button','button:submit','input:button','input:submit'].indexOf(\n      element.tagName.toLowerCase()+':'+(element.type||'')) >= 0;\n  }\n\n  function inferEventType(element) {\n    if (isCommand(element)) return 'click';\n    return 'click';\n  }\n\n  function inferEventName(element) {\n    if (isCommand(element)) return element.innerText || element.value;\n    return element.id || element.name || element.tagName;\n  }\n\n  function isProperty(name) {\n    return name.substr(0, 9) === 'analytics' && ['On', 'Event', 'If', 'Properties', 'EventType'].indexOf(name.substr(9)) === -1;\n  }\n\n  function propertyName(name) {\n    var s = name.slice(9); // slice off the 'analytics' prefix\n    if (typeof s !== 'undefined' && s!==null && s.length > 0) {\n      return s.substring(0, 1).toLowerCase() + s.substring(1);\n    }\n    else {\n      return s;\n    }\n  }\n\n  return {\n    restrict: 'A',\n    link: function ($scope, $element, $attrs) {\n      var eventType = $attrs.analyticsOn || inferEventType($element[0]);\n      var trackingData = {};\n\n      angular.forEach($attrs.$attr, function(attr, name) {\n        if (isProperty(name)) {\n          trackingData[propertyName(name)] = $attrs[name];\n          $attrs.$observe(name, function(value){\n            trackingData[propertyName(name)] = value;\n          });\n        }\n      });\n\n      angular.element($element[0]).bind(eventType, function ($event) {\n        var eventName = $attrs.analyticsEvent || inferEventName($element[0]);\n        trackingData.eventType = $event.type;\n\n        if($attrs.analyticsIf){\n          if(! $scope.$eval($attrs.analyticsIf)){\n            return; // Cancel this event if we don't pass the analytics-if condition\n          }\n        }\n        // Allow components to pass through an expression that gets merged on to the event properties\n        // eg. analytics-properites='myComponentScope.someConfigExpression.$analyticsProperties'\n        if($attrs.analyticsProperties){\n          angular.extend(trackingData, $scope.$eval($attrs.analyticsProperties));\n        }\n        $analytics.eventTrack(eventName, trackingData);\n      });\n    }\n  };\n}]);\n})(angular);\n",
    "/**\n * Autofill event polyfill ##version:1.0.0##\n * (c) 2014 Google, Inc.\n * License: MIT\n */\n(function(window) {\n  var $ = window.jQuery || window.angular.element;\n  var rootElement = window.document.documentElement,\n    $rootElement = $(rootElement);\n\n  addGlobalEventListener('change', markValue);\n  addValueChangeByJsListener(markValue);\n\n  $.prototype.checkAndTriggerAutoFillEvent = jqCheckAndTriggerAutoFillEvent;\n\n  // Need to use blur and not change event\n  // as Chrome does not fire change events in all cases an input is changed\n  // (e.g. when starting to type and then finish the input by auto filling a username)\n  addGlobalEventListener('blur', function(target) {\n    // setTimeout needed for Chrome as it fills other\n    // form fields a little later...\n    window.setTimeout(function() {\n      findParentForm(target).find('input').checkAndTriggerAutoFillEvent();\n    }, 20);\n  });\n\n  window.document.addEventListener('DOMContentLoaded', function() {\n    // mark all values that are present when the DOM is ready.\n    // We don't need to trigger a change event here,\n    // as js libs start with those values already being set!\n    forEach(document.getElementsByTagName('input'), markValue);\n\n    // The timeout is needed for Chrome as it auto fills\n    // login forms some time after DOMContentLoaded!\n    window.setTimeout(function() {\n      $rootElement.find('input').checkAndTriggerAutoFillEvent();\n    }, 200);\n  }, false);\n\n  return;\n\n  // ----------\n\n  function jqCheckAndTriggerAutoFillEvent() {\n    var i, el;\n    for (i=0; i<this.length; i++) {\n      el = this[i];\n      if (!valueMarked(el)) {\n        markValue(el);\n        triggerChangeEvent(el);\n      }\n    }\n  }\n\n  function valueMarked(el) {\n    if (! (\"$$currentValue\" in el) ) {\n      // First time we see an element we take it's value attribute\n      // as real value. This might have been filled in the backend,\n      // ...\n      // Note: it's important to not use the value property here!\n      el.$$currentValue = el.getAttribute('value');\n    }\n\n    var val = el.value,\n         $$currentValue = el.$$currentValue;\n    if (!val && !$$currentValue) {\n      return true;\n    }\n    return val === $$currentValue;\n  }\n\n  function markValue(el) {\n    el.$$currentValue = el.value;\n  }\n\n  function addValueChangeByJsListener(listener) {\n    var jq = window.jQuery || window.angular.element,\n        jqProto = jq.prototype;\n    var _val = jqProto.val;\n    jqProto.val = function(newValue) {\n      var res = _val.apply(this, arguments);\n      if (arguments.length > 0) {\n        forEach(this, function(el) {\n          listener(el, newValue);\n        });\n      }\n      return res;\n    };\n  }\n\n  function addGlobalEventListener(eventName, listener) {\n    // Use a capturing event listener so that\n    // we also get the event when it's stopped!\n    // Also, the blur event does not bubble.\n    rootElement.addEventListener(eventName, onEvent, true);\n\n    function onEvent(event) {\n      var target = event.target;\n      listener(target);\n    }\n  }\n\n  function findParentForm(el) {\n    while (el) {\n      if (el.nodeName === 'FORM') {\n        return $(el);\n      }\n      el = el.parentNode;\n    }\n    return $();\n  }\n\n  function forEach(arr, listener) {\n    if (arr.forEach) {\n      return arr.forEach(listener);\n    }\n    var i;\n    for (i=0; i<arr.length; i++) {\n      listener(arr[i]);\n    }\n  }\n\n  function triggerChangeEvent(element) {\n    var doc = window.document;\n    var event = doc.createEvent(\"HTMLEvents\");\n    event.initEvent(\"change\", true, true);\n    element.dispatchEvent(event);\n  }\n\n\n\n})(window);\n",
    "/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n",
    "var hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar undefined;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\t'use strict';\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\n\tvar has_is_property_of_method = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {}\n\n\treturn key === undefined || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\t'use strict';\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if ((typeof target !== 'object' && typeof target !== 'function') || target == null) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n",
    "if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n",
    "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n",
    "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n",
    "var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n",
    "var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n",
    "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n",
    "var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n",
    "var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n",
    "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n",
    "/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n",
    "var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n",
    "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n",
    "var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n",
    "//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n/*global window, require, define */\n(function(_window) {\n  'use strict';\n\n  // Unique ID creation requires a high quality random # generator.  We feature\n  // detect to determine the best RNG source, normalizing to a function that\n  // returns 128-bits of randomness, since that's what's usually required\n  var _rng, _mathRNG, _nodeRNG, _whatwgRNG, _previousRoot;\n\n  function setupBrowser() {\n    // Allow for MSIE11 msCrypto\n    var _crypto = _window.crypto || _window.msCrypto;\n\n    if (!_rng && _crypto && _crypto.getRandomValues) {\n      // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n      //\n      // Moderately fast, high quality\n      try {\n        var _rnds8 = new Uint8Array(16);\n        _whatwgRNG = _rng = function whatwgRNG() {\n          _crypto.getRandomValues(_rnds8);\n          return _rnds8;\n        };\n        _rng();\n      } catch(e) {}\n    }\n\n    if (!_rng) {\n      // Math.random()-based (RNG)\n      //\n      // If all else fails, use Math.random().  It's fast, but is of unspecified\n      // quality.\n      var  _rnds = new Array(16);\n      _mathRNG = _rng = function() {\n        for (var i = 0, r; i < 16; i++) {\n          if ((i & 0x03) === 0) { r = Math.random() * 0x100000000; }\n          _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n        }\n\n        return _rnds;\n      };\n      if ('undefined' !== typeof console && console.warn) {\n        console.warn(\"[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()\");\n      }\n    }\n  }\n\n  function setupNode() {\n    // Node.js crypto-based RNG - http://nodejs.org/docs/v0.6.2/api/crypto.html\n    //\n    // Moderately fast, high quality\n    if ('function' === typeof require) {\n      try {\n        var _rb = require('crypto').randomBytes;\n        _nodeRNG = _rng = _rb && function() {return _rb(16);};\n        _rng();\n      } catch(e) {}\n    }\n  }\n\n  if (_window) {\n    setupBrowser();\n  } else {\n    setupNode();\n  }\n\n  // Buffer class to use\n  var BufferClass = ('function' === typeof Buffer) ? Buffer : Array;\n\n  // Maps for number <-> hex string conversion\n  var _byteToHex = [];\n  var _hexToByte = {};\n  for (var i = 0; i < 256; i++) {\n    _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n    _hexToByte[_byteToHex[i]] = i;\n  }\n\n  // **`parse()` - Parse a UUID into it's component bytes**\n  function parse(s, buf, offset) {\n    var i = (buf && offset) || 0, ii = 0;\n\n    buf = buf || [];\n    s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n      if (ii < 16) { // Don't overflow!\n        buf[i + ii++] = _hexToByte[oct];\n      }\n    });\n\n    // Zero out remaining bytes if string was short\n    while (ii < 16) {\n      buf[i + ii++] = 0;\n    }\n\n    return buf;\n  }\n\n  // **`unparse()` - Convert UUID byte array (ala parse()) into a string**\n  function unparse(buf, offset) {\n    var i = offset || 0, bth = _byteToHex;\n    return  bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]];\n  }\n\n  // **`v1()` - Generate time-based UUID**\n  //\n  // Inspired by https://github.com/LiosK/UUID.js\n  // and http://docs.python.org/library/uuid.html\n\n  // random #'s we need to init node and clockseq\n  var _seedBytes = _rng();\n\n  // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n  var _nodeId = [\n    _seedBytes[0] | 0x01,\n    _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n  ];\n\n  // Per 4.2.2, randomize (14 bit) clockseq\n  var _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n  // Previous uuid creation time\n  var _lastMSecs = 0, _lastNSecs = 0;\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v1(options, buf, offset) {\n    var i = buf && offset || 0;\n    var b = buf || [];\n\n    options = options || {};\n\n    var clockseq = (options.clockseq != null) ? options.clockseq : _clockseq;\n\n    // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n    // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n    // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n    // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n    var msecs = (options.msecs != null) ? options.msecs : new Date().getTime();\n\n    // Per 4.2.1.2, use count of uuid's generated during the current clock\n    // cycle to simulate higher resolution clock\n    var nsecs = (options.nsecs != null) ? options.nsecs : _lastNSecs + 1;\n\n    // Time since last uuid creation (in msecs)\n    var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n    // Per 4.2.1.2, Bump clockseq on clock regression\n    if (dt < 0 && options.clockseq == null) {\n      clockseq = clockseq + 1 & 0x3fff;\n    }\n\n    // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n    // time interval\n    if ((dt < 0 || msecs > _lastMSecs) && options.nsecs == null) {\n      nsecs = 0;\n    }\n\n    // Per 4.2.1.2 Throw error if too many uuids are requested\n    if (nsecs >= 10000) {\n      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n    }\n\n    _lastMSecs = msecs;\n    _lastNSecs = nsecs;\n    _clockseq = clockseq;\n\n    // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n    msecs += 12219292800000;\n\n    // `time_low`\n    var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n    b[i++] = tl >>> 24 & 0xff;\n    b[i++] = tl >>> 16 & 0xff;\n    b[i++] = tl >>> 8 & 0xff;\n    b[i++] = tl & 0xff;\n\n    // `time_mid`\n    var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n    b[i++] = tmh >>> 8 & 0xff;\n    b[i++] = tmh & 0xff;\n\n    // `time_high_and_version`\n    b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n    b[i++] = tmh >>> 16 & 0xff;\n\n    // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n    b[i++] = clockseq >>> 8 | 0x80;\n\n    // `clock_seq_low`\n    b[i++] = clockseq & 0xff;\n\n    // `node`\n    var node = options.node || _nodeId;\n    for (var n = 0; n < 6; n++) {\n      b[i + n] = node[n];\n    }\n\n    return buf ? buf : unparse(b);\n  }\n\n  // **`v4()` - Generate random UUID**\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v4(options, buf, offset) {\n    // Deprecated - 'format' argument, as supported in v1.2\n    var i = buf && offset || 0;\n\n    if (typeof(options) === 'string') {\n      buf = (options === 'binary') ? new BufferClass(16) : null;\n      options = null;\n    }\n    options = options || {};\n\n    var rnds = options.random || (options.rng || _rng)();\n\n    // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n    // Copy bytes to buffer, if provided\n    if (buf) {\n      for (var ii = 0; ii < 16; ii++) {\n        buf[i + ii] = rnds[ii];\n      }\n    }\n\n    return buf || unparse(rnds);\n  }\n\n  // Export public API\n  var uuid = v4;\n  uuid.v1 = v1;\n  uuid.v4 = v4;\n  uuid.parse = parse;\n  uuid.unparse = unparse;\n  uuid.BufferClass = BufferClass;\n  uuid._rng = _rng;\n  uuid._mathRNG = _mathRNG;\n  uuid._nodeRNG = _nodeRNG;\n  uuid._whatwgRNG = _whatwgRNG;\n\n  if (('undefined' !== typeof module) && module.exports) {\n    // Publish as node.js module\n    module.exports = uuid;\n  } else if (typeof define === 'function' && define.amd) {\n    // Publish as AMD module\n    define(function() {return uuid;});\n\n\n  } else {\n    // Publish as global (in browsers)\n    _previousRoot = _window.uuid;\n\n    // **`noConflict()` - (browser only) to reset global 'uuid' var**\n    uuid.noConflict = function() {\n      _window.uuid = _previousRoot;\n      return uuid;\n    };\n\n    _window.uuid = uuid;\n  }\n})('undefined' !== typeof window ? window : null);\n",
    "// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n",
    "'use strict';\nvar strictUriEncode = require('strict-uri-encode');\n\nexports.extract = function (str) {\n\treturn str.split('?')[1] || '';\n};\n\nexports.parse = function (str) {\n\tif (typeof str !== 'string') {\n\t\treturn {};\n\t}\n\n\tstr = str.trim().replace(/^(\\?|#|&)/, '');\n\n\tif (!str) {\n\t\treturn {};\n\t}\n\n\treturn str.split('&').reduce(function (ret, param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\tkey = decodeURIComponent(key);\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeURIComponent(val);\n\n\t\tif (!ret.hasOwnProperty(key)) {\n\t\t\tret[key] = val;\n\t\t} else if (Array.isArray(ret[key])) {\n\t\t\tret[key].push(val);\n\t\t} else {\n\t\t\tret[key] = [ret[key], val];\n\t\t}\n\n\t\treturn ret;\n\t}, {});\n};\n\nexports.stringify = function (obj) {\n\treturn obj ? Object.keys(obj).sort().map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn key;\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\treturn val.slice().sort().map(function (val2) {\n\t\t\t\treturn strictUriEncode(key) + '=' + strictUriEncode(val2);\n\t\t\t}).join('&');\n\t\t}\n\n\t\treturn strictUriEncode(key) + '=' + strictUriEncode(val);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n",
    "/**\n * Angular.js plugin\n *\n * Provides an $exceptionHandler for Angular.js\n */\nvar wrappedCallback = require('../src/utils').wrappedCallback;\n\n// See https://github.com/angular/angular.js/blob/v1.4.7/src/minErr.js\nvar angularPattern = /^\\[((?:[$a-zA-Z0-9]+:)?(?:[$a-zA-Z0-9]+))\\] (.*?)\\n?(\\S+)$/;\nvar moduleName = 'ngRaven';\n\nfunction angularPlugin(Raven, angular) {\n  angular = angular || window.angular;\n\n  if (!angular) return;\n\n  function RavenProvider() {\n    this.$get = [\n      '$window',\n      function($window) {\n        return Raven;\n      }\n    ];\n  }\n\n  function ExceptionHandlerProvider($provide) {\n    $provide.decorator('$exceptionHandler', ['Raven', '$delegate', exceptionHandler]);\n  }\n\n  function exceptionHandler(R, $delegate) {\n    return function(ex, cause) {\n      R.captureException(ex, {\n        extra: {cause: cause}\n      });\n      $delegate(ex, cause);\n    };\n  }\n\n  angular\n    .module(moduleName, [])\n    .provider('Raven', RavenProvider)\n    .config(['$provide', ExceptionHandlerProvider]);\n\n  Raven.setDataCallback(\n    wrappedCallback(function(data) {\n      return angularPlugin._normalizeData(data);\n    })\n  );\n}\n\nangularPlugin._normalizeData = function(data) {\n  // We only care about mutating an exception\n  var exception = data.exception;\n  if (exception) {\n    exception = exception.values[0];\n    var matches = angularPattern.exec(exception.value);\n\n    if (matches) {\n      // This type now becomes something like: $rootScope:inprog\n      exception.type = matches[1];\n      exception.value = matches[2];\n\n      data.message = exception.type + ': ' + exception.value;\n      // auto set a new tag specifically for the angular error url\n      data.extra.angularDocs = matches[3].substr(0, 250);\n    }\n  }\n\n  return data;\n};\n\nangularPlugin.moduleName = moduleName;\n\nmodule.exports = angularPlugin;\n",
    "var _window =\n  typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction isObject(what) {\n  return typeof what === 'object' && what !== null;\n}\n\n// Yanked from https://git.io/vS8DV re-used under CC0\n// with some tiny modifications\nfunction isError(value) {\n  switch ({}.toString.call(value)) {\n    case '[object Error]':\n      return true;\n    case '[object Exception]':\n      return true;\n    case '[object DOMException]':\n      return true;\n    default:\n      return value instanceof Error;\n  }\n}\n\nfunction isErrorEvent(value) {\n  return supportsErrorEvent() && {}.toString.call(value) === '[object ErrorEvent]';\n}\n\nfunction isUndefined(what) {\n  return what === void 0;\n}\n\nfunction isFunction(what) {\n  return typeof what === 'function';\n}\n\nfunction isPlainObject(what) {\n  return Object.prototype.toString.call(what) === '[object Object]';\n}\n\nfunction isString(what) {\n  return Object.prototype.toString.call(what) === '[object String]';\n}\n\nfunction isArray(what) {\n  return Object.prototype.toString.call(what) === '[object Array]';\n}\n\nfunction isEmptyObject(what) {\n  if (!isPlainObject(what)) return false;\n\n  for (var _ in what) {\n    if (what.hasOwnProperty(_)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction supportsErrorEvent() {\n  try {\n    new ErrorEvent(''); // eslint-disable-line no-new\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction supportsFetch() {\n  if (!('fetch' in _window)) return false;\n\n  try {\n    new Headers(); // eslint-disable-line no-new\n    new Request(''); // eslint-disable-line no-new\n    new Response(); // eslint-disable-line no-new\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction wrappedCallback(callback) {\n  function dataCallback(data, original) {\n    var normalizedData = callback(data) || data;\n    if (original) {\n      return original(normalizedData) || normalizedData;\n    }\n    return normalizedData;\n  }\n\n  return dataCallback;\n}\n\nfunction each(obj, callback) {\n  var i, j;\n\n  if (isUndefined(obj.length)) {\n    for (i in obj) {\n      if (hasKey(obj, i)) {\n        callback.call(null, i, obj[i]);\n      }\n    }\n  } else {\n    j = obj.length;\n    if (j) {\n      for (i = 0; i < j; i++) {\n        callback.call(null, i, obj[i]);\n      }\n    }\n  }\n}\n\nfunction objectMerge(obj1, obj2) {\n  if (!obj2) {\n    return obj1;\n  }\n  each(obj2, function(key, value) {\n    obj1[key] = value;\n  });\n  return obj1;\n}\n\n/**\n * This function is only used for react-native.\n * react-native freezes object that have already been sent over the\n * js bridge. We need this function in order to check if the object is frozen.\n * So it's ok that objectFrozen returns false if Object.isFrozen is not\n * supported because it's not relevant for other \"platforms\". See related issue:\n * https://github.com/getsentry/react-native-sentry/issues/57\n */\nfunction objectFrozen(obj) {\n  if (!Object.isFrozen) {\n    return false;\n  }\n  return Object.isFrozen(obj);\n}\n\nfunction truncate(str, max) {\n  return !max || str.length <= max ? str : str.substr(0, max) + '\\u2026';\n}\n\n/**\n * hasKey, a better form of hasOwnProperty\n * Example: hasKey(MainHostObject, property) === true/false\n *\n * @param {Object} host object to check property\n * @param {string} key to check\n */\nfunction hasKey(object, key) {\n  return Object.prototype.hasOwnProperty.call(object, key);\n}\n\nfunction joinRegExp(patterns) {\n  // Combine an array of regular expressions and strings into one large regexp\n  // Be mad.\n  var sources = [],\n    i = 0,\n    len = patterns.length,\n    pattern;\n\n  for (; i < len; i++) {\n    pattern = patterns[i];\n    if (isString(pattern)) {\n      // If it's a string, we need to escape it\n      // Taken from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\n      sources.push(pattern.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1'));\n    } else if (pattern && pattern.source) {\n      // If it's a regexp already, we want to extract the source\n      sources.push(pattern.source);\n    }\n    // Intentionally skip other cases\n  }\n  return new RegExp(sources.join('|'), 'i');\n}\n\nfunction urlencode(o) {\n  var pairs = [];\n  each(o, function(key, value) {\n    pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n  });\n  return pairs.join('&');\n}\n\n// borrowed from https://tools.ietf.org/html/rfc3986#appendix-B\n// intentionally using regex and not <a/> href parsing trick because React Native and other\n// environments where DOM might not be available\nfunction parseUrl(url) {\n  if (typeof url !== 'string') return {};\n  var match = url.match(/^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/);\n\n  // coerce to undefined values to empty string so we don't get 'undefined'\n  var query = match[6] || '';\n  var fragment = match[8] || '';\n  return {\n    protocol: match[2],\n    host: match[4],\n    path: match[5],\n    relative: match[5] + query + fragment // everything minus origin\n  };\n}\nfunction uuid4() {\n  var crypto = _window.crypto || _window.msCrypto;\n\n  if (!isUndefined(crypto) && crypto.getRandomValues) {\n    // Use window.crypto API if available\n    // eslint-disable-next-line no-undef\n    var arr = new Uint16Array(8);\n    crypto.getRandomValues(arr);\n\n    // set 4 in byte 7\n    arr[3] = (arr[3] & 0xfff) | 0x4000;\n    // set 2 most significant bits of byte 9 to '10'\n    arr[4] = (arr[4] & 0x3fff) | 0x8000;\n\n    var pad = function(num) {\n      var v = num.toString(16);\n      while (v.length < 4) {\n        v = '0' + v;\n      }\n      return v;\n    };\n\n    return (\n      pad(arr[0]) +\n      pad(arr[1]) +\n      pad(arr[2]) +\n      pad(arr[3]) +\n      pad(arr[4]) +\n      pad(arr[5]) +\n      pad(arr[6]) +\n      pad(arr[7])\n    );\n  } else {\n    // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n    return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = (Math.random() * 16) | 0,\n        v = c === 'x' ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n}\n\n/**\n * Given a child DOM element, returns a query-selector statement describing that\n * and its ancestors\n * e.g. [HTMLElement] => body > div > input#foo.btn[name=baz]\n * @param elem\n * @returns {string}\n */\nfunction htmlTreeAsString(elem) {\n  /* eslint no-extra-parens:0*/\n  var MAX_TRAVERSE_HEIGHT = 5,\n    MAX_OUTPUT_LEN = 80,\n    out = [],\n    height = 0,\n    len = 0,\n    separator = ' > ',\n    sepLength = separator.length,\n    nextStr;\n\n  while (elem && height++ < MAX_TRAVERSE_HEIGHT) {\n    nextStr = htmlElementAsString(elem);\n    // bail out if\n    // - nextStr is the 'html' element\n    // - the length of the string that would be created exceeds MAX_OUTPUT_LEN\n    //   (ignore this limit if we are on the first iteration)\n    if (\n      nextStr === 'html' ||\n      (height > 1 && len + out.length * sepLength + nextStr.length >= MAX_OUTPUT_LEN)\n    ) {\n      break;\n    }\n\n    out.push(nextStr);\n\n    len += nextStr.length;\n    elem = elem.parentNode;\n  }\n\n  return out.reverse().join(separator);\n}\n\n/**\n * Returns a simple, query-selector representation of a DOM element\n * e.g. [HTMLElement] => input#foo.btn[name=baz]\n * @param HTMLElement\n * @returns {string}\n */\nfunction htmlElementAsString(elem) {\n  var out = [],\n    className,\n    classes,\n    key,\n    attr,\n    i;\n\n  if (!elem || !elem.tagName) {\n    return '';\n  }\n\n  out.push(elem.tagName.toLowerCase());\n  if (elem.id) {\n    out.push('#' + elem.id);\n  }\n\n  className = elem.className;\n  if (className && isString(className)) {\n    classes = className.split(/\\s+/);\n    for (i = 0; i < classes.length; i++) {\n      out.push('.' + classes[i]);\n    }\n  }\n  var attrWhitelist = ['type', 'name', 'title', 'alt'];\n  for (i = 0; i < attrWhitelist.length; i++) {\n    key = attrWhitelist[i];\n    attr = elem.getAttribute(key);\n    if (attr) {\n      out.push('[' + key + '=\"' + attr + '\"]');\n    }\n  }\n  return out.join('');\n}\n\n/**\n * Returns true if either a OR b is truthy, but not both\n */\nfunction isOnlyOneTruthy(a, b) {\n  return !!(!!a ^ !!b);\n}\n\n/**\n * Returns true if both parameters are undefined\n */\nfunction isBothUndefined(a, b) {\n  return isUndefined(a) && isUndefined(b);\n}\n\n/**\n * Returns true if the two input exception interfaces have the same content\n */\nfunction isSameException(ex1, ex2) {\n  if (isOnlyOneTruthy(ex1, ex2)) return false;\n\n  ex1 = ex1.values[0];\n  ex2 = ex2.values[0];\n\n  if (ex1.type !== ex2.type || ex1.value !== ex2.value) return false;\n\n  // in case both stacktraces are undefined, we can't decide so default to false\n  if (isBothUndefined(ex1.stacktrace, ex2.stacktrace)) return false;\n\n  return isSameStacktrace(ex1.stacktrace, ex2.stacktrace);\n}\n\n/**\n * Returns true if the two input stack trace interfaces have the same content\n */\nfunction isSameStacktrace(stack1, stack2) {\n  if (isOnlyOneTruthy(stack1, stack2)) return false;\n\n  var frames1 = stack1.frames;\n  var frames2 = stack2.frames;\n\n  // Exit early if frame count differs\n  if (frames1.length !== frames2.length) return false;\n\n  // Iterate through every frame; bail out if anything differs\n  var a, b;\n  for (var i = 0; i < frames1.length; i++) {\n    a = frames1[i];\n    b = frames2[i];\n    if (\n      a.filename !== b.filename ||\n      a.lineno !== b.lineno ||\n      a.colno !== b.colno ||\n      a['function'] !== b['function']\n    )\n      return false;\n  }\n  return true;\n}\n\n/**\n * Polyfill a method\n * @param obj object e.g. `document`\n * @param name method name present on object e.g. `addEventListener`\n * @param replacement replacement function\n * @param track {optional} record instrumentation to an array\n */\nfunction fill(obj, name, replacement, track) {\n  var orig = obj[name];\n  obj[name] = replacement(orig);\n  obj[name].__raven__ = true;\n  obj[name].__orig__ = orig;\n  if (track) {\n    track.push([obj, name, orig]);\n  }\n}\n\nmodule.exports = {\n  isObject: isObject,\n  isError: isError,\n  isErrorEvent: isErrorEvent,\n  isUndefined: isUndefined,\n  isFunction: isFunction,\n  isPlainObject: isPlainObject,\n  isString: isString,\n  isArray: isArray,\n  isEmptyObject: isEmptyObject,\n  supportsErrorEvent: supportsErrorEvent,\n  supportsFetch: supportsFetch,\n  wrappedCallback: wrappedCallback,\n  each: each,\n  objectMerge: objectMerge,\n  truncate: truncate,\n  objectFrozen: objectFrozen,\n  hasKey: hasKey,\n  joinRegExp: joinRegExp,\n  urlencode: urlencode,\n  uuid4: uuid4,\n  htmlTreeAsString: htmlTreeAsString,\n  htmlElementAsString: htmlElementAsString,\n  isSameException: isSameException,\n  isSameStacktrace: isSameStacktrace,\n  parseUrl: parseUrl,\n  fill: fill\n};\n",
    "'use strict';\n\nexports.__esModule = true;\nfunction createThunkMiddleware(extraArgument) {\n  return function (_ref) {\n    var dispatch = _ref.dispatch,\n        getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        if (typeof action === 'function') {\n          return action(dispatch, getState, extraArgument);\n        }\n\n        return next(action);\n      };\n    };\n  };\n}\n\nvar thunk = createThunkMiddleware();\nthunk.withExtraArgument = createThunkMiddleware;\n\nexports['default'] = thunk;",
    "'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = applyMiddleware;\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function (reducer, preloadedState, enhancer) {\n      var store = createStore(reducer, preloadedState, enhancer);\n      var _dispatch = store.dispatch;\n      var chain = [];\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch(action) {\n          return _dispatch(action);\n        }\n      };\n      chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = _compose2['default'].apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}",
    "'use strict';\n\nexports.__esModule = true;\nexports['default'] = bindActionCreators;\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(undefined, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}",
    "'use strict';\n\nexports.__esModule = true;\nexports['default'] = combineReducers;\n\nvar _createStore = require('./createStore');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _warning = require('./utils/warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionName = actionType && '\"' + actionType.toString() + '\"' || 'an action';\n\n  return 'Given action ' + actionName + ', reducer \"' + key + '\" returned undefined. ' + 'To ignore an action, you must explicitly return the previous state. ' + 'If you want this reducer to hold no value, you can return null instead of undefined.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === _createStore.ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!(0, _isPlainObject2['default'])(inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: _createStore.ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined. If you don\\'t want to set a value for this reducer, ' + 'you can use null instead of undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + _createStore.ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined, but can be null.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        (0, _warning2['default'])('No reducer provided for key \"' + key + '\"');\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  var unexpectedKeyCache = void 0;\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError = void 0;\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments[1];\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        (0, _warning2['default'])(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}",
    "\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = compose;\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(undefined, arguments));\n    };\n  });\n}",
    "'use strict';\n\nexports.__esModule = true;\nexports.ActionTypes = undefined;\nexports['default'] = createStore;\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _symbolObservable = require('symbol-observable');\n\nvar _symbolObservable2 = _interopRequireDefault(_symbolObservable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar ActionTypes = exports.ActionTypes = {\n  INIT: '@@redux/INIT'\n\n  /**\n   * Creates a Redux store that holds the state tree.\n   * The only way to change the data in the store is to call `dispatch()` on it.\n   *\n   * There should only be a single store in your app. To specify how different\n   * parts of the state tree respond to actions, you may combine several reducers\n   * into a single reducer function by using `combineReducers`.\n   *\n   * @param {Function} reducer A function that returns the next state tree, given\n   * the current state tree and the action to handle.\n   *\n   * @param {any} [preloadedState] The initial state. You may optionally specify it\n   * to hydrate the state from the server in universal apps, or to restore a\n   * previously serialized user session.\n   * If you use `combineReducers` to produce the root reducer function, this must be\n   * an object with the same shape as `combineReducers` keys.\n   *\n   * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n   * to enhance the store with third-party capabilities such as middleware,\n   * time travel, persistence, etc. The only store enhancer that ships with Redux\n   * is `applyMiddleware()`.\n   *\n   * @returns {Store} A Redux store that lets you read the state, dispatch actions\n   * and subscribe to changes.\n   */\n};function createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!(0, _isPlainObject2['default'])(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.INIT });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object') {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[_symbolObservable2['default']] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[_symbolObservable2['default']] = observable, _ref2;\n}",
    "'use strict';\n\nexports.__esModule = true;\nexports.compose = exports.applyMiddleware = exports.bindActionCreators = exports.combineReducers = exports.createStore = undefined;\n\nvar _createStore = require('./createStore');\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _combineReducers = require('./combineReducers');\n\nvar _combineReducers2 = _interopRequireDefault(_combineReducers);\n\nvar _bindActionCreators = require('./bindActionCreators');\n\nvar _bindActionCreators2 = _interopRequireDefault(_bindActionCreators);\n\nvar _applyMiddleware = require('./applyMiddleware');\n\nvar _applyMiddleware2 = _interopRequireDefault(_applyMiddleware);\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _warning = require('./utils/warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/*\n* This is a dummy function to check if the function name has been altered by minification.\n* If the function has been minified and NODE_ENV !== 'production', warn the user.\n*/\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  (0, _warning2['default'])('You are currently using minified code outside of NODE_ENV === \\'production\\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexports.createStore = _createStore2['default'];\nexports.combineReducers = _combineReducers2['default'];\nexports.bindActionCreators = _bindActionCreators2['default'];\nexports.applyMiddleware = _applyMiddleware2['default'];\nexports.compose = _compose2['default'];",
    "'use strict';\n\nexports.__esModule = true;\nexports['default'] = warning;\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n    /* eslint-disable no-empty */\n  } catch (e) {}\n  /* eslint-enable no-empty */\n}",
    "module.exports = require('./lib/retry');",
    "var RetryOperation = require('./retry_operation');\n\nexports.operation = function(options) {\n  var retryForever = false;\n  if (options && options.forever === true) retryForever = true;\n  var timeouts = exports.timeouts(options);\n  return new RetryOperation(timeouts, retryForever);\n};\n\nexports.timeouts = function(options) {\n  if (options instanceof Array) {\n    return [].concat(options);\n  }\n\n  var opts = {\n    retries: 10,\n    factor: 2,\n    minTimeout: 1 * 1000,\n    maxTimeout: Infinity,\n    randomize: false\n  };\n  for (var key in options) {\n    opts[key] = options[key];\n  }\n\n  if (opts.minTimeout > opts.maxTimeout) {\n    throw new Error('minTimeout is greater than maxTimeout');\n  }\n\n  var timeouts = [];\n  for (var i = 0; i < opts.retries; i++) {\n    timeouts.push(this.createTimeout(i, opts));\n  }\n\n  // sort the array numerically ascending\n  timeouts.sort(function(a,b) {\n    return a - b;\n  });\n\n  return timeouts;\n};\n\nexports.createTimeout = function(attempt, opts) {\n  var random = (opts.randomize)\n    ? (Math.random() + 1)\n    : 1;\n\n  var timeout = Math.round(random * opts.minTimeout * Math.pow(opts.factor, attempt));\n  timeout = Math.min(timeout, opts.maxTimeout);\n\n  return timeout;\n};\n\nexports.wrap = function(obj, options, methods) {\n  if (options instanceof Array) {\n    methods = options;\n    options = null;\n  }\n\n  if (!methods) {\n    methods = [];\n    for (var key in obj) {\n      if (typeof obj[key] === 'function') {\n        methods.push(key);\n      }\n    }\n  }\n\n  for (var i = 0; i < methods.length; i++) {\n    var method   = methods[i];\n    var original = obj[method];\n\n    obj[method] = function retryWrapper() {\n      var op       = exports.operation(options);\n      var args     = Array.prototype.slice.call(arguments);\n      var callback = args.pop();\n\n      args.push(function(err) {\n        if (op.retry(err)) {\n          return;\n        }\n        if (err) {\n          arguments[0] = op.mainError();\n        }\n        callback.apply(this, arguments);\n      });\n\n      op.attempt(function() {\n        original.apply(obj, args);\n      });\n    };\n    obj[method].options = options;\n  }\n};\n",
    "function RetryOperation(timeouts, retryForever) {\n  this._timeouts = timeouts;\n  this._fn = null;\n  this._errors = [];\n  this._attempts = 1;\n  this._operationTimeout = null;\n  this._operationTimeoutCb = null;\n  this._timeout = null;\n\n  if (!!retryForever) {\n    this._cachedTimeouts = this._timeouts.slice(0);\n  }\n}\nmodule.exports = RetryOperation;\n\nRetryOperation.prototype.retry = function(err) {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n\n  if (!err) {\n    return false;\n  }\n\n  this._errors.push(err);\n\n  var timeout = this._timeouts.shift();\n  if (timeout === undefined) {\n    if (this._cachedTimeouts) {\n      // retry forever, only keep last error\n      this._errors.splice(this._errors.length - 1, this._errors.length);\n      this._timeouts = this._cachedTimeouts.slice(0);\n      timeout = this._timeouts.shift();\n    } else {\n      return false;\n    }\n  }\n\n  var self = this;\n  setTimeout(function() {\n    self._attempts++;\n\n    if (self._operationTimeoutCb) {\n      self._timeout = setTimeout(function() {\n        self._operationTimeoutCb(self._attempts);\n      }, self._operationTimeout);\n    }\n\n    self._fn(self._attempts);\n  }, timeout);\n\n  return true;\n};\n\nRetryOperation.prototype.attempt = function(fn, timeoutOps) {\n  this._fn = fn;\n\n  if (timeoutOps) {\n    if (timeoutOps.timeout) {\n      this._operationTimeout = timeoutOps.timeout;\n    }\n    if (timeoutOps.cb) {\n      this._operationTimeoutCb = timeoutOps.cb;\n    }\n  }\n\n  var self = this;\n  if (this._operationTimeoutCb) {\n    this._timeout = setTimeout(function() {\n      self._operationTimeoutCb();\n    }, self._operationTimeout);\n  }\n\n  this._fn(this._attempts);\n};\n\nRetryOperation.prototype.try = function(fn) {\n  console.log('Using RetryOperation.try() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = function(fn) {\n  console.log('Using RetryOperation.start() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = RetryOperation.prototype.try;\n\nRetryOperation.prototype.errors = function() {\n  return this._errors;\n};\n\nRetryOperation.prototype.attempts = function() {\n  return this._attempts;\n};\n\nRetryOperation.prototype.mainError = function() {\n  if (this._errors.length === 0) {\n    return null;\n  }\n\n  var counts = {};\n  var mainError = null;\n  var mainErrorCount = 0;\n\n  for (var i = 0; i < this._errors.length; i++) {\n    var error = this._errors[i];\n    var message = error.message;\n    var count = (counts[message] || 0) + 1;\n\n    counts[message] = count;\n\n    if (count >= mainErrorCount) {\n      mainError = error;\n      mainErrorCount = count;\n    }\n  }\n\n  return mainError;\n};\n",
    "var COMPLETE = 'complete',\n    CANCELED = 'canceled';\n\nfunction raf(task){\n    if('requestAnimationFrame' in window){\n        return window.requestAnimationFrame(task);\n    }\n\n    setTimeout(task, 16);\n}\n\nfunction setElementScroll(element, x, y){\n    if(element.self === element){\n        element.scrollTo(x, y);\n    }else{\n        element.scrollLeft = x;\n        element.scrollTop = y;\n    }\n}\n\nfunction getTargetScrollLocation(target, parent, align){\n    var targetPosition = target.getBoundingClientRect(),\n        parentPosition,\n        x,\n        y,\n        differenceX,\n        differenceY,\n        targetWidth,\n        targetHeight,\n        leftAlign = align && align.left != null ? align.left : 0.5,\n        topAlign = align && align.top != null ? align.top : 0.5,\n        leftOffset = align && align.leftOffset != null ? align.leftOffset : 0,\n        topOffset = align && align.topOffset != null ? align.topOffset : 0,\n        leftScalar = leftAlign,\n        topScalar = topAlign;\n\n    if(parent.self === parent){\n        targetWidth = Math.min(targetPosition.width, parent.innerWidth);\n        targetHeight = Math.min(targetPosition.height, parent.innerHeight);\n        x = targetPosition.left + parent.pageXOffset - parent.innerWidth * leftScalar + targetWidth * leftScalar;\n        y = targetPosition.top + parent.pageYOffset - parent.innerHeight * topScalar + targetHeight * topScalar;\n        x -= leftOffset;\n        y -= topOffset;\n        differenceX = x - parent.pageXOffset;\n        differenceY = y - parent.pageYOffset;\n    }else{\n        targetWidth = targetPosition.width;\n        targetHeight = targetPosition.height;\n        parentPosition = parent.getBoundingClientRect();\n        var offsetLeft = targetPosition.left - (parentPosition.left - parent.scrollLeft);\n        var offsetTop = targetPosition.top - (parentPosition.top - parent.scrollTop);\n        x = offsetLeft + (targetWidth * leftScalar) - parent.clientWidth * leftScalar;\n        y = offsetTop + (targetHeight * topScalar) - parent.clientHeight * topScalar;\n        x = Math.max(Math.min(x, parent.scrollWidth - parent.clientWidth), 0);\n        y = Math.max(Math.min(y, parent.scrollHeight - parent.clientHeight), 0);\n        x -= leftOffset;\n        y -= topOffset;\n        differenceX = x - parent.scrollLeft;\n        differenceY = y - parent.scrollTop;\n    }\n\n    return {\n        x: x,\n        y: y,\n        differenceX: differenceX,\n        differenceY: differenceY\n    };\n}\n\nfunction animate(parent){\n    raf(function(){\n        var scrollSettings = parent._scrollSettings;\n        if(!scrollSettings){\n            return;\n        }\n\n        var location = getTargetScrollLocation(scrollSettings.target, parent, scrollSettings.align),\n            time = Date.now() - scrollSettings.startTime,\n            timeValue = Math.min(1 / scrollSettings.time * time, 1);\n\n        if(\n            time > scrollSettings.time + 20\n        ){\n            setElementScroll(parent, location.x, location.y);\n            parent._scrollSettings = null;\n            return scrollSettings.end(COMPLETE);\n        }\n\n        var easeValue = 1 - scrollSettings.ease(timeValue);\n\n        setElementScroll(parent,\n            location.x - location.differenceX * easeValue,\n            location.y - location.differenceY * easeValue\n        );\n\n        animate(parent);\n    });\n}\nfunction transitionScrollTo(target, parent, settings, callback){\n    var idle = !parent._scrollSettings,\n        lastSettings = parent._scrollSettings,\n        now = Date.now(),\n        endHandler;\n\n    if(lastSettings){\n        lastSettings.end(CANCELED);\n    }\n\n    function end(endType){\n        parent._scrollSettings = null;\n        if(parent.parentElement && parent.parentElement._scrollSettings){\n            parent.parentElement._scrollSettings.end(endType);\n        }\n        callback(endType);\n        parent.removeEventListener('touchstart', endHandler);\n    }\n\n    parent._scrollSettings = {\n        startTime: lastSettings ? lastSettings.startTime : Date.now(),\n        target: target,\n        time: settings.time + (lastSettings ? now - lastSettings.startTime : 0),\n        ease: settings.ease,\n        align: settings.align,\n        end: end\n    };\n\n    endHandler = end.bind(null, CANCELED);\n    parent.addEventListener('touchstart', endHandler);\n\n    if(idle){\n        animate(parent);\n    }\n}\n\nfunction defaultIsScrollable(element){\n    return (\n        'pageXOffset' in element ||\n        (\n            element.scrollHeight !== element.clientHeight ||\n            element.scrollWidth !== element.clientWidth\n        ) &&\n        getComputedStyle(element).overflow !== 'hidden'\n    );\n}\n\nfunction defaultValidTarget(){\n    return true;\n}\n\nmodule.exports = function(target, settings, callback){\n    if(!target){\n        return;\n    }\n\n    if(typeof settings === 'function'){\n        callback = settings;\n        settings = null;\n    }\n\n    if(!settings){\n        settings = {};\n    }\n\n    settings.time = isNaN(settings.time) ? 1000 : settings.time;\n    settings.ease = settings.ease || function(v){return 1 - Math.pow(1 - v, v / 2);};\n\n    var parent = target.parentElement,\n        parents = 0;\n\n    function done(endType){\n        parents--;\n        if(!parents){\n            callback && callback(endType);\n        }\n    }\n\n    var validTarget = settings.validTarget || defaultValidTarget;\n    var isScrollable = settings.isScrollable;\n\n    while(parent){\n        if(validTarget(parent, parents) && (isScrollable ? isScrollable(parent, defaultIsScrollable) : defaultIsScrollable(parent))){\n            parents++;\n            transitionScrollTo(target, parent, settings, done);\n        }\n\n        parent = parent.parentElement;\n\n        if(!parent){\n            return;\n        }\n\n        if(parent.tagName === 'BODY'){\n            parent = parent.ownerDocument;\n            parent = parent.defaultView || parent.ownerWindow;\n        }\n    }\n};\n",
    "(function() {\n  \"use strict\";\n\n  // https://github.com/facebook/react/blob/v15.0.1/src/isomorphic/classic/element/ReactElement.js#L21\n  var REACT_ELEMENT_TYPE = typeof Symbol === 'function' && Symbol.for && Symbol.for('react.element');\n  var REACT_ELEMENT_TYPE_FALLBACK = 0xeac7;\n\n  function addPropertyTo(target, methodName, value) {\n    Object.defineProperty(target, methodName, {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: value\n    });\n  }\n\n  function banProperty(target, methodName) {\n    addPropertyTo(target, methodName, function() {\n      throw new ImmutableError(\"The \" + methodName +\n        \" method cannot be invoked on an Immutable data structure.\");\n    });\n  }\n\n  var immutabilityTag = \"__immutable_invariants_hold\";\n\n  function addImmutabilityTag(target) {\n    addPropertyTo(target, immutabilityTag, true);\n  }\n\n  function isImmutable(target) {\n    if (typeof target === \"object\") {\n      return target === null || Boolean(\n        Object.getOwnPropertyDescriptor(target, immutabilityTag)\n      );\n    } else {\n      // In JavaScript, only objects are even potentially mutable.\n      // strings, numbers, null, and undefined are all naturally immutable.\n      return true;\n    }\n  }\n\n  function isEqual(a, b) {\n    // Avoid false positives due to (NaN !== NaN) evaluating to true\n    return (a === b || (a !== a && b !== b));\n  }\n\n  function isMergableObject(target) {\n    return target !== null && typeof target === \"object\" && !(Array.isArray(target)) && !(target instanceof Date);\n  }\n\n  var mutatingObjectMethods = [\n    \"setPrototypeOf\"\n  ];\n\n  var nonMutatingObjectMethods = [\n    \"keys\"\n  ];\n\n  var mutatingArrayMethods = mutatingObjectMethods.concat([\n    \"push\", \"pop\", \"sort\", \"splice\", \"shift\", \"unshift\", \"reverse\"\n  ]);\n\n  var nonMutatingArrayMethods = nonMutatingObjectMethods.concat([\n    \"map\", \"filter\", \"slice\", \"concat\", \"reduce\", \"reduceRight\"\n  ]);\n\n  var mutatingDateMethods = mutatingObjectMethods.concat([\n    \"setDate\", \"setFullYear\", \"setHours\", \"setMilliseconds\", \"setMinutes\", \"setMonth\", \"setSeconds\",\n    \"setTime\", \"setUTCDate\", \"setUTCFullYear\", \"setUTCHours\", \"setUTCMilliseconds\", \"setUTCMinutes\",\n    \"setUTCMonth\", \"setUTCSeconds\", \"setYear\"\n  ]);\n\n  function ImmutableError(message) {\n    var err       = new Error(message);\n    // TODO: Consider `Object.setPrototypeOf(err, ImmutableError);`\n    err.__proto__ = ImmutableError;\n\n    return err;\n  }\n  ImmutableError.prototype = Error.prototype;\n\n  function makeImmutable(obj, bannedMethods) {\n    // Tag it so we can quickly tell it's immutable later.\n    addImmutabilityTag(obj);\n\n    if (process.env.NODE_ENV !== \"production\") {\n      // Make all mutating methods throw exceptions.\n      for (var index in bannedMethods) {\n        if (bannedMethods.hasOwnProperty(index)) {\n          banProperty(obj, bannedMethods[index]);\n        }\n      }\n\n      // Freeze it and return it.\n      Object.freeze(obj);\n    }\n\n    return obj;\n  }\n\n  function makeMethodReturnImmutable(obj, methodName) {\n    var currentMethod = obj[methodName];\n\n    addPropertyTo(obj, methodName, function() {\n      return Immutable(currentMethod.apply(obj, arguments));\n    });\n  }\n\n  function arraySet(idx, value, config) {\n    var deep          = config && config.deep;\n\n    if (idx in this) {\n      if (deep && this[idx] !== value && isMergableObject(value) && isMergableObject(this[idx])) {\n        value = this[idx].merge(value, {deep: true, mode: 'replace'});\n      }\n      if (isEqual(this[idx], value)) {\n        return this;\n      }\n    }\n\n    var mutable = asMutableArray.call(this);\n    mutable[idx] = Immutable(value);\n    return makeImmutableArray(mutable);\n  }\n\n  var immutableEmptyArray = Immutable([]);\n\n  function arraySetIn(pth, value, config) {\n    var head = pth[0];\n\n    if (pth.length === 1) {\n      return arraySet.call(this, head, value, config);\n    } else {\n      var tail = pth.slice(1);\n      var thisHead = this[head];\n      var newValue;\n\n      if (typeof(thisHead) === \"object\" && thisHead !== null && typeof(thisHead.setIn) === \"function\") {\n        // Might (validly) be object or array\n        newValue = thisHead.setIn(tail, value);\n      } else {\n        var nextHead = tail[0];\n        // If the next path part is a number, then we are setting into an array, else an object.\n        if (nextHead !== '' && isFinite(nextHead)) {\n          newValue = arraySetIn.call(immutableEmptyArray, tail, value);\n        } else {\n          newValue = objectSetIn.call(immutableEmptyObject, tail, value);\n        }\n      }\n\n      if (head in this && thisHead === newValue) {\n        return this;\n      }\n\n      var mutable = asMutableArray.call(this);\n      mutable[head] = newValue;\n      return makeImmutableArray(mutable);\n    }\n  }\n\n  function makeImmutableArray(array) {\n    // Don't change their implementations, but wrap these functions to make sure\n    // they always return an immutable value.\n    for (var index in nonMutatingArrayMethods) {\n      if (nonMutatingArrayMethods.hasOwnProperty(index)) {\n        var methodName = nonMutatingArrayMethods[index];\n        makeMethodReturnImmutable(array, methodName);\n      }\n    }\n\n    addPropertyTo(array, \"flatMap\",  flatMap);\n    addPropertyTo(array, \"asObject\", asObject);\n    addPropertyTo(array, \"asMutable\", asMutableArray);\n    addPropertyTo(array, \"set\", arraySet);\n    addPropertyTo(array, \"setIn\", arraySetIn);\n    addPropertyTo(array, \"update\", update);\n    addPropertyTo(array, \"updateIn\", updateIn);\n\n    for(var i = 0, length = array.length; i < length; i++) {\n      array[i] = Immutable(array[i]);\n    }\n\n    return makeImmutable(array, mutatingArrayMethods);\n  }\n\n  function makeImmutableDate(date) {\n    addPropertyTo(date, \"asMutable\", asMutableDate);\n\n    return makeImmutable(date, mutatingDateMethods);\n  }\n\n  function asMutableDate() {\n    return new Date(this.getTime());\n  }\n\n  /**\n   * Effectively performs a map() over the elements in the array, using the\n   * provided iterator, except that whenever the iterator returns an array, that\n   * array's elements are added to the final result instead of the array itself.\n   *\n   * @param {function} iterator - The iterator function that will be invoked on each element in the array. It will receive three arguments: the current value, the current index, and the current object.\n   */\n  function flatMap(iterator) {\n    // Calling .flatMap() with no arguments is a no-op. Don't bother cloning.\n    if (arguments.length === 0) {\n      return this;\n    }\n\n    var result = [],\n        length = this.length,\n        index;\n\n    for (index = 0; index < length; index++) {\n      var iteratorResult = iterator(this[index], index, this);\n\n      if (Array.isArray(iteratorResult)) {\n        // Concatenate Array results into the return value we're building up.\n        result.push.apply(result, iteratorResult);\n      } else {\n        // Handle non-Array results the same way map() does.\n        result.push(iteratorResult);\n      }\n    }\n\n    return makeImmutableArray(result);\n  }\n\n  /**\n   * Returns an Immutable copy of the object without the given keys included.\n   *\n   * @param {array} keysToRemove - A list of strings representing the keys to exclude in the return value. Instead of providing a single array, this method can also be called by passing multiple strings as separate arguments.\n   */\n  function without(remove) {\n    // Calling .without() with no arguments is a no-op. Don't bother cloning.\n    if (typeof remove === \"undefined\" && arguments.length === 0) {\n      return this;\n    }\n\n    if (typeof remove !== \"function\") {\n      // If we weren't given an array, use the arguments list.\n      var keysToRemoveArray = (Array.isArray(remove)) ?\n         remove.slice() : Array.prototype.slice.call(arguments);\n\n      // Convert numeric keys to strings since that's how they'll\n      // come from the enumeration of the object.\n      keysToRemoveArray.forEach(function(el, idx, arr) {\n        if(typeof(el) === \"number\") {\n          arr[idx] = el.toString();\n        }\n      });\n\n      remove = function(val, key) {\n        return keysToRemoveArray.indexOf(key) !== -1;\n      };\n    }\n\n    var result = this.instantiateEmptyObject();\n\n    for (var key in this) {\n      if (this.hasOwnProperty(key) && remove(this[key], key) === false) {\n        result[key] = this[key];\n      }\n    }\n\n    return makeImmutableObject(result,\n      {instantiateEmptyObject: this.instantiateEmptyObject});\n  }\n\n  function asMutableArray(opts) {\n    var result = [], i, length;\n\n    if(opts && opts.deep) {\n      for(i = 0, length = this.length; i < length; i++) {\n        result.push(asDeepMutable(this[i]));\n      }\n    } else {\n      for(i = 0, length = this.length; i < length; i++) {\n        result.push(this[i]);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Effectively performs a [map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map) over the elements in the array, expecting that the iterator function\n   * will return an array of two elements - the first representing a key, the other\n   * a value. Then returns an Immutable Object constructed of those keys and values.\n   *\n   * @param {function} iterator - A function which should return an array of two elements - the first representing the desired key, the other the desired value.\n   */\n  function asObject(iterator) {\n    // If no iterator was provided, assume the identity function\n    // (suggesting this array is already a list of key/value pairs.)\n    if (typeof iterator !== \"function\") {\n      iterator = function(value) { return value; };\n    }\n\n    var result = {},\n        length = this.length,\n        index;\n\n    for (index = 0; index < length; index++) {\n      var pair  = iterator(this[index], index, this),\n          key   = pair[0],\n          value = pair[1];\n\n      result[key] = value;\n    }\n\n    return makeImmutableObject(result);\n  }\n\n  function asDeepMutable(obj) {\n    if (\n      (!obj) ||\n      (typeof obj !== 'object') ||\n      (!Object.getOwnPropertyDescriptor(obj, immutabilityTag)) ||\n      (obj instanceof Date)\n    ) { return obj; }\n    return obj.asMutable({deep: true});\n  }\n\n  function quickCopy(src, dest) {\n    for (var key in src) {\n      if (Object.getOwnPropertyDescriptor(src, key)) {\n        dest[key] = src[key];\n      }\n    }\n\n    return dest;\n  }\n\n  /**\n   * Returns an Immutable Object containing the properties and values of both\n   * this object and the provided object, prioritizing the provided object's\n   * values whenever the same key is present in both objects.\n   *\n   * @param {object} other - The other object to merge. Multiple objects can be passed as an array. In such a case, the later an object appears in that list, the higher its priority.\n   * @param {object} config - Optional config object that contains settings. Supported settings are: {deep: true} for deep merge and {merger: mergerFunc} where mergerFunc is a function\n   *                          that takes a property from both objects. If anything is returned it overrides the normal merge behaviour.\n   */\n  function merge(other, config) {\n    // Calling .merge() with no arguments is a no-op. Don't bother cloning.\n    if (arguments.length === 0) {\n      return this;\n    }\n\n    if (other === null || (typeof other !== \"object\")) {\n      throw new TypeError(\"Immutable#merge can only be invoked with objects or arrays, not \" + JSON.stringify(other));\n    }\n\n    var receivedArray = (Array.isArray(other)),\n        deep          = config && config.deep,\n        mode          = config && config.mode || 'merge',\n        merger        = config && config.merger,\n        result;\n\n    // Use the given key to extract a value from the given object, then place\n    // that value in the result object under the same key. If that resulted\n    // in a change from this object's value at that key, set anyChanges = true.\n    function addToResult(currentObj, otherObj, key) {\n      var immutableValue = Immutable(otherObj[key]);\n      var mergerResult = merger && merger(currentObj[key], immutableValue, config);\n      var currentValue = currentObj[key];\n\n      if ((result !== undefined) ||\n        (mergerResult !== undefined) ||\n        (!currentObj.hasOwnProperty(key)) ||\n        !isEqual(immutableValue, currentValue)) {\n\n        var newValue;\n\n        if (mergerResult) {\n          newValue = mergerResult;\n        } else if (deep && isMergableObject(currentValue) && isMergableObject(immutableValue)) {\n          newValue = currentValue.merge(immutableValue, config);\n        } else {\n          newValue = immutableValue;\n        }\n\n        if (!isEqual(currentValue, newValue) || !currentObj.hasOwnProperty(key)) {\n          if (result === undefined) {\n            // Make a shallow clone of the current object.\n            result = quickCopy(currentObj, currentObj.instantiateEmptyObject());\n          }\n\n          result[key] = newValue;\n        }\n      }\n    }\n\n    function clearDroppedKeys(currentObj, otherObj) {\n      for (var key in currentObj) {\n        if (!otherObj.hasOwnProperty(key)) {\n          if (result === undefined) {\n            // Make a shallow clone of the current object.\n            result = quickCopy(currentObj, currentObj.instantiateEmptyObject());\n          }\n          delete result[key];\n        }\n      }\n    }\n\n    var key;\n\n    // Achieve prioritization by overriding previous values that get in the way.\n    if (!receivedArray) {\n      // The most common use case: just merge one object into the existing one.\n      for (key in other) {\n        if (Object.getOwnPropertyDescriptor(other, key)) {\n          addToResult(this, other, key);\n        }\n      }\n      if (mode === 'replace') {\n        clearDroppedKeys(this, other);\n      }\n    } else {\n      // We also accept an Array\n      for (var index = 0, length = other.length; index < length; index++) {\n        var otherFromArray = other[index];\n\n        for (key in otherFromArray) {\n          if (otherFromArray.hasOwnProperty(key)) {\n            addToResult(result !== undefined ? result : this, otherFromArray, key);\n          }\n        }\n      }\n    }\n\n    if (result === undefined) {\n      return this;\n    } else {\n      return makeImmutableObject(result,\n        {instantiateEmptyObject: this.instantiateEmptyObject});\n    }\n  }\n\n  function objectReplace(value, config) {\n    var deep          = config && config.deep;\n\n    // Calling .replace() with no arguments is a no-op. Don't bother cloning.\n    if (arguments.length === 0) {\n      return this;\n    }\n\n    if (value === null || typeof value !== \"object\") {\n      throw new TypeError(\"Immutable#replace can only be invoked with objects or arrays, not \" + JSON.stringify(value));\n    }\n\n    return this.merge(value, {deep: deep, mode: 'replace'});\n  }\n\n  var immutableEmptyObject = Immutable({});\n\n  function objectSetIn(path, value, config) {\n    var head = path[0];\n    if (path.length === 1) {\n      return objectSet.call(this, head, value, config);\n    }\n\n    var tail = path.slice(1);\n    var newValue;\n    var thisHead = this[head];\n\n    if (this.hasOwnProperty(head) && typeof(thisHead) === \"object\" && thisHead !== null && typeof(thisHead.setIn) === \"function\") {\n      // Might (validly) be object or array\n      newValue = thisHead.setIn(tail, value);\n    } else {\n      newValue = objectSetIn.call(immutableEmptyObject, tail, value);\n    }\n\n    if (this.hasOwnProperty(head) && thisHead === newValue) {\n      return this;\n    }\n\n    var mutable = quickCopy(this, this.instantiateEmptyObject());\n    mutable[head] = newValue;\n    return makeImmutableObject(mutable, this);\n  }\n\n  function objectSet(property, value, config) {\n    var deep          = config && config.deep;\n\n    if (this.hasOwnProperty(property)) {\n      if (deep && this[property] !== value && isMergableObject(value) && isMergableObject(this[property])) {\n        value = this[property].merge(value, {deep: true, mode: 'replace'});\n      }\n      if (isEqual(this[property], value)) {\n        return this;\n      }\n    }\n\n    var mutable = quickCopy(this, this.instantiateEmptyObject());\n    mutable[property] = Immutable(value);\n    return makeImmutableObject(mutable, this);\n  }\n\n  function update(property, updater) {\n    var restArgs = Array.prototype.slice.call(arguments, 2);\n    var initialVal = this[property];\n    return this.set(property, updater.apply(initialVal, [initialVal].concat(restArgs)));\n  }\n\n  function getInPath(obj, path) {\n    /*jshint eqnull:true */\n    for (var i = 0, l = path.length; obj != null && i < l; i++) {\n      obj = obj[path[i]];\n    }\n\n    return (i && i == l) ? obj : undefined;\n  }\n\n  function updateIn(path, updater) {\n    var restArgs = Array.prototype.slice.call(arguments, 2);\n    var initialVal = getInPath(this, path);\n\n    return this.setIn(path, updater.apply(initialVal, [initialVal].concat(restArgs)));\n  }\n\n  function asMutableObject(opts) {\n    var result = this.instantiateEmptyObject(), key;\n\n    if(opts && opts.deep) {\n      for (key in this) {\n        if (this.hasOwnProperty(key)) {\n          result[key] = asDeepMutable(this[key]);\n        }\n      }\n    } else {\n      for (key in this) {\n        if (this.hasOwnProperty(key)) {\n          result[key] = this[key];\n        }\n      }\n    }\n\n    return result;\n  }\n\n  // Creates plain object to be used for cloning\n  function instantiatePlainObject() {\n    return {};\n  }\n\n  // Finalizes an object with immutable methods, freezes it, and returns it.\n  function makeImmutableObject(obj, options) {\n    var instantiateEmptyObject =\n      (options && options.instantiateEmptyObject) ?\n        options.instantiateEmptyObject : instantiatePlainObject;\n\n    addPropertyTo(obj, \"merge\", merge);\n    addPropertyTo(obj, \"replace\", objectReplace);\n    addPropertyTo(obj, \"without\", without);\n    addPropertyTo(obj, \"asMutable\", asMutableObject);\n    addPropertyTo(obj, \"instantiateEmptyObject\", instantiateEmptyObject);\n    addPropertyTo(obj, \"set\", objectSet);\n    addPropertyTo(obj, \"setIn\", objectSetIn);\n    addPropertyTo(obj, \"update\", update);\n    addPropertyTo(obj, \"updateIn\", updateIn);\n\n    return makeImmutable(obj, mutatingObjectMethods);\n  }\n\n  // Returns true if object is a valid react element\n  // https://github.com/facebook/react/blob/v15.0.1/src/isomorphic/classic/element/ReactElement.js#L326\n  function isReactElement(obj) {\n    return typeof obj === 'object' &&\n           obj !== null &&\n           (obj.$$typeof === REACT_ELEMENT_TYPE_FALLBACK || obj.$$typeof === REACT_ELEMENT_TYPE);\n  }\n\n  function Immutable(obj, options, stackRemaining) {\n    if (isImmutable(obj) || isReactElement(obj)) {\n      return obj;\n    } else if (Array.isArray(obj)) {\n      return makeImmutableArray(obj.slice());\n    } else if (obj instanceof Date) {\n      return makeImmutableDate(new Date(obj.getTime()));\n    } else {\n      // Don't freeze the object we were given; make a clone and use that.\n      var prototype = options && options.prototype;\n      var instantiateEmptyObject =\n        (!prototype || prototype === Object.prototype) ?\n          instantiatePlainObject : (function() { return Object.create(prototype); });\n      var clone = instantiateEmptyObject();\n\n      if (process.env.NODE_ENV !== \"production\") {\n        /*jshint eqnull:true */\n        if (stackRemaining == null) {\n          stackRemaining = 64;\n        }\n        if (stackRemaining <= 0) {\n          throw new ImmutableError(\"Attempt to construct Immutable from a deeply nested object was detected.\" +\n            \" Have you tried to wrap an object with circular references (e.g. React element)?\" +\n            \" See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.\");\n        }\n        stackRemaining -= 1;\n      }\n\n      for (var key in obj) {\n        if (Object.getOwnPropertyDescriptor(obj, key)) {\n          clone[key] = Immutable(obj[key], undefined, stackRemaining);\n        }\n      }\n\n      return makeImmutableObject(clone,\n        {instantiateEmptyObject: instantiateEmptyObject});\n    }\n  }\n\n  // Wrapper to allow the use of object methods as static methods of Immutable.\n  function toStatic(fn) {\n    function staticWrapper() {\n      var args = [].slice.call(arguments);\n      var self = args.shift();\n      return fn.apply(self, args);\n    }\n\n    return staticWrapper;\n  }\n\n  // Wrapper to allow the use of object methods as static methods of Immutable.\n  // with the additional condition of choosing which function to call depending\n  // if argument is an array or an object.\n  function toStaticObjectOrArray(fnObject, fnArray) {\n    function staticWrapper() {\n      var args = [].slice.call(arguments);\n      var self = args.shift();\n      if (Array.isArray(self)) {\n          return fnArray.apply(self, args);\n      } else {\n          return fnObject.apply(self, args);\n      }\n    }\n\n    return staticWrapper;\n  }\n\n  // Export the library\n  Immutable.from           = Immutable;\n  Immutable.isImmutable    = isImmutable;\n  Immutable.ImmutableError = ImmutableError;\n  Immutable.merge          = toStatic(merge);\n  Immutable.replace        = toStatic(objectReplace);\n  Immutable.without        = toStatic(without);\n  Immutable.asMutable      = toStaticObjectOrArray(asMutableObject, asMutableArray);\n  Immutable.set            = toStaticObjectOrArray(objectSet, arraySet);\n  Immutable.setIn          = toStaticObjectOrArray(objectSetIn, arraySetIn);\n  Immutable.update         = toStatic(update);\n  Immutable.updateIn       = toStatic(updateIn);\n  Immutable.flatMap        = toStatic(flatMap);\n  Immutable.asObject       = toStatic(asObject);\n\n  Object.freeze(Immutable);\n\n  /* istanbul ignore if */\n  if (typeof module === \"object\") {\n    module.exports = Immutable;\n  } else if (typeof exports === \"object\") {\n    exports.Immutable = Immutable;\n  } else if (typeof window === \"object\") {\n    window.Immutable = Immutable;\n  } else if (typeof global === \"object\") {\n    global.Immutable = Immutable;\n  }\n})();\n",
    "'use strict';\nmodule.exports = function (str) {\n\treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n\t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n\t});\n};\n",
    "module.exports = require('./lib/index');\n",
    "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ponyfill = require('./ponyfill.js');\n\nvar _ponyfill2 = _interopRequireDefault(_ponyfill);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar root; /* global window */\n\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = (0, _ponyfill2['default'])(root);\nexports['default'] = result;",
    "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports['default'] = symbolObservablePonyfill;\nfunction symbolObservablePonyfill(root) {\n\tvar result;\n\tvar _Symbol = root.Symbol;\n\n\tif (typeof _Symbol === 'function') {\n\t\tif (_Symbol.observable) {\n\t\t\tresult = _Symbol.observable;\n\t\t} else {\n\t\t\tresult = _Symbol('observable');\n\t\t\t_Symbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};",
    "function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n",
    "module.exports = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<svg width=\\\"10px\\\" height=\\\"30px\\\" viewBox=\\\"0 0 10 30\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n    <!-- Generator: Sketch 46.2 (44496) - http://www.bohemiancoding.com/sketch -->\\n    <title>Shape</title>\\n    <desc>Created with Sketch.</desc>\\n    <defs></defs>\\n    <g id=\\\"Symbols\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n        <g id=\\\"Start-annotating---eLife\\\" transform=\\\"translate(-239.000000, -73.000000)\\\" fill-rule=\\\"nonzero\\\" fill=\\\"#000000\\\">\\n            <g id=\\\"Group-10\\\" transform=\\\"translate(1.000000, 1.000000)\\\">\\n                <path d=\\\"M243.3125,75.186875 C243.3125,73.535 243.3125,72.625 246.434687,72.625 L248,72.625 L248,72 L246.434687,72 C244.324375,72 243.402813,72.4684375 243,73.183125 C242.597187,72.4684375 241.675625,72 239.565313,72 L238,72 L238,72.625 L239.565313,72.625 C242.6875,72.6246875 242.6875,73.5346875 242.6875,75.186875 L242.6875,82 L242.6875,86.6875 L240.929375,86.6875 L240.929375,87.3125 L242.6875,87.3125 L242.6875,92 L242.6875,98.5434375 C242.6875,100.187188 242.6875,101.375 239.565313,101.375 L238,101.375 L238,102 L239.565313,102 C241.675625,102 242.5975,101.442813 243,100.6525 C243.402813,101.442813 244.324375,102 246.434687,102 L248,102 L248,101.375 L246.434687,101.375 C243.3125,101.374688 243.3125,100.187188 243.3125,98.5434375 L243.3125,91.9996875 L243.3125,87.3121875 L245.070312,87.3121875 L245.070312,86.6871875 L243.3125,86.6871875 L243.3125,81.9996875 L243.3125,75.186875 Z\\\" id=\\\"Shape\\\"></path>\\n            </g>\\n        </g>\\n    </g>\\n</svg>\";\n",
    "module.exports = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<svg width=\\\"16px\\\" height=\\\"16px\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n    <!-- Generator: Sketch 39.1 (31720) - http://www.bohemiancoding.com/sketch -->\\n    <defs/>\\n    <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n        <g id=\\\"Artboard\\\" fill=\\\"#D00032\\\">\\n            <g id=\\\"Group\\\">\\n                <path d=\\\"M0,8 C0,12.418278 3.581722,16 8,16 C12.418278,16 16,12.418278 16,8 C16,4.89580324 14.2154684,2.11256098 11.4682644,0.789110134 L10.6002482,2.59092808 C12.661769,3.58405472 14,5.6712248 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,5.65296151 3.35941993,3.55225774 5.44569583,2.56903563 L4.59307587,0.759881355 C1.81273067,2.07020511 0,4.87140735 0,8 Z\\\" id=\\\"Oval\\\"/>\\n                <polygon id=\\\"Combined-Shape\\\" points=\\\"7 8.58578644 7 0 9 0 9 8.58578644 10.2928932 7.29289322 11 6.58578644 12.4142136 8 11.7071068 8.70710678 8.70710678 11.7071068 8 12.4142136 7.64644661 12.0606602 7.29289322 11.7071068 4.29289322 8.70710678 3.58578644 8 5 6.58578644 5.70710678 7.29289322\\\"/>\\n            </g>\\n        </g>\\n    </g>\\n</svg>\\n\";\n",
    "'use strict';\n\n/**\n * This module defines the set of global events that are dispatched\n * across the bridge between the sidebar and annotator\n */\nmodule.exports = {\n  // Events that the sidebar sends to the annotator\n  // ----------------------------------------------\n\n  /**\n   * The updated feature flags for the user\n   */\n  FEATURE_FLAGS_UPDATED: 'featureFlagsUpdated',\n\n  /**\n   * The sidebar is asking the annotator to open the partner site help page.\n   */\n  HELP_REQUESTED: 'helpRequested',\n\n  /** The sidebar is asking the annotator to do a partner site log in\n   *  (for example, pop up a log in window). This is used when the client is\n   *  embedded in a partner site and a log in button in the client is clicked.\n   */\n  LOGIN_REQUESTED: 'loginRequested',\n\n  /** The sidebar is asking the annotator to do a partner site log out.\n   *  This is used when the client is embedded in a partner site and a log out\n   *  button in the client is clicked.\n   */\n  LOGOUT_REQUESTED: 'logoutRequested',\n\n  /**\n   * The sidebar is asking the annotator to open the partner site profile page.\n   */\n  PROFILE_REQUESTED: 'profileRequested',\n\n  /**\n   * The set of annotations was updated.\n   */\n  PUBLIC_ANNOTATION_COUNT_CHANGED: 'publicAnnotationCountChanged',\n\n  /**\n   * The sidebar is asking the annotator to do a partner site sign-up.\n   */\n  SIGNUP_REQUESTED: 'signupRequested',\n\n\n  // Events that the annotator sends to the sidebar\n  // ----------------------------------------------\n};\n",
    "'use strict';\n\nvar extend = require('extend');\n\nvar RPC = require('./frame-rpc');\n\n/**\n * The Bridge service sets up a channel between frames and provides an events\n * API on top of it.\n */\nclass Bridge {\n  constructor() {\n    this.links = [];\n    this.channelListeners = {};\n    this.onConnectListeners = [];\n  }\n\n  /**\n   * Destroy all channels created with `createChannel`.\n   *\n   * This removes the event listeners for messages arriving from other windows.\n   */\n  destroy() {\n    Array.from(this.links).map((link) =>\n      link.channel.destroy());\n  }\n\n  /**\n   * Create a communication channel between this window and `source`.\n   *\n   * The created channel is added to the list of channels which `call`\n   * and `on` send and receive messages over.\n   *\n   * @param {Window} source - The source window.\n   * @param {string} origin - The origin of the document in `source`.\n   * @param {string} token\n   * @return {RPC} - Channel for communicating with the window.\n   */\n  createChannel(source, origin, token) {\n    var channel = null;\n    var connected = false;\n\n    var ready = () => {\n      if (connected) { return; }\n      connected = true;\n      Array.from(this.onConnectListeners).forEach((cb) =>\n        cb.call(null, channel, source)\n      );\n    };\n\n    var connect = (_token, cb) => {\n      if (_token === token) {\n        cb();\n        ready();\n      }\n    };\n\n    var listeners = extend({connect}, this.channelListeners);\n\n    // Set up a channel\n    channel = new RPC(window, source, origin, listeners);\n\n    // Fire off a connection attempt\n    channel.call('connect', token, ready);\n\n    // Store the newly created channel in our collection\n    this.links.push({\n      channel,\n      window: source,\n    });\n\n    return channel;\n  }\n\n  /**\n   * Make a method call on all channels, collect the results and pass them to a\n   * callback when all results are collected.\n   *\n   * @param {string} method - Name of remote method to call.\n   * @param {any[]} args - Arguments to method.\n   * @param [Function] callback - Called with an array of results.\n   */\n  call(method, ...args) {\n    var cb;\n    if (typeof(args[args.length - 1]) === 'function') {\n      cb = args[args.length - 1];\n      args = args.slice(0, -1);\n    }\n\n    var _makeDestroyFn = c => {\n      return error => {\n        c.destroy();\n        this.links = (Array.from(this.links).filter((l) => l.channel !== c).map((l) => l));\n        throw error;\n      };\n    };\n\n    var promises = this.links.map(function(l) {\n      var p = new Promise(function(resolve, reject) {\n        var timeout = setTimeout((() => resolve(null)), 1000);\n        try {\n          return l.channel.call(method, ...Array.from(args), function(err, result) {\n            clearTimeout(timeout);\n            if (err) { return reject(err); } else { return resolve(result); }\n          });\n        } catch (error) {\n          var err = error;\n          return reject(err);\n        }\n      });\n\n      // Don't assign here. The disconnect is handled asynchronously.\n      return p.catch(_makeDestroyFn(l.channel));\n    });\n\n    var resultPromise = Promise.all(promises);\n\n    if (cb) {\n      resultPromise = resultPromise\n        .then(results => cb(null, results))\n        .catch(error => cb(error));\n    }\n\n    return resultPromise;\n  }\n\n  /**\n   * Register a callback to be invoked when any connected channel sends a\n   * message to this `Bridge`.\n   *\n   * @param {string} method\n   * @param {Function} callback\n   */\n  on(method, callback) {\n    if (this.channelListeners[method]) {\n      throw new Error(`Listener '${method}' already bound in Bridge`);\n    }\n    this.channelListeners[method] = callback;\n    return this;\n  }\n\n  /**\n   * Unregister any callbacks registered with `on`.\n   *\n   * @param {string} method\n   */\n  off(method) {\n    delete this.channelListeners[method];\n    return this;\n  }\n\n  /**\n   * Add a function to be called upon a new connection.\n   *\n   * @param {Function} callback\n   */\n  onConnect(callback) {\n    this.onConnectListeners.push(callback);\n    return this;\n  }\n}\n\nmodule.exports = Bridge;\n",
    "var Discovery,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nmodule.exports = Discovery = (function() {\n  Discovery.prototype.server = false;\n\n  Discovery.prototype.origin = '*';\n\n  Discovery.prototype.onDiscovery = null;\n\n  Discovery.prototype.requestInProgress = false;\n\n  function Discovery(target, options) {\n    this.target = target;\n    if (options == null) {\n      options = {};\n    }\n    this._onMessage = bind(this._onMessage, this);\n    this.stopDiscovery = bind(this.stopDiscovery, this);\n    if (options.server) {\n      this.server = options.server;\n    }\n    if (options.origin) {\n      this.origin = options.origin;\n    }\n  }\n\n  Discovery.prototype.startDiscovery = function(onDiscovery) {\n    if (this.onDiscovery) {\n      throw new Error('Discovery is already in progress, call .stopDiscovery() first');\n    }\n    this.onDiscovery = onDiscovery;\n    this.target.addEventListener('message', this._onMessage, false);\n    this._beacon();\n  };\n\n  Discovery.prototype.stopDiscovery = function() {\n    this.onDiscovery = null;\n    this.target.removeEventListener('message', this._onMessage);\n  };\n\n  Discovery.prototype._beacon = function() {\n    var beaconMessage, child, i, len, parent, queue, ref;\n    beaconMessage = this.server ? '__cross_frame_dhcp_offer' : '__cross_frame_dhcp_discovery';\n    queue = [this.target.top];\n    while (queue.length) {\n      parent = queue.shift();\n      if (parent !== this.target) {\n        parent.postMessage(beaconMessage, this.origin);\n      }\n      ref = parent.frames;\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        queue.push(child);\n      }\n    }\n  };\n\n  Discovery.prototype._onMessage = function(event) {\n    var data, discovered, match, messageType, origin, ref, reply, source, token;\n    source = event.source, origin = event.origin, data = event.data;\n    if (origin === 'null' || origin.match('moz-extension:') || window.location.protocol === 'moz-extension:') {\n      origin = '*';\n    }\n    match = typeof data.match === \"function\" ? data.match(/^__cross_frame_dhcp_(discovery|offer|request|ack)(?::(\\d+))?$/) : void 0;\n    if (!match) {\n      return;\n    }\n    messageType = match[1];\n    token = match[2];\n    ref = this._processMessage(messageType, token, origin), reply = ref.reply, discovered = ref.discovered, token = ref.token;\n    if (reply) {\n      source.postMessage('__cross_frame_dhcp_' + reply, origin);\n    }\n    if (discovered) {\n      this.onDiscovery.call(null, source, origin, token);\n    }\n  };\n\n  Discovery.prototype._processMessage = function(messageType, token, origin) {\n    var discovered, reply;\n    reply = null;\n    discovered = false;\n    if (this.server) {\n      if (messageType === 'discovery') {\n        reply = 'offer';\n      } else if (messageType === 'request') {\n        token = this._generateToken();\n        reply = 'ack' + ':' + token;\n        discovered = true;\n      } else if (messageType === 'offer' || messageType === 'ack') {\n        throw new Error(\"A second Discovery server has been detected at \" + origin + \".\\nThis is unsupported and will cause unexpected behaviour.\");\n      }\n    } else {\n      if (messageType === 'offer') {\n        if (!this.requestInProgress) {\n          this.requestInProgress = true;\n          reply = 'request';\n        }\n      } else if (messageType === 'ack') {\n        this.requestInProgress = false;\n        discovered = true;\n      }\n    }\n    return {\n      reply: reply,\n      discovered: discovered,\n      token: token\n    };\n  };\n\n  Discovery.prototype._generateToken = function() {\n    return ('' + Math.random()).replace(/\\D/g, '');\n  };\n\n  return Discovery;\n\n})();\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvZmlyYXMvRGVza3RvcC9IeXBvdGhlc2lzL2NsaWVudC9zcmMvc2hhcmVkL2Rpc2NvdmVyeS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvaG9tZS9maXJhcy9EZXNrdG9wL0h5cG90aGVzaXMvY2xpZW50L3NyYy9zaGFyZWQvZGlzY292ZXJ5LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFzQkEsSUFBQSxTQUFBO0VBQUE7O0FBQUEsTUFBTSxDQUFDLE9BQVAsR0FBdUI7c0JBRXJCLE1BQUEsR0FBUTs7c0JBSVIsTUFBQSxHQUFROztzQkFFUixXQUFBLEdBQWE7O3NCQUNiLGlCQUFBLEdBQW1COztFQUlOLG1CQUFDLE1BQUQsRUFBVSxPQUFWO0lBQUMsSUFBQyxDQUFBLFNBQUQ7O01BQVMsVUFBUTs7OztJQUM3QixJQUE0QixPQUFPLENBQUMsTUFBcEM7TUFBQSxJQUFDLENBQUEsTUFBRCxHQUFVLE9BQU8sQ0FBQyxPQUFsQjs7SUFDQSxJQUE0QixPQUFPLENBQUMsTUFBcEM7TUFBQSxJQUFDLENBQUEsTUFBRCxHQUFVLE9BQU8sQ0FBQyxPQUFsQjs7RUFGVzs7c0JBSWIsY0FBQSxHQUFnQixTQUFDLFdBQUQ7SUFDZCxJQUFHLElBQUMsQ0FBQSxXQUFKO0FBQ0UsWUFBTSxJQUFJLEtBQUosQ0FBVSwrREFBVixFQURSOztJQVVBLElBQUMsQ0FBQSxXQUFELEdBQWU7SUFHZixJQUFDLENBQUEsTUFBTSxDQUFDLGdCQUFSLENBQXlCLFNBQXpCLEVBQW9DLElBQUksQ0FBQyxVQUF6QyxFQUFxRCxLQUFyRDtJQUdBLElBQUksQ0FBQyxPQUFMLENBQUE7RUFqQmM7O3NCQW9CaEIsYUFBQSxHQUFlLFNBQUE7SUFFYixJQUFDLENBQUEsV0FBRCxHQUFlO0lBQ2YsSUFBQyxDQUFBLE1BQU0sQ0FBQyxtQkFBUixDQUE0QixTQUE1QixFQUF1QyxJQUFJLENBQUMsVUFBNUM7RUFIYTs7c0JBUWYsT0FBQSxHQUFTLFNBQUE7QUFDUCxR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\n",
    "'use strict';\n\n/* eslint-disable */\n\n/** This software is released under the MIT license:\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n */\n\n/**\n * This is a modified copy of index.js from\n * https://github.com/substack/frame-rpc (see git log for the modifications),\n * upstream license above.\n */\n\nvar VERSION = '1.0.0';\n\nmodule.exports = RPC;\n\nfunction RPC (src, dst, origin, methods) {\n    if (!(this instanceof RPC)) return new RPC(src, dst, origin, methods);\n    var self = this;\n    this.src = src;\n    this.dst = dst;\n    \n    if (origin === '*') {\n        this.origin = '*';\n    }\n    else {\n        var uorigin = new URL(origin);\n        this.origin = uorigin.protocol + '//' + uorigin.host;\n    }\n    \n    this._sequence = 0;\n    this._callbacks = {};\n    \n    this._onmessage = function (ev) {\n        if (self._destroyed) return;\n        if (self.dst !== ev.source) return;\n        if (self.origin !== '*' && ev.origin !== self.origin) return;\n        if (!ev.data || typeof ev.data !== 'object') return;\n        if (ev.data.protocol !== 'frame-rpc') return;\n        if (!Array.isArray(ev.data.arguments)) return;\n        self._handle(ev.data);\n    };\n    this.src.addEventListener('message', this._onmessage);\n    this._methods = (typeof methods === 'function'\n        ? methods(this)\n        : methods\n    ) || {};\n}\n\nRPC.prototype.destroy = function () {\n    this._destroyed = true;\n    this.src.removeEventListener('message', this._onmessage);\n};\n\nRPC.prototype.call = function (method) {\n    var args = [].slice.call(arguments, 1);\n    return this.apply(method, args);\n};\n\nRPC.prototype.apply = function (method, args) {\n    if (this._destroyed) return;\n    var seq = this._sequence ++;\n    if (typeof args[args.length - 1] === 'function') {\n        this._callbacks[seq] = args[args.length - 1];\n        args = args.slice(0, -1);\n    }\n    this.dst.postMessage({\n        protocol: 'frame-rpc',\n        version: VERSION,\n        sequence: seq,\n        method: method, \n        arguments: args\n    }, this.origin);\n};\n\nRPC.prototype._handle = function (msg) {\n    var self = this;\n    if (self._destroyed) return;\n    if (msg.hasOwnProperty('method')) {\n        if (!this._methods.hasOwnProperty(msg.method)) return;\n        var args = msg.arguments.concat(function () {\n            self.dst.postMessage({\n                protocol: 'frame-rpc',\n                version: VERSION,\n                response: msg.sequence,\n                arguments: [].slice.call(arguments)\n            }, self.origin);\n        });\n        this._methods[msg.method].apply(this._methods, args);\n    }\n    else if (msg.hasOwnProperty('response')) {\n        var cb = this._callbacks[msg.response];\n        delete this._callbacks[msg.response];\n        if (cb) cb.apply(null, msg.arguments);\n    }\n};\n",
    "'use strict';\n\n// `Object.assign()`-like helper. Used because this script needs to work\n// in IE 10/11 without polyfills.\nfunction assign(dest, src) {\n  for (var k in src) {\n    if (src.hasOwnProperty(k)) {\n      dest[k] = src[k];\n    }\n  }\n  return dest;\n}\n\n/**\n * Return a parsed `js-hypothesis-config` object from the document, or `{}`.\n *\n * Find all `<script class=\"js-hypothesis-config\">` tags in the given document,\n * parse them as JSON, and return the parsed object.\n *\n * If there are no `js-hypothesis-config` tags in the document then return\n * `{}`.\n *\n * If there are multiple `js-hypothesis-config` tags in the document then merge\n * them into a single returned object (when multiple scripts contain the same\n * setting names, scripts further down in the document override those further\n * up).\n *\n * @param {Document|Element} document - The root element to search.\n */\nfunction jsonConfigsFrom(document) {\n  var config = {};\n  var settingsElements =\n    document.querySelectorAll('script.js-hypothesis-config');\n\n  for (var i=0; i < settingsElements.length; i++) {\n    var settings;\n    try {\n      settings = JSON.parse(settingsElements[i].textContent);\n    } catch (err) {\n      console.warn('Could not parse settings from js-hypothesis-config tags', err);\n      settings = {};\n    }\n    assign(config, settings);\n  }\n\n  return config;\n}\n\nmodule.exports = {\n  jsonConfigsFrom: jsonConfigsFrom,\n};\n",
    "'use strict';\n\nvar VIA_REFERRER = /^https:\\/\\/(qa-)?via.hypothes.is\\//;\n\nvar globalGAOptions = function(win, settings){\n\n  settings = settings || {};\n\n  var globalOpts = {\n    category: '',\n  };\n\n  var validTypes = ['chrome-extension', 'firefox-extension', 'embed', 'bookmarklet', 'via'];\n\n  // The preferred method for deciding what type of app is running is\n  // through the setting of the appType to one of the valid types above.\n  // However, we also want to capture app types where we were not given\n  // the appType setting explicitly - these are the app types that were\n  // added before we added the analytics logic\n  if(validTypes.indexOf((settings.appType || '').toLowerCase()) > -1){\n    globalOpts.category = settings.appType.toLowerCase();\n  }else if(win.location.protocol === 'chrome-extension:'){\n    globalOpts.category = 'chrome-extension';\n  }else if(VIA_REFERRER.test(win.document.referrer)){\n    globalOpts.category = 'via';\n  }else {\n    globalOpts.category = 'embed';\n  }\n\n  return globalOpts;\n};\n\n/**\n * Analytics API to simplify and standardize the values that we\n * pass to the Angulartics service.\n *\n * These analytics are based on google analytics and need to conform to its\n * requirements. Specifically, we are required to send the event and a category.\n *\n * We will standardize the category to be the appType of the client settings\n */\n// @ngInject\nfunction analytics($analytics, $window, settings) {\n  var options = $window ? globalGAOptions($window, settings) : {};\n\n  return {\n\n    /**\n     * @param  {string} event This is the event name that we are capturing\n     *  in our analytics. Example: 'sidebarOpened'. Use camelCase to track multiple\n     *  words.\n     */\n    track: function(event, label, metricValue){\n      $analytics.eventTrack(event, Object.assign({}, {\n        label: label || undefined,\n        metricValue: isNaN(metricValue) ? undefined : metricValue,\n      }, options));\n    },\n\n    events: {\n      ANNOTATION_CREATED: 'annotationCreated',\n      ANNOTATION_DELETED: 'annotationDeleted',\n      ANNOTATION_FLAGGED: 'annotationFlagged',\n      ANNOTATION_SHARED: 'annotationShared',\n      ANNOTATION_UPDATED: 'annotationUpdated',\n      DOCUMENT_SHARED: 'documentShared',\n      GROUP_LEAVE: 'groupLeave',\n      GROUP_SWITCH: 'groupSwitch',\n      GROUP_VIEW_ACTIVITY: 'groupViewActivity',\n      HIGHLIGHT_CREATED: 'highlightCreated',\n      HIGHLIGHT_UPDATED: 'highlightUpdated',\n      HIGHLIGHT_DELETED: 'highlightDeleted',\n      LOGIN_FAILURE: 'loginFailure',\n      LOGIN_SUCCESS: 'loginSuccessful',\n      LOGOUT_FAILURE: 'logoutFailure',\n      LOGOUT_SUCCESS: 'logoutSuccessful',\n      PAGE_NOTE_CREATED: 'pageNoteCreated',\n      PAGE_NOTE_UPDATED: 'pageNoteUpdated',\n      PAGE_NOTE_DELETED: 'pageNoteDeleted',\n      REPLY_CREATED: 'replyCreated',\n      REPLY_UPDATED: 'replyUpdated',\n      REPLY_DELETED: 'replyDeleted',\n      SIDEBAR_OPENED: 'sidebarOpened',\n      SIGN_UP_REQUESTED: 'signUpRequested',\n    },\n  };\n}\n\nmodule.exports = analytics;\n",
    "'use strict';\n\nvar angular = require('angular');\n\nvar events = require('./events');\n\nfunction getExistingAnnotation(annotationUI, id) {\n  return annotationUI.getState().annotations.find(function (annot) {\n    return annot.id === id;\n  });\n}\n\n// Wraps the annotation store to trigger events for the CRUD actions\n// @ngInject\nfunction annotationMapper($rootScope, annotationUI, store) {\n  function loadAnnotations(annotations, replies) {\n    annotations = annotations.concat(replies || []);\n\n    var loaded = [];\n    annotations.forEach(function (annotation) {\n      var existing = getExistingAnnotation(annotationUI, annotation.id);\n      if (existing) {\n        $rootScope.$broadcast(events.ANNOTATION_UPDATED, annotation);\n        return;\n      }\n      loaded.push(annotation);\n    });\n\n    $rootScope.$broadcast(events.ANNOTATIONS_LOADED, loaded);\n  }\n\n  function unloadAnnotations(annotations) {\n    var unloaded = annotations.map(function (annotation) {\n      var existing = getExistingAnnotation(annotationUI, annotation.id);\n      if (existing && annotation !== existing) {\n        annotation = angular.copy(annotation, existing);\n      }\n      return annotation;\n    });\n    $rootScope.$broadcast(events.ANNOTATIONS_UNLOADED, unloaded);\n  }\n\n  function createAnnotation(annotation) {\n    $rootScope.$broadcast(events.BEFORE_ANNOTATION_CREATED, annotation);\n    return annotation;\n  }\n\n  function deleteAnnotation(annotation) {\n    return store.annotation.delete({\n      id: annotation.id,\n    }).then(function () {\n      $rootScope.$broadcast(events.ANNOTATION_DELETED, annotation);\n      return annotation;\n    });\n  }\n\n  function flagAnnotation(annot) {\n    return store.annotation.flag({\n      id: annot.id,\n    }).then(function () {\n      $rootScope.$broadcast(events.ANNOTATION_FLAGGED, annot);\n      return annot;\n    });\n  }\n\n  return {\n    loadAnnotations: loadAnnotations,\n    unloadAnnotations: unloadAnnotations,\n    createAnnotation: createAnnotation,\n    deleteAnnotation: deleteAnnotation,\n    flagAnnotation: flagAnnotation,\n  };\n}\n\n\nmodule.exports = annotationMapper;\n",
    "'use strict';\n\n/**\n * Utility functions for querying annotation metadata.\n */\n\n/** Extract a URI, domain and title from the given domain model object.\n *\n * @param {object} annotation An annotation domain model object as received\n *   from the server-side API.\n * @returns {object} An object with three properties extracted from the model:\n *   uri, domain and title.\n *\n */\nfunction documentMetadata(annotation) {\n  var uri = annotation.uri;\n  var domain = new URL(uri).hostname;\n  var title = domain;\n\n  if (annotation.document && annotation.document.title) {\n    title = annotation.document.title[0];\n  }\n\n  if (domain === 'localhost') {\n    domain = '';\n  }\n\n  return {\n    uri: uri,\n    domain: domain,\n    title: title,\n  };\n}\n\n/**\n * Return the domain and title of an annotation for display on an annotation\n * card.\n */\nfunction domainAndTitle(annotation) {\n  return {\n    domain: domainTextFromAnnotation(annotation),\n    titleText: titleTextFromAnnotation(annotation),\n    titleLink: titleLinkFromAnnotation(annotation),\n  };\n}\n\nfunction titleLinkFromAnnotation(annotation) {\n  var titleLink = annotation.uri;\n\n  if (titleLink && !(titleLink.indexOf('http://') === 0 || titleLink.indexOf('https://') === 0)) {\n    // We only link to http(s) URLs.\n    titleLink = null;\n  }\n\n  if (annotation.links && annotation.links.incontext) {\n    titleLink = annotation.links.incontext;\n  }\n\n  return titleLink;\n}\n\nfunction domainTextFromAnnotation(annotation) {\n  var document = documentMetadata(annotation);\n\n  var domainText = '';\n  if (document.uri && document.uri.indexOf('file://') === 0 && document.title) {\n    var parts = document.uri.split('/');\n    var filename = parts[parts.length - 1];\n    if (filename) {\n      domainText = filename;\n    }\n  } else if (document.domain && document.domain !== document.title) {\n    domainText = document.domain;\n  }\n\n  return domainText;\n}\n\nfunction titleTextFromAnnotation(annotation) {\n  var document = documentMetadata(annotation);\n\n  var titleText = document.title;\n  if (titleText.length > 30) {\n    titleText = titleText.slice(0, 30) + '';\n  }\n\n  return titleText;\n}\n\n/** Return `true` if the given annotation is a reply, `false` otherwise. */\nfunction isReply(annotation) {\n  return (annotation.references || []).length > 0;\n}\n\n/** Return `true` if the given annotation is new, `false` otherwise.\n *\n * \"New\" means this annotation has been newly created client-side and not\n * saved to the server yet.\n */\nfunction isNew(annotation) {\n  return !annotation.id;\n}\n\n/** Return `true` if the given annotation is public, `false` otherwise. */\nfunction isPublic(annotation) {\n  var isPublic = false;\n\n  if (!annotation.permissions) {\n    return isPublic;\n  }\n\n  annotation.permissions.read.forEach(function(perm) {\n    var readPermArr = perm.split(':');\n    if (readPermArr.length === 2 && readPermArr[0] === 'group') {\n      isPublic = true;\n    }\n  });\n\n  return isPublic;\n}\n\n/**\n * Return `true` if `annotation` has a selector.\n *\n * An annotation which has a selector refers to a specific part of a document,\n * as opposed to a Page Note which refers to the whole document or a reply,\n * which refers to another annotation.\n */\nfunction hasSelector(annotation) {\n  return !!(annotation.target &&\n            annotation.target.length > 0 &&\n            annotation.target[0].selector);\n}\n\n/**\n * Return `true` if the given annotation is not yet anchored.\n *\n * Returns false if anchoring is still in process but the flag indicating that\n * the initial timeout allowed for anchoring has expired.\n */\nfunction isWaitingToAnchor(annotation) {\n  return hasSelector(annotation) &&\n         (typeof annotation.$orphan === 'undefined') &&\n         !annotation.$anchorTimeout;\n}\n\n/** Return `true` if the given annotation is an orphan. */\nfunction isOrphan(annotation) {\n  return hasSelector(annotation) && annotation.$orphan;\n}\n\n/** Return `true` if the given annotation is a page note. */\nfunction isPageNote(annotation) {\n  return !hasSelector(annotation) && !isReply(annotation);\n}\n\n/** Return `true` if the given annotation is a top level annotation, `false` otherwise. */\nfunction isAnnotation(annotation) {\n  return !!(hasSelector(annotation) && !isOrphan(annotation));\n}\n\n/** Return a numeric key that can be used to sort annotations by location.\n *\n * @return {number} - A key representing the location of the annotation in\n *                    the document, where lower numbers mean closer to the\n *                    start.\n */\nfunction location(annotation) {\n  if (annotation) {\n    var targets = annotation.target || [];\n    for (var i = 0; i < targets.length; i++) {\n      var selectors = targets[i].selector || [];\n      for (var k = 0; k < selectors.length; k++) {\n        if (selectors[k].type === 'TextPositionSelector') {\n          return selectors[k].start;\n        }\n      }\n    }\n  }\n  return Number.POSITIVE_INFINITY;\n}\n\n/**\n * Return the number of times the annotation has been flagged\n * by other users. If moderation metadata is not present, returns `null`.\n *\n * @return {number|null}\n */\nfunction flagCount(ann) {\n  if (!ann.moderation) {\n    return null;\n  }\n  return ann.moderation.flagCount;\n}\n\nmodule.exports = {\n  documentMetadata: documentMetadata,\n  domainAndTitle: domainAndTitle,\n  flagCount: flagCount,\n  isAnnotation: isAnnotation,\n  isNew: isNew,\n  isOrphan: isOrphan,\n  isPageNote: isPageNote,\n  isPublic: isPublic,\n  isReply: isReply,\n  isWaitingToAnchor: isWaitingToAnchor,\n  location: location,\n};\n",
    "'use strict';\n\n/**\n * AnnotationUI is the central store of state for the sidebar application,\n * managed using [Redux](http://redux.js.org/).\n *\n * State management in Redux apps work as follows:\n *\n *  1. All important application state is stored in a single, immutable object.\n *  2. The user interface is a presentation of this state. Interaction with the\n *     UI triggers updates by creating `actions`.\n *  3. Actions are plain JS objects which describe some event that happened in\n *     the application. Updates happen by passing actions to a `reducer`\n *     function which takes the current application state, the action and\n *     returns the new application state.\n *\n *     The process of updating the app state using an action is known as\n *     'dispatching' the action.\n *  4. Other parts of the app can subscribe to changes in the app state.\n *     This is used to to update the UI etc.\n *\n * \"middleware\" functions can wrap the dispatch process in order to implement\n *  logging, trigger side effects etc.\n *\n * Tests for a given action consist of:\n *\n *  1. Checking that the UI (or other event source) dispatches the correct\n *     action when something happens.\n *  2. Checking that given an initial state, and an action, a reducer returns\n *     the correct resulting state.\n *  3. Checking that the UI correctly presents a given state.\n */\n\nvar redux = require('redux');\n\n// `.default` is needed because 'redux-thunk' is built as an ES2015 module\nvar thunk = require('redux-thunk').default;\n\nvar reducers = require('./reducers');\nvar annotationsReducer = require('./reducers/annotations');\nvar framesReducer = require('./reducers/frames');\nvar linksReducer = require('./reducers/links');\nvar selectionReducer = require('./reducers/selection');\nvar sessionReducer = require('./reducers/session');\nvar viewerReducer = require('./reducers/viewer');\nvar util = require('./reducers/util');\n\nvar debugMiddleware = require('./reducers/debug-middleware');\n\n/**\n * Redux middleware which triggers an Angular change-detection cycle\n * if no cycle is currently in progress.\n *\n * This ensures that Angular UI components are updated after the UI\n * state changes in response to external inputs (eg. WebSocket messages,\n * messages arriving from other frames in the page, async network responses).\n *\n * See http://redux.js.org/docs/advanced/Middleware.html\n */\nfunction angularDigestMiddleware($rootScope) {\n  return function (next) {\n    return function (action) {\n      next(action);\n\n      // '$$phase' is set if Angular is in the middle of a digest cycle already\n      if (!$rootScope.$$phase) {\n        // $applyAsync() is similar to $apply() but provides debouncing.\n        // See http://stackoverflow.com/questions/30789177\n        $rootScope.$applyAsync(function () {});\n      }\n    };\n  };\n}\n\n// @ngInject\nmodule.exports = function ($rootScope, settings) {\n  var enhancer = redux.applyMiddleware(\n    // The `thunk` middleware handles actions which are functions.\n    // This is used to implement actions which have side effects or are\n    // asynchronous (see https://github.com/gaearon/redux-thunk#motivation)\n    thunk,\n    debugMiddleware,\n    angularDigestMiddleware.bind(null, $rootScope)\n  );\n  var store = redux.createStore(reducers.update, reducers.init(settings),\n    enhancer);\n\n  // Expose helper functions that create actions as methods of the\n  // `annotationUI` service to make using them easier from app code. eg.\n  //\n  // Instead of:\n  //   annotationUI.dispatch(annotations.actions.addAnnotations(annotations))\n  // You can use:\n  //   annotationUI.addAnnotations(annotations)\n  //\n  var actionCreators = redux.bindActionCreators(Object.assign({},\n    annotationsReducer.actions,\n    framesReducer.actions,\n    linksReducer.actions,\n    selectionReducer.actions,\n    sessionReducer.actions,\n    viewerReducer.actions\n  ), store.dispatch);\n\n  // Expose selectors as methods of the `annotationUI` to make using them easier\n  // from app code.\n  //\n  // eg. Instead of:\n  //   selection.isAnnotationSelected(annotationUI.getState(), id)\n  // You can use:\n  //   annotationUI.isAnnotationSelected(id)\n  var selectors = util.bindSelectors({\n    isAnnotationSelected: selectionReducer.isAnnotationSelected,\n    hasSelectedAnnotations: selectionReducer.hasSelectedAnnotations,\n\n    annotationExists: annotationsReducer.annotationExists,\n    findAnnotationByID: annotationsReducer.findAnnotationByID,\n    findIDsForTags: annotationsReducer.findIDsForTags,\n    savedAnnotations: annotationsReducer.savedAnnotations,\n\n    frames: framesReducer.frames,\n    searchUris: framesReducer.searchUris,\n\n    isSidebar: viewerReducer.isSidebar,\n\n    isFeatureEnabled: sessionReducer.isFeatureEnabled,\n    profile: sessionReducer.profile,\n  }, store.getState);\n\n  return Object.assign(store, actionCreators, selectors);\n};\n",
    "'use strict';\n\nvar { retryPromiseOperation } = require('./retry-util');\n\n/**\n * A service which fetches and caches API route metadata.\n */\n// @ngInject\nfunction apiRoutes($http, settings) {\n  // Cache of route name => route metadata from API root.\n  var routeCache;\n  // Cache of links to pages on the service fetched from the API's \"links\"\n  // endpoint.\n  var linkCache;\n\n  function getJSON(url) {\n    return $http.get(url).then(({ status, data }) => {\n      if (status !== 200) {\n        throw new Error(`Fetching ${url} failed`);\n      }\n      return data;\n    });\n  }\n\n  /**\n   * Fetch and cache API route metadata.\n   *\n   * Routes are fetched without any authentication and therefore assumed to be\n   * the same regardless of whether the user is authenticated or not.\n   *\n   * @return {Promise<Object>} - Map of routes to route metadata.\n   */\n  function routes() {\n    if (!routeCache) {\n      routeCache = retryPromiseOperation(() => getJSON(settings.apiUrl))\n        .then((index) => index.links);\n    }\n    return routeCache;\n  }\n\n  /**\n   * Fetch and cache service page links from the API.\n   *\n   * @return {Promise<Object>} - Map of link name to URL\n   */\n  function links() {\n    if (!linkCache) {\n      linkCache = routes().then(routes => {\n        return getJSON(routes.links.url);\n      });\n    }\n    return linkCache;\n  }\n\n  return { routes, links };\n}\n\nmodule.exports = apiRoutes;\n",
    "'use strict';\n\n/** Default state for new threads, before applying filters etc. */\nvar DEFAULT_THREAD_STATE = {\n  /**\n   * The ID of this thread. This will be the same as the annotation ID for\n   * created annotations or the `$tag` property for new annotations.\n   */\n  id: undefined,\n  /**\n   * The Annotation which is displayed by this thread.\n   *\n   * This may be null if the existence of an annotation is implied by the\n   * `references` field in an annotation but the referenced parent annotation\n   * does not exist.\n   */\n  annotation: undefined,\n  /** The parent thread ID */\n  parent: undefined,\n  /** True if this thread is collapsed, hiding replies to this annotation. */\n  collapsed: false,\n  /** True if this annotation matches the current filters. */\n  visible: true,\n  /** Replies to this annotation. */\n  children: [],\n  /**\n    * The total number of children of this annotation,\n    * including any which have been hidden by filters.\n    */\n  totalChildren: 0,\n  /**\n   * The highlight state of this annotation:\n   *  undefined - Do not (de-)emphasize this annotation\n   *  'dim' - De-emphasize this annotation\n   *  'highlight' - Emphasize this annotation\n   */\n  highlightState: undefined,\n};\n\n/**\n * Returns a persistent identifier for an Annotation.\n * If the Annotation has been created on the server, it will have\n * an ID assigned, otherwise we fall back to the local-only '$tag'\n * property.\n */\nfunction id(annotation) {\n  return annotation.id || annotation.$tag;\n}\n\n/**\n * Link the annotation with ID `id` to its parent thread.\n *\n * @param {string} id\n * @param {Array<string>} parents - IDs of parent annotations, from the\n *        annotation's `references` field.\n */\nfunction setParentID(threads, id, parents) {\n  if (threads[id].parent || !parents.length) {\n    // Parent already assigned, do not try to change it.\n    return;\n  }\n  var parentID = parents[parents.length-1];\n  if (!threads[parentID]) {\n    // Parent does not exist. This may be a reply to an annotation which has\n    // been deleted. Create a placeholder Thread with no annotation to\n    // represent the missing annotation.\n    threads[parentID] = Object.assign({}, DEFAULT_THREAD_STATE, {\n      id: parentID,\n      children: [],\n    });\n    setParentID(threads, parentID, parents.slice(0,-1));\n  }\n\n  var grandParentID = threads[parentID].parent;\n  while (grandParentID) {\n    if (grandParentID === id) {\n      // There is a loop in the `references` field, abort.\n      return;\n    } else {\n      grandParentID = threads[grandParentID].parent;\n    }\n  }\n\n  threads[id].parent = parentID;\n  threads[parentID].children.push(threads[id]);\n}\n\n/**\n * Creates a thread of annotations from a list of annotations.\n *\n * Given a flat list of annotations and replies, this generates a hierarchical\n * thread, using the `references` field of an annotation to link together\n * annotations and their replies. The `references` field is a possibly\n * incomplete ordered list of the parents of an annotation, from furthest to\n * nearest ancestor.\n *\n * @param {Array<Annotation>} annotations - The input annotations to thread.\n * @return {Thread} - The input annotations threaded into a tree structure.\n */\nfunction threadAnnotations(annotations) {\n  // Map of annotation ID -> container\n  var threads = {};\n\n  // Build mapping of annotation ID -> thread\n  annotations.forEach(function (annotation) {\n    threads[id(annotation)] = Object.assign({}, DEFAULT_THREAD_STATE, {\n      id: id(annotation),\n      annotation: annotation,\n      children: [],\n    });\n  });\n\n  // Set each thread's parent based on the references field\n  annotations.forEach(function (annotation) {\n    if (!annotation.references) {\n      return;\n    }\n    setParentID(threads, id(annotation), annotation.references);\n  });\n\n  // Collect the set of threads which have no parent as\n  // children of the thread root\n  var roots = [];\n  Object.keys(threads).forEach(function (id) {\n    if (!threads[id].parent) {\n      // Top-level threads are collapsed by default\n      threads[id].collapsed = true;\n      roots.push(threads[id]);\n    }\n  });\n\n  var root = {\n    annotation: undefined,\n    children: roots,\n    visible: true,\n    collapsed: false,\n    totalChildren: roots.length,\n  };\n\n  return root;\n}\n\n/**\n * Returns a copy of `thread` with the thread\n * and each of its children transformed by mapFn(thread).\n *\n * @param {Thread} thread\n * @param {(Thread) => Thread} mapFn\n */\nfunction mapThread(thread, mapFn) {\n  return Object.assign({}, mapFn(thread), {\n    children: thread.children.map(function (child) {\n      return mapThread(child, mapFn);\n    }),\n  });\n}\n\n/**\n * Return a sorted copy of an array of threads.\n *\n * @param {Array<Thread>} threads - The list of threads to sort\n * @param {(Annotation,Annotation) => boolean} compareFn\n * @return {Array<Thread>} Sorted list of threads\n */\nfunction sort(threads, compareFn) {\n  return threads.slice().sort(function (a, b) {\n    // Threads with no annotation always sort to the top\n    if (!a.annotation || !b.annotation) {\n      if (!a.annotation && !b.annotation) {\n        return 0;\n      } else {\n        return !a.annotation ? -1 : 1;\n      }\n    }\n\n    if (compareFn(a.annotation, b.annotation)) {\n      return -1;\n    } else if (compareFn(b.annotation, a.annotation)) {\n      return 1;\n    } else {\n      return 0;\n    }\n  });\n}\n\n/**\n * Return a copy of `thread` with siblings of the top-level thread sorted according\n * to `compareFn` and replies sorted by `replyCompareFn`.\n */\nfunction sortThread(thread, compareFn, replyCompareFn) {\n  var children = thread.children.map(function (child) {\n    return sortThread(child, replyCompareFn, replyCompareFn);\n  });\n\n  return Object.assign({}, thread, {\n    children: sort(children, compareFn),\n  });\n}\n\n/**\n * Return a copy of @p thread with the `replyCount` and `depth` properties\n * updated.\n */\nfunction countRepliesAndDepth(thread, depth) {\n  var children = thread.children.map(function (c) {\n    return countRepliesAndDepth(c, depth + 1);\n  });\n  return Object.assign({}, thread, {\n    children: children,\n    depth: depth,\n    replyCount: children.reduce(function (total, child) {\n      return total + 1 + child.replyCount;\n    }, 0),\n  });\n}\n\n/** Return true if a thread has any visible children. */\nfunction hasVisibleChildren(thread) {\n  return thread.children.some(function (child) {\n    return child.visible || hasVisibleChildren(child);\n  });\n}\n\n/**\n * Default options for buildThread()\n */\nvar defaultOpts = {\n  /** List of currently selected annotation IDs */\n  selected: [],\n  /**\n   * List of IDs of annotations that should be shown even if they\n   * do not match the current filter.\n   */\n  forceVisible: undefined,\n  /**\n   * Predicate function that returns true if an annotation should be\n   * displayed.\n   */\n  filterFn: undefined,\n  /**\n   * A filter function which should return true if a given annotation and\n   * its replies should be displayed.\n   */\n  threadFilterFn: undefined,\n  /**\n   * Mapping of annotation IDs to expansion states.\n   */\n  expanded: {},\n  /** List of highlighted annotation IDs */\n  highlighted: [],\n  /**\n   * Less-than comparison function used to compare annotations in order to sort\n   * the top-level thread.\n   */\n  sortCompareFn: function (a, b) {\n    return a.id < b.id;\n  },\n  /**\n   * Less-than comparison function used to compare annotations in order to sort\n   * replies.\n   */\n  replySortCompareFn: function (a, b) {\n    return a.created < b.created;\n  },\n};\n\n/**\n * Project, filter and sort a list of annotations into a thread structure for\n * display by the <annotation-thread> directive.\n *\n * buildThread() takes as inputs a flat list of annotations,\n * the current visibility filters and sort function and returns\n * the thread structure that should be rendered.\n *\n * @param {Array<Annotation>} annotations - A list of annotations and replies\n * @param {Options} opts\n * @return {Thread} - The root thread, whose children are the top-level\n *                    annotations to display.\n */\nfunction buildThread(annotations, opts) {\n  opts = Object.assign({}, defaultOpts, opts);\n\n  var thread = threadAnnotations(annotations);\n\n  // Mark annotations as visible or hidden depending on whether\n  // they are being edited and whether they match the current filter\n  // criteria\n  var shouldShowThread = function (annotation) {\n    if (opts.forceVisible && opts.forceVisible.indexOf(id(annotation)) !== -1) {\n      return true;\n    }\n    if (opts.filterFn && !opts.filterFn(annotation)) {\n      return false;\n    }\n    return true;\n  };\n\n  // When there is a selection, only include top-level threads (annotations)\n  // that are selected\n  if (opts.selected.length > 0) {\n    thread = Object.assign({}, thread, {\n      children: thread.children.filter(function (child) {\n        return opts.selected.indexOf(child.id) !== -1;\n      }),\n    });\n  }\n\n  // Set the visibility and highlight states of threads\n  thread = mapThread(thread, function (thread) {\n    var highlightState;\n    if (opts.highlighted.length > 0) {\n      var isHighlighted = thread.annotation &&\n        opts.highlighted.indexOf(thread.id) !== -1;\n      highlightState = isHighlighted ? 'highlight' : 'dim';\n    }\n\n    return Object.assign({}, thread, {\n      highlightState: highlightState,\n      visible: thread.visible &&\n               thread.annotation &&\n               shouldShowThread(thread.annotation),\n    });\n  });\n\n  // Expand any threads which:\n  // 1) Have been explicitly expanded OR\n  // 2) Have children matching the filter\n  thread = mapThread(thread, function (thread) {\n    var id = thread.id;\n\n    // If the thread was explicitly expanded or collapsed, respect that option\n    if (opts.expanded.hasOwnProperty(id)) {\n      return Object.assign({}, thread, {collapsed: !opts.expanded[id]});\n    }\n\n    var hasUnfilteredChildren = opts.filterFn && hasVisibleChildren(thread);\n\n    return Object.assign({}, thread, {\n      collapsed: thread.collapsed &&\n                 !hasUnfilteredChildren,\n    });\n  });\n\n  // Remove top-level threads which contain no visible annotations\n  thread.children = thread.children.filter(function (child) {\n    return child.visible || hasVisibleChildren(child);\n  });\n\n  // Get annotations which are of type notes or annotations depending\n  // on the filter.\n  if (opts.threadFilterFn) {\n    thread.children = thread.children.filter(opts.threadFilterFn);\n  }\n\n  // Sort the root thread according to the current search criteria\n  thread = sortThread(thread, opts.sortCompareFn, opts.replySortCompareFn);\n\n  // Update `replyCount` and `depth` properties\n  thread = countRepliesAndDepth(thread, -1);\n\n  return thread;\n}\n\nmodule.exports = buildThread;\n",
    "'use strict';\n\nmodule.exports = {\n  controllerAs: 'vm',\n  bindings: {\n    icon: '<',\n    src: '<',\n    isDisabled: '<',\n    label: '<',\n    onClick: '&',\n  },\n  template: require('../templates/annotation-action-button.html'),\n};\n",
    "'use strict';\n\nvar annotationMetadata = require('../annotation-metadata');\nvar memoize = require('../util/memoize');\nvar { isThirdPartyUser, username } = require('../util/account-id');\nvar annotations_id = [];\nvar runned = 0;\n\n\nvar events = require('../events');\nvar isNew = annotationMetadata.isNew;\nvar isReply = annotationMetadata.isReply;\nvar isPageNote = annotationMetadata.isPageNote;\n\n/**\n * Return a copy of `annotation` with changes made in the editor applied.\n */\nfunction updateModel(annotation, changes, permissions) {\n  var userid = annotation.user;\n  return Object.assign({}, annotation, {\n    // Apply changes from the draft\n    tags: changes.tags,\n    text: changes.text,\n    title: changes.title,\n    complexite: changes.complexite,\n    fraicheur: changes.fraicheur,\n    rubriques: changes.rubriques,\n    rate: changes.rate,\n    permissions: changes.isPrivate ?\n      permissions.private(userid) : permissions.shared(userid, annotation.group),\n  });\n}\n\nfunction displayRate(arrayAnnotations){\n        arrayAnnotations.forEach(function(data){\n\t\t//console.log(data.id+\" && \"+data.rate)\n         if(data.rate!=\"\"){\n         for (var i=1; i<=5; i++){\n\t//console.log(annotation_id);\n          var element = angular.element(document.querySelector('.id'+data.id+'rating'+i)); \n\t\t//console.log(element);\n\t    if(i<=data.rate){\n\t    element.addClass('rating_selected');\n\t    }else{\n\t    element.removeClass('rating_selected');\n\t    }\n\t  }\n\t}\n        });\n}\n\nfunction setAnnotations_id(id,rate){\n  var existe = false;\n  annotations_id.forEach(function(element){\n\tif(element==id){\n\t    \texiste = true;\n\t}\n   });\n if(!existe){\n    annotations_id.push({\"id\":id,\"rate\":rate});\n  }\n}\n\nfunction getAnnotations_id(){\n  return annotations_id;\n}\n\nfunction setRunned(){\n\n  runned = runned+1;\n}\n\nfunction getRunned(){\n  return runned;\n}\n\n// @ngInject\nfunction AnnotationHeaderController($document,features, groups, settings, serviceUrl,drafts,permissions,$rootScope,\n\t\t\t            analytics,store, $scope,flash) {\n  var self = this;\n\n    /** True if the annotation is currently being saved. */\n    self.isSaving = false;\n    //console.log('header annotations'+JSON.stringify(this.annotation));\n\nsetAnnotations_id(this.annotation.id,this.annotation.rate);\n   \nsetTimeout(function(){\n setRunned();\n if(getRunned()==getAnnotations_id().length){\n  displayRate(getAnnotations_id());\n }\n}, 1000);\n\n  this.user = function () {\n    return self.annotation.user;\n  };\n\n\n  this.displayName = () => {\n    var userInfo = this.annotation.user_info;\n    var isThirdPartyUser_ = isThirdPartyUser(this.annotation.user, settings.authDomain);\n    if (features.flagEnabled('client_display_names') || isThirdPartyUser_) {\n      // userInfo is undefined if the api_render_user_info feature flag is off.\n      if (userInfo) {\n        // display_name is null if the user doesn't have a display name.\n        if (userInfo.display_name) {\n          return userInfo.display_name;\n        }\n      }\n    }\n    return username(this.annotation.user);\n  };\n\n  \n    this.state = function () {\n    var draft = drafts.get(self.annotation);\n    if (draft) {\n      return draft;\n    }\n    return {\n      tags: self.annotation.tags,\n      text: self.annotation.text,\n      title: self.annotation.title,\n      complexite: self.annotation.complexite,\n      fraicheur: self.annotation.fraicheur,\n      rubriques: self.annotation.rubriques,\n      typesContenu: self.annotation.typesContenu,\n      rate: self.annotation.rate,\n      isPrivate: !permissions.isShared(self.annotation.permissions,\n                                       self.annotation.user),\n    };\n  };\n\n  this.isReply = function () {\n    return isReply(self.annotation);\n  };\n\n\n  /** Save an annotation to the server. */\n  function save(annot) {\n    //console.log(\"annot \"+JSON.stringify(annot));\n    var saved;\n    var updating = !!annot.id;\n\n    if (updating) {\n      saved = store.annotation.update({id: annot.id}, annot);\n    } else {\n      saved = store.annotation.create({}, annot);\n    }\n\n    return saved.then(function (savedAnnot) {\n\n      var event;\n\n      // Copy across internal properties which are not part of the annotation\n      // model saved on the server\n      savedAnnot.$tag = annot.$tag;\n      Object.keys(annot).forEach(function (k) {\n        if (k[0] === '$') {\n          savedAnnot[k] = annot[k];\n        }\n      });\n\n\tconsole.log(\"savedAnnot\"+JSON.stringify(savedAnnot));\n      return savedAnnot;\n    });\n  }\n\n  /**\n    * Return the annotation's quote if it has one or `null` otherwise.\n    */\n  this.quote = function() {\n    if (self.annotation.target.length === 0) {\n      return null;\n    }\n    var target = self.annotation.target[0];\n    if (!target.selector) {\n      return null;\n    }\n    var quoteSel = target.selector.find(function (sel) {\n      return sel.type === 'TextQuoteSelector';\n    });\n    return quoteSel ? quoteSel.exact : null;\n  };\n\n  this.save = function() {\n   console.log(\"state save anno\"+JSON.stringify(self.state()));\n    var updatedModel = updateModel(self.annotation, self.state(), permissions);\n    console.log(\"updatedModel \"+JSON.stringify(updatedModel));\n    // Optimistically switch back to view mode and display the saving\n    // indicator\n    self.isSaving = true;\n\n    return save(updatedModel).then(function (model) {\n      Object.assign(updatedModel, model);\n\n      self.isSaving = false;\n\n      var event = isNew(self.annotation) ?\n        events.ANNOTATION_CREATED : events.ANNOTATION_UPDATED;\n      drafts.remove(self.annotation);\n\n      $rootScope.$broadcast(event, updatedModel);\n    }).catch(function (err) {\n      self.isSaving = false;\n      flash.error(err.message, 'Saving annotation failed');\n    });\n  };\n\n\n  this.rating = function(rate){\n\n\t  for (var i=1; i<=5; i++){\n          var element = angular.element(document.querySelector('.id'+this.annotation.id+'rating'+i));\n          //console.log(element);\n\t   if(i<=rate){\n\t   element.addClass('rating_selected');\n\t   }else{\n\t   element.removeClass('rating_selected');\n\t   }\n\t  }\n        self.annotation.rate = rate;\n\tself.save(rate);\n  }\n\n  this.isThirdPartyUser = function () {\n    return isThirdPartyUser(self.annotation.user, settings.authDomain);\n  };\n\n  this.thirdPartyUsernameLink = function () {\n    return settings.usernameUrl ?\n      settings.usernameUrl + username(this.annotation.user):\n      null;\n  };\n\n  this.serviceUrl = serviceUrl;\n\n  this.group = function () {\n    return groups.get(self.annotation.group);\n  };\n\n  var documentMeta = memoize(annotationMetadata.domainAndTitle);\n  this.documentMeta = function () {\n    return documentMeta(self.annotation);\n  };\n\n  this.updated = function () {\n    return self.annotation.updated;\n  };\n\n  this.htmlLink = function () {\n    if (self.annotation.links && self.annotation.links.html) {\n      return self.annotation.links.html;\n    }\n    return '';\n  };\n}\n\n/**\n * Header component for an annotation card.\n *\n * Header which displays the username, last update timestamp and other key\n * metadata about an annotation.\n */\nmodule.exports = {\n  controller: AnnotationHeaderController,\n  controllerAs: 'vm',\n  bindings: {\n    /**\n     * The saved annotation\n     */\n    annotation: '<',\n\n    /**\n     * True if the annotation is private or will become private when the user\n     * saves their changes.\n     */\n    isPrivate: '<',\n\n    /** True if the user is currently editing the annotation. */\n    isEditing: '<',\n\n    /**\n     * True if the annotation is a highlight.\n     * FIXME: This should determined in AnnotationHeaderController\n     */\n    isHighlight: '<',\n    onReplyCountClick: '&',\n    replyCount: '<',\n\n    /** True if document metadata should be shown. */\n    showDocumentInfo: '<',\n  },\n  template: require('../templates/annotation-header.html'),\n};\n",
    "'use strict';\n\nvar angular = require('angular');\nvar scopeTimeout = require('../util/scope-timeout');\n\nvar annotationMetadata = require('../annotation-metadata');\nvar memoize = require('../util/memoize');\n\n// @ngInject\nfunction AnnotationShareDialogController($element, $scope, analytics, session, store) {\n  var self = this;\n  var shareLinkInput = $element.find('input')[0];\n\n\n  $scope.$watch('vm.isOpen', function (isOpen) {\n    if (isOpen) {\n      // Focus the input and select it once the dialog has become visible\n      scopeTimeout($scope, function () {\n        shareLinkInput.focus();\n        shareLinkInput.select();\n      });\n    }\n  });\n\n  this.copyToClipboard = function (event) {\n    var $container = angular.element(event.currentTarget).parent();\n    var shareLinkInput = $container.find('input')[0];\n\n    try {\n      shareLinkInput.select();\n\n      // In some browsers, execCommand() returns false if it fails,\n      // in others, it may throw an exception instead.\n      if (!document.execCommand('copy')) {\n        throw new Error('Copying link failed');\n      }\n\n      self.copyToClipboardMessage = 'Link copied to clipboard!';\n    } catch (ex) {\n      self.copyToClipboardMessage = 'Select and copy to share.';\n    } finally {\n      setTimeout(function () {\n        self.copyToClipboardMessage = null;\n        $scope.$digest();\n      }, 1000);\n    }\n  };\n\n  this.onShareClick = function(target){\n    if(target){\n      analytics.track(analytics.events.ANNOTATION_SHARED, target);\n    }\n  };\n\n  function checkAuthenticated(callback) {\n    var xhr = new XMLHttpRequest();\n    var url = \"https://10.241.109.147:5000/api/getuser/\"+session.state.userid;\n    xhr.open(\"GET\", url, true);\n    xhr.setRequestHeader(\"Content-type\", \"application/json\");\n    xhr.onreadystatechange = function () {\n      if (xhr.status === 200 && xhr.readyState === 4) {\n          var data = JSON.parse(xhr.responseText);\n          console.log(data)\n          callback(data);\n      } else {\n          callback('err');\n      }\n    };\n    xhr.send();\n  }\n\n  function shareDiscussion(authCode,infos) {\n    var xhr = new XMLHttpRequest();\n    var url = \"https://plazza.orange.com/api/core/v3/contents\";\n    xhr.open(\"POST\", url, true);\n    xhr.setRequestHeader(\"Content-type\", \"application/json\");\n    xhr.setRequestHeader(\"Authorization\", \"Basic \" +authCode );\n    xhr.setRequestHeader(\"X-JCAPI-Token\", \"S7xYd4UO\");\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4 && xhr.status === 201) {\n        alert(\"Publi sur Plazza avec succs\");\n        window.location.reload();\n      } else {\n        console.log('text err '+xhr.responseText);\n      }\n    };\n    var content = \"<body>\"+\n                  \"<p><h2>\"+infos.title+\"</h2></p>\"+\n                  \"<p><b>Tags : </b>\"+infos.tags+\n                  \"</p>\"+\n                  \"<p><b>Publi sur : </b><a href=\"+infos.uri+\" target='_blanck'>\"+infos.uri+\"</a></p>\"+\n                  \"</body>\"\n    var discussion = { \"content\": { \"type\": \"text/html\", \"text\": content },\n      \"subject\": \"Discussion depuis Annotons nos contenus\",\n      \"type\": \"discussion\"\n    };\n    var data = JSON.stringify(discussion);\n    xhr.send(data);\n  }\n\n  this.onSharePlazza = function () {\n    var uri = this.uri;\n    var fields = uri.split('/a/');\n    var annotation_id = fields[1];\n    var infos = {};\n    store.annotation.get({ id: annotation_id }).then(function (annot) {\n      infos.title = annot.title;\n      infos.uri = annot.uri;\n      infos.tags=[];\n      for (var i = 0; i < annot.tags.length; i++) {\n        infos.tags.push(\" \"+annot.tags[i]+\" \");\n      }\n      checkAuthenticated(function (data) {\n        //traitement post\n        if(data!='err'){\n          shareDiscussion(data.password,infos);\n        }else{\n          console.log('error');\n        }\n      });\n    });\n  };\n}\n\nmodule.exports = {\n  controller: AnnotationShareDialogController,\n  controllerAs: 'vm',\n  bindings: {\n    annotation: '<',\n    group: '<',\n    uri: '<',\n    isPrivate: '<',\n    isOpen: '<',\n    onClose: '&',\n  },\n  template: require('../templates/annotation-share-dialog.html'),\n};\n",
    "'use strict';\n\nfunction hiddenCount(thread) {\n  var isHidden = thread.annotation && !thread.visible;\n  return thread.children.reduce(function (count, reply) {\n    return count + hiddenCount(reply);\n  }, isHidden ? 1 : 0);\n}\n\nfunction visibleCount(thread) {\n  var isVisible = thread.annotation && thread.visible;\n  return thread.children.reduce(function (count, reply) {\n    return count + visibleCount(reply);\n  }, isVisible ? 1 : 0);\n}\n\nfunction showAllChildren(thread, showFn) {\n  thread.children.forEach(function (child) {\n    showFn({thread: child});\n    showAllChildren(child, showFn);\n  });\n}\n\nfunction showAllParents(thread, showFn) {\n  while (thread.parent && thread.parent.annotation) {\n    showFn({thread: thread.parent});\n    thread = thread.parent;\n  }\n}\n\n// @ngInject\nfunction AnnotationThreadController() {\n  // Flag that tracks whether the content of the annotation is hovered,\n  // excluding any replies.\n  this.annotationHovered = false;\n\n  this.toggleCollapsed = function () {\n    this.onChangeCollapsed({\n      id: this.thread.id,\n      collapsed: !this.thread.collapsed,\n    });\n  };\n\n  this.threadClasses = function () {\n    return {\n      'annotation-thread': true,\n      'annotation-thread--reply': this.thread.depth > 0,\n      'annotation-thread--top-reply': this.thread.depth === 1,\n    };\n  };\n\n  this.threadToggleClasses = function () {\n    return {\n      'annotation-thread__collapse-toggle': true,\n      'is-open': !this.thread.collapsed,\n      'is-hovered': this.annotationHovered,\n    };\n  };\n\n  this.annotationClasses = function () {\n    return {\n      annotation: true,\n      'annotation--reply': this.thread.depth > 0,\n      'is-collapsed': this.thread.collapsed,\n      'is-highlighted': this.thread.highlightState === 'highlight',\n      'is-dimmed': this.thread.highlightState === 'dim',\n    };\n  };\n\n  /**\n   * Show this thread and any of its children\n   */\n  this.showThreadAndReplies = function () {\n    showAllParents(this.thread, this.onForceVisible);\n    this.onForceVisible({thread: this.thread});\n    showAllChildren(this.thread, this.onForceVisible);\n  };\n\n  this.isTopLevelThread = function () {\n    return !this.thread.parent;\n  };\n\n  /**\n   * Return the total number of annotations in the current\n   * thread which have been hidden because they do not match the current\n   * search filter.\n   */\n  this.hiddenCount = function () {\n    return hiddenCount(this.thread);\n  };\n\n  this.shouldShowReply = function (child) {\n    return visibleCount(child) > 0;\n  };\n}\n\n/**\n * Renders a thread of annotations.\n */\nmodule.exports = {\n  controllerAs: 'vm',\n  controller: AnnotationThreadController,\n  bindings: {\n    /** The annotation thread to render. */\n    thread: '<',\n    /**\n     * Specify whether document information should be shown\n     * on annotation cards.\n     */\n    showDocumentInfo: '<',\n    /** Called when the user clicks on the expand/collapse replies toggle. */\n    onChangeCollapsed: '&',\n    /**\n     * Called when the user clicks the button to show this thread or\n     * one of its replies.\n     */\n    onForceVisible: '&',\n  },\n  template: require('../templates/annotation-thread.html'),\n};\n",
    "'use strict';\n\n/**\n * Fetch all annotations in the same thread as `id`.\n *\n * @return Promise<Array<Annotation>>\n */\nfunction fetchThread(store, id) {\n  var annot;\n  return store.annotation.get({id: id}).then(function (annot) {\n    if (annot.references && annot.references.length) {\n      // This is a reply, fetch the top-level annotation\n      return store.annotation.get({id: annot.references[0]});\n    } else {\n      return annot;\n    }\n  }).then(function (annot_) {\n    annot = annot_;\n    return store.search({references: annot.id});\n  }).then(function (searchResult) {\n    return [annot].concat(searchResult.rows);\n  });\n}\n\n// @ngInject\nfunction AnnotationViewerContentController (\n  $location, $routeParams, annotationUI, rootThread, streamer, store,\n  streamFilter, annotationMapper\n) {\n  var self = this;\n\n  annotationUI.setAppIsSidebar(false);\n\n  var id = $routeParams.id;\n\n  this.search.update = function (query) {\n    $location.path('/stream').search('q', query);\n  };\n\n  annotationUI.subscribe(function () {\n    self.rootThread = rootThread.thread(annotationUI.getState());\n  });\n\n  this.setCollapsed = function (id, collapsed) {\n    annotationUI.setCollapsed(id, collapsed);\n  };\n\n  this.ready = fetchThread(store, id).then(function (annots) {\n    annotationMapper.loadAnnotations(annots);\n\n    var topLevelAnnot = annots.filter(function (annot) {\n      return (annot.references || []).length === 0;\n    })[0];\n\n    if (!topLevelAnnot) {\n      return;\n    }\n\n    streamFilter\n      .setMatchPolicyIncludeAny()\n      .addClause('/references', 'one_of', topLevelAnnot.id, true)\n      .addClause('/id', 'equals', topLevelAnnot.id, true);\n    streamer.setConfig('filter', { filter: streamFilter.getFilter() });\n    streamer.connect();\n\n    annots.forEach(function (annot) {\n      annotationUI.setCollapsed(annot.id, false);\n    });\n\n    if (topLevelAnnot.id !== id) {\n      annotationUI.highlightAnnotations([id]);\n    }\n  });\n}\n\nmodule.exports = {\n  controller: AnnotationViewerContentController,\n  controllerAs: 'vm',\n  bindings: {\n    search: '<',\n  },\n  template: require('../templates/annotation-viewer-content.html'),\n};\n",
    "'use strict';\n\nvar annotationMetadata = require('../annotation-metadata');\nvar events = require('../events');\nvar { isThirdPartyUser } = require('../util/account-id');\nvar tags = require('../tags').store;\n\nvar isNew = annotationMetadata.isNew;\nvar isReply = annotationMetadata.isReply;\nvar isPageNote = annotationMetadata.isPageNote;\nvar allAnnotations = [];\n\n/**\n * Return a copy of `annotation` with changes made in the editor applied.\n */\nfunction updateModel(annotation, changes, permissions) {\n  var userid = annotation.user;\n  return Object.assign({}, annotation, {\n    // Apply changes from the draft\n    tags: changes.tags,\n    text: changes.text,\n    title: changes.title,\n    complexite: changes.complexite,\n    fraicheur: changes.fraicheur,\n    rate: changes.rate,\n    permissions: changes.isPrivate ?\n      permissions.private(userid) : permissions.shared(userid, annotation.group),\n  });\n}\n\nfunction addAnnotation(annotation) {\n  if (annotation.title != undefined) {\n    var existe = false;\n    if (allAnnotations.length == 0) {\n      allAnnotations.push(annotation);\n    } else {\n      for (var i = 0; i < allAnnotations.length; i++) {\n        if (JSON.stringify(allAnnotations[i]) === JSON.stringify(annotation)) {\n          existe = true;\n          break;\n        }\n      }\n      if (!existe) {\n        allAnnotations.push(annotation);\n      }\n    }\n  }\n}\n\nfunction updateTitle(annot) {\n  console.log(\"all \" + JSON.stringify(allAnnotations));\n  for (var i = 0; i < allAnnotations.length; i++) {\n    if (allAnnotations[i].title != annot.title) {\n      allAnnotations[i].title = annot.title;\n      return allAnnotations[i];\n    }\n  }\n  return \"notExist\";\n}\n\n// @ngInject\nfunction AnnotationController(\n  $document, $rootScope, $scope, $timeout, $window, $element, analytics, annotationUI,\n  annotationMapper, drafts, flash, groups, permissions, serviceUrl,\n  session, settings, store, streamer) {\n\n  var self = this;\n  addAnnotation(self.annotation);\n\n  var newlyCreatedByHighlightButton;\n\n  this.getLastTitle = function () {\n    if (allAnnotations.length == 0) {\n      return self.annotation.document.title;\n    } else {\n      return allAnnotations[0].title;\n    }\n  };\n\n  /** Save an annotation to the server. */\n  function save(annot) {\n    console.log(\"annot \"+JSON.stringify(annot));\n    var saved;\n    var updating = !!annot.id;\n    \n    \n    if (annot.title == \"\") {\n      if (allAnnotations.length == 0) {\n        annot.title = annot.document.title;\n      } else {\n        annot.title = allAnnotations[0].title;\n      }\n    } else {\n      var annotationUpdate = updateTitle(annot);\n      if (annotationUpdate != \"notExist\") {\n        save(annotationUpdate);\n      }\n    }\n\n    if (updating) {\n      saved = store.annotation.update({id: annot.id}, annot);\n    } else {\n      saved = store.annotation.create({}, annot);\n    }\n\n    console.log(saved);\n\n    return saved.then(function (savedAnnot) {\n\n      var event;\n      // Copy across internal properties which are not part of the annotation\n      // model saved on the server\n      savedAnnot.$tag = annot.$tag;\n      Object.keys(annot).forEach(function (k) {\n        if (k[0] === '$') {\n          savedAnnot[k] = annot[k];\n        }\n      });\n\n\n      if(self.isReply()){\n        event = updating ? analytics.events.REPLY_UPDATED : analytics.events.REPLY_CREATED;\n      }else if(self.isHighlight()){\n        event = updating ? analytics.events.HIGHLIGHT_UPDATED : analytics.events.HIGHLIGHT_CREATED;\n      }else if(isPageNote(self.annotation)) {\n        event = updating ? analytics.events.PAGE_NOTE_UPDATED : analytics.events.PAGE_NOTE_CREATED;\n      }else {\n        event = updating ? analytics.events.ANNOTATION_UPDATED : analytics.events.ANNOTATION_CREATED;\n      }\n\n      analytics.track(event);\n\n      return savedAnnot;\n    });\n  }\n\n  /**\n    * Initialize the controller instance.\n    *\n    * All initialization code except for assigning the controller instance's\n    * methods goes here.\n    */\n  function init() {\n    /** Determines whether controls to expand/collapse the annotation body\n     * are displayed adjacent to the tags field.\n     */\n    self.canCollapseBody = false;\n\n    /** Determines whether the annotation body should be collapsed. */\n    self.collapseBody = true;\n\n    /** True if the annotation is currently being saved. */\n    self.isSaving = false;\n\n    /** True if the 'Share' dialog for this annotation is currently open. */\n    self.showShareDialog = false;\n\n    /**\n      * `true` if this AnnotationController instance was created as a result of\n      * the highlight button being clicked.\n      *\n      * `false` if the annotation button was clicked, or if this is a highlight\n      * or annotation that was fetched from the server (as opposed to created\n      * new client-side).\n      */\n    newlyCreatedByHighlightButton = self.annotation.$highlight || false;\n\n    // New annotations (just created locally by the client, rather then\n    // received from the server) have some fields missing. Add them.\n    //\n    // FIXME: This logic should go in the `addAnnotations` Redux action once all\n    // required state is in the store.\n    self.annotation.user = self.annotation.user || session.state.userid;\n    self.annotation.user_info = self.annotation.user_info || session.state.user_info;\n    self.annotation.group = self.annotation.group || groups.focused().id;\n    if (!self.annotation.permissions) {\n      self.annotation.permissions = permissions.default(self.annotation.user,\n                                                      self.annotation.group);\n    }\n    self.annotation.text = self.annotation.text || '';\n    self.annotation.title = self.annotation.title || '';\n    self.annotation.complexite = self.annotation.complexite || '';\n    self.annotation.fraicheur = self.annotation.fraicheur || '';\n    self.annotation.rate = self.annotation.rate || '';\n    if (!Array.isArray(self.annotation.tags)) {\n      self.annotation.tags = [];\n    }\n    if (!Array.isArray(self.annotation.typesContenu)) {\n      self.annotation.typesContenu = [];\n    }\n\n    // Automatically save new highlights to the server when they're created.\n    // Note that this line also gets called when the user logs in (since\n    // AnnotationController instances are re-created on login) so serves to\n    // automatically save highlights that were created while logged out when you\n    // log in.\n    saveNewHighlight();\n\n    // If this annotation is not a highlight and if it's new (has just been\n    // created by the annotate button) or it has edits not yet saved to the\n    // server - then open the editor on AnnotationController instantiation.\n    if (!newlyCreatedByHighlightButton) {\n      if (isNew(self.annotation) || drafts.get(self.annotation)) {\n        self.edit();\n      }\n    }\n  }\n\n  /** Save this annotation if it's a new highlight.\n   *\n   * The highlight will be saved to the server if the user is logged in,\n   * saved to drafts if they aren't.\n   *\n   * If the annotation is not new (it has already been saved to the server) or\n   * is not a highlight then nothing will happen.\n   *\n   */\n  function saveNewHighlight() {\n    if (!isNew(self.annotation)) {\n      // Already saved.\n      return;\n    }\n\n    if (!self.isHighlight()) {\n      // Not a highlight,\n      return;\n    }\n\n    if (self.annotation.user) {\n      // User is logged in, save to server.\n      // Highlights are always private.\n      self.annotation.permissions = permissions.private(self.annotation.user);\n      save(self.annotation).then(function(model) {\n        model.$tag = self.annotation.$tag;\n        $rootScope.$broadcast(events.ANNOTATION_CREATED, model);\n      });\n    } else {\n      // User isn't logged in, save to drafts.\n      drafts.update(self.annotation, self.state());\n    }\n  }\n\n  this.authorize = function(action) {\n    return permissions.permits(\n      self.annotation.permissions,\n      action,\n      session.state.userid\n    );\n  };\n\n  /**\n    * @ngdoc method\n    * @name annotation.AnnotationController#flag\n    * @description Flag the annotation.\n    */\n  this.flag = function() {\n    if (!session.state.userid) {\n      flash.error(\n        'You must be logged in to report an annotation to the moderators.',\n        'Login to flag annotations'\n      );\n      return;\n    }\n\n    var onRejected = function(err) {\n      flash.error(err.message, 'Flagging annotation failed');\n    };\n    annotationMapper.flagAnnotation(self.annotation).then(function(){\n      analytics.track(analytics.events.ANNOTATION_FLAGGED);\n      annotationUI.updateFlagStatus(self.annotation.id, true);\n    }, onRejected);\n  };\n\n  /**\n    * @ngdoc method\n    * @name annotation.AnnotationController#delete\n    * @description Deletes the annotation.\n    */\n  this.delete = function() {\n    return $timeout(function() {  // Don't use confirm inside the digest cycle.\n      var msg = 'Are you sure you want to delete this annotation?';\n      if ($window.confirm(msg)) {\n        var onRejected = function(err) {\n          flash.error(err.message, 'Deleting annotation failed');\n        };\n        $scope.$apply(function() {\n          annotationMapper.deleteAnnotation(self.annotation).then(function(){\n            var event;\n\n            if(self.isReply()){\n              event = analytics.events.REPLY_DELETED;\n            }else if(self.isHighlight()){\n              event = analytics.events.HIGHLIGHT_DELETED;\n            }else if(isPageNote(self.annotation)){\n              event = analytics.events.PAGE_NOTE_DELETED;\n            }else {\n              event = analytics.events.ANNOTATION_DELETED;\n            }\n\n            analytics.track(event);\n\n          }, onRejected);\n        });\n      }\n    }, true);\n  };\n\n  /**\n    * @ngdoc method\n    * @name annotation.AnnotationController#edit\n    * @description Switches the view to an editor.\n    */\n  this.edit = function() {\n\n    if (!drafts.get(self.annotation)) {\n      drafts.update(self.annotation, self.state());\n    }\n\n  };\n\n  /**\n   * @ngdoc method\n   * @name annotation.AnnotationController#editing.\n   * @returns {boolean} `true` if this annotation is currently being edited\n   *   (i.e. the annotation editor form should be open), `false` otherwise.\n   */\n  this.editing = function() {\n\t  for (var i=1; i<=5; i++){\n          var element = angular.element(document.querySelector('.id'+this.annotation.id+'rating'+i));\n          //console.log(element);\n\t   if(i<=self.state().rate){\n\t   element.addClass('rating_selected');\n\t   }else{\n\t   element.removeClass('rating_selected');\n\t   }\n\t  }\n\n    return drafts.get(self.annotation) && !self.isSaving;\n  };\n\n  /**\n    * @ngdoc method\n    * @name annotation.AnnotationController#group.\n    * @returns {Object} The full group object associated with the annotation.\n    */\n  this.group = function() {\n    return groups.get(self.annotation.group);\n  };\n\n  /**\n    * @ngdoc method\n    * @name annotation.AnnotaitonController#hasContent\n    * @returns {boolean} `true` if this annotation has content, `false`\n    *   otherwise.\n    */\n  this.hasContent = function() {\n    return self.state().text.length > 0 || self.state().tags.length > 0;\n  };\n\n  /**\n    * Return the annotation's quote if it has one or `null` otherwise.\n    */\n  this.quote = function() {\n    if (self.annotation.target.length === 0) {\n      return null;\n    }\n    var target = self.annotation.target[0];\n    if (!target.selector) {\n      return null;\n    }\n    var quoteSel = target.selector.find(function (sel) {\n      return sel.type === 'TextQuoteSelector';\n    });\n    return quoteSel ? quoteSel.exact : null;\n  };\n\n  this.id = function() {\n    return self.annotation.id;\n  };\n\n  this.rating = function(rate){\n          console.log(rate);\n\t  if(this.annotation.id==undefined){\n\n\t  for (var i=1; i<=5; i++){\n          var element = angular.element(document.querySelector('.idrating'+i));\n          //console.log(element);\n\t   if(i<=rate){\n\t   element.addClass('rating_selected');\n\t   }else{\n\t   element.removeClass('rating_selected');\n\t   }\n\t  }\n\n\t  }else{\n\n\t  for (var i=1; i<=5; i++){\n          var element = angular.element(document.querySelector('.id'+this.annotation.id+'rating'+i));\n          //console.log(element);\n\t   if(i<=rate){\n\t   element.addClass('rating_selected');\n\t   }else{\n\t   element.removeClass('rating_selected');\n\t   }\n\t  }\n\n\t  }\n\n\tdrafts.update(self.annotation, {\n          isPrivate: self.state().isPrivate,\n          tags: self.state().tags,\n          text: self.state().text,\n          title: self.state().title,\n\t  complexite: self.state().complexite,\n\t  fraicheur: self.state().fraicheur,\n          typesContenu: self.state().typesContenu,\n          rate: rate,\n    });\n  }\n\nfunction getThreadHeight(id) {\n  var threadElement = document.getElementById(id);\n  if (!threadElement) {\n    return null;\n  }\n\n  // Note: `getComputedStyle` may return `null` in Firefox if the iframe is\n  // hidden. See https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n  var style = window.getComputedStyle(threadElement);\n  if (!style) {\n    return null;\n  }\n\n  // Get the height of the element inside the border-box, excluding\n  // top and bottom margins.\n  var elementHeight = threadElement.getBoundingClientRect().height;\n\n  // Get the bottom margin of the element. style.margin{Side} will return\n  // values of the form 'Npx', from which we extract 'N'.\n  var marginHeight = parseFloat(style.marginTop) +\n                     parseFloat(style.marginBottom);\n\n  return elementHeight + marginHeight;\n}\n\nfunction changeHeight(id){\n   var element = angular.element(document.querySelector('.actions'+id));\n   var element_button = angular.element(document.querySelector('.actions'+id+' .annotation-action-btn'));\n\n   if(element[0].style.display == \"block\"){\n         var height = getThreadHeight(id);\n         height = height - 50;\n \t element_button[0].style.marginTop = '';\n         if(height<200){\n\t element_button[0].style.marginTop = '50px';\n\t }else{\n\t element_button[0].style.marginTop = '120px';\n\t }\n         var margin = (-(height) -30);\n\t element[0].style.height = '';\n\t element[0].style.height = `${height}px`;\n\t element[0].style.marginTop = '';\n\t element[0].style.marginTop = `${margin}px`;\t \n   }\n}\n\n   this.plusCommentaire = function(id){\n   var element_commentaire;\n\tif(id==undefined){\n         element_commentaire = angular.element(document.querySelector('.Commentaire'));\n \t if(element_commentaire[0].style.display == \"none\"){\n\t element_commentaire[0].style.display = \"block\";\n\t }else{\n\t element_commentaire[0].style.display = \"none\";\n\t }\n\t}else{\n        element_commentaire = angular.element(document.querySelector('.Commentaire'+id));\n \tif(element_commentaire[0].style.display == \"none\"){\n\telement_commentaire[0].style.display = \"block\";\n\t}else{\n\telement_commentaire[0].style.display = \"none\";\n\t}\n\t}\n\n  /* var plus_commentaire;\n\n        plus_commentaire = angular.element(document.querySelector('.plusCommentaire'));\n\tconsole.log('plus_commentaire'+Object.keys(plus_commentaire[0]));\n \tif(plus_commentaire[0].innerHTML == \"Afficher Plus\"){\n\tplus_commentaire[0].innerHTML = \"Afficher Moins\";\n\t}else{\n\tplus_commentaire[0].innerHTML= \"Afficher Plus\";\n\t}*/\n\t\n   changeHeight(id);\n\t}\n\n   this.plusInfo = function(id){\n   var element;\n\tif(id==undefined){\n         element = angular.element(document.querySelector('.infos'));\n \t if(element[0].style.display == \"none\"){\n\t element[0].style.display = \"block\";\n\t }else{\n\t element[0].style.display = \"none\";\n\t }\n\t}else{\n        element = angular.element(document.querySelector('.infos'+id));\n \tif(element[0].style.display == \"none\"){\n\telement[0].style.display = \"block\";\n\t}else{\n\telement[0].style.display = \"none\";\n\t}\n\t}\n   changeHeight(id);\n\t}\n\n\n   this.actions = function(id){\n   var element;\n\tif(id==undefined){\n         element = angular.element(document.querySelector('.actions'));\n \t if(element[0].style.display == \"none\"){\n\t element[0].style.display = \"block\";\n\t }else{\n\t element[0].style.display = \"none\";\n\t }\n\t}else{\n        element = angular.element(document.querySelector('.actions'+id));\n \tif(element[0].style.display == \"none\"){\n\telement[0].style.display = \"block\";\n   \tchangeHeight(id);\n\t}else{\n\telement[0].style.display = \"none\";\n\t}\n\t}\n\t}\n\n\n  /**\n    * @ngdoc method\n    * @name annotation.AnnotationController#isHighlight.\n    * @returns {boolean} true if the annotation is a highlight, false otherwise\n    */\n  this.isHighlight = function() {\n    if (newlyCreatedByHighlightButton) {\n      return true;\n    } else if (isNew(self.annotation)) {\n      return false;\n    } else {\n      // Once an annotation has been saved to the server there's no longer a\n      // simple property that says whether it's a highlight or not. Instead an\n      // annotation is considered a highlight if it has a) content and b) is\n      // linked to a specific part of the document.\n      if (isPageNote(self.annotation) || isReply(self.annotation)) {\n        return false;\n      }\n      if (self.annotation.hidden) {\n        // Annotation has been censored so we have to assume that it had\n        // content.\n        return false;\n      }\n      return !self.hasContent();\n    }\n  };\n\n  /**\n    * @ngdoc method\n    * @name annotation.AnnotationController#isShared\n    * @returns {boolean} True if the annotation is shared (either with the\n    * current group or with everyone).\n    */\n  this.isShared = function() {\n    return !self.state().isPrivate;\n  };\n\n  // Save on Meta + Enter or Ctrl + Enter.\n  this.onKeydown = function (event) {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      event.preventDefault();\n      self.save();\n    }\n  };\n\n  this.toggleCollapseBody = function(event) {\n    event.stopPropagation();\n    self.collapseBody = !self.collapseBody;\n  };\n\n  /**\n    * @ngdoc method\n    * @name annotation.AnnotationController#reply\n    * @description\n    * Creates a new message in reply to this annotation.\n    */\n  this.reply = function() {\n    var references = (self.annotation.references || []).concat(self.annotation.id);\n    var group = self.annotation.group;\n    var replyPermissions;\n    var userid = session.state.userid;\n    if (userid) {\n      replyPermissions = self.state().isPrivate ?\n        permissions.private(userid) : permissions.shared(userid, group);\n    }\n    annotationMapper.createAnnotation({\n      group: group,\n      references: references,\n      permissions: replyPermissions,\n      target: [{source: self.annotation.target[0].source}],\n      uri: self.annotation.uri,\n    });\n  };\n\n  /**\n    * @ngdoc method\n    * @name annotation.AnnotationController#revert\n    * @description Reverts an edit in progress and returns to the viewer.\n    */\n  this.revert = function() {\n    drafts.remove(self.annotation);\n    if (isNew(self.annotation)) {\n      $rootScope.$broadcast(events.ANNOTATION_DELETED, self.annotation);\n    }\n  };\n\n  this.save = function() {\n    if (!self.annotation.user) {\n      flash.info('Please log in to save your annotations.');\n      return Promise.resolve();\n    }\n    /*if (!self.hasContent() && self.isShared()) {\n      flash.info('Please add text or a tag before publishing.');\n      return Promise.resolve();\n    }*/\n\n   //console.log(\"state save anno\"+JSON.stringify(self.state()));\n    var updatedModel = updateModel(self.annotation, self.state(), permissions);\n    //console.log(\"updatedModel \"+JSON.stringify(updatedModel));\n    // Optimistically switch back to view mode and display the saving\n    // indicator\n    self.isSaving = true;\n\n    return save(updatedModel).then(function (model) {\n      Object.assign(updatedModel, model);\n\n      self.isSaving = false;\n\n      var event = isNew(self.annotation) ?\n        events.ANNOTATION_CREATED : events.ANNOTATION_UPDATED;\n      drafts.remove(self.annotation);\n\n      $rootScope.$broadcast(event, updatedModel);\n    }).catch(function (err) {\n      self.isSaving = false;\n      self.edit();\n      flash.error(err.message, 'Saving annotation failed');\n    });\n  };\n\n  /**\n    * @ngdoc method\n    * @name annotation.AnnotationController#setPrivacy\n    *\n    * Set the privacy settings on the annotation to a predefined\n    * level. The supported levels are 'private' which makes the annotation\n    * visible only to its creator and 'shared' which makes the annotation\n    * visible to everyone in the group.\n    *\n    * The changes take effect when the annotation is saved\n    */\n  this.setPrivacy = function(privacy) {\n    // When the user changes the privacy level of an annotation they're\n    // creating or editing, we cache that and use the same privacy level the\n    // next time they create an annotation.\n    // But _don't_ cache it when they change the privacy level of a reply.\n    if (!isReply(self.annotation)) {\n      permissions.setDefault(privacy);\n    }\n    drafts.update(self.annotation, {\n      tags: self.state().tags,\n      text: self.state().text,\n      isPrivate: privacy === 'private',\n      title: self.state().title,\n      complexite: self.state().complexite,\n      fraicheur: self.state().fraicheur,\n      typesContenu: self.state().typesContenu,\n      rate: self.state().rate,\n    });\n  };\n\n  this.tagSearchURL = function(tag) {\n    if (this.isThirdPartyUser()) {\n      return null;\n    }\n    //console.log(\"Annotation search by tag\")\n    return serviceUrl('search.tag', {tag: tag});\n  };\n\n  this.isOrphan = function() {\n    if (typeof self.annotation.$orphan === 'undefined') {\n      return self.annotation.$anchorTimeout;\n    }\n    return self.annotation.$orphan;\n  };\n\n  this.user = function() {\n    return self.annotation.user;\n  };\n\n  this.isThirdPartyUser = function () {\n    return isThirdPartyUser(self.annotation.user, settings.authDomain);\n  };\n\n  this.isDeleted = function () {\n    return streamer.hasPendingDeletion(self.annotation.id);\n  };\n\n  this.isHiddenByModerator = function () {\n    return self.annotation.hidden;\n  };\n\n  this.canFlag = function () {\n    // Users can flag any annotations except their own.\n    return session.state.userid !== self.annotation.user;\n  };\n\n  this.isFlagged = function() {\n    return self.annotation.flagged;\n  };\n\n  this.isReply = function () {\n    return isReply(self.annotation);\n  };\n\n  this.incontextLink = function () {\n    if (self.annotation.links) {\n      return self.annotation.links.incontext ||\n             self.annotation.links.html ||\n             '';\n    }\n    return '';\n  };\n\n  /**\n   * Sets whether or not the controls for expanding/collapsing the body of\n   * lengthy annotations should be shown.\n   */\n  this.setBodyCollapsible = function (canCollapse) {\n    if (canCollapse === self.canCollapseBody) {\n      return;\n    }\n    self.canCollapseBody = canCollapse;\n\n    // This event handler is called from outside the digest cycle, so\n    // explicitly trigger a digest.\n    $scope.$digest();\n  };\n\n\n   //TypeContenu Section\n   //var allTypesContenu = this.allTypesContenu;\n   this.setTypesContenu = function(typeContenu){\n\n     //var existe = false;\n     //var index;\n     console.log('self.state().typesContenu begin = '+self.state().typesContenu)\n     if (typeof self.state().typesContenu[0] !== 'undefined' && self.state().typesContenu[0] !== null) { \n\t\tself.state().typesContenu[0] = typeContenu;\n    }else{\n        self.state().typesContenu.push(typeContenu);\n    }\n\tconsole.log('self.state().typesContenu end = '+self.state().typesContenu)\n\n\tdrafts.update(self.annotation, {\n          isPrivate: self.state().isPrivate,\n          tags: self.state().tags,\n          text: self.state().text,\n          title: self.state().title,\n\t  complexite: self.state().complexite,\n\t  fraicheur: self.state().fraicheur,\n          typesContenu: self.state().typesContenu,\n          rate: self.state().rate,\n\n    });\n   };\n\n   this.setComplexite = function(complexite){\n     //console.log(\"here complexite \"+complexite);\n\tdrafts.update(self.annotation, {\n          isPrivate: self.state().isPrivate,\n          tags: self.state().tags,\n          text: self.state().text,\n          title: self.state().title,\n\t  complexite: complexite,\n\t  fraicheur: self.state().fraicheur,\n          typesContenu: self.state().typesContenu,\n          rate: self.state().rate,\n\n    });\n   };\n\n  this.setTitle = function (title) {\n  \n//console.log(title);\n    drafts.update(self.annotation, {\n      isPrivate: self.state().isPrivate,\n      tags: self.state().tags,\n      text: self.state().text,\n      title: title,\n      complexite: self.state().complexite,\n      fraicheur: self.state().fraicheur,\n      typesContenu: self.state().typesContenu,\n      rate: self.state().rate,\n    });\n  };\n\n  this.setFraicheur = function (fraicheur) {\n//console.log(fraicheur);\n    drafts.update(self.annotation, {\n      isPrivate: self.state().isPrivate,\n      tags: self.state().tags,\n      text: self.state().text,\n      title: self.state().title,\n      complexite: self.state().complexite,\n      fraicheur: fraicheur,\n      typesContenu: self.state().typesContenu,\n      rate: self.state().rate,\n    });\n  };\n\n\n  this.setText = function (text) {\n    drafts.update(self.annotation, {\n      isPrivate: self.state().isPrivate,\n      tags: self.state().tags,\n      text: text,\n      title: self.state().title,\n      complexite: self.state().complexite,\n      fraicheur: self.state().fraicheur,\n      typesContenu: self.state().typesContenu,\n      rate: self.state().rate,\n    });\n  };\n\n  this.setTags = function (tags) {\n//console.log(\"here tags \"+JSON.stringify(tags));\n    drafts.update(self.annotation, {\n      isPrivate: self.state().isPrivate,\n      tags: tags,\n      text: self.state().text,\n      title: self.state().title,\n      complexite: self.state().complexite,\n      fraicheur: self.state().fraicheur,\n      typesContenu: self.state().typesContenu,\n      rate: self.state().rate,\n    });\n  };\n\n  this.state = function () {\n    var draft = drafts.get(self.annotation);\n    if (draft) {\n      return draft;\n    }\n\t  for (var i=1; i<=5; i++){\n          var element = angular.element(document.querySelector('.id'+this.annotation.id+'rating'+i));\n          //console.log(element);\n\t   if(i<=self.annotation.rate){\n\t   element.addClass('rating_selected');\n\t   }else{\n\t   element.removeClass('rating_selected');\n\t   }\n\t  }\n    return {\n      tags: self.annotation.tags,\n      text: self.annotation.text,\n      title: self.annotation.title,\n      complexite: self.annotation.complexite,\n      fraicheur: self.annotation.fraicheur,\n      typesContenu: self.annotation.typesContenu,\n      rate: self.annotation.rate,\n      isPrivate: !permissions.isShared(self.annotation.permissions,\n                                       self.annotation.user),\n    };\n  };\n\n  /**\n   * Return true if the CC 0 license notice should be shown beneath the\n   * annotation body.\n   */\n  this.shouldShowLicense = function () {\n    if (!self.editing() || !self.isShared()) {\n      return false;\n    }\n    return self.group().public;\n  };\n\n  init();\n}\n\nmodule.exports = {\n  controller: AnnotationController,\n  controllerAs: 'vm',\n  bindings: {\n    annotation: '<',\n    showDocumentInfo: '<',\n    onReplyCountClick: '&',\n    replyCount: '<',\n    isCollapsed: '<',\n    auth: '<',\n  },\n  template: require('../templates/annotation.html'),\n\n  // Private helper exposed for use in unit tests.\n  updateModel: updateModel,\n};\n",
    "'use strict';\n\n// @ngInject\nfunction DropdownMenuBtnController($timeout) {\n  var self = this;\n\n\n  //added for firefox\n  function displayMenu() {\n    var element = angular.element(document.querySelector('.publishMenu'));\n    if (element[0].style.visibility == \"hidden\") {\n      element[0].style.visibility = 'visible';\n    } else {\n      element[0].style.visibility = 'hidden';\n    }\n  }\n\n  this.toggleDropdown = function($event) {\n    displayMenu();\n    $event.stopPropagation();\n    $timeout(function () {\n      self.onToggleDropdown();\n    }, 0);\n  };\n}\n\nmodule.exports = {\n  controller: DropdownMenuBtnController,\n  controllerAs: 'vm',\n  bindings: {\n    isDisabled: '<',\n    label: '<',\n    dropdownMenuLabel: '@',\n    onClick: '&',\n    onToggleDropdown: '&',\n  },\n  template: require('../templates/dropdown-menu-btn.html'),\n};\n",
    "'use strict';\n\n// @ngInject\nfunction ExcerptController($element, $scope, ExcerptOverflowMonitor) {\n  var self = this;\n\n  if (this.collapse === undefined) {\n    this.collapse = true;\n  }\n\n  if (this.animate === undefined) {\n    this.animate = true;\n  }\n\n  if (this.enabled === undefined) {\n    this.enabled = true;\n  }\n\n  this.isExpandable = function () {\n    return this.overflowing && this.collapse;\n  };\n\n  this.isCollapsible = function () {\n    return this.overflowing && !this.collapse;\n  };\n\n  this.toggle = function (event) {\n    // When the user clicks a link explicitly to toggle the collapsed state,\n    // the event is not propagated.\n    event.stopPropagation();\n    this.collapse = !this.collapse;\n  };\n\n  this.expand = function () {\n    // When the user expands the excerpt 'implicitly' by clicking at the bottom\n    // of the collapsed excerpt, the event is allowed to propagate. For\n    // annotation cards, this causes clicking on a quote to scroll the view to\n    // the selected annotation.\n    this.collapse = false;\n  };\n\n  this.showInlineControls = function () {\n    return this.overflowing && this.inlineControls;\n  };\n\n  this.bottomShadowStyles = function () {\n    return {\n      'excerpt__shadow': true,\n      'excerpt__shadow--transparent': this.inlineControls,\n      'is-hidden': !this.isExpandable(),\n    };\n  };\n\n  // Test if the element or any of its parents have been hidden by\n  // an 'ng-show' directive\n  function isElementHidden() {\n    var el = $element[0];\n    while (el) {\n      if (el.classList.contains('ng-hide')) {\n        return true;\n      }\n      el = el.parentElement;\n    }\n    return false;\n  }\n\n  var overflowMonitor = new ExcerptOverflowMonitor({\n    getState: function () {\n      return {\n        enabled: self.enabled,\n        animate: self.animate,\n        collapsedHeight: self.collapsedHeight,\n        collapse: self.collapse,\n        overflowHysteresis: self.overflowHysteresis,\n      };\n    },\n    contentHeight: function () {\n      var contentElem = $element[0].querySelector('.excerpt');\n      if (!contentElem) {\n        return null;\n      }\n      return contentElem.scrollHeight;\n    },\n    onOverflowChanged: function (overflowing) {\n      self.overflowing = overflowing;\n      if (self.onCollapsibleChanged) {\n        self.onCollapsibleChanged({collapsible: overflowing});\n      }\n      // Even though this change happens outside the framework, we use\n      // $digest() rather than $apply() here to avoid a large number of full\n      // digest cycles if many excerpts update their overflow state at the\n      // same time. The onCollapsibleChanged() handler, if any, is\n      // responsible for triggering any necessary digests in parent scopes.\n      $scope.$digest();\n    },\n  }, window.requestAnimationFrame);\n\n  this.contentStyle = overflowMonitor.contentStyle;\n\n  // Listen for document events which might affect whether the excerpt\n  // is overflowing, even if its content has not changed.\n  $element[0].addEventListener('load', overflowMonitor.check, false /* capture */);\n  window.addEventListener('resize', overflowMonitor.check);\n  $scope.$on('$destroy', function () {\n    window.removeEventListener('resize', overflowMonitor.check);\n  });\n\n  // Watch for changes to the visibility of the excerpt.\n  // Unfortunately there is no DOM API for this, so we rely on a digest\n  // being triggered after the visibility changes.\n  $scope.$watch(isElementHidden, function (hidden) {\n    if (!hidden) {\n      overflowMonitor.check();\n    }\n  });\n\n  // Watch input properties which may affect the overflow state\n  $scope.$watch('vm.contentData', overflowMonitor.check);\n  $scope.$watch('vm.enabled', overflowMonitor.check);\n\n  // Trigger an initial calculation of the overflow state.\n  //\n  // This is performed asynchronously so that the content of the <excerpt>\n  // has settled - ie. all Angular directives have been fully applied and\n  // the DOM has stopped changing. This may take several $digest cycles.\n  overflowMonitor.check();\n}\n\n/**\n * @description This component truncates the height of its contents to a\n *              specified number of lines and provides controls for expanding\n *              and collapsing the resulting truncated element.\n */\nmodule.exports = {\n  controller: ExcerptController,\n  controllerAs: 'vm',\n  bindings: {\n    /** Whether or not expansion should be animated. Defaults to true. */\n    animate: '<?',\n    /**\n     * The data which is used to generate the excerpt's content.\n     * When this changes, the excerpt will recompute whether the content\n     * is overflowing.\n     */\n    contentData: '<',\n    /** Whether or not truncation should be enabled */\n    enabled: '<?',\n    /**\n     * Specifies whether controls to expand and collapse\n     * the excerpt should be shown inside the <excerpt> component.\n     * If false, external controls can expand/collapse the excerpt by\n     * setting the 'collapse' property.\n     */\n    inlineControls: '<',\n    /** Sets whether or not the excerpt is collapsed. */\n    collapse: '=?',\n    /**\n     * Called when the collapsibility of the excerpt (that is, whether or\n     * not the content height exceeds the collapsed height), changes.\n     *\n     * Note: This function is *not* called from inside a digest cycle,\n     * the caller is responsible for triggering any necessary digests.\n     */\n    onCollapsibleChanged: '&?',\n    /** The height of this container in pixels when collapsed.\n     */\n    collapsedHeight: '<',\n    /**\n     * The number of pixels by which the height of the excerpt's content\n     * must extend beyond the collapsed height in order for truncation to\n     * be activated. This prevents the 'More' link from being shown to expand\n     * the excerpt if it has only been truncated by a very small amount, such\n     * that expanding the excerpt would reveal no extra lines of text.\n     */\n    overflowHysteresis: '<?',\n  },\n  transclude: true,\n  template: require('../templates/excerpt.html'),\n};\n",
    "'use strict';\n\nvar { isThirdPartyUser } = require('../util/account-id');\nvar serviceConfig = require('../service-config');\n\n// @ngInject\nfunction GroupListController($window, analytics, groups, settings, serviceUrl) {\n  this.groups = groups;\n\n  //added for firefox\n  this.displayMenu = function () {\n    var element = angular.element(document.querySelector('.groupMenu'));\n    if (element[0].style.visibility == \"hidden\") {\n      element[0].style.visibility = 'visible';\n    } else {\n      element[0].style.visibility = 'hidden';\n    }\n  };\n\n  this.createNewGroup = function() {\n    $window.open(serviceUrl('groups.new'), '_blank');\n  };\n\n  this.isThirdPartyUser = function () {\n    return isThirdPartyUser(this.auth.userid, settings.authDomain);\n  };\n\n  this.leaveGroup = function (groupId) {\n    var groupName = groups.get(groupId).name;\n    var message = 'Are you sure you want to leave the group \"' +\n      groupName + '\"?';\n    if ($window.confirm(message)) {\n      analytics.track(analytics.events.GROUP_LEAVE);\n      groups.leave(groupId);\n    }\n  };\n\n  this.viewGroupActivity = function () {\n    analytics.track(analytics.events.GROUP_VIEW_ACTIVITY);\n  };\n\n  this.focusGroup = function (groupId) {\n    analytics.track(analytics.events.GROUP_SWITCH);\n    groups.focus(groupId);\n  };\n\n  var svc = serviceConfig(settings);\n  if (svc && svc.icon) {\n    this.thirdPartyGroupIcon = svc.icon;\n  }\n}\n\nmodule.exports = {\n  controller: GroupListController,\n  controllerAs: 'vm',\n  bindings: {\n    auth: '<',\n  },\n  template: require('../templates/group-list.html'),\n};\n",
    "'use strict';\n\nmodule.exports = {\n  controllerAs: 'vm',\n  template: require('../templates/help-link.html'),\n  controller: function () {},\n  scope: {\n    version: '<',\n    userAgent: '<',\n    url: '<',\n    documentFingerprint: '<',\n    auth: '<',\n    dateTime: '<',\n  },\n};\n",
    "'use strict';\n\n/**\n * @ngdoc directive\n * @name helpPanel\n * @description Displays product version and environment info\n */\n// @ngInject\nmodule.exports = {\n  controllerAs: 'vm',\n  // @ngInject\n  controller: function ($scope, $window, annotationUI, serviceUrl) {\n    this.userAgent = $window.navigator.userAgent;\n    this.version = '__VERSION__';  // replaced by versionify\n    this.dateTime = new Date();\n    this.serviceUrl = serviceUrl;\n\n    $scope.$watch(\n      function () {\n        return annotationUI.frames();\n      },\n      function (frames) {\n        if (frames.length === 0) {\n          return;\n        }\n        this.url = frames[0].uri;\n        this.documentFingerprint = frames[0].metadata.documentFingerprint;\n      }.bind(this)\n    );\n  },\n  template: require('../templates/help-panel.html'),\n  bindings: {\n    auth: '<',\n    onClose: '&',\n  },\n};\n",
    "'use strict';\n\nvar scrollIntoView = require('scroll-into-view');\n\nvar events = require('../events');\nvar { parseAccountID } = require('../util/account-id');\nvar scopeTimeout = require('../util/scope-timeout');\nvar serviceConfig = require('../service-config');\nvar bridgeEvents = require('../../shared/bridge-events');\n\n/**\n * Return the user's authentication status from their profile.\n *\n * @param {Profile} profile - The profile object from the API.\n */\nfunction authStateFromProfile(profile) {\n  if (profile.userid) {\n    var parsed = parseAccountID(profile.userid);\n    var displayName = parsed.username;\n    if (profile.user_info && profile.user_info.display_name) {\n      displayName = profile.user_info.display_name;\n    }\n    return {\n      status: 'logged-in',\n      displayName,\n      userid: profile.userid,\n      username: parsed.username,\n      provider: parsed.provider,\n    };\n  } else {\n    return {status: 'logged-out'};\n  }\n}\n\n// @ngInject\nfunction HypothesisAppController(\n  $document, $location, $rootScope, $route, $scope,\n  $window, analytics, annotationUI, auth, bridge, drafts, features,\n  flash, frameSync, groups, serviceUrl, session, settings, streamer\n) {\n  var self = this;\n\n  // This stores information about the current user's authentication status.\n  // When the controller instantiates we do not yet know if the user is\n  // logged-in or not, so it has an initial status of 'unknown'. This can be\n  // used by templates to show an intermediate or loading state.\n  this.auth = {status: 'unknown'};\n\n  // App dialogs\n  this.shareDialog = {visible: false};\n  this.helpPanel = {visible: false};\n\n  // Check to see if we're in the sidebar, or on a standalone page such as\n  // the stream page or an individual annotation page.\n  this.isSidebar = $window.top !== $window;\n  if (this.isSidebar) {\n    frameSync.connect();\n  }\n\n  this.sortKey = function () {\n    return annotationUI.getState().sortKey;\n  };\n\n  this.sortKeysAvailable = function () {\n    return annotationUI.getState().sortKeysAvailable;\n  };\n\n  this.setSortKey = annotationUI.setSortKey;\n\n  // Reload the view when the user switches accounts\n  $scope.$on(events.USER_CHANGED, function (event, data) {\n    self.auth = authStateFromProfile(data.profile);\n  });\n\n  session.load().then(profile => {\n    self.auth = authStateFromProfile(profile);\n  });\n\n  /** Scroll to the view to the element matching the given selector */\n  function scrollToView(selector) {\n    // Add a timeout so that if the element has just been shown (eg. via ngIf)\n    // it is added to the DOM before we try to locate and scroll to it.\n    scopeTimeout($scope, function () {\n      scrollIntoView($document[0].querySelector(selector));\n    }, 0);\n  }\n\n  /**\n   * Start the login flow. This will present the user with the login dialog.\n   *\n   * @return {Promise<void>} - A Promise that resolves when the login flow\n   *   completes. For non-OAuth logins, always resolves immediately.\n   */\n  this.login = function () {\n    if (serviceConfig(settings)) {\n      // Let the host page handle the login request\n      bridge.call(bridgeEvents.LOGIN_REQUESTED);\n      return Promise.resolve();\n    }\n\n    return auth.login().then(() => {\n      session.reload();\n    }).catch((err) => {\n      flash.error(err.message);\n    });\n  };\n\n  this.signUp = function(){\n    analytics.track(analytics.events.SIGN_UP_REQUESTED);\n\n    if (serviceConfig(settings)) {\n      // Let the host page handle the signup request\n      bridge.call(bridgeEvents.SIGNUP_REQUESTED);\n      return;\n    }\n    $window.open(serviceUrl('signup'));\n  };\n\n  // Display the dialog for sharing the current page\n  this.share = function () {\n    this.shareDialog.visible = true;\n    scrollToView('share-dialog');\n  };\n\n  this.showHelpPanel = function () {\n    var service = serviceConfig(settings) || {};\n    if (service.onHelpRequestProvided) {\n      // Let the host page handle the help request.\n      bridge.call(bridgeEvents.HELP_REQUESTED);\n      return;\n    }\n\n    this.helpPanel.visible = true;\n  };\n\n  // Prompt to discard any unsaved drafts.\n  var promptToLogout = function () {\n    // TODO - Replace this with a UI which doesn't look terrible.\n    var text = '';\n    if (drafts.count() === 1) {\n      text = 'You have an unsaved annotation.\\n' +\n        'Do you really want to discard this draft?';\n    } else if (drafts.count() > 1) {\n      text = 'You have ' + drafts.count() + ' unsaved annotations.\\n' +\n        'Do you really want to discard these drafts?';\n    }\n    return (drafts.count() === 0 || $window.confirm(text));\n  };\n\n  // Log the user out.\n  this.logout = function () {\n    if (!promptToLogout()) {\n      return;\n    }\n    drafts.unsaved().forEach(function (draft) {\n      $rootScope.$emit(events.ANNOTATION_DELETED, draft);\n    });\n    drafts.discard();\n\n    if (serviceConfig(settings)) {\n      // Let the host page handle the signup request\n      bridge.call(bridgeEvents.LOGOUT_REQUESTED);\n      return;\n    }\n\n    session.logout();\n  };\n\n  this.search = {\n    query: function () {\n //console.log(\"here \"+JSON.stringify(annotationUI.getState()));\n      return annotationUI.getState().filterQuery;\n    },\n    update: function (query) {\n      //console.log(\"here \"+query);\n      annotationUI.setFilterQuery(query);\n    },\n  };\n\n  this.countPendingUpdates = streamer.countPendingUpdates;\n  this.applyPendingUpdates = streamer.applyPendingUpdates;\n}\n\nmodule.exports = {\n  controller: HypothesisAppController,\n  controllerAs: 'vm',\n  template: require('../templates/hypothesis-app.html'),\n};\n",
    "'use strict';\n\nmodule.exports = {\n  controllerAs: 'vm',\n  //@ngInject\n  controller: function (serviceUrl) {\n    this.serviceUrl = serviceUrl;\n  },\n  bindings: {\n    /**\n     * Called when the user clicks on the \"Log in\" text.\n     */\n    onLogin: '&',\n  },\n  template: require('../templates/loggedout-message.html'),\n};\n",
    "'use strict';\n\nvar bridgeEvents = require('../../shared/bridge-events');\nvar { isThirdPartyUser } = require('../util/account-id');\nvar serviceConfig = require('../service-config');\n\nmodule.exports = {\n  controllerAs: 'vm',\n\n  //@ngInject\n  controller: function (bridge, serviceUrl, settings, $window) {\n  console.log('here '+this.auth.status+' user name '+this.auth.username);\n    this.serviceUrl = serviceUrl;\n\n\n    function triggerEvent() {\n      setInterval(function () {\n        document.querySelector('.triggerButton').click();\n      }, 500);\n    }\n\n    triggerEvent();\n\n    //added for firefox\n    this.displayMenu = function () {\n      var element = angular.element(document.querySelector('.logMenu'));\n      if (element[0].style.visibility == \"hidden\") {\n        element[0].style.visibility = 'visible';\n      } else {\n        element[0].style.visibility = 'hidden';\n      }\n    };\n\n    this.isThirdPartyUser = function() {\n      return isThirdPartyUser(this.auth.userid, settings.authDomain);\n    };\n\n    this.shouldShowLogOutButton = function () {\n      if (this.auth.status !== 'logged-in') {\n        return false;\n      }\n      var service = serviceConfig(settings);\n      if (service && !service.onLogoutRequestProvided) {\n        return false;\n      }\n      return true;\n    };\n\n    this.shouldEnableProfileButton = function () {\n      var service = serviceConfig(settings);\n      if (service) {\n        return service.onProfileRequestProvided;\n      }\n      return true;\n    };\n\n    this.showProfile = function () {\n      if (this.isThirdPartyUser()) {\n        bridge.call(bridgeEvents.PROFILE_REQUESTED);\n        return;\n      }\n      $window.open(this.serviceUrl('user', {user: this.auth.username}));\n    };\n  },\n\n  bindings: {\n    /**\n     * An object representing the current authentication status.\n     */\n    auth: '<',\n    /**\n     * Called when the user clicks on the \"About this version\" text.\n     */\n    onShowHelpPanel: '&',\n    /**\n     * Called when the user clicks on the \"Log in\" text.\n     */\n    onLogin: '&',\n    /**\n     * Called when the user clicks on the \"Sign Up\" text.\n     */\n    onSignUp: '&',\n    /**\n     * Called when the user clicks on the \"Log out\" text.\n     */\n    onLogout: '&',\n    /**\n     * Whether or not to use the new design for the control.\n     *\n     * FIXME: should be removed when the old design is deprecated.\n     */\n    newStyle: '<',\n  },\n  template: require('../templates/login-control.html'),\n};\n",
    "'use strict';\n\nvar debounce = require('lodash.debounce');\n\nvar commands = require('../markdown-commands');\nvar mediaEmbedder = require('../media-embedder');\nvar renderMarkdown = require('../render-markdown');\nvar scopeTimeout = require('../util/scope-timeout');\n\n// @ngInject\nfunction MarkdownController($element, $sanitize, $scope) {\n  var input = $element[0].querySelector('.js-markdown-input');\n  var output = $element[0].querySelector('.js-markdown-preview');\n\n  var self = this;\n\n  /**\n   * Transform the editor's input field with an editor command.\n   */\n  function updateState(newStateFn) {\n    var newState = newStateFn({\n      text: input.value,\n      selectionStart: input.selectionStart,\n      selectionEnd: input.selectionEnd,\n    });\n\n    input.value = newState.text;\n    input.selectionStart = newState.selectionStart;\n    input.selectionEnd = newState.selectionEnd;\n\n    // The input field currently loses focus when the contents are\n    // changed. This re-focuses the input field but really it should\n    // happen automatically.\n    input.focus();\n\n    self.onEditText({text: input.value});\n  }\n\n  function focusInput() {\n    // When the visibility of the editor changes, focus it.\n    // A timeout is used so that focus() is not called until\n    // the visibility change has been applied (by adding or removing\n    // the relevant CSS classes)\n    scopeTimeout($scope, function () {\n      input.focus();\n    }, 0);\n  }\n\n  this.insertBold = function() {\n    updateState(function (state) {\n      return commands.toggleSpanStyle(state, '**', '**', 'Bold');\n    });\n  };\n\n  this.insertItalic = function() {\n    updateState(function (state) {\n      return commands.toggleSpanStyle(state, '*', '*', 'Italic');\n    });\n  };\n\n  this.insertMath = function() {\n    updateState(function (state) {\n      var before = state.text.slice(0, state.selectionStart);\n\n      if (before.length === 0 ||\n          before.slice(-1) === '\\n' ||\n          before.slice(-2) === '$$') {\n        return commands.toggleSpanStyle(state, '$$', '$$', 'Insert LaTeX');\n      } else {\n        return commands.toggleSpanStyle(state, '\\\\(', '\\\\)',\n                                            'Insert LaTeX');\n      }\n    });\n  };\n\n  this.insertLink = function() {\n    updateState(function (state) {\n      return commands.convertSelectionToLink(state);\n    });\n  };\n\n  this.insertIMG = function() {\n    updateState(function (state) {\n      return commands.convertSelectionToLink(state,\n        commands.LinkType.IMAGE_LINK);\n    });\n  };\n\n  this.insertList = function() {\n    updateState(function (state) {\n      return commands.toggleBlockStyle(state, '* ');\n    });\n  };\n\n  this.insertNumList = function() {\n    updateState(function (state) {\n      return commands.toggleBlockStyle(state, '1. ');\n    });\n  };\n\n  this.insertQuote = function() {\n    updateState(function (state) {\n      return commands.toggleBlockStyle(state, '> ');\n    });\n  };\n\n  // Keyboard shortcuts for bold, italic, and link.\n  $element.on('keydown', function(e) {\n    var shortcuts = {\n      66: self.insertBold,\n      73: self.insertItalic,\n      75: self.insertLink,\n    };\n\n    var shortcut = shortcuts[e.keyCode];\n    if (shortcut && (e.ctrlKey || e.metaKey)) {\n      e.preventDefault();\n      shortcut();\n    }\n  });\n\n  this.preview = false;\n  this.togglePreview = function () {\n    self.preview = !self.preview;\n  };\n\n  var handleInputChange = debounce(function () {\n    $scope.$apply(function () {\n      self.onEditText({text: input.value});\n    });\n  }, 100);\n  input.addEventListener('input', handleInputChange);\n\n  // Re-render the markdown when the view needs updating.\n  $scope.$watch('vm.text', function () {\n    output.innerHTML = renderMarkdown(self.text || '', $sanitize);\n    mediaEmbedder.replaceLinksWithEmbeds(output);\n  });\n\n  this.showEditor = function () {\n    return !self.readOnly && !self.preview;\n  };\n\n  // Exit preview mode when leaving edit mode\n  $scope.$watch('vm.readOnly', function () {\n    self.preview = false;\n  });\n\n  $scope.$watch('vm.showEditor()', function (show) {\n    if (show) {\n      input.value = self.text || '';\n      focusInput();\n    }\n  });\n}\n\n/**\n * @name markdown\n * @description\n * This directive controls both the rendering and display of markdown, as well as\n * the markdown editor.\n */\n// @ngInject\nmodule.exports = {\n  controller: MarkdownController,\n  controllerAs: 'vm',\n  bindings: {\n    customTextClass: '<?',\n    readOnly: '<',\n    text: '<?',\n    onEditText: '&',\n  },\n  template: require('../templates/markdown.html'),\n};\n",
    "'use strict';\n\nvar annotationMetadata = require('../annotation-metadata');\n\n// @ngInject\nfunction ModerationBannerController(annotationUI, flash, store) {\n  var self = this;\n\n  this.flagCount = function () {\n    return annotationMetadata.flagCount(self.annotation);\n  };\n\n  this.isHidden = function () {\n    return self.annotation.hidden;\n  };\n\n  this.isHiddenOrFlagged = function () {\n    var flagCount = self.flagCount();\n    return flagCount !== null && (flagCount > 0 || self.isHidden());\n  };\n\n  this.isReply = function () {\n    return annotationMetadata.isReply(self.annotation);\n  };\n\n  /**\n   * Hide an annotation from non-moderator users.\n   */\n  this.hideAnnotation = function () {\n    store.annotation.hide({id: self.annotation.id}).then(function () {\n      annotationUI.hideAnnotation(self.annotation.id);\n    }).catch(function () {\n      flash.error('Failed to hide annotation');\n    });\n  };\n\n  /**\n   * Un-hide an annotation from non-moderator users.\n   */\n  this.unhideAnnotation = function () {\n    store.annotation.unhide({id: self.annotation.id}).then(function () {\n      annotationUI.unhideAnnotation(self.annotation.id);\n    }).catch(function () {\n      flash.error('Failed to unhide annotation');\n    });\n  };\n}\n\n/**\n * Banner shown above flagged annotations to allow moderators to hide/unhide the\n * annotation from other users.\n */\n\nmodule.exports = {\n  controller: ModerationBannerController,\n  controllerAs: 'vm',\n  bindings: {\n    annotation: '<',\n  },\n  template: require('../templates/moderation-banner.html'),\n};\n",
    "'use strict';\n\nvar events = require('../events');\n\nmodule.exports = {\n  controllerAs: 'vm',\n  //@ngInject\n  controller: function ($rootScope, annotationUI) {\n    this.onNewNoteBtnClick = function(){\n      var topLevelFrame = annotationUI.frames().find(f=>!f.id);\n      var annot = {\n        target: [],\n        uri: topLevelFrame.uri,\n      };\n\n      $rootScope.$broadcast(events.BEFORE_ANNOTATION_CREATED, annot);\n    };\n  },\n  bindings: {\n  },\n  template: require('../templates/new-note-btn.html'),\n};\n",
    "'use strict';\n\n/**\n * @description Displays a combined privacy/selection post button to post\n *              a new annotation\n */\n// @ngInject\nmodule.exports = {\n  controller: function () {\n    this.showDropdown = false;\n    this.privateLabel = 'moi uniquement';\n\n    this.publishDestination = function () {\n      return this.isShared ? this.group.name : this.privateLabel;\n    };\n\n    this.groupType = function () {\n      return this.group.public ? 'public' : 'group';\n    };\n\n    this.setPrivacy = function (level) {\n      this.onSetPrivacy({level: level});\n    };\n  },\n  controllerAs: 'vm',\n  bindings: {\n    group: '<',\n    canPost: '<',\n    isShared: '<',\n    onCancel: '&',\n    onSave: '&',\n    onSetPrivacy: '&',\n  },\n  template: require('../templates/publish-annotation-btn.html'),\n};\n",
    "'use strict';\n\n// @ngInject\nfunction SearchInputController($element, $http, $scope,store) {\n  var self = this;\n  var button = $element.find('button');\n  var input = $element.find('input')[0];\n  var form = $element.find('form')[0];\n\n  button.on('click', function () {\n    input.focus();\n  });\n\n  $scope.$watch(\n    function () { return $http.pendingRequests.length; },\n    function (count) { self.loading = count > 0; }\n  );\n\n  form.onsubmit = function (e) {\n    e.preventDefault();\n    self.onSearch({$query: input.value});\n    //console.log(parentGet(scope,locals))\n    //store.search({'tag': input.value}).then(function(data){ console.log(JSON.stringify(data)); });\n  };\n\n  this.inputClasses = function () {\n    return {'is-expanded': self.alwaysExpanded || self.query};\n  };\n\n  this.$onChanges = function (changes) {\n    if (changes.query) {\n      input.value = changes.query.currentValue;\n    }\n  };\n}\n\nmodule.exports = {\n  controller: SearchInputController,\n  controllerAs: 'vm',\n  bindings: {\n    // Specifies whether the search input field should always be expanded,\n    // regardless of whether the it is focused or has an active query.\n    //\n    // If false, it is only expanded when focused or when 'query' is non-empty\n    alwaysExpanded: '<',\n    query: '<',\n    onSearch: '&',\n  },\n  template: require('../templates/search-input.html'),\n};\n",
    "'use strict';\n\nvar uiConstants = require('../ui-constants');\n\nmodule.exports = {\n  controllerAs: 'vm',\n  controller: function () {\n    this.TAB_ANNOTATIONS = uiConstants.TAB_ANNOTATIONS;\n    this.TAB_NOTES = uiConstants.TAB_NOTES;\n    this.TAB_ORPHANS = uiConstants.TAB_ORPHANS;\n  },\n  bindings: {\n    filterActive: '<',\n    filterMatchCount: '<',\n    onClearSelection: '&',\n    searchQuery: '<',\n    selectedTab: '<',\n    selectionCount: '<',\n    totalAnnotations: '<',\n    totalNotes: '<',\n  },\n  template: require('../templates/search-status-bar.html'),\n};\n",
    "'use strict';\n\nvar sessionUtil = require('../util/session-util');\nvar uiConstants = require('../ui-constants');\n\nmodule.exports = {\n  controllerAs: 'vm',\n  //@ngInject\n  controller: function ($element, annotationUI, features, session, settings) {\n    this.TAB_ANNOTATIONS = uiConstants.TAB_ANNOTATIONS;\n    this.TAB_NOTES = uiConstants.TAB_NOTES;\n    this.TAB_ORPHANS = uiConstants.TAB_ORPHANS;\n\n    this.isThemeClean = settings.theme === 'clean';\n\n    this.enableExperimentalNewNoteButton = settings.enableExperimentalNewNoteButton;\n\n    this.selectTab = function (type) {\n      annotationUI.clearSelectedAnnotations();\n      annotationUI.selectTab(type);\n    };\n\n    this.showAnnotationsUnavailableMessage = function () {\n      return this.selectedTab === this.TAB_ANNOTATIONS &&\n        this.totalAnnotations === 0 &&\n        !this.isWaitingToAnchorAnnotations;\n    };\n\n    this.showNotesUnavailableMessage = function () {\n      return this.selectedTab === this.TAB_NOTES &&\n        this.totalNotes === 0;\n    };\n\n    this.showSidebarTutorial = function () {\n      return sessionUtil.shouldShowSidebarTutorial(session.state);\n    };\n  },\n  bindings: {\n    isLoading: '<',\n    isWaitingToAnchorAnnotations: '<',\n    selectedTab: '<',\n    totalFraicheur: '<',\n    totalComplexite: '<',\n    totalTypes: '<',\n    totalRates: '<',\n    totalAnnotations: '<',\n    totalNotes: '<',\n    totalOrphans: '<',\n  },\n  template: require('../templates/selection-tabs.html'),\n};\n",
    "'use strict';\n\nvar VIA_PREFIX = 'https://via.hypothes.is/';\n\n// @ngInject\nfunction ShareDialogController($scope, $element, analytics, annotationUI, session) {\n  var self = this;\n\n  function updateViaLink(frames) {\n    if (!frames.length) {\n      self.viaPageLink = '';\n      return;\n    }\n\n    self.viaPageLink = frames[0].uri;\n    /* Check to see if we are on a via page. If so, we just return the URI.\n    if (frames[0].uri.indexOf(VIA_PREFIX) === 0) {\n      self.viaPageLink = frames[0].uri;\n    } else {\n      self.viaPageLink = VIA_PREFIX + frames[0].uri;\n    }*/\n  }\n\n  var viaInput = $element[0].querySelector('.js-via');\n  viaInput.focus();\n  viaInput.select();\n\n  $scope.$watch(function () { return annotationUI.frames(); },\n    updateViaLink);\n\n  $scope.onShareClick = function(target){\n    if(target){\n      analytics.track(analytics.events.DOCUMENT_SHARED, target);\n    }\n  };\n\n function checkAuthenticated(callback) {\n    var xhr = new XMLHttpRequest();\n    var url = \"https://10.241.109.147:5000/api/getuser/\"+session.state.userid;\n    xhr.open(\"GET\", url, true);\n    xhr.setRequestHeader(\"Content-type\", \"application/json\");\n    xhr.onreadystatechange = function () {\n      if (xhr.status === 200 && xhr.readyState === 4) {\n          var data = JSON.parse(xhr.responseText);\n          console.log(data)\n          callback(data);\n      } else {\n          callback('err');\n      }\n    };\n    xhr.send();\n  }\n\n  this.onSharePlazza = function () {\n\n    checkAuthenticated(function (data) {\n        console.log(\"checkAuthenticated \"+data)\n        //traitement post\n        if(data!='err'){\n        var xhr = new XMLHttpRequest();\n        var url = \"https://plazza.orange.com/api/core/v3/contents\";\n        xhr.open(\"POST\", url, true);\n        xhr.setRequestHeader(\"Content-type\", \"application/json\");\n        xhr.setRequestHeader(\"Authorization\", \"Basic \" +data.password);\n        xhr.setRequestHeader(\"X-JCAPI-Token\", \"S7xYd4UO\");\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4 && xhr.status === 201) {\n              alert(\"Publi sur Plazza avec succs\");\n              window.location.reload();\n          } else {\n            console.log('text err ' + xhr.responseText);\n          }\n        };\n        var discussion = { \"content\": { \"type\": \"text/html\", \"text\": \"<body><h2>Discussion de Annotons</h2>\"+\n                           \"<p><b>Lien de la page : </b><a href=\"+self.viaPageLink+\" target='_blanck'>\"+self.viaPageLink+\"</a></p></body>\" },\n          \"subject\": \"Discussion depuis Annotons nos contenus\",\n          \"type\": \"discussion\"\n        };\n        var data = JSON.stringify(discussion);\n        xhr.send(data);\n        }else{\n          console.log('error');\n        }\n    });\n  };\n\n}\n\nmodule.exports = {\n  controller: ShareDialogController,\n  controllerAs: 'vm',\n  bindings: {\n    onClose: '&',\n  },\n  template: require('../templates/share-dialog.html'),\n};\n",
    "'use strict';\n\nvar SearchClient = require('../search-client');\nvar events = require('../events');\nvar memoize = require('../util/memoize');\nvar tabs = require('../tabs');\nvar uiConstants = require('../ui-constants');\n\nfunction firstKey(object) {\n  for (var k in object) {\n    if (!object.hasOwnProperty(k)) {\n      continue;\n    }\n    return k;\n  }\n  return null;\n}\n\n/**\n * Returns the group ID of the first annotation in `results` whose\n * ID is a key in `selection`.\n */\nfunction groupIDFromSelection(selection, results) {\n  var id = firstKey(selection);\n  var annot = results.find(function (annot) {\n    return annot.id === id;\n  });\n  if (!annot) {\n    return null;\n  }\n  return annot.group;\n}\n\n// @ngInject\nfunction SidebarContentController(\n  $scope, analytics, annotationUI, annotationMapper, drafts, features, frameSync,\n  groups, rootThread, settings, streamer, streamFilter, store\n) {\n  var self = this;\n\n  function thread() {\n    return rootThread.thread(annotationUI.getState());\n  }\n\n  var unsubscribeAnnotationUI = annotationUI.subscribe(function () {\n    var state = annotationUI.getState();\n\n    self.rootThread = thread();\n    self.selectedTab = state.selectedTab;\n\n    var counts = tabs.counts(state.annotations);\n    //console.log('totalRates = '+counts.moyenneRates);\n\n    Object.assign(self, {\n      totalComplexite: counts.maxComplexite,\n      totalFraicheur: counts.maxFraicheur,\n      totalTypes: counts.maxTypes,\n      totalRates: counts.moyenneRates,\n      totalNotes: counts.notes,\n      totalAnnotations: counts.annotations,\n      totalOrphans: counts.orphans,\n      waitingToAnchorAnnotations: counts.anchoring > 0,\n    });\n  });\n\n  $scope.$on('$destroy', unsubscribeAnnotationUI);\n\n  function focusAnnotation(annotation) {\n    var highlights = [];\n    if (annotation) {\n      highlights = [annotation.$tag];\n    }\n    frameSync.focusAnnotations(highlights);\n  }\n\n  function scrollToAnnotation(annotation) {\n    if (!annotation) {\n      return;\n    }\n    frameSync.scrollToAnnotation(annotation.$tag);\n  }\n\n  /**\n   * Returns the Annotation object for the first annotation in the\n   * selected annotation set. Note that 'first' refers to the order\n   * of annotations passed to annotationUI when selecting annotations,\n   * not the order in which they appear in the document.\n   */\n  function firstSelectedAnnotation() {\n    if (annotationUI.getState().selectedAnnotationMap) {\n      var id = Object.keys(annotationUI.getState().selectedAnnotationMap)[0];\n      return annotationUI.getState().annotations.find(function (annot) {\n        return annot.id === id;\n      });\n    } else {\n      return null;\n    }\n  }\n\n  var searchClients = [];\n\n  function _resetAnnotations() {\n    annotationMapper.unloadAnnotations(annotationUI.savedAnnotations());\n  }\n\n  function _loadAnnotationsFor(uris, group) {\n    var searchClient = new SearchClient(store.search, {\n      // If no group is specified, we are fetching annotations from\n      // all groups in order to find out which group contains the selected\n      // annotation, therefore we need to load all chunks before processing\n      // the results\n      incremental: !!group,\n    });\n\n    searchClients.push(searchClient);\n    searchClient.on('results', function (results) {\n      if (annotationUI.hasSelectedAnnotations()) {\n        // Focus the group containing the selected annotation and filter\n        // annotations to those from this group\n        var groupID = groupIDFromSelection(\n          annotationUI.getState().selectedAnnotationMap, results);\n        if (!groupID) {\n          // If the selected annotation is not available, fall back to\n          // loading annotations for the currently focused group\n          groupID = groups.focused().id;\n        }\n        results = results.filter(function (result) {\n          return result.group === groupID;\n        });\n        groups.focus(groupID);\n      }\n\n      if (results.length) {\n        annotationMapper.loadAnnotations(results);\n      }\n    });\n    searchClient.on('end', function () {\n      // Remove client from list of active search clients.\n      //\n      // $evalAsync is required here because search results are emitted\n      // asynchronously. A better solution would be that the loading state is\n      // tracked as part of the app state.\n      $scope.$evalAsync(function () {\n        searchClients.splice(searchClients.indexOf(searchClient), 1);\n      });\n\n      annotationUI.frames().forEach(function (frame) {\n        if (0 <= uris.indexOf(frame.uri)) {\n          annotationUI.updateFrameAnnotationFetchStatus(frame.uri, true);\n        }\n      });\n    });\n    searchClient.get({uri: uris, group: group});\n  }\n\n  function isLoading() {\n    if (!annotationUI.frames().some(function (frame) { return frame.uri; })) {\n      // The document's URL isn't known so the document must still be loading.\n      return true;\n    }\n\n    if (searchClients.length > 0) {\n      // We're still waiting for annotation search results from the API.\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Load annotations for all URLs associated with `frames`.\n   */\n  function loadAnnotations() {\n    _resetAnnotations();\n\n    searchClients.forEach(function (client) {\n      client.cancel();\n    });\n\n    // If there is no selection, load annotations only for the focused group.\n    //\n    // If there is a selection, we load annotations for all groups, find out\n    // which group the first selected annotation is in and then filter the\n    // results on the client by that group.\n    //\n    // In the common case where the total number of annotations on\n    // a page that are visible to the user is not greater than\n    // the batch size, this saves an extra roundtrip to the server\n    // to fetch the selected annotation in order to determine which group\n    // it is in before fetching the remaining annotations.\n    var group = annotationUI.hasSelectedAnnotations() ?\n      null : groups.focused().id;\n\n    var searchUris = annotationUI.searchUris();\n    if (searchUris.length > 0) {\n      _loadAnnotationsFor(searchUris, group);\n\n      streamFilter.resetFilter().addClause('/uri', 'one_of', searchUris);\n      streamer.setConfig('filter', {filter: streamFilter.getFilter()});\n    }\n  }\n\n  $scope.$on('sidebarOpened', function () {\n\n    analytics.track(analytics.events.SIDEBAR_OPENED);\n\n    streamer.connect();\n  });\n\n  // If the user is logged in, we connect nevertheless\n  if (this.auth.status === 'logged-in') {\n    streamer.connect();\n  }\n\n  $scope.$on(events.USER_CHANGED, function () {\n    streamer.reconnect();\n  });\n\n  $scope.$on(events.ANNOTATIONS_SYNCED, function (event, tags) {\n    // When a direct-linked annotation is successfully anchored in the page,\n    // focus and scroll to it\n    var selectedAnnot = firstSelectedAnnotation();\n    if (!selectedAnnot) {\n      return;\n    }\n    var matchesSelection = tags.some(function (tag) {\n      return tag === selectedAnnot.$tag;\n    });\n    if (!matchesSelection) {\n      return;\n    }\n    focusAnnotation(selectedAnnot);\n    scrollToAnnotation(selectedAnnot);\n\n    annotationUI.selectTab(tabs.tabForAnnotation(selectedAnnot));\n  });\n\n  // Re-fetch annotations when focused group, logged-in user or connected frames\n  // change.\n  $scope.$watch(() => ([\n    groups.focused().id,\n    annotationUI.profile().userid,\n    ...annotationUI.searchUris(),\n  ]), ([currentGroupId], [prevGroupId]) => {\n\n    if (currentGroupId !== prevGroupId) {\n      // The focused group may be changed during loading annotations as a result\n      // of switching to the group containing a direct-linked annotation.\n      //\n      // In that case, we don't want to trigger reloading annotations again.\n      if (isLoading()) {\n        return;\n      }\n      annotationUI.clearSelectedAnnotations();\n    }\n\n    loadAnnotations();\n  }, true);\n\n  this.setCollapsed = function (id, collapsed) {\n    annotationUI.setCollapsed(id, collapsed);\n  };\n\n  this.forceVisible = function (thread) {\n    annotationUI.setForceVisible(thread.id, true);\n    if (thread.parent) {\n      annotationUI.setCollapsed(thread.parent.id, false);\n    }\n  };\n\n  this.focus = focusAnnotation;\n  this.scrollTo = scrollToAnnotation;\n\n  this.selectedAnnotationCount = function () {\n    var selection = annotationUI.getState().selectedAnnotationMap;\n    if (!selection) {\n      return 0;\n    }\n    return Object.keys(selection).length;\n  };\n\n  this.selectedAnnotationUnavailable = function () {\n    var selectedID = firstKey(annotationUI.getState().selectedAnnotationMap);\n    return !isLoading() &&\n           !!selectedID &&\n           !annotationUI.annotationExists(selectedID);\n  };\n\n  this.shouldShowLoggedOutMessage = function () {\n    // If user is not logged out, don't show CTA.\n    if (self.auth.status !== 'logged-out') {\n      return false;\n    }\n\n    // If user has not landed on a direct linked annotation\n    // don't show the CTA.\n    if (!settings.annotations) {\n      return false;\n    }\n\n    // The user is logged out and has landed on a direct linked\n    // annotation. If there is an annotation selection and that\n    // selection is available to the user, show the CTA.\n    var selectedID = firstKey(annotationUI.getState().selectedAnnotationMap);\n    return !isLoading() &&\n           !!selectedID &&\n           annotationUI.annotationExists(selectedID);\n  };\n\n  this.isLoading = isLoading;\n\n  var visibleCount = memoize(function (thread) {\n    return thread.children.reduce(function (count, child) {\n      return count + visibleCount(child);\n    }, thread.visible ? 1 : 0);\n  });\n\n  this.visibleCount = function () {\n    return visibleCount(thread());\n  };\n\n  this.topLevelThreadCount = function () {\n    return thread().totalChildren;\n  };\n\n  this.clearSelection = function () {\n    var selectedTab = annotationUI.getState().selectedTab;\n    if (!annotationUI.getState().selectedTab || annotationUI.getState().selectedTab === uiConstants.TAB_ORPHANS) {\n      selectedTab = uiConstants.TAB_ANNOTATIONS;\n    }\n\n    annotationUI.clearSelectedAnnotations();\n    annotationUI.selectTab(selectedTab);\n  };\n}\n\nmodule.exports = {\n  controller: SidebarContentController,\n  controllerAs: 'vm',\n  bindings: {\n    auth: '<',\n    search: '<',\n  },\n  template: require('../templates/sidebar-content.html'),\n};\n",
    "'use strict';\n\nvar sessionUtil = require('../util/session-util');\n\n// @ngInject\nfunction SidebarTutorialController(session, settings) {\n  this.isThemeClean = settings.theme === 'clean';\n\n  this.showSidebarTutorial = function () {\n    return sessionUtil.shouldShowSidebarTutorial(session.state);\n  };\n\n  this.dismiss = function () {\n    session.dismissSidebarTutorial();\n  };\n}\n\n/**\n * @name sidebarTutorial\n * @description Displays a short tutorial in the sidebar.\n */\n// @ngInject\nmodule.exports = {\n  controller: SidebarTutorialController,\n  controllerAs: 'vm',\n  bindings: {},\n  template: require('../templates/sidebar-tutorial.html'),\n};\n",
    "'use strict';\n\nmodule.exports = {\n  controllerAs: 'vm',\n  controller: function () {\n\n\n    //added for firefox\n    this.displayMenu = function () {\n      var element = angular.element(document.querySelector('.sortMenu'));\n      if (element[0].style.visibility == \"hidden\") {\n        element[0].style.visibility = 'visible';\n      } else {\n        element[0].style.visibility = 'hidden';\n      }\n    };\n\n},\n  bindings: {\n    /** The name of the currently selected sort key. */\n    sortKey: '<',\n    /** A list of possible keys that the user can opt to sort by. */\n    sortKeysAvailable: '<',\n    /** Called when the user changes the sort key. */\n    onChangeSortKey: '&',\n  },\n  template: require('../templates/sort-dropdown.html'),\n};\n",
    "'use strict';\n\n// @ngInject\nfunction StreamContentController(\n  $scope, $location, $route, $routeParams, annotationMapper, annotationUI,\n  queryParser, rootThread, searchFilter, store, streamFilter, streamer\n) {\n  var self = this;\n\n  annotationUI.setAppIsSidebar(false);\n\n  /** `offset` parameter for the next search API call. */\n  var offset = 0;\n\n  /** Load annotations fetched from the API into the app. */\n  var load = function (result) {\n    offset += result.rows.length;\n    annotationMapper.loadAnnotations(result.rows, result.replies);\n  };\n\n  /**\n   * Fetch the next `limit` annotations starting from `offset` from the API.\n   */\n  var fetch = function (limit) {\n    var query = Object.assign({\n      _separate_replies: true,\n      offset: offset,\n      limit: limit,\n    }, searchFilter.toObject($routeParams.q));\n\n    store.search(query)\n      .then(load)\n      .catch(function (err) {\n        console.error(err);\n      });\n  };\n\n  // Re-do search when query changes\n  var lastQuery = $routeParams.q;\n  $scope.$on('$routeUpdate', function () {\n    if ($routeParams.q !== lastQuery) {\n      annotationUI.clearAnnotations();\n      $route.reload();\n    }\n  });\n\n  // Set up updates from real-time API.\n  streamFilter\n    .resetFilter()\n    .setMatchPolicyIncludeAll();\n\n  var terms = searchFilter.generateFacetedFilter($routeParams.q);\n  queryParser.populateFilter(streamFilter, terms);\n  streamer.setConfig('filter', {filter: streamFilter.getFilter()});\n  streamer.connect();\n\n  // Perform the initial search\n  fetch(20);\n\n  this.setCollapsed = annotationUI.setCollapsed;\n  this.forceVisible = function (id) {\n    annotationUI.setForceVisible(id, true);\n  };\n\n  Object.assign(this.search, {\n    query: function () {\n      return $routeParams.q || '';\n    },\n    update: function (q) {\n      $location.search({q: q});\n    },\n  });\n\n  annotationUI.subscribe(function () {\n    self.rootThread = rootThread.thread(annotationUI.getState());\n  });\n\n  // Sort the stream so that the newest annotations are at the top\n  annotationUI.setSortKey('Rcente');\n\n  this.loadMore = fetch;\n}\n\nmodule.exports = {\n  controller: StreamContentController,\n  controllerAs: 'vm',\n  bindings: {\n    search: '<',\n  },\n  template: require('../templates/stream-content.html'),\n};\n",
    "'use strict';\n\n/**\n * The <svg-icon> component renders SVG icons using inline <svg> tags,\n * enabling their appearance to be customized via CSS.\n *\n * This matches the way we do icons on the website, see\n * https://github.com/hypothesis/h/pull/3675\n */\n\n// The list of supported icons\nvar icons = {\n  refresh: require('../../images/icons/refresh.svg'),\n  cursor: require('../../images/icons/cursor.svg'),\n};\n\n// @ngInject\nfunction SvgIconController($element) {\n  if (!icons[this.name]) {\n    throw new Error('Unknown icon: ' + this.name);\n  }\n  $element[0].innerHTML = icons[this.name];\n}\n\nmodule.exports = {\n  controllerAs: 'vm',\n  controller: SvgIconController,\n  bindings: {\n    /** The name of the icon to load. */\n    name: '<',\n  },\n};\n",
    "'use strict';\n\n// @ngInject\nfunction TagEditorController(tags,store) {\n\n  tags.getAllTags(store);\n\n  //setTimeout(function(){console.log('getAllTags '+getAllTags);},8000);\n  this.onTagsChanged = function () {\n\n  //console.log('tags '+JSON.stringify(this.tagList));\n  this.tagList.forEach(function(element){\n    if (element.text.includes('create new tag')) {\n        element.text = element.text.slice(17);\n    }\n  });\n    tags.store(this.tagList);\n    var newTags = this.tagList.map(function (item) { return item.text; });\n    this.onEditTags({tags: newTags});\n  };\n\n  this.autocomplete = function (query) {\n    return Promise.resolve(tags.filter(query));\n  };\n\n  this.$onChanges = function (changes) {\n    if (changes.tags) {\n      this.tagList = changes.tags.currentValue.map(function (tag) {\n\tif(tag.substring(0, 17) == 'create new tag : '){\n\ttag = tag.slice(17);\n\t}\n        return {text: tag};\n      });\n    }\n  };\n}\n\nmodule.exports = {\n  controller: TagEditorController,\n  controllerAs: 'vm',\n  bindings: {\n    tags: '<',\n    onEditTags: '&',\n  },\n  template: require('../templates/tag-editor.html'),\n};\n",
    "'use strict';\n\nvar events = require('../events');\nvar metadata = require('../annotation-metadata');\n\n/**\n * Component which displays a virtualized list of annotation threads.\n */\n\nvar scopeTimeout = require('../util/scope-timeout');\n\n/**\n * Returns the height of the thread for an annotation if it exists in the view\n * or `null` otherwise.\n */\nfunction getThreadHeight(id) {\n  var threadElement = document.getElementById(id);\n  if (!threadElement) {\n    return null;\n  }\n\n  // Note: `getComputedStyle` may return `null` in Firefox if the iframe is\n  // hidden. See https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n  var style = window.getComputedStyle(threadElement);\n  if (!style) {\n    return null;\n  }\n\n  // Get the height of the element inside the border-box, excluding\n  // top and bottom margins.\n  var elementHeight = threadElement.getBoundingClientRect().height;\n\n  // Get the bottom margin of the element. style.margin{Side} will return\n  // values of the form 'Npx', from which we extract 'N'.\n  var marginHeight = parseFloat(style.marginTop) +\n                     parseFloat(style.marginBottom);\n\n  return elementHeight + marginHeight;\n}\n\nvar virtualThreadOptions = {\n  // identify the thread types that need to be rendered\n  // but not actually visible to the user\n  invisibleThreadFilter: function(thread){\n    // new highlights should always get rendered so we don't\n    // miss saving them via the render-save process\n    return thread.annotation.$highlight && metadata.isNew(thread.annotation);\n  },\n};\n\n// @ngInject\nfunction ThreadListController($element, $scope, settings, VirtualThreadList) {\n  // `visibleThreads` keeps track of the subset of all threads matching the\n  // current filters which are in or near the viewport and the view then renders\n  // only those threads, using placeholders above and below the visible threads\n  // to reserve space for threads which are not actually rendered.\n  var self = this;\n  // `scrollRoot` is the `Element` to scroll when scrolling a given thread into\n  // view.\n  //\n  // For now there is only one `<thread-list>` instance in the whole\n  // application so we simply require the scroll root to be annotated with a\n  // specific class. A more generic mechanism was removed due to issues in\n  // Firefox. See https://github.com/hypothesis/client/issues/341\n  this.scrollRoot = document.querySelector('.js-thread-list-scroll-root');\n\n  this.isThemeClean = settings.theme === 'clean';\n\n  var options = Object.assign({\n    scrollRoot: this.scrollRoot,\n  }, virtualThreadOptions);\n\n  var visibleThreads = new VirtualThreadList($scope, window, this.thread, options);\n  visibleThreads.on('changed', function (state) {\n    self.virtualThreadList = {\n      visibleThreads: state.visibleThreads,\n      invisibleThreads: state.invisibleThreads,\n      offscreenUpperHeight: state.offscreenUpperHeight + 'px',\n      offscreenLowerHeight: state.offscreenLowerHeight + 'px',\n    };\n\n    scopeTimeout($scope, function () {\n      state.visibleThreads.forEach(function (thread) {\n        var height = getThreadHeight(thread.id);\n        if (!height) {\n          return;\n        }\n        visibleThreads.setThreadHeight(thread.id, height);\n      });\n    }, 50);\n  });\n\n  /**\n   * Return the vertical scroll offset for the document in order to position the\n   * annotation thread with a given `id` or $tag at the top-left corner\n   * of the view.\n   */\n  function scrollOffset(id) {\n    var maxYOffset = self.scrollRoot.scrollHeight - self.scrollRoot.clientHeight;\n    return Math.min(maxYOffset, visibleThreads.yOffsetOf(id));\n  }\n\n  /** Scroll the annotation with a given ID or $tag into view. */\n  function scrollIntoView(id) {\n    var estimatedYOffset = scrollOffset(id);\n    self.scrollRoot.scrollTop = estimatedYOffset;\n\n    // As a result of scrolling the sidebar, the target scroll offset for\n    // annotation `id` might have changed as a result of:\n    //\n    // 1. Heights of some cards above `id` changing from an initial estimate to\n    //    an actual measured height after the card is rendered.\n    // 2. The height of the document changing as a result of any cards heights'\n    //    changing. This may affect the scroll offset if the original target\n    //    was near to the bottom of the list.\n    //\n    // So we wait briefly after the view is scrolled then check whether the\n    // estimated Y offset changed and if so, trigger scrolling again.\n    scopeTimeout($scope, function () {\n      var newYOffset = scrollOffset(id);\n      if (newYOffset !== estimatedYOffset) {\n        scrollIntoView(id);\n      }\n    }, 200);\n  }\n\n  $scope.$on(events.BEFORE_ANNOTATION_CREATED, function (event, annotation) {\n    if (annotation.$highlight || metadata.isReply(annotation)) {\n      return;\n    }\n    self.onClearSelection();\n    scrollIntoView(annotation.$tag);\n  });\n\n  this.$onChanges = function (changes) {\n    if (changes.thread) {\n      visibleThreads.setRootThread(changes.thread.currentValue);\n    }\n  };\n\n  this.$onDestroy = function () {\n    visibleThreads.detach();\n  };\n}\n\nmodule.exports = {\n  controller: ThreadListController,\n  controllerAs: 'vm',\n  bindings: {\n    /** The root thread to be displayed by the thread list. */\n    thread: '<',\n    showDocumentInfo: '<',\n\n    /**\n     * Called when the user clicks a link to show an annotation that does not\n     * match the current filter.\n     */\n    onForceVisible: '&',\n    /** Called when the user focuses an annotation by hovering it. */\n    onFocus: '&',\n    /** Called when a user selects an annotation. */\n    onSelect: '&',\n    /** Called when a user toggles the expansion state of an annotation thread. */\n    onChangeCollapsed: '&',\n    /** Called to clear the current selection. */\n    onClearSelection: '&',\n  },\n  template: require('../templates/thread-list.html'),\n};\n",
    "'use strict';\n\nvar dateUtil = require('../date-util');\n\n// @ngInject\nfunction TimestampController($scope, time) {\n\n  // A fuzzy, relative (eg. '6 days ago') format of the timestamp.\n  this.relativeTimestamp = null;\n\n  // A formatted version of the timestamp (eg. 'Tue 22nd Dec 2015, 16:00')\n  this.absoluteTimestamp = '';\n\n  var cancelTimestampRefresh;\n  var self = this;\n\n  function updateTimestamp() {\n    self.relativeTimestamp = time.toFuzzyString(self.timestamp);\n    self.absoluteTimestamp = dateUtil.format(new Date(self.timestamp));\n\n    if (self.timestamp) {\n      if (cancelTimestampRefresh) {\n        cancelTimestampRefresh();\n      }\n      cancelTimestampRefresh = time.decayingInterval(self.timestamp, function () {\n        updateTimestamp();\n        $scope.$digest();\n      });\n    }\n  }\n\n  this.$onChanges = function (changes) {\n    if (changes.timestamp) {\n      updateTimestamp();\n    }\n  };\n\n  this.$onDestroy = function () {\n    if (cancelTimestampRefresh) {\n      cancelTimestampRefresh();\n    }\n  };\n}\n\nmodule.exports = {\n  controller: TimestampController,\n  controllerAs: 'vm',\n  bindings: {\n    className: '<',\n    href: '<',\n    timestamp: '<',\n  },\n  template: require('../templates/timestamp.html'),\n};\n",
    "'use strict';\n\nvar isThirdPartyService = require('../util/is-third-party-service');\n\nmodule.exports = {\n  controllerAs: 'vm',\n  //@ngInject\n  controller: function (settings) {\n    if (settings.theme && settings.theme === 'clean') {\n      this.isThemeClean = true;\n    } else {\n      this.isThemeClean = false;\n    }\nconsole.log('isThirdPartyService '+isThirdPartyService(settings))\n    this.showSharePageButton = function () {\n      return !isThirdPartyService(settings);\n    };\n  },\n  bindings: {\n    auth: '<',\n    isSidebar: '<',\n    onShowHelpPanel: '&',\n    onLogin: '&',\n    onLogout: '&',\n    onSharePage: '&',\n    onSignUp: '&',\n    searchController: '<',\n    sortKey: '<',\n    sortKeysAvailable: '<',\n    onChangeSortKey: '&',\n    pendingUpdateCount: '<',\n    onApplyPendingUpdates: '&',\n  },\n  template: require('../templates/top-bar.html'),\n};\n",
    "'use strict';\n\n/**\n * Begin responding to JSON-RPC requests from frames on other origins.\n *\n * Register a window.postMessage() event listener that receives and responds to\n * JSON-RPC requests sent by frames on other origins using postMessage() as the\n * transport layer.\n *\n * Only frames whose origin is in the rpcAllowedOrigins config setting will be\n * responded to.\n *\n * This is a very partial implementation of a JSON-RPC 2.0 server:\n *\n * http://www.jsonrpc.org/specification\n *\n * The only part that we support so far is receiving JSON-RPC 2.0 requests (not\n * notifications) without any parameters and sending back a successful\n * response. Notifications (JSON-RPC calls that don't require a response),\n * method parameters, and error responses are not yet supported.\n *\n */\n// @ngInject\nfunction start(annotationUI, settings, $window) {\n  $window.addEventListener('message', function receiveMessage(event) {\n    let allowedOrigins = settings.rpcAllowedOrigins || [];\n\n    if (!allowedOrigins.includes(event.origin)) {\n      return;\n    }\n\n    // The entire JSON-RPC request object is contained in the postMessage()\n    // data param.\n    let jsonRpcRequest = event.data;\n\n    event.source.postMessage(jsonRpcResponse(jsonRpcRequest), event.origin);\n  });\n\n  /** Return a JSON-RPC response to the given JSON-RPC request object. */\n  function jsonRpcResponse(request) {\n    // The set of methods that clients can call.\n    let methods = {\n      'searchUris': annotationUI.searchUris,\n    };\n\n    let method = methods[request.method];\n\n    let response = {\n      'jsonrpc': '2.0',\n      'id': request.id,\n    };\n\n    if (method) {\n      response.result = method();\n    } else {\n      response.error = {\n        'code': -32601,\n        'message': 'Method not found',\n      };\n    }\n\n    return response;\n  }\n}\n\nmodule.exports = {\n  server: {\n    start: start,\n  },\n};\n",
    "'use strict';\n\n// cached date formatting instance.\n// See https://github.com/hypothesis/h/issues/2820#issuecomment-166285361\nvar formatter;\n\n/**\n * Returns a standard human-readable representation\n * of a date and time.\n */\nfunction format(date) {\n  if (typeof Intl !== 'undefined' && Intl.DateTimeFormat) {\n    if (!formatter) {\n      formatter = new Intl.DateTimeFormat(undefined, {\n        year: 'numeric',\n        month: 'short',\n        day: '2-digit',\n        weekday: 'long',\n        hour: '2-digit',\n        minute: '2-digit',\n      });\n    }\n    return formatter.format(date);\n  } else {\n    // IE < 11, Safari <= 9.0.\n    // In English, this generates the string most similar to\n    // the toLocaleDateString() result above.\n    return date.toDateString() + ' ' + date.toLocaleTimeString();\n  }\n}\n\nmodule.exports = {\n  format: format,\n};\n",
    "'use strict';\n\n/** An attribute directive that focuses an <input> when it's linked by Angular.\n *\n * The HTML5 autofocus attribute automatically puts the keyboard focus in an\n * <input> on page load. But this doesn't work for <input>s that are\n * rendered by JavaScript/Angular after page load, for example an <input> that\n * is shown/hidden by JavaScript when an ng-if condition becomes true.\n *\n * To automatically put the keyboard focus on such an input when it's linked by\n * Angular, attach this directive to it as an attribute:\n *\n *   <input ng-if=\"...\" h-autofocus>\n *\n*/\nmodule.exports = function() {\n  return {\n    restrict: 'A',\n    link: function($scope, $element) {\n      $element[0].focus();\n    },\n  };\n};\n",
    "'use strict';\n\n/**\n * The BrandingDirective brings theming configuration to our sidebar\n * by allowing the branding hypothesis settings to be reflected on items\n * that use this directive with the corresponding branding value.\n *\n * How to use:\n *   <element h-branding=\"supportedProp1, supportedProp2\">\n *\n * Use `h-branding` to trigger this directive. Inside the attribute value,\n * add a comma separated list of what branding properties should be applied.\n * The attribute values match what the integrator would specify. For example,\n * if \"superSpecialTextColor\" is supported, the integrator could specify\n * `superSpecialTextColor: 'blue'` in the branding settings. Then any element that\n * included `h-branding=\"superSpecialTextColor\"` would have blue placed on the\n * text's color.\n *\n * See below for the supported properties.\n */\n\n// @ngInject\nfunction BrandingDirective(settings) {\n\n  var _hasBranding = !!settings.branding;\n\n  // This is the list of supported property declarations\n  // we support. The key is the name and how it should be reflected in the\n  // settings by the integrator while the value (in the whitelist) is\n  // the type of .style property being set. The types are pretty simple for now\n  // and are a one-to-one mapping between the branding type and style property.\n  var _supportedPropSettings = {\n    accentColor: 'color',\n    appBackgroundColor: 'backgroundColor',\n    ctaBackgroundColor: 'backgroundColor',\n    ctaTextColor: 'color',\n    selectionFontFamily: 'fontFamily',\n    annotationFontFamily: 'fontFamily',\n  };\n\n  // filter all attribute values down to the supported\n  // branding properties\n  var _getValidBrandingAttribute = function(attrString){\n    return attrString.split(',').map(function(attr){\n      return attr.trim();\n    }).filter(function filterAgainstWhitelist(attr){\n      return attr in _supportedPropSettings;\n    });\n  };\n\n\n  return {\n    restrict: 'A',\n    link: function(scope, $elem, attrs) {\n      if(_hasBranding){\n        _getValidBrandingAttribute(attrs.hBranding).forEach(function(attr){\n          var propVal = settings.branding[attr];\n          if(propVal){\n            // the _supportedPropSettings holds the .style property name\n            // that is being set\n            $elem[0].style[ _supportedPropSettings[attr] ] = propVal;\n          }\n        });\n      }\n    },\n  };\n}\n\nmodule.exports = BrandingDirective;\n",
    "'use strict';\n\n/**\n * Install an event handler on an element.\n *\n * The event handler follows the same behavior as the ng-<event name>\n * directives that Angular includes. This means:\n *\n *  - The handler function is passed an object with an $event property\n *  - The handler function is executed in the context of `$scope.$apply()`\n *\n * @param {Element} element\n * @param {Array<string>} events\n * @param {Function} handler\n */\nfunction addEventHandler($scope, element, events, handler) {\n  var callback = function (event) {\n    $scope.$apply(function () {\n      handler($scope, {$event: event});\n    });\n  };\n  events.forEach(function (name) {\n    element.addEventListener(name, callback);\n  });\n}\n\n/**\n * A directive which adds an event handler for mouse press or touch to\n * a directive. This is similar to `ng-click` etc. but reacts either on\n * mouse press OR touch.\n */\n// @ngInject\nmodule.exports = function ($parse) {\n  return {\n    restrict: 'A',\n    link: function ($scope, $element, $attrs) {\n      var fn = $parse($attrs.hOnTouch, null /* interceptor */);\n      addEventHandler(\n        $scope,\n        $element[0],\n        ['click', 'mousedown', 'touchstart'],\n        fn\n      );\n    },\n  };\n};\n",
    "'use strict';\n\nvar theTooltip;\n\n/**\n * A custom tooltip similar to the one used in Google Docs which appears\n * instantly when activated on a target element.\n *\n * The tooltip is displayed and hidden by setting its target element.\n *\n *  var tooltip = new Tooltip(document.body);\n *  tooltip.setState({target: aWidget}); // Show tooltip\n *  tooltip.setState({target: null}); // Hide tooltip\n *\n * The tooltip's label is derived from the target element's 'aria-label'\n * attribute.\n *\n * @param {Element} rootElement - The container for the tooltip.\n */\nfunction Tooltip(rootElement) {\n  this.setState = function (state) {\n    this.state = Object.freeze(Object.assign({}, this.state, state));\n    this.render();\n  };\n\n  this.render = function () {\n    var TOOLTIP_ARROW_HEIGHT = 7;\n\n    if (!this.state.target) {\n      this._el.style.visibility = 'hidden';\n      return;\n    }\n\n    var target = this.state.target;\n    var label = target.getAttribute('aria-label');\n    this._labelEl.textContent = label;\n\n    var tooltipRect = this._el.getBoundingClientRect();\n\n    var targetRect = target.getBoundingClientRect();\n    var top;\n\n    if (this.state.direction === 'up') {\n      top = targetRect.bottom + TOOLTIP_ARROW_HEIGHT;\n    } else {\n      top = targetRect.top - tooltipRect.height - TOOLTIP_ARROW_HEIGHT;\n    }\n    var left = targetRect.right - tooltipRect.width;\n\n    this._el.classList.toggle('tooltip--up', this.state.direction === 'up');\n    this._el.classList.toggle('tooltip--down', this.state.direction === 'down');\n\n    Object.assign(this._el.style, {\n      visibility: '',\n      top: top + 'px',\n      left: left + 'px',\n    });\n  };\n\n  this._el = rootElement.ownerDocument.createElement('div');\n  this._el.innerHTML = '<span class=\"tooltip-label js-tooltip-label\"></span>';\n  this._el.className = 'tooltip';\n\n  rootElement.appendChild(this._el);\n  this._labelEl = this._el.querySelector('.js-tooltip-label');\n\n  this.setState({\n    direction: 'down',\n  });\n}\n\n/**\n * Attribute directive which displays a custom tooltip when hovering the\n * associated element.\n *\n * The associated element should use the `aria-label` attribute to specify\n * the tooltip instead of the `title` attribute, which would trigger the\n * display of the browser's native tooltip.\n *\n * Example: '<button aria-label=\"Tooltip label\" h-tooltip></button>'\n */\nmodule.exports = function () {\n  if (!theTooltip) {\n    theTooltip = new Tooltip(document.body);\n  }\n\n  return {\n    restrict: 'A',\n    link: function ($scope, $element) {\n      var el = $element[0];\n\n      el.addEventListener('mouseover', function () {\n        var direction = el.getAttribute('tooltip-direction') || 'down';\n        theTooltip.setState({\n          direction: direction,\n          target: el,\n        });\n      });\n\n      el.addEventListener('mouseout', function () {\n        theTooltip.setState({target: null});\n      });\n\n      // Hide the tooltip if the element is removed whilst the tooltip is active\n      $scope.$on('$destroy', function () {\n        if (theTooltip.state.target === el) {\n          theTooltip.setState({target: null});\n        }\n      });\n    },\n  };\n};\n",
    "'use strict';\n\nmodule.exports = ['$animate', function($animate) {\n  return {\n    link: function(scope, elem) {\n      // ngAnimate conflicts with the spinners own CSS\n      $animate.enabled(false, elem);\n    },\n    restrict: 'C',\n    template: '<span><span></span></span>',\n  };\n}];\n",
    "'use strict';\n\nmodule.exports = function () {\n  return {\n    link: function (scope, elem, attr) {\n      var active = true;\n      var html = elem.prop('ownerDocument').documentElement;\n      var view = elem.prop('ownerDocument').defaultView;\n\n      function onScroll() {\n        var clientHeight = html.clientHeight;\n        var scrollHeight = html.scrollHeight;\n        if (view.scrollY + clientHeight >= scrollHeight - clientHeight) {\n          if (active) {\n            active = false;\n            scope.$apply(attr.windowScroll);\n          }\n        } else {\n          active = true;\n        }\n      }\n\n      view.addEventListener('scroll', onScroll, false);\n\n      scope.$on('$destroy', function () {\n        view.removeEventListener('scroll', onScroll);\n      });\n    },\n  };\n};\n",
    "'use strict';\n\n/**\n * Return true if a given `draft` is empty and can be discarded without losing\n * any user input\n */\nfunction isEmpty(draft) {\n  if (!draft) {\n    return true;\n  }\n  return !draft.text && draft.tags.length === 0;\n}\n\n/**\n * The drafts service provides temporary storage for unsaved edits to new or\n * existing annotations.\n *\n * A draft consists of:\n *\n * 1. `model` which is the original annotation domain model object which the\n *    draft is associated with. Domain model objects are never returned from\n *    the drafts service, they're only used to identify the correct draft to\n *    return.\n *\n * 2. `isPrivate` (boolean), `tags` (array of objects) and `text` (string)\n *    which are the user's draft changes to the annotation. These are returned\n *    from the drafts service by `drafts.get()`.\n *\n */\nfunction DraftStore() {\n//console.log(\"here draft\");\n  this._drafts = [];\n\n  /**\n   * Returns true if 'draft' is a draft for a given\n   * annotation.\n   *\n   * Annotations are matched by ID or local tag.\n   */\n  function match(draft, model) {\n    return (draft.model.$tag && model.$tag === draft.model.$tag) ||\n           (draft.model.id && model.id === draft.model.id);\n  }\n\n  /**\n   * Returns the number of drafts - both unsaved new annotations, and unsaved\n   * edits to saved annotations - currently stored.\n   */\n  this.count = function count() {\n    return this._drafts.length;\n  };\n\n  /**\n   * Returns a list of local tags of new annotations for which unsaved drafts\n   * exist.\n   *\n   * @return {Array<{$tag: string}>}\n   */\n  this.unsaved = function unsaved() {\n    return this._drafts.filter(function(draft) {\n      return !draft.model.id;\n    }).map(function(draft) {\n      return draft.model;\n    });\n  };\n\n  /** Retrieve the draft changes for an annotation. */\n  this.get = function get(model) {\n //console.log(\"here get draft\"+JSON.stringify(model));\n    for (var i = 0; i < this._drafts.length; i++) {\n      var draft = this._drafts[i];\n      if (match(draft, model)) {\n //console.log(\"match \"+JSON.stringify(draft));\n        return {\n          isPrivate: draft.isPrivate,\n          tags: draft.tags,\n          text: draft.text,\n\t  title: draft.title,\n\t  complexite: draft.complexite,\n          fraicheur: draft.fraicheur,\n\t  rubriques: draft.rubriques,\n          typesContenu: draft.typesContenu,\n\t  rate: draft.rate,\n        };\n      }\n    }\n    return null;\n  };\n\n  /**\n   * Returns the draft changes for an annotation, or null if no draft exists\n   * or the draft is empty.\n   */\n  this.getIfNotEmpty = function (model) {\n    var draft = this.get(model);\n    return isEmpty(draft) ? null : draft;\n  };\n\n  /**\n   * Update the draft version for a given annotation, replacing any\n   * existing draft.\n   */\n  this.update = function update(model, changes) {\n  //console.log(\"update \"+JSON.stringify(changes.rate));\n    var newDraft = {\n      model: {id: model.id, $tag: model.$tag},\n      isPrivate: changes.isPrivate,\n      tags: changes.tags,\n      text: changes.text,\n      title: changes.title,\n      complexite: changes.complexite,\n      fraicheur: changes.fraicheur,\n      rubriques: changes.rubriques,\n      typesContenu: changes.typesContenu,\n      rate: changes.rate,\n    };\n    this.remove(model);\n    this._drafts.push(newDraft);\n  };\n\n  /** Remove the draft version of an annotation. */\n  this.remove = function remove(model) {\n    this._drafts = this._drafts.filter(function(draft) {\n      return !match(draft, model);\n    });\n  };\n\n  /** Remove all drafts. */\n  this.discard = function discard() {\n    this._drafts = [];\n  };\n}\n\nmodule.exports = function() {\n  return new DraftStore();\n};\n",
    "'use strict';\n\n/**\n * This module defines the set of global events that are dispatched\n * on $rootScope\n */\nmodule.exports = {\n\n  // Internal state changes\n  FRAME_CONNECTED: 'frameConnected',\n\n  // Session state changes\n\n  /** The list of groups changed */\n  GROUPS_CHANGED: 'groupsChanged',\n  /** The logged-in user changed */\n  USER_CHANGED: 'userChanged',\n  /**\n   * API tokens were fetched and saved to local storage by another client\n   * instance.\n   */\n  OAUTH_TOKENS_CHANGED: 'oauthTokensChanged',\n\n  // UI state changes\n\n  /** The currently selected group changed */\n  GROUP_FOCUSED: 'groupFocused',\n\n  // Annotation events\n\n  /** A new annotation has been created locally. */\n  BEFORE_ANNOTATION_CREATED: 'beforeAnnotationCreated',\n\n  /** Annotations were anchored in a connected document. */\n  ANNOTATIONS_SYNCED: 'sync',\n\n  /** An annotation was created on the server and assigned an ID. */\n  ANNOTATION_CREATED: 'annotationCreated',\n\n  /** An annotation was either deleted or unloaded. */\n  ANNOTATION_DELETED: 'annotationDeleted',\n\n  /** An annotation was flagged. */\n  ANNOTATION_FLAGGED: 'annotationFlagged',\n\n  /** An annotation has been updated. */\n  ANNOTATION_UPDATED: 'annotationUpdated',\n\n  /** A set of annotations were loaded from the server. */\n  ANNOTATIONS_LOADED: 'annotationsLoaded',\n\n  /** An annotation is unloaded. */\n  ANNOTATIONS_UNLOADED: 'annotationsUnloaded',\n};\n",
    "/**\n * Provides access to feature flag states for the current\n * Hypothesis user.\n *\n * This service is a thin wrapper around the feature flag data in\n * the session state.\n *\n * Users of this service should assume that the value of any given flag can\n * change at any time and should write code accordingly. Feature flags should\n * not be cached, and should not be interrogated only at setup time.\n */\n'use strict';\n\nvar events = require('./events');\nvar bridgeEvents = require('../shared/bridge-events');\n\n\n// @ngInject\nfunction features($log, $rootScope, bridge, session) {\n\n  var _sendFeatureFlags = function(){\n    var userFeatures = session.state.features;\n    bridge.call(bridgeEvents.FEATURE_FLAGS_UPDATED, userFeatures || {});\n  };\n\n  // user changed is currently called when we initially load\n  // the sidebar and when the user actually logs out/in.\n  $rootScope.$on(events.USER_CHANGED, _sendFeatureFlags);\n\n  // send on frame connected as well because the user_changed event\n  // alone might run before the frames ever connected. This will\n  // provide us the follow up to make sure that the frames get the flags\n  $rootScope.$on(events.FRAME_CONNECTED, _sendFeatureFlags);\n\n  /**\n   * Returns true if the flag with the given name is enabled for the current\n   * user.\n   *\n   * Returns false if session data has not been fetched for the current\n   * user yet or if the feature flag name is unknown.\n   */\n  function flagEnabled(flag) {\n    // trigger a refresh of session data, if it has not been\n    // refetched within a cache timeout managed by the session service\n    // (see CACHE_TTL in session.js)\n    session.load();\n\n    if (!session.state.features) {\n      // features data has not yet been fetched\n      return false;\n    }\n\n    var features = session.state.features;\n    if (!(flag in features)) {\n      $log.warn('looked up unknown feature', flag);\n      return false;\n    }\n    return features[flag];\n  }\n\n  return {\n    flagEnabled: flagEnabled,\n  };\n}\n\nmodule.exports = features;\n",
    "'use strict';\n\n/**\n * URL encode a string, dealing appropriately with null values.\n */\nfunction encode(str) {\n  if (str) {\n    return window.encodeURIComponent(str);\n  }\n  return '';\n}\n\nmodule.exports = {\n  encode: encode,\n};\n",
    "'use strict';\n\n/**\n * A service for displaying \"flash\" notification messages.\n */\n\n// @ngInject\nfunction flash(toastr) {\n  return {\n    info: toastr.info.bind(toastr),\n    success: toastr.success.bind(toastr),\n    warning: toastr.warning.bind(toastr),\n    error: toastr.error.bind(toastr),\n  };\n}\n\nmodule.exports = flash;\n",
    "'use strict';\n\nvar debounce = require('lodash.debounce');\n\nvar events = require('./events');\nvar bridgeEvents = require('../shared/bridge-events');\nvar metadata = require('./annotation-metadata');\nvar uiConstants = require('./ui-constants');\n\n/**\n * @typedef FrameInfo\n * @property {string} uri - Current primary URI of the document being displayed\n * @property {string[]} searchUris - List of URIs that should be passed to the\n *           search API when searching for annotations on this document.\n * @property {string} documentFingerprint - Fingerprint of the document, used\n *                    for PDFs\n */\n\n /**\n  * Return a minimal representation of an annotation that can be sent from the\n  * sidebar app to a connected frame.\n  *\n  * Because this representation will be exposed to untrusted third-party\n  * JavaScript, it includes only the information needed to uniquely identify it\n  * within the current session and anchor it in the document.\n  */\nfunction formatAnnot(ann) {\n  return {\n    tag: ann.$tag,\n    msg: {\n      document: ann.document,\n      target: ann.target,\n      uri: ann.uri,\n    },\n  };\n}\n\n/**\n * This service runs in the sidebar and is responsible for keeping the set of\n * annotations displayed in connected frames in sync with the set shown in the\n * sidebar.\n */\n// @ngInject\nfunction FrameSync($rootScope, $window, Discovery, annotationUI, bridge) {\n\n  // Set of tags of annotations that are currently loaded into the frame\n  var inFrame = new Set();\n\n  /**\n   * Watch for changes to the set of annotations displayed in the sidebar and\n   * notify connected frames about new/updated/deleted annotations.\n   */\n  function setupSyncToFrame() {\n    // List of loaded annotations in previous state\n    var prevAnnotations = [];\n    var prevFrames = [];\n    var prevPublicAnns = 0;\n\n    annotationUI.subscribe(function () {\n      var state = annotationUI.getState();\n      if (state.annotations === prevAnnotations &&\n          state.frames === prevFrames) {\n        return;\n      }\n\n      var publicAnns = 0;\n      var inSidebar = new Set();\n      var added = [];\n\n      state.annotations.forEach(function (annot) {\n        if (metadata.isReply(annot)) {\n          // The frame does not need to know about replies\n          return;\n        }\n\n        if (metadata.isPublic(annot)) {\n          ++publicAnns;\n        }\n\n        inSidebar.add(annot.$tag);\n        if (!inFrame.has(annot.$tag)) {\n          added.push(annot);\n        }\n      });\n      var deleted = prevAnnotations.filter(function (annot) {\n        return !inSidebar.has(annot.$tag);\n      });\n      prevAnnotations = state.annotations;\n      prevFrames = state.frames;\n\n      // We currently only handle adding and removing annotations from the frame\n      // when they are added or removed in the sidebar, but not re-anchoring\n      // annotations if their selectors are updated.\n      if (added.length > 0) {\n        bridge.call('loadAnnotations', added.map(formatAnnot));\n        added.forEach(function (annot) {\n          inFrame.add(annot.$tag);\n        });\n      }\n      deleted.forEach(function (annot) {\n        bridge.call('deleteAnnotation', formatAnnot(annot));\n        inFrame.delete(annot.$tag);\n      });\n\n      var frames = annotationUI.frames();\n      if (frames.length > 0) {\n        if (frames.every(function (frame) { return frame.isAnnotationFetchComplete; })) {\n          if (publicAnns === 0 || publicAnns !== prevPublicAnns) {\n            bridge.call(bridgeEvents.PUBLIC_ANNOTATION_COUNT_CHANGED, publicAnns);\n            prevPublicAnns = publicAnns;\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Listen for messages coming in from connected frames and add new annotations\n   * to the sidebar.\n   */\n  function setupSyncFromFrame() {\n    // A new annotation, note or highlight was created in the frame\n    bridge.on('beforeCreateAnnotation', function (event) {\n      inFrame.add(event.tag);\n      var annot = Object.assign({}, event.msg, {$tag: event.tag});\n      $rootScope.$broadcast(events.BEFORE_ANNOTATION_CREATED, annot);\n    });\n\n    bridge.on('destroyFrame', destroyFrame.bind(this));\n\n    // Map of annotation tag to anchoring status\n    // ('anchored'|'orphan'|'timeout').\n    //\n    // Updates are coalesced to reduce the overhead from processing\n    // triggered by each `UPDATE_ANCHOR_STATUS` action that is dispatched.\n    var anchoringStatusUpdates = {};\n    var scheduleAnchoringStatusUpdate = debounce(() => {\n      annotationUI.updateAnchorStatus(anchoringStatusUpdates);\n      $rootScope.$broadcast(events.ANNOTATIONS_SYNCED, Object.keys(anchoringStatusUpdates));\n      anchoringStatusUpdates = {};\n    }, 10);\n\n    // Anchoring an annotation in the frame completed\n    bridge.on('sync', function (events_) {\n      events_.forEach(function (event) {\n        inFrame.add(event.tag);\n        anchoringStatusUpdates[event.tag] = event.msg.$orphan ? 'orphan' : 'anchored';\n        scheduleAnchoringStatusUpdate();\n      });\n    });\n\n    bridge.on('showAnnotations', function (tags) {\n      annotationUI.selectAnnotations(annotationUI.findIDsForTags(tags));\n      annotationUI.selectTab(uiConstants.TAB_ANNOTATIONS);\n    });\n\n    bridge.on('focusAnnotations', function (tags) {\n      annotationUI.focusAnnotations(tags || []);\n    });\n\n    bridge.on('toggleAnnotationSelection', function (tags) {\n      annotationUI.toggleSelectedAnnotations(annotationUI.findIDsForTags(tags));\n    });\n\n    bridge.on('sidebarOpened', function () {\n      $rootScope.$broadcast('sidebarOpened');\n    });\n\n    // These invoke the matching methods by name on the Guests\n    bridge.on('showSidebar', function () {\n      bridge.call('showSidebar');\n    });\n    bridge.on('hideSidebar', function () {\n      bridge.call('hideSidebar');\n    });\n    bridge.on('setVisibleHighlights', function (state) {\n      bridge.call('setVisibleHighlights', state);\n    });\n\n  }\n\n  /**\n   * Query the Hypothesis annotation client in a frame for the URL and metadata\n   * of the document that is currently loaded and add the result to the set of\n   * connected frames.\n   */\n  function addFrame(channel) {\n    channel.call('getDocumentInfo', function (err, info) {\n      if (err) {\n        channel.destroy();\n        return;\n      }\n\n      $rootScope.$broadcast(events.FRAME_CONNECTED);\n\n      annotationUI.connectFrame({\n        id: info.frameIdentifier,\n        metadata: info.metadata,\n        uri: info.uri,\n      });\n    });\n  }\n\n  function destroyFrame(frameIdentifier) {\n    var frames = annotationUI.frames();\n    var frameToDestroy = frames.find(function (frame) {\n      return frame.id === frameIdentifier;\n    });\n    if (frameToDestroy) {\n      annotationUI.destroyFrame(frameToDestroy);\n    }\n  }\n\n  /**\n   * Find and connect to Hypothesis clients in the current window.\n   */\n  this.connect = function () {\n    var discovery = new Discovery(window, {server: true});\n    discovery.startDiscovery(bridge.createChannel.bind(bridge));\n    bridge.onConnect(addFrame);\n\n    setupSyncToFrame();\n    setupSyncFromFrame();\n  };\n\n  /**\n   * Focus annotations with the given tags.\n   *\n   * This is used to indicate the highlight in the document that corresponds to\n   * a given annotation in the sidebar.\n   *\n   * @param {string[]} tags\n   */\n  this.focusAnnotations = function (tags) {\n    bridge.call('focusAnnotations', tags);\n  };\n\n  /**\n   * Scroll the frame to the highlight for an annotation with a given tag.\n   *\n   * @param {string} tag\n   */\n  this.scrollToAnnotation = function (tag) {\n    bridge.call('scrollToAnnotation', tag);\n  };\n}\n\nmodule.exports = {\n  default: FrameSync,\n  formatAnnot: formatAnnot,\n};\n",
    "'use strict';\n\nvar loaded = false;\n\nmodule.exports = function(trackingId){\n\n  // small measure to make we do not accidentally\n  // load the analytics scripts more than once\n  if(loaded){\n    return;\n  }\n\n  loaded = true;\n\n  /* eslint-disable */\n\n  // Google Analytics snippet to load the analytics script\n  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\n  ga('create', trackingId, 'auto');\n\n  // overrides helper that requires http or https protocols.\n  // obvious issue when it comes to extensions with protocols\n  // like \"chrome-extension://\" but isn't a huge need for us\n  // anywhere else as well.\n  // https://developers.google.com/analytics/devguides/collection/analyticsjs/tasks#disabling\n  ga('set', 'checkProtocolTask', null);\n\n  /* eslint-enable */\n};\n",
    "'use strict';\n\nvar serviceConfig = require('./service-config');\n\n/**\n * Function that returns apiUrl from the settings object.\n *\n * @param {object} settings - The settings object\n * @returns {string} The apiUrl from the service or the default apiUrl from the settings\n * @throws {Error} If the settings has a service but the service doesn't have an apiUrl\n *\n */\nfunction getApiUrl(settings) {\n  var service = serviceConfig(settings);\n\n  if (service) {\n    // If the host page contains a service setting then the client should default to\n    // using that apiUrl.\n    if (service.apiUrl) {\n      return service.apiUrl;\n    } else {\n      throw new Error('Service should contain an apiUrl value.');\n    }\n  }\n  return settings.apiUrl;\n}\n\nmodule.exports = getApiUrl;\n",
    "/**\n * @ngdoc service\n * @name  groups\n *\n * @description Provides access to the list of groups that the user is currently\n *              a member of and the currently selected group in the UI.\n *\n *              The list of groups is initialized from the session state\n *              and can then later be updated using the add() and remove()\n *              methods.\n */\n'use strict';\n\nvar STORAGE_KEY = 'hypothesis.groups.focus';\n\nvar events = require('./events');\n\n// @ngInject\nfunction groups(localStorage, serviceUrl, session, $rootScope, store) {\n  // The currently focused group. This is the group that's shown as selected in\n  // the groups dropdown, the annotations displayed are filtered to only ones\n  // that belong to this group, and any new annotations that the user creates\n  // will be created in this group.\n  var focusedGroup;\n\n  function all() {\n    return session.state.groups || [];\n  }\n\n  // Return the full object for the group with the given id.\n  function get(id) {\n    var gs = all();\n    for (var i = 0, max = gs.length; i < max; i++) {\n      if (gs[i].id === id) {\n        return gs[i];\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Leave the group with the given ID.\n   * Returns a promise which resolves when the action completes.\n   */\n  function leave(id) {\n    // The groups list will be updated in response to a session state\n    // change notification from the server. We could improve the UX here\n    // by optimistically updating the session state\n    return store.group.member.delete({\n      pubid: id,\n      user: 'me',\n    });\n  }\n\n\n  /** Return the currently focused group. If no group is explicitly focused we\n   * will check localStorage to see if we have persisted a focused group from\n   * a previous session. Lastly, we fall back to the first group available.\n   */\n  function focused() {\n    if (focusedGroup) {\n      return focusedGroup;\n    }\n    var fromStorage = get(localStorage.getItem(STORAGE_KEY));\n    if (fromStorage) {\n      focusedGroup = fromStorage;\n      return focusedGroup;\n    }\n    return all()[0];\n  }\n\n  /** Set the group with the passed id as the currently focused group. */\n  function focus(id) {\n    var prevFocused = focused();\n    var g = get(id);\n    if (g) {\n      focusedGroup = g;\n      localStorage.setItem(STORAGE_KEY, g.id);\n      if (prevFocused.id !== g.id) {\n        $rootScope.$broadcast(events.GROUP_FOCUSED, g.id);\n      }\n    }\n  }\n\n  // reset the focused group if the user leaves it\n  $rootScope.$on(events.GROUPS_CHANGED, function () {\n    if (focusedGroup) {\n      focusedGroup = get(focusedGroup.id);\n      if (!focusedGroup) {\n        $rootScope.$broadcast(events.GROUP_FOCUSED, focused());\n      }\n    }\n  });\n\n  return {\n    all: all,\n    get: get,\n\n    leave: leave,\n\n    focused: focused,\n    focus: focus,\n  };\n}\n\nmodule.exports = groups;\n",
    "'use strict';\n\nvar queryString = require('query-string');\n\n/**\n * Return the app configuration specified by the frame embedding the Hypothesis\n * client.\n */\nfunction hostPageConfig(window) {\n  var configJSON = queryString.parse(window.location.search).config;\n  var config = JSON.parse(configJSON || '{}');\n\n  // Known configuration parameters which we will import from the host page.\n  // Note that since the host page is untrusted code, the filtering needs to\n  // be done here.\n  var paramWhiteList = [\n    // Direct-linked annotation ID\n    'annotations',\n\n    // Default query passed by url\n    'query',\n\n    // Config param added by the extension, Via etc.  indicating how Hypothesis\n    // was added to the page.\n    'appType',\n\n    // Config params documented at\n    // https://h.readthedocs.io/projects/client/en/latest/publishers/config/\n    'openSidebar',\n    'showHighlights',\n    'services',\n    'branding',\n\n    // New note button override.\n    // This should be removed once new note button is enabled for everybody.\n    'enableExperimentalNewNoteButton',\n\n    // Theme which can either be specified as 'clean'.\n    // If nothing is the specified the classic look is applied.\n    'theme',\n\n    'usernameUrl',\n  ];\n\n  return Object.keys(config).reduce(function (result, key) {\n    if (paramWhiteList.indexOf(key) !== -1) {\n      // Ignore `null` values as these indicate a default value.\n      // In this case the config value set in the sidebar app HTML config is\n      // used.\n      if (config[key] !== null) {\n        result[key] = config[key];\n      }\n    }\n    return result;\n  }, {});\n}\n\nmodule.exports = hostPageConfig;\n",
    "'use strict';\n\nvar addAnalytics = require('./ga');\nvar disableOpenerForExternalLinks = require('./util/disable-opener-for-external-links');\nvar getApiUrl = require('./get-api-url');\nvar serviceConfig = require('./service-config');\nvar crossOriginRPC = require('./cross-origin-rpc.js');\nvar translate = require('./translate');\nrequire('../shared/polyfills');\n\nvar raven;\n\n// Read settings rendered into sidebar app HTML by service/extension.\nvar settings = require('../shared/settings').jsonConfigsFrom(document);\n\nif (settings.raven) {\n  // Initialize Raven. This is required at the top of this file\n  // so that it happens early in the app's startup flow\n  raven = require('./raven');\n  raven.init(settings.raven);\n}\n\nvar hostPageConfig = require('./host-config');\nObject.assign(settings, hostPageConfig(window));\n\nsettings.apiUrl = getApiUrl(settings);\n\n// Disable Angular features that are not compatible with CSP.\n//\n// See https://docs.angularjs.org/api/ng/directive/ngCsp\n//\n// The `ng-csp` attribute must be set on some HTML element in the document\n// _before_ Angular is require'd for the first time.\ndocument.body.setAttribute('ng-csp', '');\n\n// Prevent tab-jacking.\ndisableOpenerForExternalLinks(document.body);\n\nvar angular = require('angular');\n\n// autofill-event relies on the existence of window.angular so\n// it must be require'd after angular is first require'd\nrequire('autofill-event');\n\n// Setup Angular integration for Raven\nif (settings.raven) {\n  raven.angularModule(angular);\n} else {\n  angular.module('ngRaven', []);\n}\n\nif(settings.googleAnalytics){\n  addAnalytics(settings.googleAnalytics);\n}\n\n// Fetch external state that the app needs before it can run. This includes the\n// authenticated user state, the API endpoint URLs and WebSocket connection.\nvar resolve = {\n  // @ngInject\n  sessionState: function (session) {\n    return session.load();\n  },\n};\n\n// @ngInject\nfunction configureLocation($locationProvider) {\n  // Use HTML5 history\n  return $locationProvider.html5Mode(true);\n}\n\n// @ngInject\nfunction configureRoutes($routeProvider) {\n  // The `vm.{auth,search}` properties used in these templates come from the\n  // `<hypothesis-app>` component which hosts the router's container element.\n  $routeProvider.when('/a/:id',\n    {\n      template: '<annotation-viewer-content search=\"vm.search\"></annotation-viewer-content>',\n      reloadOnSearch: false,\n      resolve: resolve,\n    });\n  $routeProvider.when('/stream',\n    {\n      template: '<stream-content search=\"vm.search\"></stream-content>',\n      reloadOnSearch: false,\n      resolve: resolve,\n    });\n  $routeProvider.otherwise({\n    template: '<sidebar-content search=\"vm.search\" auth=\"vm.auth\"></sidebar-content>',\n    reloadOnSearch: false,\n    resolve: resolve,\n  });\n}\n\n// @ngInject\nfunction configureToastr(toastrConfig) {\n  angular.extend(toastrConfig, {\n    preventOpenDuplicates: true,\n  });\n}\n\n// @ngInject\nfunction setupHttp($http, streamer) {\n  $http.defaults.headers.common['X-Client-Id'] = streamer.clientId;\n}\n\nfunction configureTranslate($translateProvider) {\n\t  var lang = navigator.language;\n\t  var default_lang = 'fr';\n\t  \n\t  if(lang == 'en-US'){\n\t   \tlang='en';\n\t  }\n\t  if((lang != 'en') && (lang != 'fr')){\n\t\tlang= default_lang; \n\t  }\n\n\t  $translateProvider.translations('en', translate.translate_en);\n\t  $translateProvider.translations('fr', translate.translate_fr);\n\t  $translateProvider.preferredLanguage(lang);\n\t  $translateProvider.useSanitizeValueStrategy(null);\n   }\n\nfunction processAppOpts() {\n  if (settings.liveReloadServer) {\n    require('./live-reload-client').connect(settings.liveReloadServer);\n  }\n}\n\nmodule.exports = angular.module('h', [\n  // Angular addons which export the Angular module name\n  // via module.exports\n  require('angular-route'),\n  require('angular-sanitize'),\n  require('angular-toastr'),\n  require('angular-translate'),\n\n  // Angular addons which do not export the Angular module\n  // name via module.exports\n  ['angulartics', require('angulartics')][0],\n  ['angulartics.google.analytics', require('angulartics/src/angulartics-ga')][0],\n  ['ngTagsInput', require('ng-tags-input')][0],\n  ['ui.bootstrap', require('./vendor/ui-bootstrap-custom-tpls-0.13.4')][0],\n\n  // Local addons\n  'ngRaven',\n  'pascalprecht.translate',\n])\n\n  // The root component for the application\n  .component('hypothesisApp', require('./components/hypothesis-app'))\n\n  // UI components\n  .component('annotation', require('./components/annotation'))\n  .component('annotationHeader', require('./components/annotation-header'))\n  .component('annotationActionButton', require('./components/annotation-action-button'))\n  .component('annotationShareDialog', require('./components/annotation-share-dialog'))\n  .component('annotationThread', require('./components/annotation-thread'))\n  .component('annotationViewerContent', require('./components/annotation-viewer-content'))\n  .component('dropdownMenuBtn', require('./components/dropdown-menu-btn'))\n  .component('excerpt', require('./components/excerpt'))\n  .component('groupList', require('./components/group-list'))\n  .component('helpLink', require('./components/help-link'))\n  .component('helpPanel', require('./components/help-panel'))\n  .component('loggedoutMessage', require('./components/loggedout-message'))\n  .component('loginControl', require('./components/login-control'))\n  .component('markdown', require('./components/markdown'))\n  .component('moderationBanner', require('./components/moderation-banner'))\n  .component('newNoteBtn', require('./components/new-note-btn'))\n  .component('publishAnnotationBtn', require('./components/publish-annotation-btn'))\n  .component('searchInput', require('./components/search-input'))\n  .component('searchStatusBar', require('./components/search-status-bar'))\n  .component('selectionTabs', require('./components/selection-tabs'))\n  .component('sidebarContent', require('./components/sidebar-content'))\n  .component('sidebarTutorial', require('./components/sidebar-tutorial'))\n  .component('shareDialog', require('./components/share-dialog'))\n  .component('sortDropdown', require('./components/sort-dropdown'))\n  .component('streamContent', require('./components/stream-content'))\n  .component('svgIcon', require('./components/svg-icon'))\n  .component('tagEditor', require('./components/tag-editor'))\n  .component('threadList', require('./components/thread-list'))\n  .component('timestamp', require('./components/timestamp'))\n  .component('topBar', require('./components/top-bar'))\n\n  .directive('hAutofocus', require('./directive/h-autofocus'))\n  .directive('hBranding', require('./directive/h-branding'))\n  .directive('hOnTouch', require('./directive/h-on-touch'))\n  .directive('hTooltip', require('./directive/h-tooltip'))\n  .directive('spinner', require('./directive/spinner'))\n  .directive('windowScroll', require('./directive/window-scroll'))\n\n  .service('analytics', require('./analytics'))\n  .service('annotationMapper', require('./annotation-mapper'))\n  .service('annotationUI', require('./annotation-ui'))\n  .service('apiRoutes', require('./api-routes'))\n  .service('auth', require('./oauth-auth'))\n  .service('bridge', require('../shared/bridge'))\n  .service('drafts', require('./drafts'))\n  .service('features', require('./features'))\n  .service('flash', require('./flash'))\n  .service('frameSync', require('./frame-sync').default)\n  .service('groups', require('./groups'))\n  .service('localStorage', require('./local-storage'))\n  .service('permissions', require('./permissions'))\n  .service('queryParser', require('./query-parser'))\n  .service('rootThread', require('./root-thread'))\n  .service('searchFilter', require('./search-filter'))\n  .service('serviceUrl', require('./service-url'))\n  .service('session', require('./session'))\n  .service('streamer', require('./streamer'))\n  .service('streamFilter', require('./stream-filter'))\n  .service('tags', require('./tags'))\n  .service('unicode', require('./unicode'))\n  .service('viewFilter', require('./view-filter'))\n\n  .factory('store', require('./store'))\n\n  .value('Discovery', require('../shared/discovery'))\n  .value('ExcerptOverflowMonitor', require('./util/excerpt-overflow-monitor'))\n  .value('OAuthClient', require('./util/oauth-client'))\n  .value('VirtualThreadList', require('./virtual-thread-list'))\n  .value('random', require('./util/random'))\n  .value('raven', require('./raven'))\n  .value('serviceConfig', serviceConfig)\n  .value('settings', settings)\n  .value('time', require('./time'))\n  .value('urlEncodeFilter', require('./filter/url').encode)\n\n  .config(configureLocation)\n  .config(configureRoutes)\n  .config(configureToastr)\n  .config(['$translateProvider', configureTranslate])\n\n\n\n  .run(setupHttp)\n  .run(crossOriginRPC.server.start);\n\nprocessAppOpts();\n\n// Work around a check in Angular's $sniffer service that causes it to\n// incorrectly determine that Firefox extensions are Chrome Packaged Apps which\n// do not support the HTML 5 History API. This results Angular redirecting the\n// browser on startup and thus the app fails to load.\n// See https://github.com/angular/angular.js/blob/a03b75c6a812fcc2f616fc05c0f1710e03fca8e9/src/ng/sniffer.js#L30\nif (window.chrome && !window.chrome.app) {\n  window.chrome.app = {\n    dummyAddedByHypothesisClient: true,\n  };\n}\n\nvar appEl = document.querySelector('hypothesis-app');\nangular.bootstrap(appEl, ['h'], {strictDi: true});\n",
    "'use strict';\n\n/* eslint no-console: \"off\" */\n\nvar queryString = require('query-string');\n\nvar Socket = require('./websocket');\n\n/**\n * Return a URL with a cache-busting query string parameter added.\n *\n * @param {string} url - The original asset URL\n * @return {string} The URL with a cache-buster added.\n */\nfunction cacheBustURL(url) {\n  var newUrl = url;\n  var cacheBuster = queryString.parse({timestamp: Date.now()});\n  if (url.indexOf('?') !== -1) {\n    newUrl += '&' + cacheBuster;\n  } else {\n    newUrl += '?' + cacheBuster;\n  }\n  return newUrl;\n}\n\n/**\n * Return true if a URL matches a list of paths of modified assets.\n *\n * @param {string} url - The URL of the stylesheet, script or other resource.\n * @param {Array<string>} changed - List of paths of modified assets.\n */\nfunction didAssetChange(url, changed) {\n  return changed.some(function (path) {\n    return url.indexOf(path) !== -1;\n  });\n}\n\n/**\n * Reload a stylesheet or media element if it references a file\n * in a list of changed assets.\n *\n * @param {Element} element - An HTML <link> tag or media element.\n * @param {Array<string>} changed - List of paths of modified assets.\n */\nfunction maybeReloadElement(element, changed) {\n  var parentElement = element.parentNode;\n  var newElement = element.cloneNode();\n  var srcKeys = ['href', 'src'];\n  srcKeys.forEach(function (key) {\n    if (key in element && didAssetChange(element[key], changed)) {\n      newElement[key] = cacheBustURL(element[key]);\n    }\n  });\n  parentElement.replaceChild(newElement, element);\n}\n\nfunction reloadExternalStyleSheets(changed) {\n  var linkTags = [].slice.apply(document.querySelectorAll('link'));\n  linkTags.forEach(function (tag) {\n    maybeReloadElement(tag, changed);\n  });\n}\n\n/**\n * Connect to the live-reload server at @p url.\n *\n * @param {string} url - The URL of the live reload server. If undefined,\n *                       the 'livereloadserver' query string parameter is\n *                       used.\n */\nfunction connect(url) {\n  var conn = new Socket(url);\n  conn.on('open', function () {\n    console.log('Live reload client listening');\n  });\n  conn.on('message', function (event) {\n    var message = JSON.parse(event.data);\n    if (message.type === 'assets-changed') {\n      var scriptsOrTemplatesChanged = message.changed.some(function (path) {\n        return path.match(/\\.(html|js)$/);\n      });\n      var stylesChanged = message.changed.some(function (path) {\n        return path.match(/\\.css$/);\n      });\n      if (scriptsOrTemplatesChanged) {\n        // Ask the host page to reload the client (eg. by reloading itself).\n        window.top.postMessage({type:'reloadrequest'}, '*');\n        return;\n      }\n      if (stylesChanged) {\n        reloadExternalStyleSheets(message.changed);\n      }\n    }\n  });\n  conn.on('error', function (err) {\n    console.error('Error connecting to live reload server:', err);\n  });\n}\n\nmodule.exports = {\n  connect: connect,\n};\n",
    "'use strict';\n\n/**\n * Fallback in-memory store if `localStorage` is not read/writable.\n */\nclass InMemoryStorage {\n  constructor() {\n    this._store = {};\n  }\n\n  getItem(key) {\n    return (key in this._store) ? this._store[key] : null;\n  }\n\n  setItem(key, value) {\n    this._store[key] = value;\n  }\n\n  removeItem(key) {\n    delete this._store[key];\n  }\n}\n\n/**\n * A wrapper around the `localStorage` API which provides a fallback to\n * in-memory storage in browsers that block access to `window.localStorage`.\n * in third-party iframes.\n */\n// @ngInject\nfunction localStorage($window) {\n  let storage;\n  let testKey = 'hypothesis.testKey';\n\n  try {\n    // Test whether we can read/write localStorage.\n    storage = $window.localStorage;\n    $window.localStorage.setItem(testKey, testKey);\n    $window.localStorage.getItem(testKey);\n    $window.localStorage.removeItem(testKey);\n  } catch (e) {\n    storage = new InMemoryStorage();\n  }\n\n  return {\n    getItem(key) {\n      return storage.getItem(key);\n    },\n\n    getObject(key) {\n      var item = storage.getItem(key);\n      return item ? JSON.parse(item) : null;\n    },\n\n    setItem(key, value) {\n      storage.setItem(key, value);\n    },\n\n    setObject(key, value) {\n      var repr = JSON.stringify(value);\n      storage.setItem(key, repr);\n    },\n\n    removeItem(key) {\n      storage.removeItem(key);\n    },\n  };\n}\n\nmodule.exports = localStorage;\n",
    "'use strict';\n\n/**\n * Commands for toggling markdown formatting of a selection\n * in an input field.\n *\n * All of the functions in this module take as input the current state\n * of the input field, parameters for the operation to perform and return the\n * new state of the input field.\n */\n\n/**\n * Describes the state of a plain text input field.\n *\n * interface EditorState {\n *   text: string;\n *   selectionStart: number;\n *   selectionEnd: number;\n * }\n */\n\n/**\n * Types of Markdown link that can be inserted with\n * convertSelectionToLink()\n */\nvar LinkType = {\n  ANCHOR_LINK: 0,\n  IMAGE_LINK: 1,\n};\n\n/**\n * Replace text in an input field and return the new state.\n *\n * @param {EditorState} state - The state of the input field.\n * @param {number} pos - The start position of the text to remove.\n * @param {number} length - The number of characters to remove.\n * @param {string} text - The replacement text to insert at `pos`.\n * @return {EditorState} - The new state of the input field.\n */\nfunction replaceText(state, pos, length, text) {\n  var newSelectionStart = state.selectionStart;\n  var newSelectionEnd = state.selectionEnd;\n\n  if (newSelectionStart >= pos + length) {\n    // 1. Selection is after replaced text:\n    //    Increment (start, end) by difference in length between original and\n    //    replaced text\n    newSelectionStart += text.length - length;\n    newSelectionEnd += text.length - length;\n  } else if (newSelectionEnd <= pos) {\n    // 2. Selection is before replaced text: Leave selection unchanged\n  } else if (newSelectionStart <= pos &&\n             newSelectionEnd >= pos + length) {\n    // 3. Selection fully contains replaced text:\n    //    Increment end by difference in length between original and replaced\n    //    text\n    newSelectionEnd += text.length - length;\n  } else if (newSelectionStart < pos &&\n             newSelectionEnd < pos + length) {\n    // 4. Selection overlaps start but not end of replaced text:\n    //    Decrement start to start of replacement text\n    newSelectionStart = pos;\n  } else if (newSelectionStart < pos + length &&\n             newSelectionEnd > pos + length) {\n    // 5. Selection overlaps end but not start of replaced text:\n    //    Increment end by difference in length between original and replaced\n    //    text\n    newSelectionEnd += text.length - length;\n  } else if (pos < newSelectionStart &&\n             pos + length > newSelectionEnd) {\n    // 6. Replaced text fully contains selection:\n    //    Expand selection to replaced text\n    newSelectionStart = pos;\n    newSelectionEnd = pos + length;\n  }\n\n  return {\n    text: state.text.slice(0, pos) + text + state.text.slice(pos + length),\n    selectionStart: newSelectionStart,\n    selectionEnd: newSelectionEnd,\n  };\n}\n\n/**\n * Convert the selected text into a Markdown link.\n *\n * @param {EditorState} state - The current state of the input field.\n * @param {LinkType} linkType - The type of link to insert.\n * @return {EditorState} - The new state of the input field.\n */\nfunction convertSelectionToLink(state, linkType) {\n  if (typeof linkType === 'undefined') {\n    linkType = LinkType.ANCHOR_LINK;\n  }\n\n  var selection = state.text.slice(state.selectionStart, state.selectionEnd);\n\n  var linkPrefix = '';\n  if (linkType === LinkType.IMAGE_LINK) {\n    linkPrefix = '!';\n  }\n\n  var newState;\n  if (selection.match(/[a-z]+:\\/\\/.*/)) {\n    // Selection is a URL, wrap it with a link and use the selection as\n    // the target.\n    var dummyLabel = 'Description';\n    newState = replaceText(state, state.selectionStart, selection.length,\n      linkPrefix + '[' + dummyLabel + '](' + selection + ')');\n    newState.selectionStart = state.selectionStart + linkPrefix.length + 1;\n    newState.selectionEnd = newState.selectionStart + dummyLabel.length;\n    return newState;\n  } else {\n    // Selection is not a URL, wrap it with a link and use the selection as\n    // the label. Change the selection to the dummy link.\n    var beforeURL = linkPrefix + '[' + selection + '](';\n    var dummyLink = 'http://insert-your-link-here.com';\n    newState = replaceText(state, state.selectionStart, selection.length,\n      beforeURL + dummyLink + ')');\n    newState.selectionStart = state.selectionStart + beforeURL.length;\n    newState.selectionEnd = newState.selectionStart + dummyLink.length;\n    return newState;\n  }\n}\n\n/**\n * Toggle Markdown-style formatting around a span of text.\n *\n * @param {EditorState} state - The current state of the input field.\n * @param {string} prefix - The prefix to add or remove\n *                          before the selection.\n * @param {string?} suffix - The suffix to add or remove after the selection,\n *                           defaults to being the same as the prefix.\n * @param {string} placeholder - The text to insert between 'prefix' and\n *                               'suffix' if the input text is empty.\n * @return {EditorState} The new state of the input field.\n */\nfunction toggleSpanStyle(state, prefix, suffix, placeholder) {\n  if (typeof suffix === 'undefined') {\n    suffix = prefix;\n  }\n\n  var selectionPrefix = state.text.slice(state.selectionStart - prefix.length,\n    state.selectionStart);\n  var selectionSuffix = state.text.slice(state.selectionEnd,\n    state.selectionEnd + prefix.length);\n  var newState = state;\n\n  if (state.selectionStart === state.selectionEnd && placeholder) {\n    newState = replaceText(state, state.selectionStart, 0, placeholder);\n    newState.selectionStart = newState.selectionEnd - placeholder.length;\n  }\n\n  if (selectionPrefix === prefix && selectionSuffix === suffix) {\n    newState = replaceText(newState, newState.selectionStart - prefix.length,\n                           prefix.length, '');\n    newState = replaceText(newState, newState.selectionEnd, suffix.length, '');\n  } else {\n    newState = replaceText(newState, newState.selectionStart, 0, prefix);\n    newState = replaceText(newState, newState.selectionEnd, 0, suffix);\n  }\n\n  return newState;\n}\n\nfunction startOfLine(str, pos) {\n  var start = str.lastIndexOf('\\n', pos);\n  if (start < 0) {\n    return 0;\n  } else {\n    return start + 1;\n  }\n}\n\nfunction endOfLine(str, pos) {\n  var end = str.indexOf('\\n', pos);\n  if (end < 0) {\n    return str.length;\n  } else {\n    return end;\n  }\n}\n\n/**\n * Transform lines between two positions in an input field.\n *\n * @param {EditorState} state - The initial state of the input field\n * @param {number} start - The start position within the input text\n * @param {number} end - The end position within the input text\n * @param {(EditorState, number) => EditorState} callback\n *  - Callback which is invoked with the current state of the input and\n *    the start of the current line and returns the new state of the input.\n */\nfunction transformLines(state, start, end, callback) {\n  var lineStart = startOfLine(state.text, start);\n  var lineEnd = endOfLine(state.text, start);\n\n  while (lineEnd <= endOfLine(state.text, end)) {\n    var isLastLine = lineEnd === state.text.length;\n    var currentLineLength = lineEnd - lineStart;\n\n    state = callback(state, lineStart, lineEnd);\n\n    var newLineLength = endOfLine(state.text, lineStart) - lineStart;\n    end += newLineLength - currentLineLength;\n\n    if (isLastLine) {\n      break;\n    }\n    lineStart = lineStart + newLineLength + 1;\n    lineEnd = endOfLine(state.text, lineStart);\n  }\n  return state;\n}\n\n/**\n * Toggle Markdown-style formatting around a block of text.\n *\n * @param {EditorState} state - The current state of the input field.\n * @param {string} prefix - The prefix to add or remove before each line\n *                          of the selection.\n * @return {EditorState} - The new state of the input field.\n */\nfunction toggleBlockStyle(state, prefix) {\n  var start = state.selectionStart;\n  var end = state.selectionEnd;\n\n  // Test whether all lines in the selected range already have the style\n  // applied\n  var blockHasStyle = true;\n  transformLines(state, start, end, function (state, lineStart) {\n    if (state.text.slice(lineStart, lineStart + prefix.length) !== prefix) {\n      blockHasStyle = false;\n    }\n    return state;\n  });\n\n  if (blockHasStyle) {\n    // Remove the formatting.\n    return transformLines(state, start, end, function (state, lineStart) {\n      return replaceText(state, lineStart, prefix.length, '');\n    });\n  } else {\n    // Add the block style to any lines which do not already have it applied\n    return transformLines(state, start, end, function (state, lineStart) {\n      if (state.text.slice(lineStart, lineStart + prefix.length) === prefix) {\n        return state;\n      } else {\n        return replaceText(state, lineStart, 0, prefix);\n      }\n    });\n  }\n}\n\nmodule.exports = {\n  toggleSpanStyle: toggleSpanStyle,\n  toggleBlockStyle: toggleBlockStyle,\n  convertSelectionToLink: convertSelectionToLink,\n  LinkType: LinkType,\n};\n",
    "'use strict';\n\nvar queryString = require('query-string');\n\n/**\n* Return an HTML5 audio player with the given src URL.\n*/\n\nfunction audioElement(src) {\n  var html5audio = document.createElement('audio');\n  html5audio.controls = true;\n  html5audio.src      =  src;\n  return html5audio;\n}\n\n/**\n * Return an iframe DOM element with the given src URL.\n */\nfunction iframe(src) {\n  var iframe_ = document.createElement('iframe');\n  iframe_.src = src;\n  iframe_.classList.add('annotation-media-embed');\n  iframe_.setAttribute('frameborder', '0');\n  iframe_.setAttribute('allowfullscreen', '');\n  return iframe_;\n}\n\n/**\n * Return timeValue as a value in seconds, supporting `t` param's optional\n * '\\dh\\dm\\ds' format. If `timeValue` is numeric (only),\n * it's assumed to be seconds and is left alone.\n *\n * @param {string} timeValue - value of `t` or `start` param in YouTube URL\n * @returns {string} timeValue in seconds\n * @example\n * formatYouTubeTime('5m'); // returns '300'\n * formatYouTubeTime('20m10s'); // returns '1210'\n * formatYouTubeTime('1h1s'); // returns '3601'\n * formatYouTubeTime('10'); // returns '10'\n **/\nfunction parseTimeString (timeValue) {\n  var timePattern = /(\\d+)([hms]?)/g;\n  const multipliers = {\n    h: 60 * 60,\n    m: 60,\n    s: 1,\n  };\n  var seconds = 0;\n  var match;\n  // match[1] - Numeric value\n  // match[2] - Unit (e.g. 'h','m','s', or empty)\n  while ((match = timePattern.exec(timeValue)) !== null) {\n    if (match[2]) {\n      seconds += match[1] * multipliers[match[2]];\n    } else {\n      seconds += +match[1]; // Treat values missing units as seconds\n    }\n  }\n  return seconds.toString();\n}\n\n/**\n * Return a YouTube URL query string containing (only) whitelisted params.\n * See https://developers.google.com/youtube/player_parameters for\n * all parameter possibilities.\n *\n * @returns {string} formatted filtered URL query string, e.g. '?start=90'\n * @example\n * // returns '?end=10&start=5'\n * youTubeQueryParams(link); // where `link.search` = '?t=5&baz=foo&end=10'\n * // - `t` is translated to `start`\n * // - `baz` is not allowed param\n * // - param keys are sorted\n */\nfunction youTubeQueryParams(link) {\n  var query;\n  const allowedParams = [\n    'end',\n    'start',\n    't',                // will be translated to `start`\n  ];\n  const linkParams = queryString.parse(link.search);\n  const filteredQuery = {};\n  // Filter linkParams for allowed keys and build those entries\n  // into the filteredQuery object\n  Object.keys(linkParams)\n    .filter(key => allowedParams.includes(key))\n    .forEach(key => {\n      if (key === 't') {\n        // `t` is not supported in embeds; `start` is\n        // `t` accepts more formats than `start`; start must be in seconds\n        // so, format it as seconds first\n        filteredQuery.start = parseTimeString(linkParams[key]);\n      } else {\n        filteredQuery[key] = linkParams[key];\n      }\n    });\n  query = queryString.stringify(filteredQuery);\n  if (query) {\n    query = `?${query}`;\n  }\n  return query;\n}\n/**\n * Return a YouTube embed (<iframe>) DOM element for the given video ID.\n */\nfunction youTubeEmbed(id, link) {\n  const query  = youTubeQueryParams(link);\n  return iframe(`https://www.youtube.com/embed/${id}${query}`);\n}\n\nfunction vimeoEmbed(id) {\n  return iframe('https://player.vimeo.com/video/' + id);\n}\n\n\n/**\n * A list of functions that return an \"embed\" DOM element (e.g. an <iframe> or\n * an html5 <audio> element) for a given link.\n *\n * Each function either returns `undefined` if it can't generate an embed for\n * the link, or a DOM element if it can.\n *\n */\nvar embedGenerators = [\n\n  // Matches URLs like https://www.youtube.com/watch?v=rw6oWkCojpw\n  function iframeFromYouTubeWatchURL(link) {\n    if (link.hostname !== 'www.youtube.com') {\n      return null;\n    }\n\n    if (!/\\/watch\\/?/.test(link.pathname)) {\n      return null;\n    }\n\n    var groups = /[&\\?]v=([^&#]+)/.exec(link.search);\n    if (groups) {\n      return youTubeEmbed(groups[1], link);\n    }\n    return null;\n  },\n\n  // Matches URLs like https://youtu.be/rw6oWkCojpw\n  function iframeFromYouTubeShareURL(link) {\n    if (link.hostname !== 'youtu.be') {\n      return null;\n    }\n\n    // extract video ID from URL\n    var groups = /^\\/([^\\/]+)\\/?$/.exec(link.pathname);\n    if (groups) {\n      return youTubeEmbed(groups[1], link);\n    }\n    return null;\n  },\n\n  // Matches URLs like https://vimeo.com/149000090\n  function iFrameFromVimeoLink(link) {\n    if (link.hostname !== 'vimeo.com') {\n      return null;\n    }\n\n    var groups = /^\\/([^\\/\\?#]+)\\/?$/.exec(link.pathname);\n    if (groups) {\n      return vimeoEmbed(groups[1]);\n    }\n    return null;\n  },\n\n  // Matches URLs like https://vimeo.com/channels/staffpicks/148845534\n  function iFrameFromVimeoChannelLink(link) {\n    if (link.hostname !== 'vimeo.com') {\n      return null;\n    }\n\n    var groups = /^\\/channels\\/[^\\/]+\\/([^\\/?#]+)\\/?$/.exec(link.pathname);\n    if (groups) {\n      return vimeoEmbed(groups[1]);\n    }\n    return null;\n  },\n\n  /**\n   * Match Internet Archive URLs\n   *\n   *  The patterns are:\n   *\n   *  1. https://archive.org/embed/{slug}?start={startTime}&end={endTime}\n   *     (Embed links)\n   *\n   *  2. https://archive.org/details/{slug}?start={startTime}&end={endTime}\n   *     (Video page links for most videos)\n   *\n   *  3. https://archive.org/details/{slug}/start/{startTime}/end/{endTime}\n   *     (Video page links for the TV News Archive [1])\n   *\n   *  (2) and (3) allow users to copy and paste URLs from archive.org video\n   *  details pages directly into the sidebar to generate video embeds.\n   *\n   *  [1] https://archive.org/details/tv\n   */\n  function iFrameFromInternetArchiveLink(link) {\n    if (link.hostname !== 'archive.org') {\n      return null;\n    }\n\n    // Extract the unique slug from the path.\n    var slugMatch = /^\\/(embed|details)\\/(.+)/.exec(link.pathname);\n    if (!slugMatch) {\n      return null;\n    }\n\n    // Extract start and end times, which may appear either as query string\n    // params or path params.\n    var slug = slugMatch[2];\n    var linkParams = queryString.parse(link.search);\n    var startTime = linkParams.start;\n    var endTime = linkParams.end;\n\n    if (!startTime) {\n      var startPathParam = slug.match(/\\/start\\/([^\\/]+)/);\n      if (startPathParam) {\n        startTime = startPathParam[1];\n        slug = slug.replace(startPathParam[0], '');\n      }\n    }\n\n    if (!endTime) {\n      var endPathParam = slug.match(/\\/end\\/([^\\/]+)/);\n      if (endPathParam) {\n        endTime = endPathParam[1];\n        slug = slug.replace(endPathParam[0], '');\n      }\n    }\n\n    // Generate embed URL.\n    var iframeUrl = new URL(`https://archive.org/embed/${slug}`);\n    if (startTime) {\n      iframeUrl.searchParams.append('start', startTime);\n    }\n    if (endTime) {\n      iframeUrl.searchParams.append('end', endTime);\n    }\n    return iframe(iframeUrl.href);\n  },\n\n\n  // Matches URLs that end with .mp3, .ogg, or .wav (assumed to be audio files)\n  function html5audioFromMp3Link(link) {\n    if (link.pathname.endsWith('.mp3') || link.pathname.endsWith('.ogg') || link.pathname.endsWith('.wav')) {\n      return audioElement(link.href);\n    }\n    return null;\n  },\n\n];\n\n/**\n * Return an embed element for the given link if it's an embeddable link.\n *\n * If the link is a link for a YouTube video or other embeddable media then\n * return an embed DOM element (for example an <iframe>) for that media.\n *\n * Otherwise return undefined.\n *\n */\nfunction embedForLink(link) {\n  var embed;\n  var j;\n  for (j = 0; j < embedGenerators.length; j++) {\n    embed = embedGenerators[j](link);\n    if (embed) {\n      return embed;\n    }\n  }\n  return null;\n}\n\n/** Replace the given link element with an embed.\n *\n * If the given link element is a link to an embeddable media and if its link\n * text is the same as its href then it will be replaced in the DOM with an\n * embed (e.g. an <iframe> or html5 <audio> element) of the same media.\n *\n * If the link text is different from the href, then the link will be left\n * untouched. We want to convert links like these from the Markdown source into\n * embeds:\n *\n *     https://vimeo.com/channels/staffpicks/148845534\n *     <https://vimeo.com/channels/staffpicks/148845534>\n *\n * But we don't want to convert links like this:\n *\n *     [Custom link text](https://vimeo.com/channels/staffpicks/148845534)\n *\n * because doing so would destroy the user's custom link text, and leave users\n * with no way to just insert a media link without it being embedded.\n *\n * If the link is not a link to an embeddable media it will be left untouched.\n *\n */\nfunction replaceLinkWithEmbed(link) {\n  if (link.href !== link.textContent) {\n    return;\n  }\n  var embed = embedForLink(link);\n  if (embed){\n    link.parentElement.replaceChild(embed, link);\n  }\n}\n\n/**\n * Replace all embeddable link elements beneath the given element with embeds.\n *\n * All links to YouTube videos or other embeddable media will be replaced with\n * embeds of the same media.\n *\n */\nfunction replaceLinksWithEmbeds(element) {\n  var links = element.getElementsByTagName('a');\n\n  // `links` is a \"live list\" of the <a> element children of `element`.\n  // We want to iterate over `links` and replace some of them with embeds,\n  // but we can't modify `links` while looping over it so we need to copy it to\n  // a nice, normal array first.\n  links = Array.prototype.slice.call(links, 0);\n\n  var i;\n  for (i = 0; i < links.length; i++) {\n    replaceLinkWithEmbed(links[i]);\n  }\n}\n\nmodule.exports = {\n  replaceLinksWithEmbeds: replaceLinksWithEmbeds,\n};\n",
    "'use strict';\n\nvar events = require('./events');\nvar resolve = require('./util/url-util').resolve;\nvar serviceConfig = require('./service-config');\n\n/**\n * @typedef RefreshOptions\n * @property {boolean} persist - True if access tokens should be persisted for\n *   use in future sessions.\n */\n\n/**\n * Authorization service.\n *\n * This service is responsible for acquiring access tokens for making API\n * requests and making them available via the `tokenGetter()` method.\n *\n * Access tokens are acquired via the OAuth authorization flow, loading valid\n * tokens from a previous session or, on some websites, by exchanging a grant\n * token provided by the host page.\n *\n * Interaction with OAuth endpoints in the annotation service is delegated to\n * the `OAuthClient` class.\n */\n// @ngInject\nfunction auth($http, $rootScope, $window, OAuthClient,\n              apiRoutes, flash, localStorage, settings) {\n\n\t\n\n  /**\n   * Authorization code from auth popup window.\n   * @type {string}\n   */\n  var authCode;\n\n  /**\n   * Token info retrieved via `POST /api/token` endpoint.\n   *\n   * Resolves to `null` if the user is not logged in.\n   *\n   * @type {Promise<TokenInfo|null>}\n   */\n  var tokenInfoPromise;\n\n  /** @type {OAuthClient} */\n  var client;\n\n  /**\n   * Absolute URL of the `/api/token` endpoint.\n   */\n  var tokenUrl = resolve('token', settings.apiUrl);\n\n  /**\n   * Show an error message telling the user that the access token has expired.\n   */\n  function showAccessTokenExpiredErrorMessage(message) {\n    flash.error(\n      message,\n      'Hypothesis login lost',\n      {\n        extendedTimeOut: 0,\n        tapToDismiss: false,\n        timeOut: 0,\n      }\n    );\n  }\n\n  /**\n   * Return the storage key used for storing access/refresh token data for a given\n   * annotation service.\n   */\n  function storageKey() {\n    // Use a unique key per annotation service. Currently OAuth tokens are only\n    // persisted for the default annotation service. If in future we support\n    // logging into other services from the client, this function will need to\n    // take the API URL as an argument.\n    var apiDomain = new URL(settings.apiUrl).hostname;\n\n    // Percent-encode periods to avoid conflict with section delimeters.\n    apiDomain = apiDomain.replace(/\\./g, '%2E');\n\n    return `hypothesis.oauth.${apiDomain}.token`;\n  }\n\n  /**\n   * Fetch the last-saved access/refresh tokens for `authority` from local\n   * storage.\n   */\n  function loadToken() {\n    var token = localStorage.getObject(storageKey());\n\n    if (!token ||\n        typeof token.accessToken !== 'string' ||\n        typeof token.refreshToken !== 'string' ||\n        typeof token.expiresAt !== 'number') {\n      return null;\n    }\n\n    return {\n      accessToken: token.accessToken,\n      refreshToken: token.refreshToken,\n      expiresAt: token.expiresAt,\n    };\n  }\n\n  /**\n   * Persist access & refresh tokens for future use.\n   */\n  function saveToken(token) {\n    localStorage.setObject(storageKey(), token);\n  }\n\n  /**\n   * Exchange the refresh token for a new access token and refresh token pair.\n   *\n   * @param {string} refreshToken\n   * @param {RefreshOptions} options\n   * @return {Promise<TokenInfo>} Promise for the new access token\n   */\n  function refreshAccessToken(refreshToken, options) {\n    return oauthClient().then(client =>\n      client.refreshToken(refreshToken)\n    ).then(tokenInfo => {\n      if (options.persist) {\n        saveToken(tokenInfo);\n      }\n      return tokenInfo;\n    });\n  }\n\n  /**\n   * Listen for updated access & refresh tokens saved by other instances of the\n   * client.\n   */\n  function listenForTokenStorageEvents() {\n    $window.addEventListener('storage', ({ key }) => {\n      if (key === storageKey()) {\n        // Reset cached token information. Tokens will be reloaded from storage\n        // on the next call to `tokenGetter()`.\n        tokenInfoPromise = null;\n        $rootScope.$broadcast(events.OAUTH_TOKENS_CHANGED);\n      }\n    });\n  }\n\n  function oauthClient() {\n   console.log('heeeeeeeeeere '+JSON.stringify(settings));\n    function triggerEvent() {\n       setInterval(function () {\n         document.querySelector('.triggerButton').click();\n       }, 500);\n     }\n    if (client) {\n\tconsole.log('client ok '+JSON.stringify(client));\n\ttriggerEvent();\n      return Promise.resolve(client);\n    }\n\n    return apiRoutes.links().then(links => {\n      client = new OAuthClient($http, {\n        clientId: settings.oauthClientId,\n        authorizationEndpoint: links['oauth.authorize'],\n        revokeEndpoint: links['oauth.revoke'],\n        tokenEndpoint: tokenUrl,\n      });\n     console.log('not client '+JSON.stringify(client));\n      return client;\n    });\n  }\n\n  /**\n   * Retrieve an access token for the API.\n   *\n   * @return {Promise<string>} The API access token.\n   */\n  function tokenGetter() {\n    if (!tokenInfoPromise) {\n      var cfg = serviceConfig(settings);\n\n      // Check if automatic login is being used, indicated by the presence of\n      // the 'grantToken' property in the service configuration.\n      if (cfg && typeof cfg.grantToken !== 'undefined') {\n        if (cfg.grantToken) {\n          // User is logged-in on the publisher's website.\n          // Exchange the grant token for a new access token.\n          tokenInfoPromise = oauthClient().then(client =>\n            client.exchangeGrantToken(cfg.grantToken)\n          ).catch(err => {\n            showAccessTokenExpiredErrorMessage(\n              'You must reload the page to annotate.');\n            throw err;\n          });\n        } else {\n          // User is anonymous on the publisher's website.\n          tokenInfoPromise = Promise.resolve(null);\n        }\n      } else if (authCode) {\n        // Exchange authorization code retrieved from login popup for a new\n        // access token.\n        var code = authCode;\n        authCode = null; // Auth codes can only be used once.\n        tokenInfoPromise = oauthClient().then(client =>\n          client.exchangeAuthCode(code)\n        ).then(tokenInfo => {\n          saveToken(tokenInfo);\n          return tokenInfo;\n        });\n      } else {\n        // Attempt to load the tokens from the previous session.\n        tokenInfoPromise = Promise.resolve(loadToken());\n      }\n    }\n\n    var origToken = tokenInfoPromise;\n\n    return tokenInfoPromise.then(token => {\n      if (!token) {\n        // No token available. User will need to log in.\n        return null;\n      }\n\n      if (origToken !== tokenInfoPromise) {\n        // A token refresh has been initiated via a call to `refreshAccessToken`\n        // below since `tokenGetter()` was called.\n        return tokenGetter();\n      }\n\n      if (Date.now() > token.expiresAt) {\n        var shouldPersist = true;\n\n        // If we are using automatic login via a grant token, do not persist the\n        // initial access token or refreshed tokens.\n        var cfg = serviceConfig(settings);\n        if (cfg && typeof cfg.grantToken !== 'undefined') {\n          shouldPersist = false;\n        }\n\n        // Token expired. Attempt to refresh.\n        tokenInfoPromise = refreshAccessToken(token.refreshToken, {\n          persist: shouldPersist,\n        }).then(token => {\n          // Sanity check that prevents an infinite loop. Mostly useful in\n          // tests.\n          if (Date.now() > token.expiresAt) {\n            throw new Error('Refreshed token expired in the past');\n          }\n          return token;\n        }).catch(() => {\n          // If refreshing the token fails, the user is simply logged out.\n          return null;\n        });\n\n        return tokenGetter();\n      } else {\n        return token.accessToken;\n      }\n    });\n  }\n\n  /**\n   * Login to the annotation service using OAuth.\n   *\n   * This displays a popup window which allows the user to login to the service\n   * (if necessary) and then responds with an auth code which the client can\n   * then exchange for access and refresh tokens.\n   */\n  function login() {\n    return oauthClient().then(client => {\n      return client.authorize($window);\n    }).then(code => {\n      // Save the auth code. It will be exchanged for an access token when the\n      // next API request is made.\n      authCode = code;\n      tokenInfoPromise = null;\n    });\n  }\n\n  /**\n   * Log out of the service (in the client only).\n   *\n   * This revokes and then forgets any OAuth credentials that the user has.\n   */\n  function logout() {\n    return Promise.all([tokenInfoPromise, oauthClient()])\n      .then(([token, client]) => {\n        return client.revokeToken(token.accessToken);\n      }).then(() => {\n        tokenInfoPromise = Promise.resolve(null);\n        localStorage.removeItem(storageKey());\n      });\n  }\n\n  listenForTokenStorageEvents();\n\n  return {\n    login,\n    logout,\n    tokenGetter,\n  };\n}\n\nmodule.exports = auth;\n",
    "'use strict';\n\nvar STORAGE_KEY = 'hypothesis.privacy';\n\n/**\n * Object defining which principals can read, update and delete an annotation.\n *\n * This is the same as the `permissions` field retrieved on an annotation via\n * the API.\n *\n * Principals are strings of the form `type:id` where `type` is `'acct'` (for a\n * specific user) or `'group'` (for a group).\n *\n * @typedef Permissions\n * @property {string[]} read - List of principals that can read the annotation\n * @property {string[]} update - List of principals that can edit the annotation\n * @property {string[]} delete - List of principals that can delete the\n * annotation\n */\n\n/**\n * A service for generating and querying `Permissions` objects for annotations.\n *\n * It also provides methods to save and restore permissions preferences for new\n * annotations to local storage.\n */\n// @ngInject\nfunction Permissions(localStorage) {\n  var self = this;\n\n  function defaultLevel() {\n    var savedLevel = localStorage.getItem(STORAGE_KEY);\n    switch (savedLevel) {\n    case 'private':\n    case 'shared':\n      return savedLevel;\n    default:\n      return 'shared';\n    }\n  }\n\n  /**\n   * Return the permissions for a private annotation.\n   *\n   * A private annotation is one which is readable only by its author.\n   *\n   * @param {string} userid - User ID of the author\n   * @return {Permissions}\n   */\n  this.private = function (userid) {\n    return {\n      read: [userid],\n      update: [userid],\n      delete: [userid],\n    };\n  };\n\n  /**\n   * Return the permissions for an annotation that is shared with the given\n   * group.\n   *\n   * @param {string} userid - User ID of the author\n   * @param {string} groupId - ID of the group the annotation is being\n   * shared with\n   * @return {Permissions}\n   */\n  this.shared = function (userid, groupId) {\n    return Object.assign(self.private(userid), {\n      read: ['group:' + groupId],\n    });\n  };\n\n  /**\n   * Return the default permissions for an annotation in a given group.\n   *\n   * @param {string} userid - User ID of the author\n   * @param {string} groupId - ID of the group the annotation is being shared\n   * with\n   * @return {Permissions}\n   */\n  this.default = function (userid, groupId) {\n    if (defaultLevel() === 'private') {\n      return self.private(userid);\n    } else {\n      return self.shared(userid, groupId);\n    }\n  };\n\n  /**\n   * Set the default permissions for new annotations.\n   *\n   * @param {'private'|'shared'} level\n   */\n  this.setDefault = function (level) {\n    localStorage.setItem(STORAGE_KEY, level);\n  };\n\n  /**\n   * Return true if an annotation with the given permissions is shared with any\n   * group.\n   *\n   * @param {Permissions} perms\n   * @return {boolean}\n   */\n  this.isShared = function (perms) {\n    return perms.read.some(function (principal) {\n      return principal.indexOf('group:') === 0;\n    });\n  };\n\n  /**\n   * Return true if a user can perform the given `action` on an annotation.\n   *\n   * @param {Permissions} perms\n   * @param {'update'|'delete'} action\n   * @param {string} userid\n   * @return {boolean}\n   */\n  this.permits = function (perms, action, userid) {\n    return perms[action].indexOf(userid) !== -1;\n  };\n}\n\nmodule.exports = Permissions;\n",
    "var QueryParser,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nmodule.exports = QueryParser = (function() {\n  function QueryParser() {\n    this.populateFilter = bind(this.populateFilter, this);\n  }\n\n  QueryParser.prototype.rules = {\n    user: {\n      path: '/user',\n      and_or: 'or'\n    },\n    text: {\n      path: '/text',\n      and_or: 'and'\n    },\n    tag: {\n      path: '/tags',\n      and_or: 'and'\n    },\n    quote: {\n      path: '/quote',\n      and_or: 'and'\n    },\n    uri: {\n      formatter: function(uri) {\n        return uri.toLowerCase();\n      },\n      path: '/uri',\n      and_or: 'or',\n      options: {\n        es: {\n          query_type: 'match',\n          cutoff_frequency: 0.001,\n          and_or: 'and'\n        }\n      }\n    },\n    since: {\n      formatter: function(past) {\n        var seconds;\n        seconds = (function() {\n          switch (past) {\n            case '5 min':\n              return 5 * 60;\n            case '30 min':\n              return 30 * 60;\n            case '1 hour':\n              return 60 * 60;\n            case '12 hours':\n              return 12 * 60 * 60;\n            case '1 day':\n              return 24 * 60 * 60;\n            case '1 week':\n              return 7 * 24 * 60 * 60;\n            case '1 month':\n              return 30 * 24 * 60 * 60;\n            case '1 year':\n              return 365 * 24 * 60 * 60;\n          }\n        })();\n        return new Date(new Date().valueOf() - seconds * 1000);\n      },\n      path: '/created',\n      and_or: 'and',\n      operator: 'ge'\n    },\n    any: {\n      and_or: 'and',\n      path: ['/quote', '/tags', '/text', '/uri', '/user'],\n      options: {\n        es: {\n          query_type: 'multi_match',\n          match_type: 'cross_fields',\n          and_or: 'and',\n          fields: ['quote', 'tags', 'text', 'uri.parts', 'user']\n        }\n      }\n    }\n  };\n\n  QueryParser.prototype.populateFilter = function(filter, query) {\n    var and_or, case_sensitive, category, i, len, mapped_field, oper_part, results, rule, t, term, terms, val, value, value_part;\n    results = [];\n    for (category in query) {\n      value = query[category];\n      if (this.rules[category] == null) {\n        continue;\n      }\n      terms = value.terms;\n      if (!terms.length) {\n        continue;\n      }\n      rule = this.rules[category];\n      case_sensitive = rule.case_sensitive != null ? rule.case_sensitive : false;\n      and_or = rule.and_or != null ? rule.and_or : 'or';\n      mapped_field = rule.path != null ? rule.path : '/' + category;\n      if (and_or === 'or') {\n        oper_part = rule.operator != null ? rule.operator : 'match_of';\n        value_part = [];\n        for (i = 0, len = terms.length; i < len; i++) {\n          term = terms[i];\n          t = rule.formatter ? rule.formatter(term) : term;\n          value_part.push(t);\n        }\n        results.push(filter.addClause(mapped_field, oper_part, value_part, case_sensitive, rule.options));\n      } else {\n        oper_part = rule.operator != null ? rule.operator : 'matches';\n        results.push((function() {\n          var j, len1, results1;\n          results1 = [];\n          for (j = 0, len1 = terms.length; j < len1; j++) {\n            val = terms[j];\n            value_part = rule.formatter ? rule.formatter(val) : val;\n            results1.push(filter.addClause(mapped_field, oper_part, value_part, case_sensitive, rule.options));\n          }\n          return results1;\n        })());\n      }\n    }\n    return results;\n  };\n\n  return QueryParser;\n\n})();\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvZmlyYXMvRGVza3RvcC9IeXBvdGhlc2lzL2NsaWVudC9zcmMvc2lkZWJhci9xdWVyeS1wYXJzZXIuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvZmlyYXMvRGVza3RvcC9IeXBvdGhlc2lzL2NsaWVudC9zcmMvc2lkZWJhci9xdWVyeS1wYXJzZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW1CQSxJQUFBLFdBQUE7RUFBQTs7QUFBQSxNQUFNLENBQUMsT0FBUCxHQUF1Qjs7Ozs7d0JBQ3JCLEtBQUEsR0FDRTtJQUFBLElBQUEsRUFDRTtNQUFBLElBQUEsRUFBTSxPQUFOO01BQ0EsTUFBQSxFQUFRLElBRFI7S0FERjtJQUdBLElBQUEsRUFDRTtNQUFBLElBQUEsRUFBTSxPQUFOO01BQ0EsTUFBQSxFQUFRLEtBRFI7S0FKRjtJQU1BLEdBQUEsRUFDRTtNQUFBLElBQUEsRUFBTSxPQUFOO01BQ0EsTUFBQSxFQUFRLEtBRFI7S0FQRjtJQVNBLEtBQUEsRUFDRTtNQUFBLElBQUEsRUFBTSxRQUFOO01BQ0EsTUFBQSxFQUFRLEtBRFI7S0FWRjtJQVlBLEdBQUEsRUFDRTtNQUFBLFNBQUEsRUFBVyxTQUFDLEdBQUQ7ZUFDVCxHQUFHLENBQUMsV0FBSixDQUFBO01BRFMsQ0FBWDtNQUVBLElBQUEsRUFBTSxNQUZOO01BR0EsTUFBQSxFQUFRLElBSFI7TUFJQSxPQUFBLEVBQ0U7UUFBQSxFQUFBLEVBQ0M7VUFBQSxVQUFBLEVBQVksT0FBWjtVQUNBLGdCQUFBLEVBQWtCLEtBRGxCO1VBRUEsTUFBQSxFQUFRLEtBRlI7U0FERDtPQUxGO0tBYkY7SUFzQkEsS0FBQSxFQUNFO01BQUEsU0FBQSxFQUFXLFNBQUMsSUFBRDtBQUNULFlBQUE7UUFBQSxPQUFBO0FBQ0Usa0JBQU8sSUFBUDtBQUFBLGlCQUNPLE9BRFA7cUJBQ29CLENBQUEsR0FBRTtBQUR0QixpQkFFTyxRQUZQO3FCQUVxQixFQUFBLEdBQUc7QUFGeEIsaUJB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\n",
    "'use strict';\n\n/**\n * This module configures Raven for reporting crashes\n * to Sentry.\n *\n * Logging requires the Sentry DSN and Hypothesis\n * version to be provided via the app's settings object.\n *\n * It also exports an Angular module via angularModule() which integrates\n * error logging into any Angular application that it is added to\n * as a dependency.\n */\n\nvar Raven = require('raven-js');\n\n// This is only used in apps where Angular is used,\n// but is required globally due to\n// https://github.com/thlorenz/proxyquireify/issues/40\n//\n// Fortunately it does not pull in Angular as a dependency but returns\n// a function that takes it as an input argument.\nvar angularPlugin = require('raven-js/plugins/angular');\n\n/**\n * Returns the input URL if it is an HTTP URL or the filename part of the URL\n * otherwise.\n *\n * @param {string} url - The script URL associated with an exception stack\n *                       frame.\n */\nfunction convertLocalURLsToFilenames(url) {\n  if (!url) {\n    return url;\n  }\n\n  if (url.match(/https?:/)) {\n    return url;\n  }\n\n  // Strip the query string (which is used as a cache buster)\n  // and extract the filename from the URL\n  return url.replace(/\\?.*/,'').split('/').slice(-1)[0];\n}\n\n/**\n * Return a transformed version of `data` with local URLs replaced\n * with filenames.\n *\n * In environments where the client is served from a local URL,\n * eg. chrome-extension://<ID>/scripts/bundle.js, the script URL\n * and the sourcemap it references will not be accessible to Sentry.\n *\n * Therefore on the client we replace references to such URLs with just\n * the filename part and then as part of the release process, upload both\n * the source file and the source map to Sentry.\n *\n * Using just the filename allows us to upload a single set of source files\n * and sourcemaps for a release though a given release of H might be served\n * from multiple actual URLs (eg. different browser extensions).\n */\nfunction translateSourceURLs(data) {\n  try {\n    var frames = data.exception.values[0].stacktrace.frames;\n    frames.forEach(function (frame) {\n      frame.filename = convertLocalURLsToFilenames(frame.filename);\n    });\n    data.culprit = frames[0].filename;\n  } catch (err) {\n    console.warn('Failed to normalize error stack trace', err, data);\n  }\n  return data;\n}\n\nfunction init(config) {\n  Raven.config(config.dsn, {\n    release: '__VERSION__',  // replaced by versionify\n    dataCallback: translateSourceURLs,\n  }).install();\n  installUnhandledPromiseErrorHandler();\n}\n\nfunction setUserInfo(info) {\n  if (info) {\n    Raven.setUserContext(info);\n  } else {\n    Raven.setUserContext();\n  }\n}\n\n/**\n * Initializes and returns the Angular module which provides\n * a custom wrapper around Angular's $exceptionHandler service,\n * logging any exceptions passed to it using Sentry.\n *\n * This must be invoked _after_ Raven is configured using init().\n */\nfunction angularModule(angular) {\n  var prevCallback = Raven._globalOptions.dataCallback;\n  angularPlugin(Raven, angular);\n\n  // Hack: Ensure that both our data callback and the one provided by\n  // the Angular plugin are run when submitting errors.\n  //\n  // The Angular plugin replaces any previously installed\n  // data callback with its own which does not in turn call the\n  // previously registered callback that we registered when calling\n  // Raven.config().\n  //\n  // See https://github.com/getsentry/raven-js/issues/522\n  var angularCallback = Raven._globalOptions.dataCallback;\n  Raven.setDataCallback(function (data) {\n    return angularCallback(prevCallback(data));\n  });\n  return angular.module('ngRaven');\n}\n\n/**\n * Report an error to Sentry.\n *\n * @param {Error} error - An error object describing what went wrong\n * @param {string} when - A string describing the context in which\n *                        the error occurred.\n * @param {Object} [context] - A JSON-serializable object containing additional\n *                             information which may be useful when\n *                             investigating the error.\n */\nfunction report(error, when, context) {\n  if (!(error instanceof Error)) {\n    // If the passed object is not an Error, raven-js\n    // will serialize it using toString() which produces unhelpful results\n    // for objects that do not provide their own toString() implementations.\n    //\n    // If the error is a plain object or non-Error subclass with a message\n    // property, such as errors returned by chrome.extension.lastError,\n    // use that instead.\n    if (typeof error === 'object' && error.message) {\n      error = error.message;\n    }\n  }\n\n  var extra = Object.assign({ when: when }, context);\n  Raven.captureException(error, { extra: extra });\n}\n\n/**\n * Installs a handler to catch unhandled rejected promises.\n *\n * For this to work, the browser or the Promise polyfill must support\n * the unhandled promise rejection event (Chrome >= 49). On other browsers,\n * the rejections will simply go unnoticed. Therefore, app code _should_\n * always provide a .catch() handler on the top-most promise chain.\n *\n * See https://github.com/getsentry/raven-js/issues/424\n * and https://www.chromestatus.com/feature/4805872211460096\n *\n * It is possible that future versions of Raven JS may handle these events\n * automatically, in which case this code can simply be removed.\n */\nfunction installUnhandledPromiseErrorHandler() {\n  window.addEventListener('unhandledrejection', function (event) {\n    if (event.reason) {\n      report(event.reason, 'Unhandled Promise rejection');\n    }\n  });\n}\n\nmodule.exports = {\n  init: init,\n  angularModule: angularModule,\n  setUserInfo: setUserInfo,\n  report: report,\n};\n",
    "/**\n * State management for the set of annotations currently loaded into the\n * sidebar.\n */\n\n'use strict';\n\nvar arrayUtil = require('../util/array-util');\nvar metadata = require('../annotation-metadata');\nvar uiConstants = require('../ui-constants');\n\nvar selection = require('./selection');\nvar util = require('./util');\n\n/**\n * Return a copy of `current` with all matching annotations in `annotations`\n * removed.\n */\nfunction excludeAnnotations(current, annotations) {\n  var ids = {};\n  var tags = {};\n  annotations.forEach(function (annot) {\n    if (annot.id) {\n      ids[annot.id] = true;\n    }\n    if (annot.$tag) {\n      tags[annot.$tag] = true;\n    }\n  });\n  return current.filter(function (annot) {\n    var shouldRemove = (annot.id && (annot.id in ids)) ||\n                       (annot.$tag && (annot.$tag in tags));\n    return !shouldRemove;\n  });\n}\n\nfunction findByID(annotations, id) {\n  return annotations.find(function (annot) {\n    return annot.id === id;\n  });\n}\n\nfunction findByTag(annotations, tag) {\n  return annotations.find(function (annot) {\n    return annot.$tag === tag;\n  });\n}\n\n/**\n * Initialize the status flags and properties of a new annotation.\n */\nfunction initializeAnnot(annotation, tag) {\n  var orphan = annotation.$orphan;\n\n  if (!annotation.id) {\n    // Currently the user ID, permissions and group of new annotations are\n    // initialized in the <annotation> component controller because the session\n    // state and focused group are not stored in the Redux store. Once they are,\n    // that initialization should be moved here.\n\n    // New annotations must be anchored\n    orphan = false;\n  }\n\n  return Object.assign({}, annotation, {\n    // Flag indicating whether waiting for the annotation to anchor timed out.\n    $anchorTimeout: false,\n    $tag: annotation.$tag || tag,\n    $orphan: orphan,\n  });\n}\n\nfunction init() {\n  return {\n    annotations: [],\n\n    // The local tag to assign to the next annotation that is loaded into the\n    // app\n    nextTag: 1,\n  };\n}\n\nvar update = {\n  ADD_ANNOTATIONS: function (state, action) {\n    var updatedIDs = {};\n    var updatedTags = {};\n\n    var added = [];\n    var unchanged = [];\n    var updated = [];\n    var nextTag = state.nextTag;\n\n    action.annotations.forEach(function (annot) {\n      var existing;\n      if (annot.id) {\n        existing = findByID(state.annotations, annot.id);\n      }\n      if (!existing && annot.$tag) {\n        existing = findByTag(state.annotations, annot.$tag);\n      }\n\n      if (existing) {\n        // Merge the updated annotation with the private fields from the local\n        // annotation\n        updated.push(Object.assign({}, existing, annot));\n        if (annot.id) {\n          updatedIDs[annot.id] = true;\n        }\n        if (existing.$tag) {\n          updatedTags[existing.$tag] = true;\n        }\n      } else {\n        added.push(initializeAnnot(annot, 't' + nextTag));\n        ++nextTag;\n      }\n    });\n\n    state.annotations.forEach(function (annot) {\n      if (!updatedIDs[annot.id] && !updatedTags[annot.$tag]) {\n        unchanged.push(annot);\n      }\n    });\n\n    return {\n      annotations: added.concat(updated).concat(unchanged),\n      nextTag: nextTag,\n    };\n  },\n\n  REMOVE_ANNOTATIONS: function (state, action) {\n    var annots = excludeAnnotations(state.annotations, action.annotations);\n    var selectedTab = state.selectedTab;\n    if (selectedTab === uiConstants.TAB_ORPHANS &&\n        arrayUtil.countIf(annots, metadata.isOrphan) === 0) {\n      selectedTab = uiConstants.TAB_ANNOTATIONS;\n    }\n\n    var tabUpdateFn = selection.update.SELECT_TAB;\n    return Object.assign(\n      {annotations: annots},\n      tabUpdateFn(state, selection.actions.selectTab(selectedTab))\n    );\n  },\n\n  CLEAR_ANNOTATIONS: function () {\n    return {annotations: []};\n  },\n\n  UPDATE_FLAG_STATUS: function (state, action) {\n    var annotations = state.annotations.map(function (annot) {\n      var match = (annot.id && annot.id === action.id);\n      if (match) {\n        if (annot.flagged === action.isFlagged) {\n          return annot;\n        }\n\n        var newAnn = Object.assign({}, annot, {\n          flagged: action.isFlagged,\n        });\n        if (newAnn.moderation) {\n          var countDelta = action.isFlagged ? 1 : -1;\n          newAnn.moderation = Object.assign({}, annot.moderation, {\n            flagCount: annot.moderation.flagCount + countDelta,\n          });\n        }\n        return newAnn;\n      } else {\n        return annot;\n      }\n    });\n    return {annotations: annotations};\n  },\n\n  UPDATE_ANCHOR_STATUS: function (state, action) {\n    var annotations = state.annotations.map(function (annot) {\n      if (!action.statusUpdates.hasOwnProperty(annot.$tag)) {\n        return annot;\n      }\n\n      var state = action.statusUpdates[annot.$tag];\n      if (state === 'timeout') {\n        return Object.assign({}, annot, { $anchorTimeout: true });\n      } else {\n        return Object.assign({}, annot, { $orphan: state === 'orphan' });\n      }\n    });\n    return {annotations: annotations};\n  },\n\n  HIDE_ANNOTATION: function (state, action) {\n    var anns = state.annotations.map(function (ann) {\n      if (ann.id !== action.id) {\n        return ann;\n      }\n      return Object.assign({}, ann, { hidden: true });\n    });\n    return {annotations: anns};\n  },\n\n  UNHIDE_ANNOTATION: function (state, action) {\n    var anns = state.annotations.map(function (ann) {\n      if (ann.id !== action.id) {\n        return ann;\n      }\n      return Object.assign({}, ann, { hidden: false });\n    });\n    return {annotations: anns};\n  },\n};\n\nvar actions = util.actionTypes(update);\n\n/**\n * Updating the flagged status of an annotation.\n *\n * @param {string} id - Annotation ID\n * @param {boolean} isFlagged - The flagged status of the annotation. True if\n *        the user has flagged the annotation.\n *\n */\nfunction updateFlagStatus(id, isFlagged) {\n  return {\n    type: actions.UPDATE_FLAG_STATUS,\n    id: id,\n    isFlagged: isFlagged,\n  };\n}\n\n/** Add annotations to the currently displayed set. */\nfunction addAnnotations(annotations, now) {\n  now = now || new Date();\n\n  // Add dates to new annotations. These are ignored by the server but used\n  // when sorting unsaved annotation cards.\n  annotations = annotations.map(function (annot) {\n    if (annot.id) { return annot; }\n    return Object.assign({\n      // Date.prototype.toISOString returns a 0-offset (UTC) ISO8601\n      // datetime.\n      created: now.toISOString(),\n      updated: now.toISOString(),\n    }, annot);\n  });\n\n  return function (dispatch, getState) {\n    var added = annotations.filter(function (annot) {\n      return !findByID(getState().annotations, annot.id);\n    });\n\n    dispatch({\n      type: actions.ADD_ANNOTATIONS,\n      annotations: annotations,\n    });\n\n    if (!getState().isSidebar) {\n      return;\n    }\n\n    // If anchoring fails to complete in a reasonable amount of time, then\n    // we assume that the annotation failed to anchor. If it does later\n    // successfully anchor then the status will be updated.\n    var ANCHORING_TIMEOUT = 500;\n\n    var anchoringIDs = added.filter(metadata.isWaitingToAnchor)\n                            .map(ann => ann.id);\n    if (anchoringIDs.length > 0) {\n      setTimeout(() => {\n        // Find annotations which haven't yet been anchored in the document.\n        var anns = getState().annotations;\n        var annsStillAnchoring = anchoringIDs.map(id => findByID(anns, id))\n                                             .filter(ann => ann && metadata.isWaitingToAnchor(ann));\n\n        // Mark anchoring as timed-out for these annotations.\n        var anchorStatusUpdates = annsStillAnchoring.reduce((updates, ann) => {\n          updates[ann.$tag] = 'timeout';\n          return updates;\n        }, {});\n        dispatch(updateAnchorStatus(anchorStatusUpdates));\n      }, ANCHORING_TIMEOUT);\n    }\n  };\n}\n\n/** Remove annotations from the currently displayed set. */\nfunction removeAnnotations(annotations) {\n  return {\n    type: actions.REMOVE_ANNOTATIONS,\n    annotations: annotations,\n  };\n}\n\n/** Set the currently displayed annotations to the empty set. */\nfunction clearAnnotations() {\n  return {type: actions.CLEAR_ANNOTATIONS};\n}\n\n/**\n * Update the anchoring status of an annotation.\n *\n * @param {{ [tag: string]: 'anchored'|'orphan'|'timeout'} } statusUpdates - A map of annotation tag to orphan status\n */\nfunction updateAnchorStatus(statusUpdates) {\n  return {\n    type: actions.UPDATE_ANCHOR_STATUS,\n    statusUpdates,\n  };\n}\n\n/**\n * Update the local hidden state of an annotation.\n *\n * This updates an annotation to reflect the fact that it has been hidden from\n * non-moderators.\n */\nfunction hideAnnotation(id) {\n  return {\n    type: actions.HIDE_ANNOTATION,\n    id: id,\n  };\n}\n\n/**\n * Update the local hidden state of an annotation.\n *\n * This updates an annotation to reflect the fact that it has been made visible\n * to non-moderators.\n */\nfunction unhideAnnotation(id) {\n  return {\n    type: actions.UNHIDE_ANNOTATION,\n    id: id,\n  };\n}\n\n/**\n * Return all loaded annotations which have been saved to the server.\n *\n * @param {state} - The global app state\n */\nfunction savedAnnotations(state) {\n  return state.annotations.filter(function (ann) {\n    return !metadata.isNew(ann);\n  });\n}\n\n/** Return true if the annotation with a given ID is currently loaded. */\nfunction annotationExists(state, id) {\n  return state.annotations.some(function (annot) {\n    return annot.id === id;\n  });\n}\n\n/**\n * Return the IDs of annotations that correspond to `tags`.\n *\n * If an annotation does not have an ID because it has not been created on\n * the server, there will be no entry for it in the returned array.\n *\n * @param {string[]} Local tags of annotations to look up\n */\nfunction findIDsForTags(state, tags) {\n  var ids = [];\n  tags.forEach(function (tag) {\n    var annot = findByTag(state.annotations, tag);\n    if (annot && annot.id) {\n      ids.push(annot.id);\n    }\n  });\n  return ids;\n}\n\n/**\n * Return the annotation with the given ID.\n */\nfunction findAnnotationByID(state, id) {\n  return findByID(state.annotations, id);\n}\n\nmodule.exports = {\n  init: init,\n  update: update,\n  actions: {\n    addAnnotations: addAnnotations,\n    clearAnnotations: clearAnnotations,\n    removeAnnotations: removeAnnotations,\n    updateAnchorStatus: updateAnchorStatus,\n    updateFlagStatus: updateFlagStatus,\n    hideAnnotation: hideAnnotation,\n    unhideAnnotation: unhideAnnotation,\n  },\n\n  // Selectors\n  annotationExists: annotationExists,\n  findAnnotationByID: findAnnotationByID,\n  findIDsForTags: findIDsForTags,\n  savedAnnotations: savedAnnotations,\n};\n",
    "'use strict';\n\n/**\n * A debug utility that prints information about internal application state\n * changes to the console.\n *\n * Debugging is enabled by setting `window.debug` to a truthy value.\n *\n * When enabled, every action that changes application state will be printed\n * to the console, along with the application state before and after the action\n * was handled.\n */\nfunction debugMiddleware(store) {\n  /* eslint-disable no-console */\n  var serial = 0;\n\n  return function (next) {\n    return function (action) {\n      if (!window.debug) {\n        next(action);\n        return;\n      }\n\n      ++serial;\n\n      var groupTitle = action.type + ' (' + serial.toString() + ')';\n      console.group(groupTitle);\n      console.log('Prev State:', store.getState());\n      console.log('Action:', action);\n\n      next(action);\n\n      console.log('Next State:', store.getState());\n      console.groupEnd(groupTitle);\n    };\n  };\n  /* eslint-enable no-console */\n}\n\nmodule.exports = debugMiddleware;\n",
    "'use strict';\n\nvar util = require('./util');\n\nfunction init() {\n  return {\n    // The list of frames connected to the sidebar app\n    frames: [],\n  };\n}\n\nvar update = {\n  CONNECT_FRAME: function (state, action) {\n    return {frames: state.frames.concat(action.frame)};\n  },\n\n  DESTROY_FRAME: function (state, action) {\n    return {\n      frames: state.frames.filter(f => f !== action.frame),\n    };\n  },\n\n  UPDATE_FRAME_ANNOTATION_FETCH_STATUS: function (state, action) {\n    var frames = state.frames.map(function (frame) {\n      var match = (frame.uri && frame.uri === action.uri);\n      if (match) {\n        return Object.assign({}, frame, {\n          isAnnotationFetchComplete: action.isAnnotationFetchComplete,\n        });\n      } else {\n        return frame;\n      }\n    });\n    return {\n      frames: frames,\n    };\n  },\n};\n\nvar actions = util.actionTypes(update);\n\n/**\n * Add a frame to the list of frames currently connected to the sidebar app.\n */\nfunction connectFrame(frame) {\n  return {type: actions.CONNECT_FRAME, frame: frame};\n}\n\n/**\n * Remove a frame from the list of frames currently connected to the sidebar app.\n */\nfunction destroyFrame(frame) {\n  return {type: actions.DESTROY_FRAME, frame: frame};\n}\n\n/**\n * Update the `isAnnotationFetchComplete` flag of the frame.\n */\nfunction updateFrameAnnotationFetchStatus(uri, status) {\n  return {\n    type: actions.UPDATE_FRAME_ANNOTATION_FETCH_STATUS,\n    isAnnotationFetchComplete: status,\n    uri: uri,\n  };\n}\n\n/**\n * Return the list of frames currently connected to the sidebar app.\n */\nfunction frames(state) {\n  return state.frames;\n}\n\nfunction searchUrisForFrame(frame) {\n  var uris = [frame.uri];\n\n  if (frame.metadata && frame.metadata.documentFingerprint) {\n    uris = frame.metadata.link.map(function (link) {\n      return link.href;\n    });\n  }\n\n  if (frame.metadata && frame.metadata.link) {\n    frame.metadata.link.forEach(function (link) {\n      if (link.href.startsWith('doi:')) {\n        uris.push(link.href);\n      }\n    });\n  }\n\n  return uris;\n}\n\n/**\n * Return the set of URIs that should be used to search for annotations on the\n * current page.\n */\nfunction searchUris(state) {\n  return state.frames.reduce(function (uris, frame) {\n    return uris.concat(searchUrisForFrame(frame));\n  }, []);\n}\n\nmodule.exports = {\n  init: init,\n  update: update,\n\n  actions: {\n    connectFrame: connectFrame,\n    destroyFrame: destroyFrame,\n    updateFrameAnnotationFetchStatus: updateFrameAnnotationFetchStatus,\n  },\n\n  // Selectors\n  frames: frames,\n  searchUris: searchUris,\n};\n",
    "'use strict';\n\n/**\n * This module defines the main update function (or 'reducer' in Redux's\n * terminology) that handles app state updates. For an overview of how state\n * management in Redux works, see the comments at the top of `annotation-ui.js`\n *\n * Each sub-module in this folder defines:\n *\n *  - An `init` function that returns the initial state relating to some aspect\n *    of the application\n *  - An `update` object mapping action types to a state update function for\n *    that action\n *  - A set of action creators - functions that return actions that can then\n *    be passed to `store.dispatch()`\n *  - A set of selectors - Utility functions that calculate some derived data\n *    from the state\n */\n\nvar annotations = require('./annotations');\nvar frames = require('./frames');\nvar links = require('./links');\nvar selection = require('./selection');\nvar session = require('./session');\nvar viewer = require('./viewer');\nvar util = require('./util');\n\nfunction init(settings) {\n  return Object.assign(\n    {},\n    annotations.init(),\n    frames.init(),\n    links.init(),\n    selection.init(settings),\n    session.init(),\n    viewer.init()\n  );\n}\n\nvar update = util.createReducer(Object.assign(\n  annotations.update,\n  frames.update,\n  links.update,\n  selection.update,\n  session.update,\n  viewer.update\n));\n\nmodule.exports = {\n  init: init,\n  update: update,\n};\n",
    "/**\n * Reducer for storing a \"links\" object in the Redux state store.\n *\n * The links object is initially null, and can only be updated by completely\n * replacing it with a new links object.\n *\n * Used by serviceUrl.\n */\n\n'use strict';\n\n/** Return the initial links. */\nfunction init() { return {links: null}; }\n\n/** Return updated links based on the given current state and action object. */\nfunction updateLinks(state, action) { return {links: action.newLinks}; }\n\n/** Return an action object for updating the links to the given newLinks. */\nfunction updateLinksAction(newLinks) {\n  return { type: 'UPDATE_LINKS', newLinks: newLinks };\n}\n\nmodule.exports = {\n  init:    init,\n  update:  { UPDATE_LINKS: updateLinks },\n  actions: { updateLinks: updateLinksAction },\n};\n",
    "/**\n * This module handles state related to the current sort, search and filter\n * settings in the UI, including:\n *\n * - The set of annotations that are currently focused (hovered) or selected\n * - The selected tab\n * - The current sort order\n * - The current filter query\n */\n\n'use strict';\n\nvar immutable = require('seamless-immutable');\n\nvar toSet = require('../util/array-util').toSet;\nvar uiConstants = require('../ui-constants');\n\nvar util = require('./util');\n\n\n/**\n* Default starting tab.\n*/\nvar TAB_DEFAULT = uiConstants.TAB_ANNOTATIONS;\n\n /**\n  * Default sort keys for each tab.\n  */\nvar TAB_SORTKEY_DEFAULT = {};\nTAB_SORTKEY_DEFAULT[uiConstants.TAB_ANNOTATIONS] = 'Position';\nTAB_SORTKEY_DEFAULT[uiConstants.TAB_NOTES] = 'Rcente';\nTAB_SORTKEY_DEFAULT[uiConstants.TAB_ORPHANS] = 'Position';\n\n/**\n * Available sort keys for each tab.\n */\nvar TAB_SORTKEYS_AVAILABLE = {};\nTAB_SORTKEYS_AVAILABLE[uiConstants.TAB_ANNOTATIONS] = ['Rcente', 'Ancienne', 'Position'];\nTAB_SORTKEYS_AVAILABLE[uiConstants.TAB_NOTES] = ['Rcente', 'Ancienne'];\nTAB_SORTKEYS_AVAILABLE[uiConstants.TAB_ORPHANS] = ['Rcente', 'Ancienne', 'Position'];\n\n\nfunction initialSelection(settings) {\n  var selection = {};\n  if (settings.annotations && !settings.query) {\n    selection[settings.annotations] = true;\n  }\n  return freeze(selection);\n}\n\nfunction freeze(selection) {\n  if (Object.keys(selection).length) {\n    return immutable(selection);\n  } else {\n    return null;\n  }\n}\n\nfunction init(settings) {\n  return {\n    // Contains a map of annotation tag:true pairs.\n    focusedAnnotationMap: null,\n\n    // Contains a map of annotation id:true pairs.\n    selectedAnnotationMap: initialSelection(settings),\n\n    // Map of annotation IDs to expanded/collapsed state. For annotations not\n    // present in the map, the default state is used which depends on whether\n    // the annotation is a top-level annotation or a reply, whether it is\n    // selected and whether it matches the current filter.\n    expanded: initialSelection(settings) || {},\n\n    // Set of IDs of annotations that have been explicitly shown\n    // by the user even if they do not match the current search filter\n    forceVisible: {},\n\n    // IDs of annotations that should be highlighted\n    highlighted: [],\n\n    filterQuery: settings.query || null,\n\n    selectedTab: TAB_DEFAULT,\n\n    // Key by which annotations are currently sorted.\n    sortKey: TAB_SORTKEY_DEFAULT[TAB_DEFAULT],\n    // Keys by which annotations can be sorted.\n    sortKeysAvailable: TAB_SORTKEYS_AVAILABLE[TAB_DEFAULT],\n  };\n}\n\nvar update = {\n  CLEAR_SELECTION: function () {\n    return {filterQuery: null, selectedAnnotationMap: null};\n  },\n\n  SELECT_ANNOTATIONS: function (state, action) {\n    return {selectedAnnotationMap: action.selection};\n  },\n\n  FOCUS_ANNOTATIONS: function (state, action) {\n    return {focusedAnnotationMap: action.focused};\n  },\n\n  SET_FORCE_VISIBLE: function (state, action) {\n    return {forceVisible: action.forceVisible};\n  },\n\n  SET_EXPANDED: function (state, action) {\n    return {expanded: action.expanded};\n  },\n\n  HIGHLIGHT_ANNOTATIONS: function (state, action) {\n    return {highlighted: action.highlighted};\n  },\n\n  SELECT_TAB: function (state, action) {\n    // Do nothing if the \"new tab\" is not a valid tab.\n    if ([uiConstants.TAB_ANNOTATIONS,\n         uiConstants.TAB_NOTES,\n         uiConstants.TAB_ORPHANS].indexOf(action.tab) === -1) {\n      return {};\n    }\n    // Shortcut if the tab is already correct, to avoid resetting the sortKey\n    // unnecessarily.\n    if (state.selectedTab === action.tab) {\n      return {};\n    }\n    return {\n      selectedTab: action.tab,\n      sortKey: TAB_SORTKEY_DEFAULT[action.tab],\n      sortKeysAvailable: TAB_SORTKEYS_AVAILABLE[action.tab],\n    };\n  },\n\n  SET_FILTER_QUERY: function (state, action) {\n    return {\n      filterQuery: action.query,\n      forceVisible: {},\n      expanded: {},\n    };\n  },\n\n  SET_SORT_KEY: function (state, action) {\n    return {sortKey: action.key};\n  },\n};\n\nvar actions = util.actionTypes(update);\n\nfunction select(annotations) {\n  return {\n    type: actions.SELECT_ANNOTATIONS,\n    selection: freeze(annotations),\n  };\n}\n\n/**\n * Set the currently selected annotation IDs.\n */\nfunction selectAnnotations(ids) {\n  return select(toSet(ids));\n}\n\n/** Toggle whether annotations are selected or not. */\nfunction toggleSelectedAnnotations(ids) {\n  return function (dispatch, getState) {\n    var selection = Object.assign({}, getState().selectedAnnotationMap);\n    for (var i = 0; i < ids.length; i++) {\n      var id = ids[i];\n      if (selection[id]) {\n        delete selection[id];\n      } else {\n        selection[id] = true;\n      }\n    }\n    dispatch(select(selection));\n  };\n}\n\n/**\n * Sets whether a given annotation should be visible, even if it does not\n * match the current search query.\n *\n * @param {string} id - Annotation ID\n * @param {boolean} visible\n */\nfunction setForceVisible(id, visible) {\n  // FIXME: This should be converted to a plain action and accessing the state\n  // should happen in the update() function\n  return function (dispatch, getState) {\n    var forceVisible = Object.assign({}, getState().forceVisible);\n    forceVisible[id] = visible;\n    dispatch({\n      type: actions.SET_FORCE_VISIBLE,\n      forceVisible: forceVisible,\n    });\n  };\n}\n\n/**\n * Sets which annotations are currently focused.\n *\n * @param {Array<string>} Tags of annotations to focus\n */\nfunction focusAnnotations(tags) {\n  return {\n    type: actions.FOCUS_ANNOTATIONS,\n    focused: freeze(toSet(tags)),\n  };\n}\n\nfunction setCollapsed(id, collapsed) {\n  // FIXME: This should be converted to a plain action and accessing the state\n  // should happen in the update() function\n  return function (dispatch, getState) {\n    var expanded = Object.assign({}, getState().expanded);\n    expanded[id] = !collapsed;\n    dispatch({\n      type: actions.SET_EXPANDED,\n      expanded: expanded,\n    });\n  };\n}\n\n/**\n * Highlight annotations with the given `ids`.\n *\n * This is used to indicate the specific annotation in a thread that was\n * linked to for example.\n */\nfunction highlightAnnotations(ids) {\n  return {\n    type: actions.HIGHLIGHT_ANNOTATIONS,\n    highlighted: ids,\n  };\n}\n\n\n/** Set the type annotations to be displayed. */\nfunction selectTab(type) {\n  return {\n    type: actions.SELECT_TAB,\n    tab: type,\n  };\n}\n\n/** Set the query used to filter displayed annotations. */\nfunction setFilterQuery(query) {\n  return {\n    type: actions.SET_FILTER_QUERY,\n    query: query,\n  };\n}\n\n/** Sets the sort key for the annotation list. */\nfunction setSortKey(key) {\n  return {\n    type: actions.SET_SORT_KEY,\n    key: key,\n  };\n}\n\n/**\n * Returns true if the annotation with the given `id` is selected.\n */\nfunction isAnnotationSelected(state, id) {\n  return (state.selectedAnnotationMap || {}).hasOwnProperty(id);\n}\n\n/**\n * Return true if any annotations are currently selected.\n */\nfunction hasSelectedAnnotations(state) {\n  return !!state.selectedAnnotationMap;\n}\n\n/** De-select an annotation. */\nfunction removeSelectedAnnotation(id) {\n  // FIXME: This should be converted to a plain action and accessing the state\n  // should happen in the update() function\n  return function (dispatch, getState) {\n    var selection = Object.assign({}, getState().selectedAnnotationMap);\n    if (!selection || !id) {\n      return;\n    }\n    delete selection[id];\n    dispatch(select(selection));\n  };\n}\n\n/** De-select all annotations. */\nfunction clearSelectedAnnotations() {\n  return {type: actions.CLEAR_SELECTION};\n}\n\nmodule.exports = {\n  init: init,\n  update: update,\n\n  actions: {\n    clearSelectedAnnotations: clearSelectedAnnotations,\n    focusAnnotations: focusAnnotations,\n    highlightAnnotations: highlightAnnotations,\n    removeSelectedAnnotation: removeSelectedAnnotation,\n    selectAnnotations: selectAnnotations,\n    selectTab: selectTab,\n    setCollapsed: setCollapsed,\n    setFilterQuery: setFilterQuery,\n    setForceVisible: setForceVisible,\n    setSortKey: setSortKey,\n    toggleSelectedAnnotations: toggleSelectedAnnotations,\n  },\n\n  // Selectors\n  hasSelectedAnnotations: hasSelectedAnnotations,\n  isAnnotationSelected: isAnnotationSelected,\n};\n",
    "'use strict';\n\nvar util = require('./util');\n\nfunction init() {\n  return {\n    /**\n     * The state of the user's login session.\n     *\n     * This includes their user ID, set of enabled features, and the list of\n     * groups they are a member of.\n     */\n    session: {\n      /** A map of features that are enabled for the current user. */\n      features: {},\n      /** List of groups that the current user is a member of. */\n      groups: [],\n      /** A map of preference names and values. */\n      preferences: {},\n      /**\n       * The authenticated user ID or null if the user is not logged in.\n       */\n      userid: null,\n    },\n  };\n}\n\nvar update = {\n  UPDATE_SESSION: function (state, action) {\n    return {\n      session: action.session,\n    };\n  },\n};\n\nvar actions = util.actionTypes(update);\n\n/**\n * Update the session state.\n */\nfunction updateSession(session) {\n  return {\n    type: actions.UPDATE_SESSION,\n    session: session,\n  };\n}\n\n/**\n * Return true if a given feature flag is enabled.\n *\n * @param {object} state - The application state\n * @param {string} feature - The name of the feature flag. This matches the\n *        name of the feature flag as declared in the Hypothesis service.\n */\nfunction isFeatureEnabled(state, feature) {\n  return !!state.session.features[feature];\n}\n\n/**\n * Return the user's profile.\n *\n * Returns the current user's profile fetched from the `/api/profile` endpoint.\n */\nfunction profile(state) {\n  return state.session;\n}\n\nmodule.exports = {\n  init,\n  update,\n\n  actions: {\n    updateSession,\n  },\n\n  // Selectors\n  isFeatureEnabled,\n  profile,\n};\n",
    "'use strict';\n\n/**\n * Return an object where each key in `updateFns` is mapped to the key itself.\n */\nfunction actionTypes(updateFns) {\n  return Object.keys(updateFns).reduce(function (types, key) {\n    types[key] = key;\n    return types;\n  }, {});\n}\n\n/**\n * Given an object which maps action names to update functions, this returns\n * a reducer function that can be passed to the redux `createStore` function.\n */\nfunction createReducer(updateFns) {\n  return function (state, action) {\n    var fn = updateFns[action.type];\n    if (!fn) {\n      return state;\n    }\n    return Object.assign({}, state, fn(state, action));\n  };\n}\n\n/**\n * Takes an object mapping keys to selector functions and the `getState()`\n * function from the store and returns an object with the same keys but where\n * the values are functions that call the original functions with the `state`\n * argument set to the current value of `getState()`\n */\nfunction bindSelectors(selectors, getState) {\n  return Object.keys(selectors).reduce(function (bound, key) {\n    var selector = selectors[key];\n    bound[key] = function () {\n      var args = [].slice.apply(arguments);\n      args.unshift(getState());\n      return selector.apply(null, args);\n    };\n    return bound;\n  }, {});\n}\n\nmodule.exports = {\n  actionTypes: actionTypes,\n  bindSelectors: bindSelectors,\n  createReducer: createReducer,\n};\n",
    "'use strict';\n\nvar util = require('./util');\n\n/**\n * This module defines actions and state related to the display mode of the\n * sidebar.\n */\n\nfunction init() {\n  return {\n    // Flag that indicates whether the app is the sidebar and connected to\n    // a page where annotations are being shown in context\n    isSidebar: true,\n\n    visibleHighlights: false,\n  };\n}\n\nvar update = {\n  SET_SIDEBAR: function (state, action) {\n    return {isSidebar: action.isSidebar};\n  },\n  SET_HIGHLIGHTS_VISIBLE: function (state, action) {\n    return {visibleHighlights: action.visible};\n  },\n};\n\nvar actions = util.actionTypes(update);\n\n/** Set whether the app is the sidebar */\nfunction setAppIsSidebar(isSidebar) {\n  return {type: actions.SET_SIDEBAR, isSidebar: isSidebar};\n}\n\n/**\n * Sets whether annotation highlights in connected documents are shown\n * or not.\n */\nfunction setShowHighlights(show) {\n  return {type: actions.SET_HIGHLIGHTS_VISIBLE, visible: show};\n}\n\n/**\n * Returns true if the app is being used as the sidebar in the annotation\n * client, as opposed to the standalone annotation page or stream views.\n */\nfunction isSidebar(state) {\n  return state.isSidebar;\n}\n\nmodule.exports = {\n  init: init,\n  update: update,\n  actions: {\n    setAppIsSidebar: setAppIsSidebar,\n    setShowHighlights: setShowHighlights,\n  },\n\n  // Selectors\n  isSidebar: isSidebar,\n};\n",
    "'use strict';\n\nvar escapeHtml = require('escape-html');\nvar katex = require('katex');\nvar showdown = require('showdown');\n\nfunction targetBlank() {\n  function filter(text) {\n    return text.replace(/<a href=/g, '<a target=\"_blank\" href=');\n  }\n  return [{type: 'output', filter: filter}];\n}\n\nvar converter;\n\nfunction renderMarkdown(markdown) {\n  if (!converter) {\n    // see https://github.com/showdownjs/showdown#valid-options\n    converter = new showdown.Converter({\n      extensions: [targetBlank],\n      simplifiedAutoLink: true,\n      // Since we're using simplifiedAutoLink we also use\n      // literalMidWordUnderscores because otherwise _'s in URLs get\n      // transformed into <em>'s.\n      // See https://github.com/showdownjs/showdown/issues/211\n      literalMidWordUnderscores: true,\n    });\n  }\n  return converter.makeHtml(markdown);\n}\n\nfunction mathPlaceholder(id) {\n  return '{math:' + id.toString() + '}';\n}\n\n/**\n * Parses a string containing mixed markdown and LaTeX in between\n * '$$..$$' or '\\( ... \\)' delimiters and returns an object containing a\n * list of math blocks found in the string, plus the input string with math\n * blocks replaced by placeholders.\n */\nfunction extractMath(content) {\n  var mathBlocks = [];\n  var pos = 0;\n  var replacedContent = content;\n\n  while (true) { // eslint-disable-line no-constant-condition\n    var blockMathStart = replacedContent.indexOf('$$', pos);\n    var inlineMathStart = replacedContent.indexOf('\\\\(', pos);\n\n    if (blockMathStart === -1 && inlineMathStart === -1) {\n      break;\n    }\n\n    var mathStart;\n    var mathEnd;\n    if (blockMathStart !== -1 &&\n        (inlineMathStart === -1 || blockMathStart < inlineMathStart)) {\n      mathStart = blockMathStart;\n      mathEnd = replacedContent.indexOf('$$', mathStart + 2);\n    } else {\n      mathStart = inlineMathStart;\n      mathEnd = replacedContent.indexOf('\\\\)', mathStart + 2);\n    }\n\n    if (mathEnd === -1) {\n      break;\n    } else {\n      mathEnd = mathEnd + 2;\n    }\n\n    var id = mathBlocks.length + 1;\n    var placeholder = mathPlaceholder(id);\n    mathBlocks.push({\n      id: id,\n      expression: replacedContent.slice(mathStart + 2, mathEnd - 2),\n      inline: inlineMathStart !== -1,\n    });\n\n    var replacement;\n    if (inlineMathStart !== -1) {\n      replacement = placeholder;\n    } else {\n      // Add new lines before and after math blocks so that they render\n      // as separate paragraphs\n      replacement = '\\n\\n' + placeholder + '\\n\\n';\n    }\n\n    replacedContent = replacedContent.slice(0, mathStart) +\n                      replacement +\n                      replacedContent.slice(mathEnd);\n    pos = mathStart + replacement.length;\n  }\n\n  return {\n    mathBlocks: mathBlocks,\n    content: replacedContent,\n  };\n}\n\nfunction insertMath(html, mathBlocks) {\n  return mathBlocks.reduce(function (html, block) {\n    var renderedMath;\n    try {\n      if (block.inline) {\n        renderedMath = katex.renderToString(block.expression);\n      } else {\n        renderedMath = katex.renderToString(block.expression, {\n          displayMode: true,\n        });\n      }\n    } catch (err) {\n      renderedMath = escapeHtml(block.expression);\n    }\n    return html.replace(mathPlaceholder(block.id), renderedMath);\n  }, html);\n}\n\nfunction renderMathAndMarkdown(markdown, sanitizeFn) {\n  // KaTeX takes care of escaping its input, so we want to avoid passing its\n  // output through the HTML sanitizer. Therefore we first extract the math\n  // blocks from the input, render and sanitize the remaining markdown and then\n  // render and re-insert the math blocks back into the output.\n  var mathInfo = extractMath(markdown);\n  var markdownHTML = sanitizeFn(renderMarkdown(mathInfo.content));\n  var mathAndMarkdownHTML = insertMath(markdownHTML, mathInfo.mathBlocks);\n  return mathAndMarkdownHTML;\n}\n\nmodule.exports = renderMathAndMarkdown;\n",
    "'use strict';\n\nvar retry = require('retry');\n\n/**\n * Retry a Promise-returning operation until it succeeds or\n * fails after a set number of attempts.\n *\n * @param {Function} opFn - The operation to retry\n * @param {Object} options - The options object to pass to retry.operation()\n *\n * @return A promise for the first successful result of the operation, if\n *         it succeeds within the allowed number of attempts.\n */\nfunction retryPromiseOperation(opFn, options) {\n  return new Promise(function (resolve, reject) {\n    var operation = retry.operation(options);\n    operation.attempt(function () {\n      opFn().then(function (result) {\n        operation.retry();\n        resolve(result);\n      }).catch(function (err) {\n        if (!operation.retry(err)) {\n          reject(err);\n        }\n      });\n    });\n  });\n}\n\nmodule.exports = {\n  retryPromiseOperation: retryPromiseOperation,\n};\n",
    "'use strict';\n\nvar buildThread = require('./build-thread');\nvar events = require('./events');\nvar memoize = require('./util/memoize');\nvar metadata = require('./annotation-metadata');\nvar tabs = require('./tabs');\nvar uiConstants = require('./ui-constants');\n\nfunction truthyKeys(map) {\n  return Object.keys(map).filter(function (k) {\n    return !!map[k];\n  });\n}\n\n// Mapping from sort order name to a less-than predicate\n// function for comparing annotations to determine their sort order.\nvar sortFns = {\n  'Rcente': function (a, b) {\n    return a.updated > b.updated;\n  },\n  'Ancienne': function (a, b) {\n    return a.updated < b.updated;\n  },\n  'Position': function (a, b) {\n    return metadata.location(a) < metadata.location(b);\n  },\n};\n\n/**\n * Root conversation thread for the sidebar and stream.\n *\n * This performs two functions:\n *\n * 1. It listens for annotations being loaded, created and unloaded and\n *    dispatches annotationUI.{addAnnotations|removeAnnotations} actions.\n * 2. Listens for changes in the UI state and rebuilds the root conversation\n *    thread.\n *\n * The root thread is then displayed by viewer.html\n */\n// @ngInject\nfunction RootThread($rootScope, annotationUI, drafts, searchFilter, viewFilter) {\n\n  /**\n   * Build the root conversation thread from the given UI state.\n   *\n   * @param state - The current UI state (loaded annotations, sort mode,\n   *        filter settings etc.)\n   */\n  function buildRootThread(state) {\n    var sortFn = sortFns[state.sortKey];\n\n    var filterFn;\n    if (state.filterQuery) {\n      var filters = searchFilter.generateFacetedFilter(state.filterQuery);\n      filterFn = function (annot) {\n        return viewFilter.filter([annot], filters).length > 0;\n      };\n    }\n\n    var threadFilterFn;\n    if (state.isSidebar && !state.filterQuery) {\n      threadFilterFn = function (thread) {\n        if (!thread.annotation) {\n          return false;\n        }\n\n        return tabs.shouldShowInTab(thread.annotation, state.selectedTab);\n      };\n    }\n\n    // Get the currently loaded annotations and the set of inputs which\n    // determines what is visible and build the visible thread structure\n    return buildThread(state.annotations, {\n      forceVisible: truthyKeys(state.forceVisible),\n      expanded: state.expanded,\n      highlighted: state.highlighted,\n      selected: truthyKeys(state.selectedAnnotationMap || {}),\n      sortCompareFn: sortFn,\n      filterFn: filterFn,\n      threadFilterFn: threadFilterFn,\n    });\n  }\n\n  function deleteNewAndEmptyAnnotations() {\n    annotationUI.getState().annotations.filter(function (ann) {\n      return metadata.isNew(ann) && !drafts.getIfNotEmpty(ann);\n    }).forEach(function (ann) {\n      drafts.remove(ann);\n      $rootScope.$broadcast(events.ANNOTATION_DELETED, ann);\n    });\n  }\n\n  // Listen for annotations being created or loaded\n  // and show them in the UI.\n  //\n  // Note: These events could all be converted into actions that are handled by\n  // the Redux store in annotationUI.\n  var loadEvents = [events.ANNOTATION_CREATED,\n                    events.ANNOTATION_UPDATED,\n                    events.ANNOTATIONS_LOADED];\n  loadEvents.forEach(function (event) {\n    $rootScope.$on(event, function (event, annotation) {\n      annotationUI.addAnnotations([].concat(annotation));\n    });\n  });\n\n  $rootScope.$on(events.BEFORE_ANNOTATION_CREATED, function (event, ann) {\n    // When a new annotation is created, remove any existing annotations\n    // that are empty.\n    deleteNewAndEmptyAnnotations();\n\n    annotationUI.addAnnotations([ann]);\n\n    // If the annotation is of type note or annotation, make sure\n    // the appropriate tab is selected. If it is of type reply, user\n    // stays in the selected tab.\n    if (metadata.isPageNote(ann)) {\n      annotationUI.selectTab(uiConstants.TAB_NOTES);\n    } else if (metadata.isAnnotation(ann)) {\n      annotationUI.selectTab(uiConstants.TAB_ANNOTATIONS);\n    }\n\n    (ann.references || []).forEach(function (parent) {\n      annotationUI.setCollapsed(parent, false);\n    });\n  });\n\n  // Remove any annotations that are deleted or unloaded\n  $rootScope.$on(events.ANNOTATION_DELETED, function (event, annotation) {\n    annotationUI.removeAnnotations([annotation]);\n    if (annotation.id) {\n      annotationUI.removeSelectedAnnotation(annotation.id);\n    }\n  });\n  $rootScope.$on(events.ANNOTATIONS_UNLOADED, function (event, annotations) {\n    annotationUI.removeAnnotations(annotations);\n  });\n\n  // Once the focused group state is moved to the app state store, then the\n  // logic in this event handler can be moved to the annotations reducer.\n  $rootScope.$on(events.GROUP_FOCUSED, function (event, focusedGroupId) {\n    var updatedAnnots = annotationUI.getState().annotations.filter(function (ann) {\n      return metadata.isNew(ann) && !metadata.isReply(ann);\n    }).map(function (ann) {\n      return Object.assign(ann, {\n        group: focusedGroupId,\n      });\n    });\n    if (updatedAnnots.length > 0) {\n      annotationUI.addAnnotations(updatedAnnots);\n    }\n  });\n\n  /**\n   * Build the root conversation thread from the given UI state.\n   * @return {Thread}\n   */\n  this.thread = memoize(buildRootThread);\n}\n\nmodule.exports = RootThread;\n",
    "'use strict';\n\nvar EventEmitter = require('tiny-emitter');\nvar inherits = require('inherits');\n\n/**\n * Client for the Hypothesis search API.\n *\n * SearchClient handles paging through results, canceling search etc.\n *\n * @param {Object} searchFn - Function for querying the search API\n * @param {Object} opts - Search options\n * @constructor\n */\nfunction SearchClient(searchFn, opts) {\n  opts = opts || {};\n\n  var DEFAULT_CHUNK_SIZE = 200;\n  this._searchFn = searchFn;\n  this._chunkSize = opts.chunkSize || DEFAULT_CHUNK_SIZE;\n  if (typeof opts.incremental !== 'undefined') {\n    this._incremental = opts.incremental;\n  } else {\n    this._incremental = true;\n  }\n  this._canceled = false;\n}\ninherits(SearchClient, EventEmitter);\n\nSearchClient.prototype._getBatch = function (query, offset) {\n  var searchQuery = Object.assign({\n    limit: this._chunkSize,\n    offset: offset,\n    sort: 'created',\n    order: 'asc',\n    _separate_replies: true,\n  }, query);\n\n  var self = this;\n  this._searchFn(searchQuery).then(function (results) {\n    if (self._canceled) {\n      return;\n    }\n\n    var chunk = results.rows.concat(results.replies || []);\n    if (self._incremental) {\n      self.emit('results', chunk);\n    } else {\n      self._results = self._results.concat(chunk);\n    }\n\n    // Check if there are additional pages of results to fetch. In addition to\n    // checking the `total` figure from the server, we also require that at\n    // least one result was returned in the current page, otherwise we would\n    // end up repeating the same query for the next page. If the server's\n    // `total` count is incorrect for any reason, that will lead to the client\n    // polling the server indefinitely.\n    var nextOffset = offset + results.rows.length;\n    if (results.total > nextOffset && chunk.length > 0) {\n      self._getBatch(query, nextOffset);\n    } else {\n      if (!self._incremental) {\n        self.emit('results', self._results);\n      }\n      self.emit('end');\n    }\n//console.log(' self._results = '+JSON.stringify( self._results));\n  }).catch(function (err) {\n    if (self._canceled) {\n      return;\n    }\n    self.emit('error', err);\n  }).then(function () {\n    if (self._canceled) {\n      return;\n    }\n    self.emit('end');\n  });\n};\n\n/**\n * Perform a search against the Hypothesis API.\n *\n * Emits a 'results' event with an array of annotations as they become\n * available (in incremental mode) or when all annotations are available\n * (in non-incremental mode).\n *\n * Emits an 'error' event if the search fails.\n * Emits an 'end' event once the search completes.\n */\nSearchClient.prototype.get = function (query) {\n  this._results = [];\n  this._getBatch(query, 0);\n};\n\n/**\n * Cancel the current search and emit the 'end' event.\n * No further events will be emitted after this.\n */\nSearchClient.prototype.cancel = function () {\n  this._canceled = true;\n  this.emit('end');\n};\n\nmodule.exports = SearchClient;\n",
    "'use strict';\n\n/**\n * Splits a search term into filter and data.\n *\n * ie. 'user:johndoe' -> ['user', 'johndoe']\n *     'example:text' -> [null, 'example:text']\n */\nfunction splitTerm(term) {\n  var filter = term.slice(0, term.indexOf(':'));\n  if (!filter) {\n    // The whole term is data\n    return [null, term];\n  }\n\n  if (['group', 'quote', 'result', 'since',\n       'tag', 'text', 'uri', 'user','fraicheur'].includes(filter)) {\n    var data = term.slice(filter.length+1);\n    return [filter, data];\n  } else {\n    // The filter is not a power search filter, so the whole term is data\n    return [null, term];\n  }\n}\n\n/**\n * Tokenize a search query.\n *\n * Splits `searchtext` into tokens, separated by spaces.\n * Quoted phrases in `searchtext` are returned as a single token.\n */\nfunction tokenize(searchtext) {\n  if (!searchtext) { return []; }\n\n  // Small helper function for removing quote characters\n  // from the beginning- and end of a string, if the\n  // quote characters are the same.\n  // I.e.\n  //   'foo' -> foo\n  //   \"bar\" -> bar\n  //   'foo\" -> 'foo\"\n  //   bar\"  -> bar\"\n  var _removeQuoteCharacter = function(text) {\n    var start = text.slice(0,1);\n    var end = text.slice(-1);\n    if (((start === '\"') || (start === \"'\")) && (start === end)) {\n      text = text.slice(1, text.length - 1);\n    }\n    return text;\n  };\n\n  var tokens = searchtext.match(/(?:[^\\s\"']+|\"[^\"]*\"|'[^']*')+/g);\n\n  // Cut the opening and closing quote characters\n  tokens = tokens.map(_removeQuoteCharacter);\n\n  // Remove quotes for power search.\n  // I.e. 'tag:\"foo bar\"' -> 'tag:foo bar'\n  for (var index = 0; index < tokens.length; index++) {\n    var token = tokens[index];\n    var [filter, data] = splitTerm(token);\n    if (filter) {\n      tokens[index] = filter + ':' + (_removeQuoteCharacter(data));\n    }\n  }\n\n  return tokens;\n}\n\n/**\n * Parse a search query into a map of search field to term.\n *\n * @param {string} searchtext\n * @return {Object}\n */\nfunction toObject(searchtext) {\n  var obj = {};\n  var backendFilter = f => f === 'tag' ? 'tags' : f;\n\n  var addToObj = function(key, data) {\n    if (obj[key]) {\n      return obj[key].push(data);\n    } else {\n      return obj[key] = [data];\n    }\n  };\n\n  if (searchtext) {\n    var terms = tokenize(searchtext);\n    for (var term of terms) {\n      var [filter, data] = splitTerm(term);\n      if (!filter) {\n        filter = 'any';\n        data = term;\n      }\n      addToObj(backendFilter(filter), data);\n    }\n  }\n  return obj;\n}\n\n/**\n * @typedef Facet\n * @property {'and'|'or'|'min'} operator\n * @property {boolean} lowercase\n * @property {string[]} terms\n */\n\n/**\n * Parse a search query into a map of filters.\n *\n * Returns an object mapping facet names to Facet.\n *\n * Terms that are not associated with a particular facet are stored in the \"any\"\n * facet.\n *\n * @param {string} searchtext\n * @return {Object}\n */\nfunction generateFacetedFilter(searchtext) {\n  var terms;\n  var any = [];\n  var quote = [];\n  var result = [];\n  var since = [];\n  var tag = [];\n  var text = [];\n  var uri = [];\n  var user = [];\n  var fraicheur = [];\n\n  if (searchtext) {\n    terms = tokenize(searchtext);\n    for (var term of terms) {\n      var t;\n      var filter = term.slice(0, term.indexOf(':'));\n      switch (filter) {\n      case 'quote':\n        quote.push(term.slice(6));\n        break;\n      case 'result':\n        result.push(term.slice(7));\n        break;\n      case 'since':\n        {\n          // We'll turn this into seconds\n          let time = term.slice(6).toLowerCase();\n          if (time.match(/^\\d+$/)) {\n            // Only digits, assuming seconds\n            since.push(time * 1);\n          }\n          if (time.match(/^\\d+sec$/)) {\n            // Time given in seconds\n            t = /^(\\d+)sec$/.exec(time)[1];\n            since.push(t * 1);\n          }\n          if (time.match(/^\\d+min$/)) {\n            // Time given in minutes\n            t = /^(\\d+)min$/.exec(time)[1];\n            since.push(t * 60);\n          }\n          if (time.match(/^\\d+hour$/)) {\n            // Time given in hours\n            t = /^(\\d+)hour$/.exec(time)[1];\n            since.push(t * 60 * 60);\n          }\n          if (time.match(/^\\d+day$/)) {\n            // Time given in days\n            t = /^(\\d+)day$/.exec(time)[1];\n            since.push(t * 60 * 60 * 24);\n          }\n          if (time.match(/^\\d+week$/)) {\n            // Time given in week\n            t = /^(\\d+)week$/.exec(time)[1];\n            since.push(t * 60 * 60 * 24 * 7);\n          }\n          if (time.match(/^\\d+month$/)) {\n            // Time given in month\n            t = /^(\\d+)month$/.exec(time)[1];\n            since.push(t * 60 * 60 * 24 * 30);\n          }\n          if (time.match(/^\\d+year$/)) {\n            // Time given in year\n            t = /^(\\d+)year$/.exec(time)[1];\n            since.push(t * 60 * 60 * 24 * 365);\n          }\n        }\n        break;\n      case 'tag': tag.push(term.slice(4)); break;\n      case 'text': text.push(term.slice(5)); break;\n      case 'uri': uri.push(term.slice(4)); break;\n      case 'user': user.push(term.slice(5)); break;\n      case 'fraicheur': fraicheur.push(term.slice(10)); break;\n      default: any.push(term);\n      }\n    }\n  }\n\n  return {\n    any: {\n      terms: any,\n      operator: 'and',\n    },\n    quote: {\n      terms: quote,\n      operator: 'and',\n    },\n    result: {\n      terms: result,\n      operator: 'min',\n    },\n    since: {\n      terms: since,\n      operator: 'and',\n    },\n    tag: {\n      terms: tag,\n      operator: 'and',\n    },\n    text: {\n      terms: text,\n      operator: 'and',\n    },\n    uri: {\n      terms: uri,\n      operator: 'or',\n    },\n    user: {\n      terms: user,\n      operator: 'or',\n    },\n    fraicheur: {\n      terms: fraicheur,\n      operator: 'and',\n    },\n  };\n}\n\n// @ngInject\nfunction searchFilter() {\n  return {\n    toObject,\n    generateFacetedFilter,\n  };\n}\n\nmodule.exports = searchFilter;\n",
    "'use strict';\n\n/**\n * Return the configuration for the annotation service which the client would retrieve\n * annotations from which may contain the authority, grantToken and icon.\n *\n * @param {Object} settings - The settings object which would contain the services array.\n */\n\nfunction serviceConfig(settings) {\n  if (!Array.isArray(settings.services) || settings.services.length === 0) {\n    return null;\n  }\n  return settings.services[0];\n}\n\nmodule.exports = serviceConfig;\n",
    "'use strict';\n\nvar urlUtil = require('./util/url-util');\n\n/**\n * A function that returns an absolute URL given a link name and params, by\n * expanding named URL templates received from the annotation service's API.\n *\n * The links object from the API is a map of link names to URL templates:\n *\n * {\n *   signup: \"http://localhost:5000/signup\",\n *   user: \"http://localhost:5000/u/:user\",\n *   ...\n * }\n *\n * Given a link name (e.g. 'user') and params (e.g. {user: 'bob'}) return\n * an absolute URL by expanding the named URL template from the API with the\n * given params (e.g. \"http://localhost:5000/u/bob\").\n *\n * Before the links object has been received from the API this function\n * always returns empty strings as the URLs. After the links object has been\n * received from the API this function starts returning the real URLs.\n *\n * @param {string} linkName - The name of the link to expand\n * @param {object} params - The params with which to expand the link\n * @returns {string} The expanded absolute URL, or an empty string if the\n *                   links haven't been received from the API yet\n * @throws {Error} If the links have been received from the API but the given\n *                 linkName is unknown\n * @throws {Error} If one or more of the params given isn't used in the URL\n *                 template\n *\n * @ngInject\n */\nfunction serviceUrl(annotationUI, apiRoutes) {\n\n  apiRoutes.links()\n    .then(annotationUI.updateLinks)\n    .catch(function(error) {\n      console.warn('The links API request was rejected: ' + error.message);\n    });\n\n  return function(linkName, params) {\n    var links = annotationUI.getState().links;\n\n    if (links === null) {\n      return '';\n    }\n\n    var path = links[linkName];\n\n    if (!path) {\n      throw new Error('Unknown link ' + linkName);\n    }\n\n    params = params || {};\n    var url = urlUtil.replaceURLParams(path, params);\n\n    var unused = Object.keys(url.params);\n    if (unused.length > 0) {\n      throw new Error('Unknown link parameters: ' + unused.join(', '));\n    }\n\n    return url.url;\n  };\n}\n\nmodule.exports = serviceUrl;\n",
    "'use strict';\n\nvar angular = require('angular');\n\nvar events = require('./events');\nvar retryUtil = require('./retry-util');\n\nvar CACHE_TTL = 5 * 60 * 1000; // 5 minutes\n\n/**\n * @typedef Profile\n *\n * An object returned by the API (`GET /api/profile`) containing profile data\n * for the current user.\n */\n\n/**\n * This service handles fetching the user's profile, updating profile settings\n * and logging out.\n *\n * Access to the current profile is exposed via the `state` property.\n *\n * @ngInject\n */\nfunction session($q, $rootScope, analytics, annotationUI, auth,\n                 flash, raven, settings, serviceConfig, store) {\n  // Cache the result of load()\n  var lastLoad;\n  var lastLoadTime;\n\n  // Return the authority from the first service defined in the settings.\n  // Return null if there are no services defined in the settings.\n  function getAuthority() {\n    var service = serviceConfig(settings);\n    if (service === null) {\n      return null;\n    }\n    return service.authority;\n  }\n\n  // Options to pass to `retry.operation` when fetching the user's profile.\n  var profileFetchRetryOpts = {};\n\n  /**\n   * Fetch the user's profile from the annotation service.\n   *\n   * If the profile has been previously fetched within `CACHE_TTL` ms, then this\n   * method returns a cached profile instead of triggering another fetch.\n   *\n   * @return {Promise<Profile>} A promise for the user's profile data.\n   */\n  function load() {\n    if (!lastLoadTime || (Date.now() - lastLoadTime) > CACHE_TTL) {\n\n      // The load attempt is automatically retried with a backoff.\n      //\n      // This serves to make loading the app in the extension cope better with\n      // flakey connectivity but it also throttles the frequency of calls to\n      // the /app endpoint.\n      lastLoadTime = Date.now();\n      lastLoad = retryUtil.retryPromiseOperation(function () {\n        var authority = getAuthority();\n        var opts = {};\n        if (authority) {\n          opts.authority = authority;\n        }\n        return store.profile.read(opts);\n      }, profileFetchRetryOpts).then(function (session) {\n        update(session);\n        lastLoadTime = Date.now();\n        return session;\n      }).catch(function (err) {\n        lastLoadTime = null;\n        throw err;\n      });\n    }\n    return lastLoad;\n  }\n\n  /**\n   * Store the preference server-side that the user dismissed the sidebar\n   * tutorial and then update the local profile data.\n   */\n  function dismissSidebarTutorial() {\n    return store.profile.update({}, {preferences: {show_sidebar_tutorial: false}}).then(update);\n  }\n\n  /**\n   * Update the local profile data.\n   *\n   * This method can be used to update the profile data in the client when new\n   * data is pushed from the server via the real-time API.\n   *\n   * @param {Profile} model\n   * @return {Profile} The updated profile data\n   */\n  function update(model) {\n    var prevSession = annotationUI.getState().session;\n    var userChanged = model.userid !== prevSession.userid;\n    var groupsChanged = !angular.equals(model.groups, prevSession.groups);\n\n    // Update the session model used by the application\n    annotationUI.updateSession(model);\n\n    lastLoad = Promise.resolve(model);\n    lastLoadTime = Date.now();\n\n    if (userChanged) {\n      $rootScope.$broadcast(events.USER_CHANGED, {\n        profile: model,\n      });\n\n      // Associate error reports with the current user in Sentry.\n      if (model.userid) {\n        raven.setUserInfo({\n          id: model.userid,\n        });\n      } else {\n        raven.setUserInfo(undefined);\n      }\n    }\n\n    if (groupsChanged) {\n      $rootScope.$broadcast(events.GROUPS_CHANGED);\n    }\n\n    // Return the model\n    return model;\n  }\n\n  /**\n   * Log the user out of the current session.\n   */\n  function logout() {\n    var loggedOut = auth.logout().then(() => {\n      // Re-fetch the logged-out user's profile.\n      return reload();\n    });\n\n    return loggedOut.catch(function (err) {\n      flash.error('Log out failed');\n      analytics.track(analytics.events.LOGOUT_FAILURE);\n      return $q.reject(new Error(err));\n    }).then(function(){\n      analytics.track(analytics.events.LOGOUT_SUCCESS);\n    });\n  }\n\n  /**\n   * Clear the cached profile information and re-fetch it from the server.\n   *\n   * This can be used to refresh the user's profile state after logging in.\n   *\n   * @return {Promise<Profile>}\n   */\n  function reload() {\n    lastLoad = null;\n    lastLoadTime = null;\n    return load();\n  }\n\n  $rootScope.$on(events.OAUTH_TOKENS_CHANGED, () => {\n    reload();\n  });\n\n  return {\n    dismissSidebarTutorial,\n    load,\n    logout,\n    reload,\n\n    // Exposed for use in tests\n    profileFetchRetryOpts,\n\n    // For the moment, we continue to expose the session state as a property on\n    // this service. In future, other services which access the session state\n    // will do so directly from annotationUI or via selector functions\n    get state() {\n      return annotationUI.getState().session;\n    },\n\n    update,\n  };\n}\n\nmodule.exports = session;\n",
    "'use strict';\n\nvar get = require('lodash.get');\n\nvar urlUtil = require('./util/url-util');\n\n/**\n * Translate the response from a failed API call into an Error-like object.\n *\n * The details of the response are available on the `response` property of the\n * error.\n */\nfunction translateResponseToError(response) {\n  var message;\n  if (response.status <= 0) {\n    message = 'Service unreachable.';\n  } else {\n    message = response.status + ' ' + response.statusText;\n    if (response.data && response.data.reason) {\n      message = message + ': ' + response.data.reason;\n    }\n  }\n  var err = new Error(message);\n  err.response = response;\n  return err;\n}\n\n/**\n * Return a shallow clone of `obj` with all client-only properties removed.\n * Client-only properties are marked by a '$' prefix.\n */\nfunction stripInternalProperties(obj) {\n  var result = {};\n\n  for (var k in obj) {\n    if (obj.hasOwnProperty(k) && k[0] !== '$') {\n      result[k] = obj[k];\n    }\n  }\n\n  return result;\n}\n\n\nfunction forEachSorted(obj, iterator, context) {\n  var keys = Object.keys(obj).sort();\n  for (var i = 0; i < keys.length; i++) {\n    iterator.call(context, obj[keys[i]], keys[i]);\n  }\n  return keys;\n}\n\n\nfunction serializeValue(v) {\n  if (typeof v === 'object') {\n    return v instanceof Date ? v.toISOString() : JSON.stringify(v);\n  }\n  return v;\n}\n\n\nfunction encodeUriQuery(val) {\n  return encodeURIComponent(val).replace(/%20/g, '+');\n}\n\n\n// Serialize an object containing parameters into a form suitable for a query\n// string.\n//\n// This is an almost identical copy of the default Angular parameter serializer\n// ($httpParamSerializer), with one important change. In Angular 1.4.x\n// semicolons are not encoded in query parameter values. This is a problem for\n// us as URIs around the web may well contain semicolons, which our backend will\n// then proceed to parse as a delimiter in the query string. To avoid this\n// problem we use a very conservative encoder, found above.\nfunction serializeParams(params) {\n  if (!params) {\n    return '';\n  }\n  var parts = [];\n  forEachSorted(params, function(value, key) {\n    if (value === null || typeof value === 'undefined') {\n      return;\n    }\n    if (Array.isArray(value)) {\n      value.forEach(function(v) {\n        parts.push(encodeUriQuery(key)  + '=' + encodeUriQuery(serializeValue(v)));\n      });\n    } else {\n      parts.push(encodeUriQuery(key) + '=' + encodeUriQuery(serializeValue(value)));\n    }\n  });\n\n  return parts.join('&');\n}\n\n/**\n * Creates a function that will make an API call to a named route.\n *\n * @param $http - The Angular HTTP service\n * @param $q - The Angular Promises ($q) service.\n * @param links - Object or promise for an object mapping named API routes to\n *                URL templates and methods\n * @param route - The dotted path of the named API route (eg. `annotation.create`)\n * @param {Function} tokenGetter - Function which returns a Promise for an\n *                   access token for the API.\n */\nfunction createAPICall($http, $q, links, route, tokenGetter) {\n  return function (params, data) {\n    // `$q.all` is used here rather than `Promise.all` because testing code that\n    // mixes native Promises with the `$q` promises returned by `$http`\n    // functions gets awkward in tests.\n    return $q.all([links, tokenGetter()]).then(function (linksAndToken) {\n      var links = linksAndToken[0];\n      var token = linksAndToken[1];\n\n      var descriptor = get(links, route);\n      var url = urlUtil.replaceURLParams(descriptor.url, params);\n      var headers = {};\n\n      if (token) {\n\t\n        headers.Authorization = 'Bearer ' + token;\n      }\n\n      var req = {\n        data: data ? stripInternalProperties(data) : null,\n        headers: headers,\n        method: descriptor.method,\n        params: url.params,\n        paramSerializer: serializeParams,\n        url: url.url,\n      };\n\tconsole.log(\"token = \"+token+\" req = \"+JSON.stringify(req));\n      return $http(req);\n    }).then(function (response) {\n      return response.data;\n    }).catch(function (response) {\n      // Translate the API result into an `Error` to follow the convention that\n      // Promises should be rejected with an Error or Error-like object.\n      //\n      // Use `$q.reject` rather than just rethrowing the Error here due to\n      // mishandling of errors thrown inside `catch` handlers in Angular < 1.6\n      return $q.reject(translateResponseToError(response));\n    });\n  };\n}\n\n/**\n * API client for the Hypothesis REST API.\n *\n * Returns an object that with keys that match the routes in\n * the Hypothesis API (see http://h.readthedocs.io/en/latest/api/).\n *\n * This service handles authenticated calls to the API, using the `auth` service\n * to get auth tokens. The URLs for API endpoints are fetched from the `/api`\n * endpoint, a responsibility delegated to the `apiRoutes` service which does\n * not use authentication.\n */\n// @ngInject\nfunction store($http, $q, apiRoutes, auth) {\n  var links = apiRoutes.routes();\n  function apiCall(route) {\n    return createAPICall($http, $q, links, route, auth.tokenGetter);\n  }\n\n  return {\n    search: apiCall('search'),\n    annotation: {\n      create: apiCall('annotation.create'),\n      delete: apiCall('annotation.delete'),\n      get: apiCall('annotation.read'),\n      update: apiCall('annotation.update'),\n      flag: apiCall('annotation.flag'),\n      hide: apiCall('annotation.hide'),\n      unhide: apiCall('annotation.unhide'),\n    },\n    group: {\n      member: {\n        delete: apiCall('group.member.delete'),\n      },\n    },\n    profile: {\n      read: apiCall('profile.read'),\n      update: apiCall('profile.update'),\n    },\n\n    // The `links` endpoint is not included here. Clients should fetch these\n    // from the `apiRoutes` service.\n  };\n}\n\nmodule.exports = store;\n",
    "var StreamFilter;\n\nmodule.exports = StreamFilter = (function() {\n  StreamFilter.prototype.strategies = ['include_any', 'include_all', 'exclude_any', 'exclude_all'];\n\n  StreamFilter.prototype.filter = {\n    match_policy: 'include_any',\n    clauses: [],\n    actions: {\n      create: true,\n      update: true,\n      \"delete\": true\n    }\n  };\n\n  function StreamFilter() {}\n\n  StreamFilter.prototype.getFilter = function() {\n    return this.filter;\n  };\n\n  StreamFilter.prototype.getMatchPolicy = function() {\n    return this.filter.match_policy;\n  };\n\n  StreamFilter.prototype.getClauses = function() {\n    return this.filter.clauses;\n  };\n\n  StreamFilter.prototype.getActions = function() {\n    return this.filter.actions;\n  };\n\n  StreamFilter.prototype.getActionCreate = function() {\n    return this.filter.actions.create;\n  };\n\n  StreamFilter.prototype.getActionUpdate = function() {\n    return this.filter.actions.update;\n  };\n\n  StreamFilter.prototype.getActionDelete = function() {\n    return this.filter.actions[\"delete\"];\n  };\n\n  StreamFilter.prototype.setMatchPolicy = function(policy) {\n    this.filter.match_policy = policy;\n    return this;\n  };\n\n  StreamFilter.prototype.setMatchPolicyIncludeAny = function() {\n    this.filter.match_policy = 'include_any';\n    return this;\n  };\n\n  StreamFilter.prototype.setMatchPolicyIncludeAll = function() {\n    this.filter.match_policy = 'include_all';\n    return this;\n  };\n\n  StreamFilter.prototype.setMatchPolicyExcludeAny = function() {\n    this.filter.match_policy = 'exclude_any';\n    return this;\n  };\n\n  StreamFilter.prototype.setMatchPolicyExcludeAll = function() {\n    this.filter.match_policy = 'exclude_all';\n    return this;\n  };\n\n  StreamFilter.prototype.setActions = function(actions) {\n    this.filter.actions = actions;\n    return this;\n  };\n\n  StreamFilter.prototype.setActionCreate = function(action) {\n    this.filter.actions.create = action;\n    return this;\n  };\n\n  StreamFilter.prototype.setActionUpdate = function(action) {\n    this.filter.actions.update = action;\n    return this;\n  };\n\n  StreamFilter.prototype.setActionDelete = function(action) {\n    this.filter.actions[\"delete\"] = action;\n    return this;\n  };\n\n  StreamFilter.prototype.noClauses = function() {\n    this.filter.clauses = [];\n    return this;\n  };\n\n  StreamFilter.prototype.addClause = function(field, operator, value, case_sensitive, options) {\n    if (case_sensitive == null) {\n      case_sensitive = false;\n    }\n    if (options == null) {\n      options = {};\n    }\n    this.filter.clauses.push({\n      field: field,\n      operator: operator,\n      value: value,\n      case_sensitive: case_sensitive,\n      options: options\n    });\n    return this;\n  };\n\n  StreamFilter.prototype.resetFilter = function() {\n    this.setMatchPolicyIncludeAny();\n    this.setActionCreate(true);\n    this.setActionUpdate(true);\n    this.setActionDelete(true);\n    this.noClauses();\n    return this;\n  };\n\n  return StreamFilter;\n\n})();\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvZmlyYXMvRGVza3RvcC9IeXBvdGhlc2lzL2NsaWVudC9zcmMvc2lkZWJhci9zdHJlYW0tZmlsdGVyLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9ob21lL2ZpcmFzL0Rlc2t0b3AvSHlwb3RoZXNpcy9jbGllbnQvc3JjL3NpZGViYXIvc3RyZWFtLWZpbHRlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQTs7QUFBQSxNQUFNLENBQUMsT0FBUCxHQUF1Qjt5QkFDckIsVUFBQSxHQUFZLENBQUMsYUFBRCxFQUFnQixhQUFoQixFQUErQixhQUEvQixFQUE4QyxhQUE5Qzs7eUJBRVosTUFBQSxHQUNJO0lBQUEsWUFBQSxFQUFnQixhQUFoQjtJQUNBLE9BQUEsRUFBVSxFQURWO0lBRUEsT0FBQSxFQUNFO01BQUEsTUFBQSxFQUFRLElBQVI7TUFDQSxNQUFBLEVBQVEsSUFEUjtNQUVBLENBQUEsTUFBQSxDQUFBLEVBQVEsSUFGUjtLQUhGOzs7RUFPUyxzQkFBQSxHQUFBOzt5QkFFYixTQUFBLEdBQVcsU0FBQTtBQUFHLFdBQU8sSUFBQyxDQUFBO0VBQVg7O3lCQUNYLGNBQUEsR0FBZ0IsU0FBQTtBQUFHLFdBQU8sSUFBQyxDQUFBLE1BQU0sQ0FBQztFQUFsQjs7eUJBQ2hCLFVBQUEsR0FBWSxTQUFBO0FBQUcsV0FBTyxJQUFDLENBQUEsTUFBTSxDQUFDO0VBQWxCOzt5QkFDWixVQUFBLEdBQVksU0FBQTtBQUFHLFdBQU8sSUFBQyxDQUFBLE1BQU0sQ0FBQztFQUFsQjs7eUJBQ1osZUFBQSxHQUFpQixTQUFBO0FBQUcsV0FBTyxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQU8sQ0FBQztFQUExQjs7eUJBQ2pCLGVBQUEsR0FBaUIsU0FBQTtBQUFHLFdBQU8sSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUFPLENBQUM7RUFBMUI7O3lCQUNqQixlQUFBLEdBQWlCLFNBQUE7QUFBRyxXQUFPLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBTyxFQUFDLE1BQUQ7RUFBekI7O3lCQUVqQixjQUFBLEdBQWdCLFNBQUMsTUFBRDtJQUNkLElBQUMsQ0FBQSxNQUFNLENBQUMsWUFBUixHQUF1QjtXQUN2QjtFQUZjOzt5QkFJaEIsd0JBQUEsR0FBMEIsU0FBQTtJQUN4QixJQUFDLENBQUEsTUFBTSxDQUFDLFlBQVIsR0FBdUI7V0FDdkI7RUFGd0I7O3lCQUkxQix3QkFBQSxHQUEwQixTQUFBO0lBQ3hCLElBQUMsQ0FBQSxNQUFNLENBQUMsWUFBUixHQUF1QjtXQUN2QjtFQUZ3Qjs7eUJBSTFCLHdCQUFBLEdBQTBCLFNBQUE7SUFDeEIsSUFBQyxDQUFBLE1BQU0sQ0FBQyxZQUFSLEdBQXVCO1dBQ3ZCO0VBRndCOzt5QkFJMUIsd0JBQUEsR0FBMEIsU0FBQTtJQUN4QixJQUFDLENBQUEsTUFBTSxDQUFDLFlBQVIsR0FBdUI7V0FDdkI7RUFGd0I7O3lCQUkxQixVQUFBLEdBQVksU0FBQyxPQUFEO0lBQ1YsSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLEdBQWtCO1dBQ2xCO0VBRlU7O3lCQUlaLGVBQUEsR0FBaUIsU0FBQyxNQUFEO0lBQ2YsSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBaEIsR0FBeUI7V0FDekI7RUFGZTs7eUJBSWpCLGVBQUEsR0FBaUIsU0FBQyxNQUFEO0lBQ2YsSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBaEIsR0FBeUI7V0FDekI7RUFGZTs7eUJBSWpCLGVBQUEsR0FBaUIsU0FBQyxNQUFEO0lBQ2YsSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUFPLEVBQUMsTUFBRCxFQUFmLEdBQXlCO1dBQ3pCO0VBRmU7O3lCQUlqQixTQUFBLEdBQVcsU0FBQTtJQUNULElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixHQUFrQjtXQUNsQjtFQUZTOzt5QkFJWCxTQUFBLEdBQVcsU0FBQyxLQUFELEVBQVEsUUFBUixFQUFrQixLQUFsQixFQUF5QixjQUF6QixFQUFpRCxPQUFqRDs7TUFBeUIsaUJBQWlCOzs7TUFBTyxVQUFVOztJQUNwRSxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFoQixDQUNFO01BQUEsS0FBQSxFQUFPLEtBQVA7TUFDQSxRQUFBLEVBQVUsUUFEVjtNQUVBLEtBQUEsRUFBTyxLQUZQO01BR0EsY0FBQSxFQUFnQixjQUhoQjtNQUlBLE9BQUEsRUFBUyxPQUpUO0tBREY7V0FNQTtFQVBTOzt5QkFTWCxXQUFBLEdBQWEsU0FBQTtJQUNYLElBQUMsQ0FBQSx3QkFBRCxDQUFBO0lBQ0EsSUFBQyxDQUFBLGVBQUQsQ0FBaUIsSUFBakI7SUFDQSxJQUFDLENBQUEsZUFBRCxDQUFpQixJQUFqQjtJQUNBLElBQUMsQ0FBQSxlQUFELENBQWlCLElBQWpCO0lBQ0EsSUFBQyxDQUFBLFNBQUQsQ0FBQTtXQUNBO0VBTlcifQ==\n",
    "'use strict';\n\nvar queryString = require('query-string');\nvar uuid = require('node-uuid');\n\nvar events = require('./events');\nvar Socket = require('./websocket');\n\n/**\n * Open a new WebSocket connection to the Hypothesis push notification service.\n * Only one websocket connection may exist at a time, any existing socket is\n * closed.\n *\n * @param $rootScope - Scope used to $apply() app state changes\n *                     resulting from WebSocket messages, in order to update\n *                     appropriate watchers.\n * @param annotationMapper - The local annotation store\n * @param groups - The local groups store\n * @param session - Provides access to read and update the session state\n * @param settings - Application settings\n */\n// @ngInject\nfunction Streamer($rootScope, annotationMapper, annotationUI, auth,\n                  groups, session, settings) {\n  // The randomly generated session UUID\n  var clientId = uuid.v4();\n\n  // The socket instance for this Streamer instance\n  var socket;\n\n  // Client configuration messages, to be sent each time a new connection is\n  // established.\n  var configMessages = {};\n\n  // The streamer maintains a set of pending updates and deletions which have\n  // been received via the WebSocket but not yet applied to the contents of the\n  // app.\n  //\n  // This state should be managed as part of the global app state in\n  // annotationUI, but that is currently difficult because applying updates\n  // requires filtering annotations against the focused group (information not\n  // currently stored in the app state) and triggering events in order to update\n  // the annotations displayed in the page.\n\n  // Map of ID -> updated annotation for updates that have been received over\n  // the WS but not yet applied\n  var pendingUpdates = {};\n  // Set of IDs of annotations which have been deleted but for which the\n  // deletion has not yet been applied\n  var pendingDeletions = {};\n\n  function handleAnnotationNotification(message) {\n    var action = message.options.action;\n    var annotations = message.payload;\n\n    switch (action) {\n    case 'create':\n    case 'update':\n    case 'past':\n      annotations.forEach(function (ann) {\n        // In the sidebar, only save pending updates for annotations in the\n        // focused group, since we only display annotations from the focused\n        // group and reload all annotations and discard pending updates\n        // when switching groups.\n        if (ann.group === groups.focused().id || !annotationUI.isSidebar()) {\n          pendingUpdates[ann.id] = ann;\n        }\n      });\n      break;\n    case 'delete':\n      annotations.forEach(function (ann) {\n        // Discard any pending but not-yet-applied updates for this annotation\n        delete pendingUpdates[ann.id];\n\n        // If we already have this annotation loaded, then record a pending\n        // deletion. We do not check the group of the annotation here because a)\n        // that information is not included with deletion notifications and b)\n        // even if the annotation is from the current group, it might be for a\n        // new annotation (saved in pendingUpdates and removed above), that has\n        // not yet been loaded.\n        if (annotationUI.annotationExists(ann.id)) {\n          pendingDeletions[ann.id] = true;\n        }\n      });\n      break;\n    }\n\n    if (!annotationUI.isSidebar()) {\n      applyPendingUpdates();\n    }\n  }\n\n  function handleSessionChangeNotification(message) {\n    session.update(message.model);\n  }\n\n  function handleSocketOnError (event) {\n    console.warn('Error connecting to H push notification service:', event);\n\n    // In development, warn if the connection failure might be due to\n    // the app's origin not having been whitelisted in the H service's config.\n    //\n    // Unfortunately the error event does not provide a way to get at the\n    // HTTP status code for HTTP -> WS upgrade requests.\n    var websocketHost = new URL(settings.websocketUrl).hostname;\n    if (['localhost', '127.0.0.1'].indexOf(websocketHost) !== -1) {\n      console.warn('Check that your H service is configured to allow ' +\n                   'WebSocket connections from ' + window.location.origin);\n    }\n  }\n\n  function handleSocketOnMessage (event) {\n    // Wrap message dispatches in $rootScope.$apply() so that\n    // scope watches on app state affected by the received message\n    // are updated\n    $rootScope.$apply(function () {\n      var message = JSON.parse(event.data);\n      if (!message) {\n        return;\n      }\n\n      if (message.type === 'annotation-notification') {\n        handleAnnotationNotification(message);\n      } else if (message.type === 'session-change') {\n        handleSessionChangeNotification(message);\n      } else if (message.type === 'whoyouare') {\n        var userid = annotationUI.getState().session.userid;\n        if (message.userid !== userid) {\n          console.warn('WebSocket user ID \"%s\" does not match logged-in ID \"%s\"', message.userid, userid);\n        }\n      } else {\n        console.warn('received unsupported notification', message.type);\n      }\n    });\n  }\n\n  function sendClientConfig () {\n    Object.keys(configMessages).forEach(function (key) {\n      if (configMessages[key]) {\n        socket.send(configMessages[key]);\n      }\n    });\n  }\n\n  /**\n   * Send a configuration message to the push notification service.\n   * Each message is associated with a key, which is used to re-send\n   * configuration data to the server in the event of a reconnection.\n   */\n  function setConfig(key, configMessage) {\n    configMessages[key] = configMessage;\n    if (socket && socket.isConnected()) {\n      socket.send(configMessage);\n    }\n  }\n\n  var _connect = function () {\n    // If we have no URL configured, don't do anything.\n    if (!settings.websocketUrl) {\n      return Promise.resolve();\n    }\n\n    return auth.tokenGetter().then(function (token) {\n      var url;\n      if (token) {\n        // Include the access token in the URL via a query param. This method\n        // is used to send credentials because the `WebSocket` constructor does\n        // not support setting the `Authorization` header directly as we do for\n        // other API requests.\n        var parsedURL = new URL(settings.websocketUrl);\n        var queryParams = queryString.parse(parsedURL.search);\n        queryParams.access_token = token;\n        parsedURL.search = queryString.stringify(queryParams);\n        url = parsedURL.toString();\n      } else {\n        url = settings.websocketUrl;\n      }\n\n      socket = new Socket(url);\n\n      socket.on('open', sendClientConfig);\n      socket.on('error', handleSocketOnError);\n      socket.on('message', handleSocketOnMessage);\n\n      // Configure the client ID\n      setConfig('client-id', {\n        messageType: 'client_id',\n        value: clientId,\n      });\n\n      // Send a \"whoami\" message. The server will respond with a \"whoyouare\"\n      // reply which is useful for verifying that authentication worked as\n      // expected.\n      setConfig('auth-check', {\n        type: 'whoami',\n        id: 1,\n      });\n    }).catch(function (err) {\n      console.error('Failed to fetch token for WebSocket authentication', err);\n    });\n  };\n\n  /**\n   * Connect to the Hypothesis real time update service.\n   *\n   * If the service has already connected this does nothing.\n   *\n   * @return {Promise} Promise which resolves once the WebSocket connection\n   *                   process has started.\n   */\n  function connect() {\n    if (socket) {\n      return Promise.resolve();\n    }\n\n    return _connect();\n  }\n\n  /**\n   * Connect to the Hypothesis real time update service.\n   *\n   * If the service has already connected this closes the existing connection\n   * and reconnects.\n   *\n   * @return {Promise} Promise which resolves once the WebSocket connection\n   *                   process has started.\n   */\n  function reconnect() {\n    if (socket) {\n      socket.close();\n    }\n\n    return _connect();\n  }\n\n  function applyPendingUpdates() {\n    var updates = Object.values(pendingUpdates);\n    var deletions = Object.keys(pendingDeletions).map(function (id) {\n      return {id: id};\n    });\n\n    if (updates.length) {\n      annotationMapper.loadAnnotations(updates);\n    }\n    if (deletions.length) {\n      annotationMapper.unloadAnnotations(deletions);\n    }\n\n    pendingUpdates = {};\n    pendingDeletions = {};\n  }\n\n  function countPendingUpdates() {\n    return Object.keys(pendingUpdates).length +\n           Object.keys(pendingDeletions).length;\n  }\n\n  function hasPendingDeletion(id) {\n    return pendingDeletions.hasOwnProperty(id);\n  }\n\n  function removePendingUpdates(event, anns) {\n    if (!Array.isArray(anns)) {\n      anns = [anns];\n    }\n    anns.forEach(function (ann) {\n      delete pendingUpdates[ann.id];\n      delete pendingDeletions[ann.id];\n    });\n  }\n\n  function clearPendingUpdates() {\n    pendingUpdates = {};\n    pendingDeletions = {};\n  }\n\n  var updateEvents = [\n    events.ANNOTATION_DELETED,\n    events.ANNOTATION_UPDATED,\n    events.ANNOTATIONS_UNLOADED,\n  ];\n\n  updateEvents.forEach(function (event) {\n    $rootScope.$on(event, removePendingUpdates);\n  });\n  $rootScope.$on(events.GROUP_FOCUSED, clearPendingUpdates);\n\n  this.applyPendingUpdates = applyPendingUpdates;\n  this.countPendingUpdates = countPendingUpdates;\n  this.hasPendingDeletion = hasPendingDeletion;\n  this.clientId = clientId;\n  this.configMessages = configMessages;\n  this.connect = connect;\n  this.reconnect = reconnect;\n  this.setConfig = setConfig;\n}\n\nmodule.exports = Streamer;\n",
    "'use strict';\n\n// Selectors that calculate the annotation counts displayed in tab headings\n// and determine which tab an annotation should be displayed in.\n\nvar countIf = require('./util/array-util').countIf;\nvar metadata = require('./annotation-metadata');\nvar uiConstants = require('./ui-constants');\n\n/**\n * Return the tab in which an annotation should be displayed.\n *\n * @param {Annotation} ann\n */\nfunction tabForAnnotation(ann) {\n  if (metadata.isOrphan(ann)) {\n    return uiConstants.TAB_ORPHANS;\n  } else if (metadata.isPageNote(ann)) {\n    return uiConstants.TAB_NOTES;\n  } else {\n    return uiConstants.TAB_ANNOTATIONS;\n  }\n}\n\n/**\n * Return true if an annotation should be displayed in a given tab.\n *\n * @param {Annotation} ann\n * @param {number} tab - The TAB_* value indicating the tab\n */\nfunction shouldShowInTab(ann, tab) {\n  if (metadata.isWaitingToAnchor(ann)) {\n    // Until this annotation anchors or fails to anchor, we do not know which\n    // tab it should be displayed in.\n    return false;\n  }\n  return tabForAnnotation(ann) === tab;\n}\n\n/**\n * Return the max and moy values for complexite, fraicheur and interet attributes.\n *\n * @param {Annotation[]} annotations - List of annotations to display\n */\nfunction getMax(arr) {\n    var max;\n    var res = {}\n    for(var key in arr) {\n    //var value = arr[key];\n\tif (!max || parseInt(arr[key]) > parseInt(max)){\n            max = arr[key];\n\t    res.max = max;\n\t    res.key = key\n\t}\n    }\n    return res;\n}\n\nfunction getMoyenne(arr){\n   var somme = 0;\n   var indices = 0;\n\tfor(var i=0; i<arr.length; i++) {\n\t   if(arr[i]!=''){\n\t\tsomme = somme + arr[i];\n\t\tindices = indices + 1;\n\t   }\n\t}\n    var moyenne = Math.round(somme/indices);\n    return moyenne;\n}\n\nfunction get_max_moy(annotations){\n        var object_result = {};\n\tvar complexites = [] ;\n\tvar fraicheurs = [] ;\n\tvar rates = [] ;\n\tvar types = [] ;\n\n\tannotations.forEach(function(element){\n\t\tif(element.complexite != '')\n\t\tcomplexites.push(element.complexite)\n\t\tif(element.fraicheur != '')\n\t\tfraicheurs.push(element.fraicheur)\n\t\ttypes = types.concat(element.typesContenu);\n\t\trates.push(element.rate);\n\t});\n\tvar occurrences_complexites = complexites.reduce(function(obj, item) {\n\t\t obj[item] = (obj[item] || 0) + 1;\n\t\t return obj;\n\t}, {});\n\tvar occurrences_fraicheurs = fraicheurs.reduce(function(obj, item) {\n\t\t obj[item] = (obj[item] || 0) + 1;\n\t\t return obj;\n\t}, {});\n\tvar occurrences_types = types.reduce(function(obj, item) {\n\t\t obj[item] = (obj[item] || 0) + 1;\n\t\t return obj;\n\t}, {});\n\n\tvar maxComplexite = getMax(occurrences_complexites);\n\tvar maxFraicheur = getMax(occurrences_fraicheurs);\n\tvar maxTypes = getMax(occurrences_types);\n\tvar moyenneRate = getMoyenne(rates);\n\tif(moyenneRate !== parseInt(moyenneRate, 10)){moyenneRate = 0;}\n        object_result.maxComplexite = maxComplexite.key;\n        object_result.maxFraicheur = maxFraicheur.key;\n        object_result.maxTypes = maxTypes.key;\n        object_result.moyenneRate = moyenneRate;\n\t//console.log('object_result = '+JSON.stringify(object_result));\n\treturn object_result;\n}\n\n/**\n * Return the counts for the headings of different tabs.\n *\n * @param {Annotation[]} annotations - List of annotations to display\n */\nfunction counts(annotations) {\n  var counts = {\n    maxComplexite: get_max_moy(annotations).maxComplexite,\n    maxFraicheur: get_max_moy(annotations).maxFraicheur,\n    maxTypes: get_max_moy(annotations).maxTypes,\n    moyenneRates: get_max_moy(annotations).moyenneRate,\n    notes: countIf(annotations, metadata.isPageNote),\n    annotations: countIf(annotations, metadata.isAnnotation),\n    orphans: countIf(annotations, metadata.isOrphan),\n    anchoring: countIf(annotations, metadata.isWaitingToAnchor),\n  };\n\n  return counts;\n}\n\nmodule.exports = {\n  counts: counts,\n  shouldShowInTab: shouldShowInTab,\n  tabForAnnotation: tabForAnnotation,\n};\n",
    "'use strict';\n\n/**\n * @typedef Tag\n * @property {string} text - The label of the tag\n * @property {number} count - The number of times this tag has been used.\n * @property {number} updated - The timestamp when this tag was last used.\n */\n\n/**\n * Service for fetching tag suggestions and storing data to generate them.\n *\n * The `tags` service stores metadata about recently used tags to local storage\n * and provides a `filter` method to fetch tags matching a query, ranked based\n * on frequency of usage.\n */\n// @ngInject\nfunction tags(localStorage) {\nconsole.log(\"tag .js\");\n  var TAGS_LIST_KEY = 'hypothesis.user.tags.list';\n  var TAGS_MAP_KEY = 'hypothesis.user.tags.map';\n\nvar listTags;\nvar listTagsResult;\n\nfunction cleanTags(){ \n\tlistTags = listTags.filter(function(elem, index, self) {\n        return index === self.indexOf(elem);\n        });\n\tconsole.log(listTags);\n\tlistTags.forEach(function(element){\n\tlistTagsResult.push({'text':element});\n\t})\n\tconsole.log(JSON.stringify(listTags));\n    }\n\nfunction getAllTags(store){\n\tlistTags = [];\n\tlistTagsResult = [];\n\tstore.search({}).then(function(data){\n\tdata.rows.forEach(function(element){\n\t  listTags = listTags.concat(element.tags);\n\t});\n\tconsole.log('data = '+JSON.stringify(listTags));\n\tsetTimeout(cleanTags, 2000);\n\t});\n}\n    \n  /**\n   * Return a list of tag suggestions matching `query`.\n   *\n   * @param {string} query\n   * @return {Tag[]} List of matching tags\n   */\n  function filter(query) {\n    //var savedTags = localStorage.getObject(TAGS_LIST_KEY) || [];\n    var savedTags = listTags || {};\n\t      for (var i=savedTags.length-1; i>=0; i--) {\n\t\tif(savedTags[i].substring(0, 17) == 'create new tag : '){\n\t\t\tsavedTags.splice(i, 1);\n \t\t\tbreak;\n\t\t\t}\n\t\t}\n    console.log(savedTags);\n    if(!(savedTags.indexOf(query.toLowerCase()) > -1)){\n\tsavedTags.unshift('create new tag : '+query.toLowerCase());\n    }\n    console.log('filter '+listTags);\n    return savedTags.filter((e) => {\n      return e.toLowerCase().indexOf(query.toLowerCase()) !== -1;\n    });\n  }\n\n\n  /**\n   * Update the list of stored tag suggestions based on the tags that a user has\n   * entered for a given annotation.\n   *\n   * @param {Tag} tags - List of tags.\n   */\n  function store(tags) {\n    // Update the stored (tag, frequency) map.\n    console.log('tags'+JSON.stringify(tags));\n    //var savedTags = localStorage.getObject(TAGS_MAP_KEY) || {};\n    var savedTags = listTagsResult || {};\n    tags.forEach((tag) => {\n      if (savedTags[tag.text]) {\n        savedTags[tag.text].count += 1;\n        savedTags[tag.text].updated = Date.now();\n      } else {\n        savedTags[tag.text] = {\n          text: tag.text,\n          count: 1,\n          updated: Date.now(),\n        };\n      }\n    });\n    //localStorage.setObject(TAGS_MAP_KEY, savedTags);\n\n    // Sort tag suggestions by frequency.\n    var tagsList = Object.keys(savedTags).sort((t1, t2) => {\n      if (savedTags[t1].count !== savedTags[t2].count) {\n        return savedTags[t2].count - savedTags[t1].count;\n      }\n      return t1.localeCompare(t2);\n    });\n    //localStorage.setObject(TAGS_LIST_KEY, tagsList);\n  }\n\n  return {\n    filter,\n    store,\n    getAllTags,\n  };\n}\n\nmodule.exports = tags;\n",
    "module.exports = \"<button class=\\\"btn btn-clean annotation-action-btn\\\" style=\\\"margin-right:20px;margin-top:50px;\\\"\\n  ng-click=\\\"vm.onClick()\\\"\\n  ng-disabled=\\\"vm.isDisabled\\\"\\n  aria-label=\\\"{{ vm.label }}\\\"\\n  h-tooltip>\\n  <i ng-if=\\\"vm.icon\\\" class=\\\"{{ vm.icon }} btn-icon\\\"></i>\\n  <img ng-if=\\\"vm.src\\\" src=\\\"{{vm.src}}\\\" width=\\\"30px\\\" height=\\\"35px\\\"/>\\n</button>\\n\";\n",
    "module.exports = \"<header class=\\\"annotation-header\\\">\\n  <!-- User -->\\n\\n <!-- Excerpts -->\\n  <section class=\\\"annotation-quote-list\\\"\\n    ng-if=\\\"vm.quote()\\\">\\n    <excerpt collapsed-height=\\\"35\\\"\\n      inline-controls=\\\"true\\\"\\n      overflow-hysteresis=\\\"20\\\"\\n      content-data=\\\"selector.exact\\\">\\n      <blockquote class=\\\"annotation-quote\\\"\\n        h-branding=\\\"selectionFontFamily\\\"\\n        ng-bind=\\\"vm.quote()\\\"></blockquote>\\n    </excerpt>\\n\\n\\n  <span ng-if=\\\"vm.user()\\\">\\n  <span> {{'depose par' | translate}} </span>\\n    <a class=\\\"annotation-header__user\\\"\\n      target=\\\"_blank\\\"\\n      ng-if=\\\"!vm.isThirdPartyUser()\\\"\\n      ng-href=\\\"{{vm.serviceUrl('user',{user:vm.user()})}}\\\"\\n      >{{vm.displayName()}}</a>\\n    <a class=\\\"annotation-header__user\\\"\\n      target=\\\"_blank\\\"\\n      ng-if=\\\"vm.isThirdPartyUser() && vm.thirdPartyUsernameLink()\\\"\\n      href=\\\"{{ vm.thirdPartyUsernameLink() }}\\\"\\n      >{{vm.displayName()}}</a>\\n    <span class=\\\"annotation-header__user\\\"\\n      ng-if=\\\"vm.isThirdPartyUser() && !vm.thirdPartyUsernameLink()\\\"\\n      >{{vm.displayName()}}</span>\\n   <span> {{'en' | translate}} </span>\\n    <timestamp\\n      class-name=\\\"'annotation-header__user'\\\"\\n      timestamp=\\\"vm.updated()\\\"\\n      href=\\\"vm.htmlLink()\\\"\\n      ng-if=\\\"!vm.editing() && vm.updated()\\\" style=\\\"float:right;margin-left:5px;\\\"></timestamp>\\n</span>\\n  </section>\\n    <span class=\\\"annotation-collapsed-replies\\\">\\n      <a class=\\\"annotation-link\\\" href=\\\"\\\"\\n        ng-click=\\\"vm.onReplyCountClick()\\\"\\n        ng-pluralize count=\\\"vm.replyCount\\\"\\n        when=\\\"{'0': '', 'une': '1 rponse', 'autres': '{} rponses'}\\\"></a>\\n    </span>\\n\\n <!-- <span class=\\\"u-flex-spacer\\\"></span>-->\\n\\n</header>\\n\";\n",
    "module.exports = \"<div class=\\\"annotation-share-dialog__backdrop\\\"\\n     ng-if=\\\"vm.isOpen\\\"\\n     ng-click=\\\"vm.onClose()\\\"></div>\\n<div class=\\\"annotation-share-dialog\\\" ng-class=\\\"{'is-open': vm.isOpen}\\\">\\n  <div class=\\\"annotation-share-dialog-target\\\">\\n    <span class=\\\"annotation-share-dialog-target__label\\\">{{'partager' | translate}}:</span>\\n    <a href=\\\"https://twitter.com/intent/tweet?url={{vm.uri | urlEncode}}&hashtags=annotated\\\"\\n      target=\\\"_blank\\\"\\n      title=\\\"{{'Tweet lien' | translate}}\\\"\\n      class=\\\"annotation-share-dialog-target__icon h-icon-twitter\\\"\\n      ng-click=\\\"vm.onShareClick('twitter')\\\"></a>\\n    <a href=\\\"https://www.facebook.com/sharer/sharer.php?u={{vm.uri | urlEncode}}\\\"\\n      target=\\\"_blank\\\"\\n      title=\\\"{{'Partager sur Facebook' | translate}}\\\"\\n      class=\\\"annotation-share-dialog-target__icon h-icon-facebook\\\"\\n      ng-click=\\\"vm.onShareClick('facebook')\\\"></a>\\n    <a href=\\\"https://plus.google.com/share?url={{vm.uri | urlEncode}}\\\"\\n      target=\\\"_blank\\\"\\n      title=\\\"{{'Publier sur Google Plus' | translate}}\\\"\\n      class=\\\"annotation-share-dialog-target__icon h-icon-google-plus\\\"\\n      ng-click=\\\"vm.onShareClick('googlePlus')\\\"></a>\\n    <a href=\\\"mailto:?subject=Let's%20Annotate&amp;body={{vm.uri}}\\\"\\n      target=\\\"_blank\\\"\\n      title=\\\"{{'Partager par email' | translate}}\\\"\\n      class=\\\"annotation-share-dialog-target__icon h-icon-mail\\\"\\n      ng-click=\\\"vm.onShareClick('email')\\\"></a>\\n    <a href=\\\"#\\\" title=\\\"{{'Partager sur Plazza' | translate}}\\\" ng-click=\\\"vm.onSharePlazza()\\\" annotation=\\\"vm.annotation\\\"><img src=\\\"http://10.241.109.147/Decoupes/plazza+logo+HD.png\\\" style=\\\"width:35px;height:25px;\\\"/></a>\\n  </div>\\n  <div class=\\\"annotation-share-dialog-link\\\" type=\\\"text\\\">\\n    <input class=\\\"annotation-share-dialog-link__text\\\"\\n      value=\\\"{{vm.uri}}\\\" readonly>\\n    <span class=\\\"annotation-share-dialog-link__feedback\\\" ng-if=\\\"vm.copyToClipboardMessage\\\">\\n      {{vm.copyToClipboardMessage}}\\n    </span>\\n    <button class=\\\"btn btn-clean annotation-share-dialog-link__btn\\\"\\n      ng-click=\\\"vm.copyToClipboard($event)\\\">\\n      <i class=\\\"h-icon-clipboard btn-icon\\\"></i>\\n    </button>\\n  </div>\\n  <div class=\\\"annotation-share-dialog-msg\\\" ng-if=\\\"vm.group && !vm.group.public && !vm.isPrivate\\\">\\n    <span class=\\\"annotation-share-dialog-msg__audience\\\">\\n      Groupe.\\n    </span>\\n    Seulement les membres du groupe peuvent voir cette annotation.\\n  </div>\\n  <div class=\\\"annotation-share-dialog-msg\\\" ng-if=\\\"vm.isPrivate\\\">\\n    <span class=\\\"annotation-share-dialog-msg__audience\\\">\\n      Seulement moi.\\n    </span>\\n    Personne ne peut voir cette annotation.\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div ng-class=\\\"vm.threadClasses()\\\">\\n  <div class=\\\"annotation-thread__thread-edge\\\" ng-if=\\\"!vm.isTopLevelThread()\\\">\\n    <a href=\\\"\\\"\\n       ng-class=\\\"vm.threadToggleClasses()\\\"\\n       title=\\\"{{vm.thread.collapsed && 'Dvelopper' || 'Effondrer'}}\\\"\\n       ng-click=\\\"vm.toggleCollapsed()\\\">\\n       <span ng-class=\\\"{'h-icon-arrow-right': vm.thread.collapsed,\\n                        'h-icon-arrow-drop-down': !vm.thread.collapsed}\\\"></span>\\n    </a>\\n    <div class=\\\"annotation-thread__thread-line\\\"></div>\\n  </div>\\n  <div class=\\\"annotation-thread__content\\\">\\n    <moderation-banner annotation=\\\"vm.thread.annotation\\\"\\n                       ng-if=\\\"vm.thread.annotation\\\">\\n    </moderation-banner>\\n    <annotation ng-class=\\\"vm.annotationClasses()\\\"\\n             annotation=\\\"vm.thread.annotation\\\"\\n             is-collapsed=\\\"vm.thread.collapsed\\\"\\n             name=\\\"annotation\\\"\\n             ng-mouseenter=\\\"vm.annotationHovered = true\\\"\\n             ng-mouseleave=\\\"vm.annotationHovered = false\\\"\\n             ng-if=\\\"vm.thread.annotation\\\"\\n             ng-show=\\\"vm.thread.visible\\\"\\n             show-document-info=\\\"vm.showDocumentInfo\\\"\\n             on-reply-count-click=\\\"vm.toggleCollapsed()\\\"\\n             reply-count=\\\"vm.thread.replyCount\\\">\\n    </annotation>\\n\\n    <div ng-if=\\\"!vm.thread.annotation\\\" class=\\\"thread-deleted\\\">\\n      <p><em>Message non disponible.</em></p>\\n    </div>\\n\\n    <div ng-if=\\\"vm.hiddenCount() > 0\\\">\\n      <a class=\\\"small\\\"\\n         href=\\\"\\\"\\n         ng-click=\\\"vm.showThreadAndReplies()\\\"\\n         ng-pluralize\\n         count=\\\"vm.hiddenCount()\\\"\\n         when=\\\"{'0': '',\\n               one: 'Voir un de plus dans la conversation',\\n               other: 'Voir {} plus dans la conversation'}\\\"\\n         ></a>\\n    </div>\\n\\n    <!-- Replies -->\\n    <ul ng-show=\\\"!vm.thread.collapsed\\\">\\n      <li ng-repeat=\\\"child in vm.thread.children track by child.id\\\"\\n          ng-show=\\\"vm.shouldShowReply(child)\\\">\\n        <annotation-thread\\n          show-document-info=\\\"false\\\"\\n          thread=\\\"child\\\"\\n          on-change-collapsed=\\\"vm.onChangeCollapsed({id:id, collapsed:collapsed})\\\"\\n          on-force-visible=\\\"vm.onForceVisible({thread:thread})\\\">\\n        </annotation-thread>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<thread-list\\n  on-change-collapsed=\\\"vm.setCollapsed(id, collapsed)\\\"\\n  on-force-visible=\\\"vm.forceVisible(thread)\\\"\\n  show-document-info=\\\"true\\\"\\n  thread=\\\"vm.rootThread\\\">\\n</thread-list>\\n\";\n",
    "module.exports = \"<header class=\\\"annotation-header\\\" ng-if=\\\"!vm.user()\\\">\\n   <strong>{{'vous devez tre connect pour crer des annotations.' | translate}}</strong>  \\n   <script src=\\\"./node_modules/angular-translate/dist/angular-translate.js\\\"></script>\\n</header>\\n<div ng-keydown=\\\"vm.onKeydown($event)\\\" class=\\\"all_annotation\\\" ng-if=\\\"vm.user()\\\">\\n   <div ng-click=\\\"vm.actions(vm.annotation.id)\\\" style=\\\"float:right;\\\"><img src=\\\"http://10.241.109.147/Decoupes/left-arrow.png\\\" style=\\\"width:25px;height:25px;\\\"/></div>\\n   <annotation-header annotation=\\\"vm.annotation\\\" is-editing=\\\"vm.editing()\\\" is-highlight=\\\"vm.isHighlight()\\\" is-private=\\\"vm.state().isPrivate\\\" on-reply-count-click=\\\"vm.onReplyCountClick()\\\"                     reply-count=\\\"vm.replyCount\\\"                     show-document-info=\\\"vm.showDocumentInfo\\\">  </annotation-header>\\n   <!-- Body -->  \\n   <div class=\\\"annotation-body form-field\\\">\\n      <label for=\\\"title\\\" class=\\\"title\\\" ng-if=\\\"!vm.editing()\\\">{{'titre' | translate}} </label>      \\n      <markdown text=\\\"vm.state().title\\\"                read-only=\\\"!vm.editing()\\\" ng-if=\\\"!vm.editing()\\\">      </markdown>\\n      <label for=\\\"title\\\" class=\\\"title\\\" ng-if=\\\"vm.editing()\\\">{{'titre' | translate}}</label>  <input class=\\\"form-input\\\" type=\\\"text\\\" name=\\\"title\\\" ng-if=\\\"vm.editing()\\\" ng-model=\\\"title\\\" on-edit-text=\\\"vm.setTitle(title)\\\"          ng-change=\\\"vm.setTitle(title)\\\" placeholder=\\\"{{vm.state().title || vm.getLastTitle()}}\\\" style=\\\"width:100%;\\\"/>\\n   </div>\\n   <!-- Tags -->  \\n   <div class=\\\"annotation-body form-field\\\" ng-if=\\\"vm.editing()\\\">\\n      <span class=\\\"title\\\">Tags </span>    \\n      <tag-editor tags=\\\"vm.state().tags\\\"                on-edit-tags=\\\"vm.setTags(tags)\\\"></tag-editor>\\n   </div>\\n   <div class=\\\"annotation-body u-layout-row tags tags-read-only\\\"       ng-if=\\\"(vm.canCollapseBody || vm.state().tags.length) && !vm.editing()\\\">\\n      <ul class=\\\"tag-list\\\">\\n         <li class=\\\"tag-item\\\" ng-repeat=\\\"tag in vm.state().tags\\\">        <a ng-href=\\\"{{vm.tagSearchURL(tag)}}\\\" target=\\\"_blank\\\">{{tag}}</a>      </li>\\n      </ul>\\n      <div class=\\\"u-stretch\\\"></div>\\n      <a class=\\\"annotation-link u-strong\\\" ng-show=\\\"vm.canCollapseBody\\\"      ng-click=\\\"vm.toggleCollapseBody($event)\\\"      ng-title=\\\"vm.collapseBody ? 'Show the full annotation text' : 'Show the first few lines only'\\\"      ng-bind=\\\"vm.collapseBody ? 'More' : 'Less'\\\"      h-branding=\\\"accentColor\\\"></a>  \\n   </div>\\n   <!-- / Tags --><!-- information annotation -->\\n   <div style=\\\"margin-top:2px;\\\"></div>\\n   <div class=\\\"plusInfo\\\" ng-click=\\\"vm.plusInfo(vm.annotation.id)\\\" style=\\\"float:right;\\\"><img src=\\\"http://10.241.109.147/Decoupes/points-512.png\\\" style=\\\"width:25px;height:25px;\\\"/></div>\\n   <br>\\n   <div class=\\\"infos{{vm.annotation.id}}\\\" style=\\\"display:none;\\\">\\n      <span ng-if=\\\"!vm.state().text && !vm.state().complexite && !vm.state().fraicheur && vm.state().typesContenu.length==0  && !vm.state().rate && !vm.editing()\\\" style=\\\"color:red;\\\">{{\\\"pas d'informations sur cette annotation\\\" | translate}}</span>\\n      <div style=\\\"display:inline-flex;\\\" ng-if=\\\"!vm.editing()\\\">\\n         <div class=\\\"annotation-body form-field\\\">\\n            <span class=\\\"title\\\" ng-if=\\\"vm.state().complexite || vm.editing()\\\">{{'complexite' | translate}}</span>      \\n            <markdown text=\\\"vm.state().complexite\\\"                read-only=\\\"!vm.editing()\\\" ng-if=\\\"!vm.editing()\\\">      </markdown>\\n         </div>\\n         <div class=\\\"annotation-body form-field\\\" style=\\\"margin-left:150px;\\\">\\n            <span class=\\\"title\\\" ng-if=\\\"vm.state().fraicheur || vm.editing()\\\">{{'fraicheur' | translate}}</span>      \\n            <markdown ng-if=\\\"!vm.editing()\\\" text=\\\"vm.state().fraicheur\\\"                read-only=\\\"!vm.editing()\\\" ng-if=\\\"!vm.editing()\\\">      </markdown>\\n         </div>\\n      </div>\\n      <div style=\\\"display:inline-flex;\\\" ng-if=\\\"vm.editing()\\\">\\n         <div class=\\\"annotation-body form-field\\\" style=\\\"margin-right:10px;\\\">\\n            <span class=\\\"title\\\">{{'complexite' | translate}} </span>  \\n            <select name=\\\"complexite\\\" ng-if=\\\"vm.editing()\\\" ng-model=\\\"complexite\\\" on-edit-text=\\\"vm.setComplexite(complexite)\\\"          ng-change=\\\"vm.setComplexite(complexite)\\\" class=\\\"form-control\\\">\\n               <option value=\\\"\\\" disabled>{{'complexite' | translate}}</option>\\n               <option ng-selected=\\\"{{vm.state().complexite == 'Acculturation'}}\\\" value=\\\"Acculturation\\\">Acculturation</option>\\n               <option ng-selected=\\\"{{vm.state().complexite == 'Base'}}\\\" value=\\\"Base\\\">Base</option>\\n               <option ng-selected=\\\"{{vm.state().complexite == 'Operationnel'}}\\\" value=\\\"Operationnel\\\">Oprationnel</option>\\n               <option ng-selected=\\\"{{vm.state().complexite == 'Avance'}}\\\" value=\\\"Avance\\\">Avanc</option>\\n            </select>\\n         </div>\\n         <div class=\\\"annotation-body form-field\\\">\\n            <span class=\\\"title\\\">{{'fraicheur' | translate}} </span>\\n            <select name=\\\"fraicheur\\\" ng-if=\\\"vm.editing()\\\" ng-model=\\\"fraicheur\\\" on-edit-text=\\\"vm.setFraicheur(fraicheur)\\\"          ng-change=\\\"vm.setFraicheur(fraicheur)\\\" class=\\\"form-control\\\" >\\n               <option value=\\\"\\\" disabled>{{'fraicheur' | translate}}</option>\\n               <option ng-selected=\\\"{{vm.state().fraicheur == 'Anticipation'}}\\\" value=\\\"Anticipation\\\">Anticipation</option>\\n               <option ng-selected=\\\"{{vm.state().fraicheur == 'Actuel'}}\\\" value=\\\"Actuel\\\">Actuel</option>\\n               <option ng-selected=\\\"{{vm.state().fraicheur == 'Pas  jour'}}\\\" value=\\\"Pas  jour\\\">Pas  jour</option>\\n               <option ng-selected=\\\"{{vm.state().fraicheur == 'Obsolte'}}\\\" value=\\\"Obsolte\\\">Obsolte</option>\\n            </select>\\n         </div>\\n      </div>\\n      <div style=\\\"display:inline-flex;\\\">\\n         <div class=\\\"annotation-body form-field\\\">\\n            <span class=\\\"title\\\" ng-if=\\\"vm.state().rate || vm.editing()\\\">{{'interet' | translate}} </span>  \\n            <div id=\\\"id{{vm.annotation.id}}\\\" class=\\\"rating\\\" ng-if=\\\"!vm.editing() && vm.state().rate\\\"><span class=\\\"id{{vm.annotation.id}}rating5\\\"></span><span class=\\\"id{{vm.annotation.id}}rating4\\\"></span><span class=\\\"id{{vm.annotation.id}}rating3\\\"></span><span class=\\\"id{{vm.annotation.id}}rating2\\\"></span><span class=\\\"id{{vm.annotation.id}}rating1\\\"></span>   </div>\\n            <div id=\\\"id{{vm.annotation.id}}\\\" class=\\\"rating\\\" ng-if=\\\"vm.editing()\\\"><span class=\\\"id{{vm.annotation.id}}rating5\\\" ng-click=\\\"vm.rating(5)\\\"></span><span class=\\\"id{{vm.annotation.id}}rating4\\\" ng-click=\\\"vm.rating(4)\\\"></span><span class=\\\"id{{vm.annotation.id}}rating3\\\" ng-click=\\\"vm.rating(3)\\\"></span><span class=\\\"id{{vm.annotation.id}}rating2\\\" ng-click=\\\"vm.rating(2)\\\"></span><span class=\\\"id{{vm.annotation.id}}rating1\\\" ng-click=\\\"vm.rating(1)\\\"></span>   </div>\\n         </div>\\n         <div class=\\\"annotation-body form-field\\\" ng-if=\\\"vm.editing()\\\" style=\\\"margin-left:70px;\\\">\\n            <span class=\\\"title\\\">{{'type' | translate}} </span><br ng-if=\\\"vm.editing()\\\" />  \\n            <select name=\\\"type\\\" ng-if=\\\"vm.editing()\\\" ng-model=\\\"typeContenu\\\" on-edit-text=\\\"vm.setTypesContenu(typeContenu)\\\"          ng-change=\\\"vm.setTypesContenu(typeContenu)\\\" class=\\\"form-control\\\">\\n               <option value=\\\"\\\" disabled>{{'type' | translate}}</option>\\n               <option ng-selected=\\\"{{vm.state().typesContenu[0] == 'Formation Prsentielle'}}\\\" value=\\\"Formation Prsentielle\\\">Formation Prsentielle</option>\\n               <option ng-selected=\\\"{{vm.state().typesContenu[0] == 'E_learning'}}\\\" value=\\\"E_learning\\\">E_learning</option>\\n               <option ng-selected=\\\"{{vm.state().typesContenu[0] == 'Coding Dojo'}}\\\" value=\\\"Coding Dojo\\\">Coding Dojo</option>\\n               <option ng-selected=\\\"{{vm.state().typesContenu[0] == 'Tutoriel Web'}}\\\" value=\\\"Tutoriel Web\\\">Tutoriel Web</option>\\n               <option ng-selected=\\\"{{vm.state().typesContenu[0] == 'Recommendation'}}\\\" value=\\\"Recommendation\\\">Recommendation</option>\\n               <option ng-selected=\\\"{{vm.state().typesContenu[0] == 'Orange'}}\\\" value=\\\"Orange\\\">Orange</option>\\n               <option ng-selected=\\\"{{vm.state().typesContenu[0] == 'Rex'}}\\\" value=\\\"Rex\\\">Rex</option>\\n            </select>\\n         </div>\\n         <div class=\\\"annotation-body\\\"       ng-if=\\\"(vm.canCollapseBody || vm.state().typesContenu.length) && !vm.editing()\\\" style=\\\"margin-left:124px;\\\">\\n            <span class=\\\"title\\\">{{'type' | translate}} </span>      \\n            <markdown text=\\\"vm.state().typesContenu[0]\\\"                read-only=\\\"!vm.editing()\\\" ng-if=\\\"!vm.editing()\\\">      </markdown>\\n         </div>\\n      </div>\\n      <div class=\\\"plusCommentaire\\\" ng-click=\\\"vm.plusCommentaire(vm.annotation.id)\\\"><img src=\\\"http://10.241.109.147/Decoupes/commentaire.png\\\" style=\\\"width:25px;height:25px;\\\"/></div>\\n      <div class=\\\"Commentaire{{vm.annotation.id}}\\\" style=\\\"display:none;\\\">\\n         <div class=\\\"annotation-body form-field\\\">\\n            <span class=\\\"title\\\" ng-if=\\\"vm.editing()\\\">{{'commentaire' | translate}} </span>  \\n            <section name=\\\"text\\\" class=\\\"annotation-body\\\">\\n               <excerpt enabled=\\\"!vm.editing()\\\"      inline-controls=\\\"false\\\"      on-collapsible-changed=\\\"vm.setBodyCollapsible(collapsible)\\\"      collapse=\\\"vm.collapseBody\\\"      collapsed-height=\\\"100\\\"      overflow-hysteresis=\\\"20\\\"      content-data=\\\"vm.state().text\\\">\\n                  <markdown text=\\\"vm.state().text\\\"                custom-text-class=\\\"{'annotation-body is-hidden':vm.isHiddenByModerator(),                                    'has-content':vm.hasContent()}\\\"                on-edit-text=\\\"vm.setText(text)\\\"                read-only=\\\"!vm.editing()\\\">      </markdown>\\n               </excerpt>\\n            </section>\\n         </div>\\n      </div>\\n   </div>\\n   <!-- /information annotation -->  <!-- / Body -->   \\n   <footer class=\\\"annotation-footer\\\">\\n      <div class=\\\"annotation-form-actions\\\" ng-if=\\\"vm.editing()\\\">\\n         <publish-annotation-btn        class=\\\"publish-annotation-btn\\\"        group=\\\"vm.group()\\\"        can-post=\\\"true\\\"        is-shared=\\\"vm.isShared()\\\"        on-cancel=\\\"vm.revert()\\\"        on-save=\\\"vm.save()\\\"        on-set-privacy=\\\"vm.setPrivacy(level)\\\"></publish-annotation-btn>\\n      </div>\\n      <div class=\\\"annotation-section annotation-license\\\"         ng-show=\\\"vm.shouldShowLicense()\\\">      <a class=\\\"annotation-license__link\\\" href=\\\"http://creativecommons.org/publicdomain/zero/1.0/\\\"        title=\\\"Afficher plus d'informations sur la ddicace du domaine public Creative Commons\\\"        target=\\\"_blank\\\">        <i class=\\\"h-icon-cc-logo\\\"></i><i class=\\\"h-icon-cc-zero\\\"></i>        Les annotations peuvent tre librement rutilises par n'importe qui pour n'importe quel but.      </a>    </div>\\n      <div class=\\\"annotation-replies\\\" ng-if=\\\"!vm.isReply() && vm.replyCount > 0\\\">      <a href=\\\"\\\"        ng-click=\\\"vm.onReplyCountClick()\\\">        <span class=\\\"annotation-replies__link\\\">{{ vm.isCollapsed ? 'Afficher les rponses' : 'Masquer les rponses' }}</span>        <span class=\\\"annotation-replies__count\\\">({{ vm.replyCount }})</span>      </a>    </div>\\n      <div class=\\\"annotation-actions\\\" ng-if=\\\"vm.isSaving\\\">      {{'sauvegarde' | translate}}    </div>\\n      <!--height:454px;margin-top:-420px;-->    \\n      <div class=\\\"annotation-actions actions{{vm.annotation.id}}\\\" ng-if=\\\"!vm.isSaving && !vm.editing() && vm.id()\\\" style=\\\"opacity: 0.8;background-color:black;width:95%;padding-left: 16%;margin-top:-425px;margin-right:20px;display:none;\\\">\\n         <div ng-show=\\\"vm.isSaving\\\">{{'sauvegarde' | translate}}</div>\\n         <annotation-action-button        src=\\\"'http://10.241.109.147/Decoupes/Picto_modifier.png'\\\"        is-disabled=\\\"vm.isDeleted()\\\"        label=\\\"'modifier' | translate\\\"        ng-show=\\\"vm.authorize('update') && !vm.isSaving\\\"        on-click=\\\"vm.edit()\\\"      ></annotation-action-button>\\n         <annotation-action-button        src=\\\"'http://10.241.109.147/Decoupes/Picto_Effacer.png'\\\"        is-disabled=\\\"vm.isDeleted()\\\"        label=\\\"'effacer' | translate\\\"        ng-show=\\\"vm.authorize('delete')\\\"        on-click=\\\"vm.delete()\\\"      ></annotation-action-button>\\n         <!--<annotation-action-button        src=\\\"'http://10.241.109.147/Decoupes/Picto_Discuter.png'\\\"        is-disabled=\\\"vm.isDeleted()\\\"        label=\\\"'rpondre' | translate\\\"        on-click=\\\"vm.reply()\\\"      ></annotation-action-button>-->      \\n         <span class=\\\"annotation-share-dialog-wrapper\\\" ng-if=\\\"vm.incontextLink()\\\">\\n            <annotation-action-button         src=\\\"'http://10.241.109.147/Decoupes/Picto_Partager.png'\\\"         is-disabled=\\\"vm.isDeleted()\\\"         label=\\\"'partager' | translate\\\"         on-click=\\\"vm.showShareDialog = true\\\"        ></annotation-action-button>\\n            <annotation-share-dialog          group=\\\"vm.group()\\\"          uri=\\\"vm.incontextLink()\\\"          is-private=\\\"vm.state().isPrivate\\\"          is-open=\\\"vm.showShareDialog\\\"          on-close=\\\"vm.showShareDialog = false\\\">        </annotation-share-dialog>\\n         </span>\\n         <span ng-if=\\\"vm.canFlag()\\\">\\n            <annotation-action-button         icon=\\\"'h-icon-annotation-flag'\\\"         is-disabled=\\\"vm.isDeleted()\\\"         label=\\\"'Signaler cette annotation aux modrateurs'\\\"         ng-if=\\\"!vm.isFlagged()\\\"         on-click=\\\"vm.flag()\\\"        ></annotation-action-button>\\n            <annotation-action-button         icon=\\\"'h-icon-annotation-flag annotation--flagged'\\\"         is-disabled=\\\"vm.isDeleted()\\\"         label=\\\"'L'annotation a t signale aux modrateurs'\\\"         ng-if=\\\"vm.isFlagged()\\\"        ></annotation-action-button>\\n         </span>\\n      </div>\\n   </footer>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"dropdown-menu-btn\\\" >\\n  <button\\n    class=\\\"dropdown-menu-btn__btn\\\"\\n    ng-bind=\\\"vm.label\\\"\\n    ng-click=\\\"vm.onClick($event)\\\"\\n    ng-disabled=\\\"vm.isDisabled\\\"\\n    h-branding=\\\"ctaTextColor, ctaBackgroundColor\\\" style=\\\"background-color:green;\\\">\\n  </button>\\n  <button\\n    class=\\\"dropdown-menu-btn__dropdown-arrow\\\"\\n    style=\\\"background-color:green;\\\"\\n    title=\\\"{{vm.dropdownMenuLabel}}\\\"\\n    ng-click=\\\"vm.toggleDropdown($event)\\\">\\n    <div class=\\\"dropdown-menu-btn__dropdown-arrow-separator\\\"></div>\\n    <div\\n      class=\\\"dropdown-menu-btn__dropdown-arrow-indicator\\\"\\n      h-branding=\\\"ctaTextColor, ctaBackgroundColor\\\">\\n      <div></div>\\n    </div>\\n  </button>\\n</div>\\n\";\n",
    "module.exports = \"<div ng-transclude ng-if=\\\"!vm.enabled\\\"></div>\\n<div class=\\\"excerpt__container\\\" ng-if=\\\"vm.enabled\\\">\\n  <div class=\\\"excerpt\\\" ng-style=\\\"vm.contentStyle()\\\">\\n    <div ng-transclude></div>\\n    <div ng-click=\\\"vm.expand()\\\"\\n         ng-class=\\\"vm.bottomShadowStyles()\\\"\\n         title=\\\"Afficher l'extrait complet\\\"></div>\\n    <div class=\\\"excerpt__inline-controls\\\"\\n         ng-show=\\\"vm.showInlineControls()\\\">\\n      <span class=\\\"excerpt__toggle-link\\\" ng-show=\\\"vm.isExpandable()\\\">\\n         <a ng-click=\\\"vm.toggle($event)\\\"\\n            title=\\\"Afficher l'extrait complet\\\"\\n            h-branding=\\\"accentColor, selectionFontFamily\\\">Plus</a>\\n      </span>\\n      <span class=\\\"excerpt__toggle-link\\\" ng-show=\\\"vm.isCollapsible()\\\">\\n        <a ng-click=\\\"vm.toggle($event)\\\"\\n            title=\\\"Afficher les premires lignes seulement\\\"\\n            h-branding=\\\"accentColor, selectionFontFamily\\\">Moins</a>\\n      </span>\\n    </div>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<span ng-if=\\\"vm.auth.status === 'logged-out'\\\"      ng-switch on=\\\"vm.groups.focused().public\\\">\\n   <img class=\\\"group-list-label__icon group-list-label__icon--third-party\\\"    ng-src=\\\"{{ vm.thirdPartyGroupIcon }}\\\"    ng-if=\\\"vm.thirdPartyGroupIcon\\\"    ng-switch-when=\\\"true\\\"><!-- nospace  !--><i class=\\\"group-list-label__icon h-icon-public\\\"    ng-if=\\\"!vm.thirdPartyGroupIcon\\\"    ng-switch-when=\\\"true\\\"></i><!-- nospace  !--><i class=\\\"group-list-label__icon h-icon-group\\\" ng-switch-default></i>  <span class=\\\"group-list-label__label\\\">{{vm.groups.focused().name}}</span>\\n</span>\\n<div ng-click=\\\"vm.displayMenu()\\\"     class=\\\"pull-right\\\"     ng-if=\\\"vm.auth.status === 'logged-in'\\\"     dropdown     keyboard-nav>\\n   <div class=\\\"dropdown-toggle\\\"        dropdown-toggle        data-toggle=\\\"dropdown\\\"        role=\\\"button\\\"        ng-switch on=\\\"vm.groups.focused().public\\\"        title=\\\"Changer le groupe slectionn\\\">\\n      <img class=\\\"group-list-label__icon group-list-label__icon--third-party\\\"         ng-src=\\\"{{ vm.thirdPartyGroupIcon }}\\\"         ng-if=\\\"vm.thirdPartyGroupIcon\\\"         ng-switch-when=\\\"true\\\"><!-- nospace    !--><i class=\\\"group-list-label__icon h-icon-public\\\"           ng-switch-when=\\\"true\\\"           ng-if=\\\"!vm.thirdPartyGroupIcon\\\"></i><!-- nospace    !--><i class=\\\"group-list-label__icon h-icon-group\\\"           ng-switch-default></i>    <span class=\\\"group-list-label__label\\\">{{vm.groups.focused().name}}</span><!-- nospace    !--><i class=\\\"h-icon-arrow-drop-down\\\"  style=\\\"color:#f57c13;\\\"></i>  \\n   </div>\\n   <div class=\\\"dropdown-menu__top-arrow\\\"></div>\\n   <ul class=\\\"dropdown-menu pull-none groupMenu\\\" role=\\\"menu\\\">\\n      <li class=\\\"dropdown-menu__row dropdown-menu__row--unpadded \\\"        ng-repeat=\\\"group in vm.groups.all()\\\">\\n         <div ng-class=\\\"{'group-item': true, selected: group.id == vm.groups.focused().id}\\\"           ng-click=\\\"vm.focusGroup(group.id)\\\">\\n            <!-- the group icon !-->        \\n            <div class=\\\"group-icon-container\\\" ng-switch on=\\\"group.public\\\">          <img class=\\\"group-list-label__icon group-list-label__icon--third-party\\\"               ng-src=\\\"{{ vm.thirdPartyGroupIcon }}\\\"               ng-if=\\\"vm.thirdPartyGroupIcon\\\"               ng-switch-when=\\\"true\\\">          <i class=\\\"h-icon-public\\\" ng-if=\\\"!vm.thirdPartyGroupIcon\\\" ng-switch-when=\\\"true\\\"></i>          <i class=\\\"h-icon-group\\\" ng-switch-default></i>        </div>\\n            <!-- the group name and share link !-->        \\n            <div class=\\\"group-details\\\">\\n               <div class=\\\"group-name-container\\\">            <a class=\\\"group-name-link\\\"               href=\\\"\\\"               title=\\\"{{ group.public ? 'Afficher les annotations publiques' : 'Afficher et crer des annotations dans ' + group.name }}\\\">               {{group.name}}            </a>          </div>\\n               <div class=\\\"share-link-container\\\" ng-click=\\\"$event.stopPropagation()\\\" ng-if=\\\"!group.public\\\">            <a class=\\\"share-link\\\"               href=\\\"{{group.url}}\\\"               target=\\\"_blank\\\"               ng-click=\\\"vm.viewGroupActivity()\\\">              Voir l'activit du groupe et inviter autres            </a>          </div>\\n            </div>\\n            <!-- the 'Leave group' icon !        <div class=\\\"group-cancel-icon-container\\\" ng-click=\\\"$event.stopPropagation()\\\">          <i class=\\\"h-icon-cancel-outline btn--cancel\\\"             ng-if=\\\"!group.public\\\"             ng-click=\\\"vm.leaveGroup(group.id)\\\"             title=\\\"Laisser '{{group.name}}'\\\"></i>        </div>-->      \\n         </div>\\n      </li>\\n      <!-- <li ng-if=\\\"!vm.isThirdPartyUser()\\\" class=\\\"dropdown-menu__row dropdown-menu__row--unpadded new-group-btn\\\">      <div class=\\\"group-item\\\" ng-click=\\\"vm.createNewGroup()\\\">        <div class=\\\"group-icon-container\\\"><i class=\\\"h-icon-add\\\"></i></div>        <div class=\\\"group-details\\\">          <a href=\\\"\\\" class=\\\"group-name-link\\\" title=\\\"Crer un nouveau groupe pour partager des annotations\\\">            Nouveau groupe          </a>        </div>      </div>    </li>-->  \\n   </ul>\\n</div>\";\n",
    "module.exports = \"\\n<a class=\\\"help-panel-content__link\\\"\\n   href=\\\"mailto:support@hypothes.is?subject=Hypothesis%20support&amp;body=Version:%20{{ vm.version }}%0D%0AUser%20Agent:%20{{vm.userAgent}}%0D%0AURL:%20{{ vm.url }}%0D%0APDF%20fingerprint:%20{{ vm.documentFingerprint ? vm.documentFingerprint : '-' }}%0D%0AUsername:%20{{ vm.auth.username ? vm.auth.username : '-' }}%0D%0ADate:%20{{ vm.dateTime | date:'dd MMM yyyy HH:mm:ss Z' }} \\\"\\n>Envoyer un email</a>\\n\";\n",
    "module.exports = \"<div class=\\\"help-panel\\\">\\n  <i class=\\\"close h-icon-close\\\"\\n    role=\\\"button\\\"\\n    title=\\\"Fermer\\\"\\n    ng-click=\\\"vm.onClose()\\\"></i>\\n\\n  <header class=\\\"help-panel-title\\\">\\n    Aide\\n  </header>\\n  <div class=\\\"help-panel-content\\\">\\n    <help-link\\n      version=\\\"vm.version\\\"\\n      user-agent=\\\"vm.userAgent\\\"\\n      url=\\\"vm.url\\\"\\n      document-fingerprint=\\\"vm.documentFingerprint\\\"\\n      auth=\\\"vm.auth\\\"\\n      date-time=\\\"vm.dateTime\\\">\\n    </help-link> Si vous avez des questions ou si vous voulez nous donner votre avis.\\n    Vous pouvez galement envoyer <a class=\\\"help-panel-content__link\\\" href=\\\"https://hypothesis.zendesk.com/hc/en-us/requests/new\\\" target=\\\"_blank\\\">un ticket de support</a>\\n   ou visitez notre <a class=\\\"help-panel-content__link\\\" href=\\\"https://hypothesis.zendesk.com/hc/en-us\\\" target=\\\"_blank\\\"> documents d'aide</a>.\\n  </div>\\n  <header class=\\\"help-panel-title\\\">\\n     propos de cette version\\n  </header>\\n  <dl class=\\\"help-panel-content\\\">\\n    <dt class=\\\"help-panel-content__key\\\">Version: </dt>\\n    <dd class=\\\"help-panel-content__val\\\">{{ vm.version }}</dd>\\n    <dt class=\\\"help-panel-content__key\\\">Agent utilisateur: </dt>\\n    <dd class=\\\"help-panel-content__val\\\">{{ vm.userAgent }}</dd>\\n    <div ng-if=\\\"vm.url\\\">\\n      <dt class=\\\"help-panel-content__key\\\">URL: </dt>\\n      <dd class=\\\"help-panel-content__val\\\">{{ vm.url }}</dd>\\n    </div>\\n    <div ng-if=\\\"vm.documentFingerprint\\\">\\n      <dt class=\\\"help-panel-content__key\\\">PDF empreinte digitale: </dt>\\n      <dd class=\\\"help-panel-content__val\\\">{{ vm.documentFingerprint }}</dd>\\n    </div>\\n    <div ng-if=\\\"vm.auth.userid\\\">\\n      <dt class=\\\"help-panel-content__key\\\">Nom d'utilisateur: </dt>\\n      <dd class=\\\"help-panel-content__val\\\">{{ vm.auth.username }}</dd>\\n    </div>\\n    <dt class=\\\"help-panel-content__key\\\">Date: </dt>\\n    <dd class=\\\"help-panel-content__val\\\">{{ vm.dateTime | date:'dd MMM yyyy HH:mm:ss Z' }}</dd>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"app-content-wrapper js-thread-list-scroll-root\\\" h-branding=\\\"appBackgroundColor\\\">\\n  <top-bar\\n    auth=\\\"vm.auth\\\"\\n    on-login=\\\"vm.login()\\\"\\n    on-sign-up=\\\"vm.signUp()\\\"\\n    on-logout=\\\"vm.logout()\\\"\\n    on-share-page=\\\"vm.share()\\\"\\n    on-show-help-panel=\\\"vm.showHelpPanel()\\\"\\n    is-sidebar=\\\"::vm.isSidebar\\\"\\n    pending-update-count=\\\"vm.countPendingUpdates()\\\"\\n    on-apply-pending-updates=\\\"vm.applyPendingUpdates()\\\"\\n    search-controller=\\\"vm.search\\\"\\n    sort-key=\\\"vm.sortKey()\\\"\\n    sort-keys-available=\\\"vm.sortKeysAvailable()\\\"\\n    on-change-sort-key=\\\"vm.setSortKey(sortKey)\\\">\\n  </top-bar>\\n\\n  <div class=\\\"content\\\">\\n    <sidebar-tutorial ng-if=\\\"vm.isSidebar\\\"></sidebar-tutorial>\\n    <share-dialog\\n      ng-if=\\\"vm.shareDialog.visible\\\"\\n      on-close=\\\"vm.shareDialog.visible = false\\\">\\n    </share-dialog>\\n    <help-panel ng-if=\\\"vm.helpPanel.visible\\\"\\n      on-close=\\\"vm.helpPanel.visible = false\\\"\\n      auth=\\\"vm.auth\\\">\\n    </help-panel>\\n    <main ng-view=\\\"\\\"></main>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<!-- message to display to loggedout users when they visit direct linked annotations -->\\n<li class=\\\"loggedout-message\\\">\\n  <span>\\n    Ceci est une annotation publique cre avec Hypothesis.\\n    <br>\\n    Pour rpondre ou faire vos propres annotations sur ce document,\\n    <a class=\\\"loggedout-message__link\\\" href=\\\"{{vm.serviceUrl('signup')}}\\\" target=\\\"_blank\\\">crer un compte gratuit</a>\\n    ou\\n    <a class=\\\"loggedout-message__link\\\" href=\\\"\\\" ng-click=\\\"vm.onLogin()\\\">s'identifier</a>.\\n  </span>\\n  <span class=\\\"loggedout-message-logo\\\">\\n    <a href=\\\"https://hypothes.is\\\">\\n      <i class=\\\"h-icon-hypothesis-logo loggedout-message-logo__icon\\\"></i>\\n    </a>\\n  </span>\\n</li>\\n\";\n",
    "module.exports = \"<!-- New controls --><span class=\\\"login-text\\\"      ng-if=\\\"vm.newStyle && vm.auth.status === 'unknown'\\\"></span>\\n<span class=\\\"login-text\\\"      ng-if=\\\"vm.newStyle && vm.auth.status === 'logged-out'\\\">\\n   <a href=\\\"\\\" ng-click=\\\"vm.onLogin()\\\" h-branding=\\\"accentColor\\\">{{'se connecter' | translate}}</a>\\n   <!--/  <a href=\\\"\\\" ng-click=\\\"vm.onSignUp()\\\" target=\\\"_blanck\\\" h-branding=\\\"accentColor\\\">{{\\\"s'inscrire\\\" | translate}}</a>-->\\n</span>\\n<div ng-if=\\\"vm.newStyle\\\" class=\\\"pull-right login-control-menu\\\" dropdown keyboard-nav>\\n   <a role=\\\"button\\\" class=\\\"top-bar__btn triggerButton\\\" data-toggle=\\\"dropdown\\\" dropdown-toggle></a>  \\n   <a ng-click=\\\"vm.displayMenu()\\\" role=\\\"button\\\" class=\\\"top-bar__btn\\\" data-toggle=\\\"dropdown\\\" dropdown-toggle title=\\\"{{vm.auth.username}}\\\">\\n      <i class=\\\"h-icon-account\\\" ng-if=\\\"vm.auth.status === 'logged-in'\\\"></i><i class=\\\"h-icon-arrow-drop-down top-bar__dropdown-arrow\\\"></i>  \\n   </a>\\n   <ul class=\\\"dropdown-menu pull-right logMenu\\\" role=\\\"menu\\\">\\n      <li class=\\\"dropdown-menu__row\\\" ng-if=\\\"vm.auth.status === 'logged-in'\\\">      \\n      <span ng-if=\\\"!vm.shouldEnableProfileButton()\\\" class=\\\"dropdown-menu__link dropdown-menu__link--disabled js-user-profile-btn is-disabled\\\"> \\n      {{vm.auth.displayName}}\\n      </span>      \\n      <a ng-if=\\\"vm.shouldEnableProfileButton()\\\" ng-click=\\\"vm.showProfile()\\\" class=\\\"dropdown-menu__link js-user-profile-btn is-enabled\\\" title=\\\"Voir toutes vos annotations\\\" target=\\\"_blank\\\">{{vm.auth.displayName}}</a>    </li>\\n      <li class=\\\"dropdown-menu__row\\\" ng-if=\\\"vm.auth.status === 'logged-in' && !vm.isThirdPartyUser()\\\"> \\n        <a class=\\\"dropdown-menu__link js-account-settings-btn\\\" href=\\\"{{vm.serviceUrl('account.settings')}}\\\" target=\\\"_blank\\\">{{'paramtres' | translate}}</a>   \\n      </li>\\n      <li class=\\\"dropdown-menu__row\\\"> \\n        <a class=\\\"dropdown-menu__link js-help-btn\\\" ng-click=\\\"vm.onShowHelpPanel()\\\">{{'aide' | translate}}</a>   \\n      </li>\\n      <li class=\\\"dropdown-menu__row\\\" ng-if=\\\"vm.shouldShowLogOutButton()\\\">  \\n        <a class=\\\"dropdown-menu__link dropdown-menu__link--subtle js-log-out-btn\\\" href=\\\"\\\" ng-click=\\\"vm.onLogout()\\\">{{'se dconnecter' | translate}}</a>  \\n      </li>\\n   </ul>\\n</div>\\n<!-- Old controls -->\\n<span ng-if=\\\"!vm.newStyle && vm.auth.status === 'unknown'\\\"></span>\\n<span ng-if=\\\"!vm.newStyle && vm.auth.status === 'logged-out'\\\">  \\n  <a href=\\\"\\\" ng-click=\\\"vm.onLogin()\\\">{{'se connecter' | translate}}</a>\\n</span>\\n<div ng-if=\\\"!vm.newStyle\\\" class=\\\"pull-right login-control-menu\\\" dropdown  keyboard-nav>\\n   <span role=\\\"button\\\" data-toggle=\\\"dropdown\\\" dropdown-toggle>\\n      {{vm.auth.username}}<span class=\\\"provider\\\" ng-if=\\\"vm.auth.provider\\\">/{{vm.auth.provider}}</span><i class=\\\"h-icon-arrow-drop-down\\\"></i>  \\n   </span>\\n   <ul class=\\\"dropdown-menu pull-right\\\" role=\\\"menu\\\">\\n      <li class=\\\"dropdown-menu__row\\\" ng-if=\\\"vm.auth.status === 'logged-in'\\\">\\n       <a class=\\\"dropdown-menu__link\\\" href=\\\"{{vm.serviceUrl('account.settings')}}\\\" target=\\\"_blank\\\">{{'compte' | translate}}</a> \\n      </li>\\n      <li class=\\\"dropdown-menu__row\\\" >      \\n       <a class=\\\"dropdown-menu__link\\\" ng-click=\\\"vm.onShowHelpPanel()\\\">{{'aide' | translate}}</a>   \\n      </li>\\n      <li class=\\\"dropdown-menu__row\\\" ng-if=\\\"vm.auth.status === 'logged-in'\\\"> \\n       <a class=\\\"dropdown-menu__link\\\" href=\\\"{{vm.serviceUrl('user',{user: vm.auth.username})}}\\\" target=\\\"_blank\\\">{{'mes annotations' | translate}}</a>   \\n      </li>\\n      <li class=\\\"dropdown-menu__row\\\" ng-if=\\\"vm.auth.status === 'logged-in'\\\">   \\n       <a class=\\\"dropdown-menu__link\\\" href=\\\"\\\" ng-click=\\\"vm.onLogout()\\\">{{'se dconnecter' | translate}}</a>   \\n      </li>\\n   </ul>\\n</div>\";\n",
    "module.exports = \"<div ng-if=\\\"!vm.readOnly\\\" class=\\\"markdown-tools\\\" ng-class=\\\"vm.preview && 'disable'\\\">\\n  <span class=\\\"markdown-preview-toggle\\\">\\n    <a class=\\\"markdown-tools-badge h-icon-markdown\\\" href=\\\"https://help.github.com/articles/markdown-basics\\\" title=\\\"Analys comme Markdown\\\" target=\\\"_blank\\\"></a>\\n    <a href=\\\"\\\" class=\\\"markdown-tools-toggle\\\" ng-click=\\\"vm.togglePreview()\\\"\\n      ng-show=\\\"!vm.preview\\\">Aperu</a>\\n    <a href=\\\"\\\" class=\\\"markdown-tools-toggle\\\" ng-click=\\\"vm.togglePreview()\\\"\\n      ng-show=\\\"vm.preview\\\">crire</a>\\n  </span>\\n  <i class=\\\"h-icon-format-bold markdown-tools-button\\\" ng-click=\\\"vm.insertBold()\\\" title=\\\"Texte enhardi\\\"></i>\\n  <i class=\\\"h-icon-format-italic markdown-tools-button\\\" ng-click=\\\"vm.insertItalic()\\\" title=\\\"Mettre en italique le texte\\\"></i>\\n  <i class=\\\"h-icon-format-quote markdown-tools-button\\\" ng-click=\\\"vm.insertQuote()\\\" title=\\\"Texte de citation\\\"></i>\\n  <i class=\\\"h-icon-insert-link markdown-tools-button\\\" ng-click=\\\"vm.insertLink()\\\" title=\\\"Insrer un lien\\\"></i>\\n  <i class=\\\"h-icon-insert-photo markdown-tools-button\\\" ng-click=\\\"vm.insertIMG()\\\" title=\\\"Insrer une image\\\"></i>\\n  <i class=\\\"h-icon-functions markdown-tools-button\\\" ng-click=\\\"vm.insertMath()\\\" title=\\\"Insrer une notation mathmatique (LaTex est support)\\\"></i>\\n  <i class=\\\"h-icon-format-list-numbered markdown-tools-button\\\" ng-click=\\\"vm.insertNumList()\\\" title=\\\"Insrer une liste numrote\\\"></i>\\n  <i class=\\\"h-icon-format-list-bulleted markdown-tools-button\\\" ng-click=\\\"vm.insertList()\\\" title=\\\"Insrer une liste\\\"></i>\\n</div>\\n<textarea class=\\\"form-input js-markdown-input\\\"\\n          ng-show=\\\"vm.showEditor()\\\"\\n          ng-click=\\\"$event.stopPropagation()\\\"\\n          h-branding=\\\"annotationFontFamily\\\"></textarea>\\n<div class=\\\"markdown-body js-markdown-preview\\\"\\n     ng-class=\\\"(vm.preview && 'markdown-preview') || vm.customTextClass\\\"\\n     ng-dblclick=\\\"vm.togglePreview()\\\"\\n     ng-show=\\\"!vm.showEditor()\\\"\\n     h-branding=\\\"annotationFontFamily\\\"></div>\\n\";\n",
    "module.exports = \"<div class=\\\"moderation-banner\\\"\\n     ng-if=\\\"vm.isHiddenOrFlagged()\\\"\\n     ng-class=\\\"{'is-flagged': vm.flagCount() > 0,\\n                'is-hidden': vm.isHidden(),\\n                'is-reply': vm.isReply()}\\\">\\n  <span ng-if=\\\"vm.flagCount() > 0 && !vm.isHidden()\\\">\\n    Marqu pour rvision x{{ vm.flagCount() }}\\n  </span>\\n  <span ng-if=\\\"vm.isHidden()\\\">\\n    Cach des utilisateurs. Marqu x{{ vm.flagCount() }}\\n  </span>\\n  <span class=\\\"u-stretch\\\"></span>\\n  <button ng-if=\\\"!vm.isHidden()\\\"\\n          ng-click=\\\"vm.hideAnnotation()\\\"\\n          title=\\\"Hide this annotation from non-moderators\\\">\\n    Cacher\\n  </button>\\n  <button ng-if=\\\"vm.isHidden()\\\"\\n          ng-click=\\\"vm.unhideAnnotation()\\\"\\n          title=\\\"Make this annotation visible to everyone\\\">\\n    Afficher\\n  </button>\\n</div>\\n\";\n",
    "module.exports = \"<button class=\\\"new-note__create\\\" ng-click=\\\"vm.onNewNoteBtnClick()\\\" h-branding=\\\"ctaBackgroundColor\\\">\\n  + Nouvelle note\\n</button>\\n\";\n",
    "module.exports = \"<div dropdown=\\\"\\\" class=\\\"publish-annotation-btn\\\"  is-open=\\\"vm.showDropdown\\\" keyboard-nav>\\n   <dropdown-menu-btn    label=\\\"'poster ' | translate\\\"  on-click=\\\"vm.onSave()\\\" on-toggle-dropdown=\\\"vm.showDropdown = !vm.showDropdown\\\"  title=\\\"Publiez cette annotation sur {{vm.publishDestination()}}\\\" dropdown-menu-label=\\\"Change annotation sharing setting\\\" is-disabled=\\\"!vm.canPost\\\">  \\n   </dropdown-menu-btn>\\n   <div class=\\\"publish-annotation-btn__dropdown-container\\\">\\n      <ul class=\\\"dropdown-menu pull-center publishMenu group-list publish-annotation-btn__dropdown-menu\\\" role=\\\"menu\\\">\\n         <li class=\\\"dropdown-menu__row\\\" ng-click=\\\"vm.setPrivacy('shared')\\\">\\n            <div class=\\\"group-item\\\">\\n              <div class=\\\"group-icon-container\\\">           \\n                <i class=\\\"small\\\" ng-class=\\\"'h-icon-' + vm.groupType()\\\"></i>     \\n              </div>\\n              <div class=\\\"group-details\\\">\\n              <div class=\\\"group-name-container\\\">          \\n                <a href=\\\"\\\" class=\\\"group-name-link\\\" ng-bind=\\\"vm.group.name\\\"></a>         \\n              </div>\\n               </div>\\n            </div>\\n         </li>\\n         <!-- <li class=\\\"dropdown-menu__row\\\" ng-click=\\\"vm.setPrivacy('private')\\\"> <div class=\\\"group-item\\\"><div class=\\\"group-icon-container\\\"><i class=\\\"small h-icon-lock\\\"></i></div><div class=\\\"group-details\\\"><div class=\\\"group-name-container\\\"> <a href=\\\"\\\" class=\\\"group-name-link\\\" ng-bind=\\\"vm.privateLabel | translate\\\"></a></div></div> </div></li> -->    \\n      </ul>\\n   </div>\\n</div>\\n<button class=\\\"publish-annotation-cancel-btn\\\" style=\\\"color:white;background-color:red;border:0;\\\" ng-click=\\\"vm.onCancel()\\\" title=\\\"Annuler les modifications apportes  cette annotation\\\"        >\\n  <i class=\\\"h-icon-cancel-outline publish-annotation-cancel-btn__icon btn-icon\\\"></i> {{'annuler' | translate}}\\n</button>\";\n",
    "module.exports = \"<form class=\\\"simple-search-form\\\"\\n      name=\\\"searchForm\\\"\\n      ng-class=\\\"!vm.query && 'simple-search-inactive'\\\">\\n  <input class=\\\"simple-search-input\\\"\\n         type=\\\"text\\\"\\n         name=\\\"query\\\"\\n         placeholder=\\\"{{vm.loading && 'Chargement' || 'chercher' | translate}}\\\"\\n         ng-disabled=\\\"vm.loading\\\"\\n         ng-class=\\\"vm.inputClasses()\\\"/>\\n  <button type=\\\"button\\\" class=\\\"simple-search-icon top-bar__btn\\\" ng-hide=\\\"vm.loading\\\">\\n    <i class=\\\"h-icon-search\\\"></i>\\n  </button>\\n  <button type=\\\"button\\\" class=\\\"simple-search-icon btn btn-clean\\\" ng-show=\\\"vm.loading\\\" disabled>\\n    <span class=\\\"btn-icon\\\"><span class=\\\"spinner\\\"></span></span>\\n  </button>\\n\\n</form>\\n\";\n",
    "module.exports = \"<div class=\\\"search-status-bar\\\" ng-if=\\\"vm.filterActive\\\">\\n  <button class=\\\"primary-action-btn primary-action-btn--short\\\"\\n          ng-click=\\\"vm.onClearSelection()\\\"\\n          title=\\\"Effacer le filtre de recherche et afficher toutes les annotations\\\"\\n  >\\n    <i class=\\\"primary-action-btn__icon h-icon-close\\\"></i> Effacer la recherche\\n  </button>\\n  <span ng-pluralize\\n           count=\\\"vm.filterMatchCount\\\"\\n           when=\\\"{'0': 'Aucun rsultat pour {{vm.searchQuery}}',\\n                  'one': '1 rsultat de la recherche',\\n                  'other': '{} Rsultats de la recherche'}\\\"></span>\\n</div>\\n<div class=\\\"search-status-bar\\\" ng-if=\\\"!vm.filterActive && vm.selectionCount > 0\\\">\\n  <button class=\\\"primary-action-btn primary-action-btn--short\\\"\\n          ng-click=\\\"vm.onClearSelection()\\\"\\n          title=\\\"Effacer la slection et afficher toutes les annotations\\\">\\n    <span ng-if=\\\"!vm.selectedTab || vm.selectedTab === vm.TAB_ORPHANS\\\">\\n      Afficher toutes les annotations et notes\\n    </span>\\n    <span ng-if=\\\"vm.selectedTab === vm.TAB_ANNOTATIONS\\\">\\n      Afficher toutes les annotations\\n      <span ng-if=\\\"vm.totalAnnotations > 1\\\">\\n        ({{vm.totalAnnotations}})\\n      </span>\\n    </span>\\n    <span ng-if=\\\"vm.selectedTab === vm.TAB_NOTES\\\">\\n      Afficher toutes les notes\\n      <span ng-if=\\\"vm.totalNotes > 1\\\">\\n        ({{vm.totalNotes}})\\n      </span>\\n    </span>\\n  </button>\\n\\n</div>\\n\";\n",
    "module.exports = \"<!-- Tabbed display of annotations and notes. -->\\n<div class=\\\"selection-tabs\\\"\\n  ng-class=\\\"{'selection-tabs--theme-clean' : vm.isThemeClean }\\\" ng-init=\\\"vm.selectTab(vm.TAB_NOTES)\\\">\\n  <!--<a class=\\\"selection-tabs__type\\\"\\n     href=\\\"#\\\"\\n     ng-class=\\\"{'is-selected': vm.selectedTab === vm.TAB_ANNOTATIONS}\\\"\\n     h-on-touch=\\\"vm.selectTab(vm.TAB_ANNOTATIONS)\\\">\\n    Annotations\\n    <span class=\\\"selection-tabs__count\\\"\\n      ng-if=\\\"vm.totalAnnotations > 0 && !vm.isWaitingToAnchorAnnotations\\\">\\n      {{ vm.totalAnnotations }}\\n    </span>\\n  </a>-->\\n  <!--<a class=\\\"selection-tabs__type\\\"\\n     href=\\\"#\\\"\\n     ng-class=\\\"{'is-selected': vm.selectedTab === vm.TAB_NOTES}\\\"\\n     h-on-touch=\\\"vm.selectTab(vm.TAB_NOTES)\\\">\\n    Page Notes\\n    <span class=\\\"selection-tabs__count\\\"\\n      ng-if=\\\"vm.totalNotes > 0 && !vm.isWaitingToAnchorAnnotations\\\">\\n      {{ vm.totalNotes }}\\n    </span>\\n  </a>-->\\n\\n  <!--<a class=\\\"selection-tabs__type selection-tabs__type--orphan\\\"\\n    ng-if=\\\"vm.totalOrphans > 0\\\"\\n    href=\\\"#\\\"\\n    ng-class=\\\"{'is-selected': vm.selectedTab === vm.TAB_ORPHANS}\\\"\\n    h-on-touch=\\\"vm.selectTab(vm.TAB_ORPHANS)\\\">\\n    Orphans\\n    <span class=\\\"selection-tabs__count\\\"\\n      ng-if=\\\"vm.totalOrphans > 0 && !vm.isWaitingToAnchorAnnotations\\\">\\n      {{ vm.totalOrphans }}\\n    </span>\\n  </a>-->\\n\\n  <ul>\\n   <li style=\\\"color: #000000;\\\">{{'interet' | translate}}: <b style=\\\"color: #f57c13;\\\">{{ vm.totalRates }}/5</b></li>\\n   <li style=\\\"color: #000000;\\\">{{'complexite' | translate}}: <b style=\\\"color: #f57c13;\\\">{{ vm.totalComplexite }}</b></li>\\n   <li style=\\\"color: #000000;\\\">{{'fraicheur' | translate}}: <b style=\\\"color: #f57c13;\\\">{{ vm.totalFraicheur }}</b></li>\\n   <li style=\\\"color: #000000;\\\">{{'type' | translate}}: <b style=\\\"color: #f57c13;\\\">{{ vm.totalTypes }}</b></li>\\n  </ul>\\n\\n</div>\\n\\n<new-note-btn\\n  ng-if=\\\"vm.selectedTab === vm.TAB_NOTES && vm.enableExperimentalNewNoteButton\\\">\\n</new-note-btn>\\n<div ng-if=\\\"!vm.isLoading()\\\" class=\\\"selection-tabs__empty-message\\\">\\n  <div ng-if=\\\"vm.showNotesUnavailableMessage()\\\"  class=\\\"annotation-unavailable-message\\\">\\n    <p class=\\\"annotation-unavailable-message__label\\\">\\n      {{\\\"il n'y a pas de notes de page dans ce groupe.\\\" | translate}}\\n      <br />\\n      <div ng-if=\\\"!vm.enableExperimentalNewNoteButton && !vm.showSidebarTutorial()\\\" class=\\\"annotation-unavailable-message__tutorial\\\">\\n        {{'crez-en un en cliquant sur le' | translate}}\\n        <i class=\\\"help-icon h-icon-note\\\"></i>\\n        {{'bouton' | translate}}.\\n      </div>\\n    </p>\\n  </div>\\n  <div ng-if=\\\"vm.showAnnotationsUnavailableMessage()\\\"  class=\\\"annotation-unavailable-message\\\">\\n    <p class=\\\"annotation-unavailable-message__label\\\">\\n      {{\\\"il n'y a pas de notes de page dans ce groupe.\\\" | translate}}\\n      <br />\\n      <div ng-if=\\\"!vm.showSidebarTutorial()\\\" class=\\\"annotation-unavailable-message__tutorial\\\">\\n        {{'crez-en un en slectionnant du texte et en cliquant sur le' | translate}}\\n        <i class=\\\"help-icon h-icon-annotate\\\"></i> {{'bouton' | translate}}.\\n      </div>\\n    </p>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"sheet\\\">\\n  <i class=\\\"close h-icon-close\\\"\\n     role=\\\"button\\\"\\n     title=\\\"Fermer\\\"\\n     ng-click=\\\"vm.onClose()\\\"></i>\\n  <div class=\\\"form-vertical\\\">\\n    <ul class=\\\"nav nav-tabs\\\">\\n      <li class=\\\"active\\\"><a href=\\\"\\\">Partagez</a></li>\\n    </ul>\\n    <div class=\\\"tab-content\\\">\\n      <p>Partagez le lien ci-dessous pour montrer  quiconque ces annotations et invitez-les  contribuer.</p>\\n      <p><input class=\\\"js-via form-input\\\"\\n          type=\\\"text\\\"\\n          ng-value=\\\"vm.viaPageLink\\\"\\n          readonly /></p>\\n      <p class=\\\"share-link-icons\\\">\\n      <a href=\\\"https://twitter.com/intent/tweet?url={{vm.viaPageLink | urlEncode}}&hashtags=annotated\\\"\\n         target=\\\"_blank\\\"\\n         title=\\\"Tweet lien\\\"\\n         class=\\\"share-link-icon h-icon-twitter\\\"\\n         ng-click=\\\"onShareClick('twitter')\\\"></a>\\n      <a href=\\\"https://www.facebook.com/sharer/sharer.php?u={{vm.viaPageLink | urlEncode}}\\\"\\n         target=\\\"_blank\\\"\\n         title=\\\"Partager sur Facebook\\\"\\n         class=\\\"share-link-icon h-icon-facebook\\\"\\n         ng-click=\\\"onShareClick('facebook')\\\"></a>\\n      <a href=\\\"https://plus.google.com/share?url={{vm.viaPageLink | urlEncode}}\\\"\\n         target=\\\"_blank\\\"\\n         title=\\\"Publier sur Google Plus\\\"\\n         class=\\\"share-link-icon h-icon-google-plus\\\"\\n         ng-click=\\\"onShareClick('googlePlus')\\\"></a>\\n      <a href=\\\"mailto:?subject=Let's%20Annotate&amp;body={{vm.viaPageLink}}\\\"\\n         target=\\\"_blank\\\"\\n         title=\\\"Partager par email\\\"\\n         class=\\\"share-link-icon h-icon-mail\\\"\\n         ng-click=\\\"onShareClick('email')\\\"></a>\\n      <a href=\\\"#\\\" title=\\\"{{'Partager sur Plazza' | translate}}\\\" ng-click=\\\"vm.onSharePlazza()\\\" annotation=\\\"vm.annotation\\\"><img src=\\\"http://10.241.109.147/Decoupes/plazza+logo+HD.png\\\" style=\\\"width:35px;height:25px;\\\"/></a>\\n     \\n      </p>\\n    </div>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<selection-tabs\\n  ng-if=\\\"!vm.search.query() && vm.selectedAnnotationCount() === 0\\\"\\n  is-waiting-to-anchor-annotations=\\\"vm.waitingToAnchorAnnotations\\\"\\n  is-loading=\\\"vm.isLoading\\\"\\n  selected-tab=\\\"vm.selectedTab\\\"\\n  total-complexite=\\\"vm.totalComplexite\\\"\\n  total-fraicheur=\\\"vm.totalFraicheur\\\"\\n  total-types=\\\"vm.totalTypes\\\"\\n  total-rates=\\\"vm.totalRates\\\"\\n  total-annotations=\\\"vm.totalAnnotations\\\"\\n  total-notes=\\\"vm.totalNotes\\\"\\n  total-orphans=\\\"vm.totalOrphans\\\">\\n</selection-tabs>\\n\\n<search-status-bar\\n  ng-show=\\\"!vm.isLoading()\\\"\\n  filter-active=\\\"!!vm.search.query()\\\"\\n  filter-match-count=\\\"vm.visibleCount()\\\"\\n  on-clear-selection=\\\"vm.clearSelection()\\\"\\n  search-query=\\\"vm.search ? vm.search.query : ''\\\"\\n  selection-count=\\\"vm.selectedAnnotationCount()\\\"\\n  total-count=\\\"vm.topLevelThreadCount()\\\"\\n  selected-tab=\\\"vm.selectedTab\\\"\\n  total-annotations=\\\"vm.totalAnnotations\\\"\\n  total-notes=\\\"vm.totalNotes\\\">\\n</search-status-bar>\\n\\n<div class=\\\"annotation-unavailable-message\\\"\\n    ng-if=\\\"vm.selectedAnnotationUnavailable()\\\">\\n  <div class=\\\"annotation-unavailable-message__icon\\\"></div>\\n  <p class=\\\"annotation-unavailable-message__label\\\">\\n    <span ng-if=\\\"vm.auth.status === 'logged-out'\\\">\\n      Cette annotation n'est pas disponible.\\n      <br>\\n      Vous devrez peut-tre\\n      <a class=\\\"loggedout-message__link\\\" href=\\\"\\\" ng-click=\\\"vm.login()\\\">s'identifier</a>\\n      voir a.\\n    </span>\\n    <span ng-if=\\\"vm.auth.status === 'logged-in'\\\">\\n     Vous n'tes pas autoris  afficher cette annotation.\\n    </span>\\n  </p>\\n</div>\\n<thread-list\\n  on-change-collapsed=\\\"vm.setCollapsed(id, collapsed)\\\"\\n  on-clear-selection=\\\"vm.clearSelection()\\\"\\n  on-focus=\\\"vm.focus(annotation)\\\"\\n  on-force-visible=\\\"vm.forceVisible(thread)\\\"\\n  on-select=\\\"vm.scrollTo(annotation)\\\"\\n  show-document-info=\\\"false\\\"\\n  thread=\\\"vm.rootThread\\\">\\n</thread-list>\\n\\n<loggedout-message ng-if=\\\"vm.shouldShowLoggedOutMessage()\\\" on-login=\\\"vm.login()\\\">\\n</loggedout-message>\\n\";\n",
    "module.exports = \"<div class=\\\"sheet\\\" ng-if=\\\"vm.showSidebarTutorial() &&  !vm.isThemeClean\\\">\\n  <i class=\\\"close h-icon-close\\\" role=\\\"button\\\" title=\\\"Fermer\\\"\\n     ng-click=\\\"vm.dismiss()\\\"></i>\\n  <h1 class=\\\"sidebar-tutorial__header\\\">Comment commencer</h1>\\n  <ol class=\\\"sidebar-tutorial__list\\\">\\n    <li class=\\\"sidebar-tutorial__list-item\\\">\\n      <p class=\\\"sidebar-tutorial__list-item-content\\\">\\n        Pour crer une annotation, slectionnez un texte et cliquez sur\\n        <i class=\\\"h-icon-annotate\\\"></i>&nbsp;bouton.\\n      </p>\\n    </li>\\n    <li class=\\\"sidebar-tutorial__list-item\\\">\\n      <p class=\\\"sidebar-tutorial__list-item-content\\\">\\n        Pour ajouter une note  la page que vous consultez, cliquez sur\\n        <i class=\\\"h-icon-note\\\"></i>&nbsp;bouton.\\n      </p>\\n    </li>\\n    <li class=\\\"sidebar-tutorial__list-item\\\">\\n      <p class=\\\"sidebar-tutorial__list-item-content\\\">\\n        Pour crer une surbrillance, slectionnez un texte et cliquez sur \\n        <i class=\\\"h-icon-highlight\\\"></i>&nbsp;button.\\n      </p>\\n    </li>\\n    <li class=\\\"sidebar-tutorial__list-item\\\">\\n      <p class=\\\"sidebar-tutorial__list-item-content\\\">\\n        Pour rpondre  une annotation, cliquez sur le\\n        <i class=\\\"h-icon-annotation-reply\\\"></i>&nbsp;<strong>Rpondre</strong>&nbsp;lien.\\n      </p>\\n    </li>\\n    <li class=\\\"sidebar-tutorial__list-item\\\">\\n      <p class=\\\"sidebar-tutorial__list-item-content\\\">\\n        Pour partager une page annote, cliquez sur\\n        <i class=\\\"h-icon-annotation-share\\\"></i>&nbsp;bouton en haut.\\n      </p>\\n    </li>\\n    <li class=\\\"sidebar-tutorial__list-item\\\">\\n      <p class=\\\"sidebar-tutorial__list-item-content\\\">\\n        Pour crer un groupe priv, slectionnez <strong>Publique</strong>,\\n        ouvrez la liste droulante, cliquez sur&nbsp;<strong>+&nbsp;Nouveau&nbsp;groupe</strong>.\\n      </p>\\n    </li>\\n  </ol>\\n</div>\\n<div class=\\\"sheet sheet--is-theme-clean\\\" ng-if=\\\"vm.showSidebarTutorial() && vm.isThemeClean\\\">\\n  <i class=\\\"close h-icon-close\\\" role=\\\"button\\\" title=\\\"Fermer\\\"\\n     ng-click=\\\"vm.dismiss()\\\"></i>\\n  <h1 class=\\\"sidebar-tutorial__header sidebar-tutorial__header--is-theme-clean\\\">\\n    <i class=\\\"h-icon-annotate sidebar-tutorial__header-annotate\\\" h-branding=\\\"accentColor\\\"></i>\\n    Commencer  annoter\\n  </h1>\\n  <ol class=\\\"sidebar-tutorial__list\\\">\\n    <li class=\\\"sidebar-tutorial__list-item sidebar-tutorial__list-item--is-theme-clean\\\">\\n      <div class=\\\"sidebar-tutorial__list-item-content\\\">\\n        Slectionnez un texte \\n          <span class=\\\"sidebar-tutorial__list-item-annotate\\\">annotater</span>\\n          <svg-icon class=\\\"sidebar-tutorial__list-item-cursor\\\" name=\\\"'cursor'\\\"></svg-icon>\\n        ou surligner.\\n      </div>\\n    </li>\\n    <li class=\\\"sidebar-tutorial__list-item sidebar-tutorial__list-item--is-theme-clean\\\">\\n      <div class=\\\"sidebar-tutorial__list-item-content sidebar-tutorial__list-item-content--is-theme-clean\\\">\\n        Crer des notes au niveau de la page\\n        <span class=\\\"sidebar-tutorial__list-item-new-note-btn\\\" h-branding=\\\"ctaBackgroundColor\\\">\\n          + Nouvelle note\\n        </span>\\n      </div>\\n    </li>\\n    <li class=\\\"sidebar-tutorial__list-item sidebar-tutorial__list-item--is-theme-clean\\\">\\n      <div class=\\\"sidebar-tutorial__list-item-content\\\">\\n        Afficher les annotations dans votre profil\\n        <i class=\\\"h-icon-account sidebar-tutorial__list-item-profile\\\"></i>\\n        <i class=\\\"h-icon-arrow-drop-down sidebar-tutorial__list-item-drop-down\\\"></i>\\n      </div>\\n    </li>\\n  </ol>\\n</div>\\n\";\n",
    "module.exports = \"<span dropdown keyboard-nav>\\n  <button ng-click=\\\"vm.displayMenu()\\\" type=\\\"button\\\" class=\\\"top-bar__btn\\\" dropdown-toggle title=\\\"Trier par {{vm.sortKey}}\\\">   \\n    <i class=\\\"h-icon-sort\\\"></i>  \\n  </button>  \\n   <div class=\\\"dropdown-menu__top-arrow\\\"></div>\\n   <ul class=\\\"dropdown-menu pull-right sortMenu\\\" role=\\\"menu\\\">\\n      <li class=\\\"dropdown-menu__row\\\" ng-repeat=\\\"key in vm.sortKeysAvailable\\\" ng-click=\\\"vm.onChangeSortKey({sortKey: key})\\\" >\\n        <span class=\\\"dropdown-menu-radio\\\" ng-class=\\\"{'is-selected' : vm.sortKey === key}\\\" ></span>\\n        <a class=\\\"dropdown-menu__link\\\" href=\\\"\\\">{{key | translate}}</a>\\n      </li>\\n   </ul>\\n</span>\\n\";\n",
    "module.exports = \"<span window-scroll=\\\"vm.loadMore(20)\\\">\\n  <thread-list\\n    on-change-collapsed=\\\"vm.setCollapsed(id, collapsed)\\\"\\n    on-force-visible=\\\"vm.forceVisible(thread)\\\"\\n    show-document-info=\\\"true\\\"\\n    thread=\\\"vm.rootThread\\\">\\n  </thread-list>\\n</span>\\n\";\n",
    "module.exports = \"<tags-input ng-model=\\\"vm.tagList\\\"\\n  name=\\\"tags\\\"\\n  class=\\\"tags\\\"\\n  placeholder=\\\"Add tags\\\"\\n  min-length=\\\"1\\\"\\n  replace-spaces-with-dashes=\\\"false\\\"\\n  enable-editing-last-tag=\\\"true\\\"\\n  on-tag-added=\\\"vm.onTagsChanged()\\\"\\n  on-tag-removed=\\\"vm.onTagsChanged()\\\">\\n  <auto-complete source=\\\"vm.autocomplete($query)\\\"\\n    min-length=\\\"1\\\"\\n    max-results-to-show=\\\"10\\\"></auto-complete>\\n</tags-input>\\n\";\n",
    "module.exports = \"<ul class=\\\"thread-list\\\">\\n  <li class=\\\"thread-list__spacer\\\"\\n      ng-style=\\\"{height: vm.virtualThreadList.offscreenUpperHeight}\\\"></li>\\n  <li ng-repeat=\\\"child in vm.virtualThreadList.visibleThreads track by child.id\\\" class=\\\"annoThread\\\">\\n    <div id=\\\"{{child.id}}\\\"\\n        class=\\\"thread-list__card\\\"\\n        ng-mouseenter=\\\"vm.onFocus({annotation: child.annotation})\\\"\\n        ng-class=\\\"{'thread-list__card--theme-clean' : vm.isThemeClean }\\\"\\n        ng-click=\\\"vm.onSelect({annotation: child.annotation})\\\"\\n        ng-mouseleave=\\\"vm.onFocus({annotation: null})\\\">\\n        <annotation-thread\\n          thread=\\\"child\\\"\\n          show-document-info=\\\"vm.showDocumentInfo\\\"\\n          on-change-collapsed=\\\"vm.onChangeCollapsed({id: id, collapsed: collapsed})\\\"\\n          on-force-visible=\\\"vm.onForceVisible({thread: thread})\\\">\\n        </annotation-thread>\\n    </div>\\n    <hr ng-if=\\\"vm.isThemeClean\\\"\\n        class=\\\"thread-list__separator--theme-clean\\\" />\\n  </li>\\n  <li id=\\\"{{child.id}}\\\"\\n      ng-show=\\\"false\\\"\\n      ng-repeat=\\\"child in vm.virtualThreadList.invisibleThreads track by child.id\\\">\\n      <annotation-thread thread=\\\"child\\\" />\\n  </li>\\n  <li class=\\\"thread-list__spacer\\\"\\n      ng-style=\\\"{height: vm.virtualThreadList.offscreenLowerHeight}\\\"></li>\\n</ul>\\n\";\n",
    "module.exports = \"<div ng-switch=\\\"vm.href\\\">\\n  <span ng-switch-when=\\\"\\\"\\n        class=\\\"{{ vm.className }}\\\"\\n        title=\\\"{{ vm.absoluteTimestamp }}\\\">\\n    {{ vm.relativeTimestamp }}\\n  </span>\\n  <a ng-switch-default\\n     class=\\\"{{ vm.className }}\\\"\\n     target=\\\"_blank\\\"\\n     title=\\\"{{ vm.absoluteTimestamp }}\\\"\\n     href=\\\"{{ vm.href }}\\\">\\n     {{ vm.relativeTimestamp }}\\n  </a>\\n</div>\\n\";\n",
    "module.exports = \"<!-- top bar for the sidebar and the stream.\\n!-->\\n<div class=\\\"top-bar\\\"\\n  ng-class=\\\"{'top-bar--theme-clean' : vm.isThemeClean }\\\">\\n  <!-- Legacy design for top bar, as used in the stream !-->\\n  <div class=\\\"top-bar__inner content\\\" ng-if=\\\"::!vm.isSidebar\\\">\\n    <search-input\\n      class=\\\"search-input\\\"\\n      query=\\\"vm.searchController.query()\\\"\\n      on-search=\\\"vm.searchController.update($query)\\\"\\n      always-expanded=\\\"true\\\">\\n    </search-input>\\n    <div class=\\\"top-bar__expander\\\"></div>\\n    <login-control\\n      auth=\\\"vm.auth\\\"\\n      new-style=\\\"false\\\"\\n      on-show-help-panel=\\\"vm.onShowHelpPanel()\\\"\\n      on-login=\\\"vm.onLogin()\\\"\\n      on-logout=\\\"vm.onLogout()\\\">\\n    </login-control>\\n  </div>\\n  <!-- New design for the top bar, as used in the sidebar.\\n\\n       The inner div is styled with 'content' to center it in\\n       the stream view.\\n  !-->\\n  <div class=\\\"top-bar__inner content\\\" ng-if=\\\"::vm.isSidebar\\\">\\n    <group-list class=\\\"group-list\\\" auth=\\\"vm.auth\\\"></group-list>\\n    <div class=\\\"top-bar__expander\\\"></div>\\n    <a class=\\\"top-bar__apply-update-btn\\\"\\n       ng-if=\\\"vm.pendingUpdateCount > 0\\\"\\n       ng-click=\\\"vm.onApplyPendingUpdates()\\\"\\n       h-tooltip\\n       tooltip-direction=\\\"up\\\"\\n       aria-label=\\\"Show {{vm.pendingUpdateCount}} new/updated annotation(s)\\\">\\n       <svg-icon class=\\\"top-bar__apply-icon\\\" name=\\\"'refresh'\\\"></svg-icon>\\n    </a>\\n    <search-input\\n      class=\\\"search-input\\\"\\n      query=\\\"vm.searchController.query()\\\"\\n      on-search=\\\"vm.searchController.update($query)\\\"\\n      title=\\\"Filtrer la liste d'annotations\\\">\\n    </search-input>\\n    <sort-dropdown\\n      sort-keys-available=\\\"vm.sortKeysAvailable\\\"\\n      sort-key=\\\"vm.sortKey\\\"\\n      on-change-sort-key=\\\"vm.onChangeSortKey({sortKey: sortKey})\\\">\\n    </sort-dropdown>\\n    <a class=\\\"top-bar__btn\\\"\\n       ng-click=\\\"vm.onSharePage()\\\"\\n       ng-if=\\\"vm.showSharePageButton()\\\"\\n       title=\\\"Partagez cette page\\\">\\n      <i class=\\\"h-icon-annotation-share\\\"></i>\\n    </a>\\n    <login-control\\n      class=\\\"login-control\\\"\\n      auth=\\\"vm.auth\\\"\\n      new-style=\\\"true\\\"\\n      on-show-help-panel=\\\"vm.onShowHelpPanel()\\\"\\n      on-login=\\\"vm.onLogin()\\\"\\n      on-logout=\\\"vm.onLogout()\\\"\\n      on-sign-up=\\\"vm.onSignUp()\\\">\\n    </login-control>\\n  </div>\\n</div>\\n\";\n",
    "'use strict';\n\nvar minute = 60;\nvar hour = minute * 60;\n\nfunction lessThanThirtySecondsAgo(date, now) {\n  return ((now - date) < 30 * 1000);\n}\n\nfunction lessThanOneMinuteAgo(date, now) {\n  return ((now - date) < 60 * 1000);\n}\n\nfunction lessThanOneHourAgo(date, now) {\n  return ((now - date) < (60 * 60 * 1000));\n}\n\nfunction lessThanOneDayAgo(date, now) {\n  return ((now - date) < (24 * 60 * 60 * 1000));\n}\n\nfunction thisYear(date, now) {\n  return date.getFullYear() === now.getFullYear();\n}\n\nfunction delta(date, now) {\n  return Math.round((now - date) / 1000);\n}\n\nfunction nSec(date, now) {\n  return '{} secs'.replace('{}', Math.floor(delta(date, now)));\n}\n\nfunction nMin(date, now) {\n  var n = Math.floor(delta(date, now) / minute);\n  var template = '{} min';\n\n  if (n > 1) {\n    template = template + 's';\n  }\n\n  return template.replace('{}', n);\n}\n\nfunction nHr(date, now) {\n  var n = Math.floor(delta(date, now) / hour);\n  var template = '{} hr';\n\n  if (n > 1) {\n    template = template + 's';\n  }\n\n  return template.replace('{}', n);\n}\n\n// Cached DateTimeFormat instances,\n// because instantiating a DateTimeFormat is expensive.\nvar formatters = {};\n\n/**\n * Efficiently return `date` formatted with `options`.\n *\n * This is a wrapper for Intl.DateTimeFormat.format() that caches\n * DateTimeFormat instances because they're expensive to create.\n * Calling Date.toLocaleDateString() lots of times is also expensive in some\n * browsers as it appears to create a new formatter for each call.\n *\n * @returns {string}\n *\n */\nfunction format(date, options, Intl) {\n  // If the tests have passed in a mock Intl then use it, otherwise use the\n  // real one.\n  if (typeof Intl === 'undefined') {\n    Intl = window.Intl;\n  }\n\n  if (Intl && Intl.DateTimeFormat) {\n    var key = JSON.stringify(options);\n    var formatter = formatters[key];\n\n    if (!formatter) {\n      formatter = formatters[key] = new Intl.DateTimeFormat(undefined,\n                                                            options);\n    }\n\n    return formatter.format(date);\n  } else {\n    // IE < 11, Safari <= 9.0.\n    return date.toDateString();\n  }\n}\n\nfunction dayAndMonth(date, now, Intl) {\n  return format(date, {month: 'short', day: 'numeric'}, Intl);\n}\n\nfunction dayAndMonthAndYear(date, now, Intl) {\n  return format(date, {day: 'numeric', month: 'short', year: 'numeric'}, Intl);\n}\n\nvar BREAKPOINTS = [\n  {\n    test: lessThanThirtySecondsAgo,\n    format: function () {return 'Just now';},\n    nextUpdate: 1,\n  },\n  {\n    test: lessThanOneMinuteAgo,\n    format: nSec,\n    nextUpdate: 1,\n  },\n  {\n    test: lessThanOneHourAgo,\n    format: nMin,\n    nextUpdate: minute,\n  },\n  {\n    test: lessThanOneDayAgo,\n    format: nHr,\n    nextUpdate: hour,\n  },\n  {\n    test: thisYear,\n    format: dayAndMonth,\n    nextUpdate: null,\n  },\n  {\n    test: function () {return true;},\n    format: dayAndMonthAndYear,\n    nextUpdate: null,\n  },\n];\n\nfunction getBreakpoint(date, now) {\n\n  // Turn the given ISO 8601 string into a Date object.\n  date = new Date(date);\n\n  var breakpoint;\n  for (var i = 0; i < BREAKPOINTS.length; i++) {\n    breakpoint = BREAKPOINTS[i];\n    if (breakpoint.test(date, now)) {\n      return breakpoint;\n    }\n  }\n\n  return null;\n}\n\nfunction nextFuzzyUpdate(date) {\n  if (!date) {\n    return null;\n  }\n\n  var secs = getBreakpoint(date, new Date()).nextUpdate;\n\n  if (secs === null) {\n    return null;\n  }\n\n  // We don't want to refresh anything more often than 5 seconds\n  secs = Math.max(secs, 5);\n\n  // setTimeout limit is MAX_INT32=(2^31-1) (in ms),\n  // which is about 24.8 days. So we don't set up any timeouts\n  // longer than 24 days, that is, 2073600 seconds.\n  secs = Math.min(secs, 2073600);\n\n  return secs;\n}\n\n/**\n * Starts an interval whose frequency decays depending on the relative\n * age of 'date'.\n *\n * This can be used to refresh parts of a UI whose\n * update frequency depends on the age of a timestamp.\n *\n * @return {Function} A function that cancels the automatic refresh.\n */\nfunction decayingInterval(date, callback) {\n  var timer;\n  var update = function () {\n    var fuzzyUpdate = nextFuzzyUpdate(date);\n    if (fuzzyUpdate === null) {\n      return;\n    }\n    var nextUpdate = (1000 * fuzzyUpdate) + 500;\n    timer = setTimeout(function () {\n      callback(date);\n      update();\n    }, nextUpdate);\n  };\n  update();\n\n  return function () {\n    clearTimeout(timer);\n  };\n}\n\n/**\n * Formats a date as a string relative to the current date.\n *\n * @param {number} date - The absolute timestamp to format.\n * @return {string} A 'fuzzy' string describing the relative age of the date.\n */\nfunction toFuzzyString(date, Intl) {\n  if (!date) {\n    return '';\n  }\n  var now = new Date();\n\n  return getBreakpoint(date, now).format(new Date(date), now, Intl);\n}\n\nmodule.exports = {\n  decayingInterval: decayingInterval,\n  nextFuzzyUpdate: nextFuzzyUpdate,\n  toFuzzyString: toFuzzyString,\n};\n",
    "'use strict';\n\nmodule.exports.translate_en = {\n\t  \"se connecter\": \"Log in\",\n\t  \"s'inscrire\": \"Sign up\",\n\t  \"se dconnecter\": \"Logout\",\n\t  \"titre\": \"Title\",\n\t  \"complexite\": \"Complexity\",\n\t  \"fraicheur\": \"Freshness\",\n\t  \"type\": \"Content type\",\n\t  \"interet\": \"Interest\",\n\t  \"commentaire\": \"Comment\",\n\t  \"aide\": \"Help\",\n\t  \"paramtres\": \"Account settings\",\n\t  \"compte\": \"Account\",\n\t  \"mes annotations\": \"My Annotations\",\n\t  \"vous devez tre connect pour crer des annotations.\": \"You must be logged in to create annotations.\",\n\t  \"pas d'informations sur cette annotation\": \"No information for this annotation\",\n\t  \"sauvegarde\": \"Saving...\",\n\t  \"chercher\": \"Search\",\n\t  \"depose par\": \"Deposited by\",\n\t  \"en\": \"in\",\n\t  \"il n'y a pas de notes de page dans ce groupe.\": \"There are no page notes in this group.\",\n\t  \"crez-en un en cliquant sur le\" : \"Create one by clicking on\",\n\t  \"bouton\": \"button\",\n\t  \"crez-en un en slectionnant du texte et en cliquant sur le\": \"Create one by selecting text and clicking on the\",\n\t  \"poster \": \"Post to\",\n\t  \"annuler\": \"Cancel\",\n\t  \"modifier\": \"Edit\",\n\t  \"effacer\": \"Delete\",\n  \t  \"partager\": \"Share\",\n\t  \"rpondre\": \"Reply\",\n\t  \"moi uniquement\": \"Me Only\",\n\t  \"Position\": \"Position\",\n\t  \"Ancienne\": \"Oldest\",\n\t  \"Rcente\": \"Newest\",\n\t  \"Tweet lien\": \"Tweet link\",\n\t  \"Partager sur Facebook\": \"Share on Facebook\",\n\t  \"Publier sur Google Plus\": \"Share on Google Plus\",\n\t  \"Partager par email\": \"Share on email\",\n\t  \"Partager sur Plazza\": \"Share on Plazza\"\n};\n\nmodule.exports.translate_fr = {\n\t  \"se connecter\": \"Se connecter\",\n\t  \"s'inscrire\": \"S'inscrire\",\n\t  \"se dconnecter\": \"Se dconnecter\",\n\t  \"titre\": \"Titre\",\n\t  \"complexite\": \"Complexit\",\n\t  \"fraicheur\": \"Fraicheur\",\n\t  \"type\": \"Type de contenus\",\n\t  \"interet\": \"Intrt\",\n\t  \"commentaire\": \"Commentaire\",\n\t  \"aide\": \"Aide\",\n\t  \"paramtres\": \"Paramtres du compte\",\n\t  \"compte\": \"Compte\",\n\t  \"mes annotations\": \"Mes Annotations\",\n\t  \"vous devez tre connect pour crer des annotations.\": \"Vous devez tre connect pour crer des annotations.\",\n\t  \"pas d'informations sur cette annotation\": \"Pas d'informations sur cette annotation\",\n\t  \"sauvegarde\": \"Sauvegarde...\",\n\t  \"chercher\": \"Chercher\",\n\t  \"depose par\": \"Depose par\",\n\t  \"en\": \"en\",\n\t  \"il n'y a pas de notes de page dans ce groupe.\": \"Il n'y a pas de notes de page dans ce groupe.\",\n\t  \"crez-en un en cliquant sur le\" : \"Crez-en un en cliquant sur le\",\n\t  \"bouton\": \"bouton\",\n\t  \"crez-en un en slectionnant du texte et en cliquant sur le\": \"Crez-en un en slectionnant du texte et en cliquant sur le\",\n\t  \"poster \": \"Poster \",\n\t  \"annuler\": \"Annuler\",\n\t  \"modifier\": \"Modifier\",\n\t  \"effacer\": \"Effacer\",\n  \t  \"partager\": \"Partager\",\n\t  \"rpondre\": \"Rpondre\",\n\t  \"moi uniquement\": \"Moi Uniquement\",\n\t  \"Position\": \"Position\",\n\t  \"Ancienne\": \"Ancienne\",\n\t  \"Rcente\": \"Rcente\",\n\t  \"Tweet lien\": \"Tweet lien\",\n\t  \"Partager sur Facebook\": \"Partager sur Facebook\",\n\t  \"Publier sur Google Plus\": \"Publier sur Google Plus\",\n\t  \"Partager par email\": \"Partager par email\",\n\t  \"Partager sur Plazza\": \"Partager sur Plazza\"\n};\n",
    "'use strict';\n\n/**\n * uiConstants is a set of globally used constants across the application.\n */\n\nmodule.exports = {\n  TAB_ANNOTATIONS: 'annotation',\n  TAB_NOTES: 'note',\n  TAB_ORPHANS: 'orphan',\n};\n",
    "'use strict';\n\nvar unorm = require('unorm');\n\n/**\n * Unicode combining characters\n * from http://xregexp.com/addons/unicode/unicode-categories.js line:30\n */\nvar COMBINING_MARKS = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u08FE\\u0900-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C01-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C82\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D02\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1DC0-\\u1DE6\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]/g;\n\n// @ngInject\nfunction unicode() {\n  return {\n    normalize: str => unorm.nfkd(str),\n    fold: str => str.replace(COMBINING_MARKS, ''),\n  };\n}\n\nmodule.exports = unicode;\n",
    "'use strict';\n\n/**\n * Parses H account names of the form 'acct:<username>@<provider>'\n * into a {username, provider} object or null if the input does not\n * match the expected form.\n */\nfunction parseAccountID(user) {\n  if (!user) {\n    return null;\n  }\n  var match = user.match(/^acct:([^@]+)@(.+)/);\n  if (!match) {\n    return null;\n  }\n  return {\n    username: match[1],\n    provider: match[2],\n  };\n}\n\n/**\n * Returns the username part of an account ID or an empty string.\n */\nfunction username(user) {\n  var account = parseAccountID(user);\n  if (!account) {\n    return '';\n  }\n  return account.username;\n}\n\n/**\n * Returns true if the authority is of a 3rd party user.\n */\nfunction isThirdPartyUser(user, authDomain) {\n  var account = parseAccountID(user);\n\n  if (!account) {\n    return false;\n  }\n\n  return account.provider !== authDomain;\n}\n\nmodule.exports = {\n  isThirdPartyUser: isThirdPartyUser,\n  parseAccountID: parseAccountID,\n  username: username,\n};\n",
    "'use strict';\n\n/**\n * Return the number of elements in `ary` for which `predicate` returns true.\n *\n * @param {Array} ary\n * @param {Function} predicate\n */\nfunction countIf(ary, predicate) {\n  return ary.reduce(function (count, item) {\n    return predicate(item) ? count + 1 : count;\n  }, 0);\n}\n\n/**\n * Create a new array with the result of calling `mapFn` on every element in\n * `ary`.\n *\n * Only truthy values are included in the resulting array.\n *\n * @param {Array} ary\n * @param {Function} mapFn\n */\nfunction filterMap(ary, mapFn) {\n  return ary.reduce(function (newArray, item) {\n    var mapped = mapFn(item);\n    if (mapped) {\n      newArray.push(mapped);\n    }\n    return newArray;\n  }, []);\n}\n\n/**\n * Convert an array to a set represented as an object.\n *\n * @param {string[]} list - List of keys for the set.\n */\nfunction toSet(list) {\n  return list.reduce(function (set, key) {\n    set[key] = true;\n    return set;\n  }, {});\n}\n\nmodule.exports = {\n  countIf: countIf,\n  filterMap: filterMap,\n  toSet: toSet,\n};\n",
    "'use strict';\n\n/**\n * Prevent windows or tabs opened via links under `root` from accessing their\n * opening `Window`.\n *\n * This makes links with `target=\"blank\"` attributes act as if they also had\n * the `rel=\"noopener\"` [1] attribute set.\n *\n * In addition to preventing tab-jacking [2], this also enables multi-process\n * browsers to more easily use a new process for instances of Hypothesis in the\n * newly-opened tab and works around a bug in Chrome [3]\n *\n * [1] https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types#noopener\n * [2] https://mathiasbynens.github.io/rel-noopener/\n * [3] https://bugs.chromium.org/p/chromium/issues/detail?id=753314\n *\n * @param {Element} root - Root element\n */\nfunction disableOpenerForExternalLinks(root) {\n  root.addEventListener('click', event => {\n    if (event.target.tagName === 'A') {\n      var linkEl = event.target;\n      if (linkEl.target === '_blank') {\n        linkEl.rel = 'noopener';\n      }\n    }\n  });\n}\n\nmodule.exports = disableOpenerForExternalLinks;\n",
    "'use strict';\n\nfunction toPx(val) {\n  return val.toString() + 'px';\n}\n\n/**\n * Interface used by ExcerptOverflowMonitor to retrieve the state of the\n * <excerpt> and report when the state changes.\n *\n * interface Excerpt {\n *   getState(): State;\n *   contentHeight(): number | undefined;\n *   onOverflowChanged(): void;\n * }\n */\n\n/**\n * A helper for the <excerpt> component which handles determinination of the\n * overflow state and content styling given the current state of the component\n * and the height of its contents.\n *\n * When the state of the excerpt or its content changes, the component should\n * call check() to schedule an async update of the overflow state.\n *\n * @param {Excerpt} excerpt - Interface used to query the current state of the\n *        excerpt and notify it when the overflow state changes.\n * @param {(callback) => number} requestAnimationFrame -\n *        Function called to schedule an async recalculation of the overflow\n *        state.\n */\nfunction ExcerptOverflowMonitor(excerpt, requestAnimationFrame) {\n  var pendingUpdate = false;\n\n  // Last-calculated overflow state\n  var prevOverflowing;\n\n  function update() {\n    var state = excerpt.getState();\n\n    if (!pendingUpdate) {\n      return;\n    }\n\n    pendingUpdate = false;\n\n    var overflowing = false;\n    if (state.enabled) {\n      var hysteresisPx = state.overflowHysteresis || 0;\n      overflowing = excerpt.contentHeight() >\n        (state.collapsedHeight + hysteresisPx);\n    }\n    if (overflowing === prevOverflowing) {\n      return;\n    }\n\n    prevOverflowing = overflowing;\n    excerpt.onOverflowChanged(overflowing);\n  }\n\n  /**\n   * Schedule a deferred check of whether the content is collapsed.\n   */\n  function check() {\n    if (pendingUpdate) {\n      return;\n    }\n    pendingUpdate = true;\n    requestAnimationFrame(update);\n  }\n\n  /**\n   * Returns an object mapping CSS properties to values that should be applied\n   * to an excerpt's content element in order to truncate it based on the\n   * current overflow state.\n   */\n  function contentStyle() {\n    var state = excerpt.getState();\n    if (!state.enabled) {\n      return {};\n    }\n\n    var maxHeight = '';\n    if (prevOverflowing) {\n      if (state.collapse) {\n        maxHeight = toPx(state.collapsedHeight);\n      } else if (state.animate) {\n        // Animating the height change requires that the final\n        // height be specified exactly, rather than relying on\n        // auto height\n        maxHeight = toPx(excerpt.contentHeight());\n      }\n    } else if (typeof prevOverflowing === 'undefined' &&\n               state.collapse) {\n      // If the excerpt is collapsed but the overflowing state has not yet\n      // been computed then the exact max height is unknown, but it will be\n      // in the range [state.collapsedHeight, state.collapsedHeight +\n      // state.overflowHysteresis]\n      //\n      // Here we guess that the final content height is most likely to be\n      // either less than `collapsedHeight` or more than `collapsedHeight` +\n      // `overflowHysteresis`, in which case it will be truncated to\n      // `collapsedHeight`.\n      maxHeight = toPx(state.collapsedHeight);\n    }\n\n    return {\n      'max-height': maxHeight,\n    };\n  }\n\n  this.contentStyle = contentStyle;\n  this.check = check;\n}\n\nmodule.exports = ExcerptOverflowMonitor;\n",
    "'use strict';\n\nconst serviceConfig = require('../service-config');\n\n/**\n * Return `true` if the first configured service is a \"third-party\" service.\n *\n * Return `true` if the first custom annotation service configured in the\n * services array in the host page is a third-party service, `false` otherwise.\n *\n * If no custom annotation services are configured then return `false`.\n *\n * @param {Object} settings - the sidebar settings object\n *\n */\nfunction isThirdPartyService(settings) {\n  const service = serviceConfig(settings);\n\n  if (service === null) {\n    return false;\n  }\n\n  if (!service.hasOwnProperty('authority')) {\n    return false;\n  }\n\n  return (service.authority !== settings.authDomain);\n}\n\nmodule.exports = isThirdPartyService;\n",
    "'use strict';\n\n/**\n * A simple memoization function which caches the last result of\n * a single-argument function.\n *\n * The argument to the input function may be of any type and is compared\n * using reference equality.\n */\nfunction memoize(fn) {\n  if (fn.length !== 1) {\n    throw new Error('Memoize input must be a function of one argument');\n  }\n\n  var lastArg;\n  var lastResult;\n\n  return function (arg) {\n    if (arg === lastArg) {\n      return lastResult;\n    }\n    lastArg = arg;\n    lastResult = fn(arg);\n    return lastResult;\n  };\n}\n\nmodule.exports = memoize;\n",
    "'use strict';\n\nvar queryString = require('query-string');\n\nvar random = require('./random');\n\n/**\n * An object holding the details of an access token from the tokenUrl endpoint.\n * @typedef {Object} TokenInfo\n * @property {string} accessToken  - The access token itself.\n * @property {number} expiresAt    - The date when the timestamp will expire.\n * @property {string} refreshToken - The refresh token that can be used to\n *                                   get a new access token.\n */\n\n/**\n * Return a new TokenInfo object from the given tokenUrl endpoint response.\n * @param {Object} response - The HTTP response from a POST to the tokenUrl\n *                            endpoint (an Angular $http response object).\n * @returns {TokenInfo}\n */\nfunction tokenInfoFrom(response) {\n  var data = response.data;\n  return {\n    accessToken:  data.access_token,\n\n    // Set the expiry date to some time slightly before that implied by\n    // `expires_in` to account for the delay in the client receiving the\n    // response.\n    expiresAt: Date.now() + ((data.expires_in - 10) * 1000),\n\n    refreshToken: data.refresh_token,\n  };\n}\n\n/**\n * Generate a short random string suitable for use as the \"state\" param in\n * authorization requests.\n *\n * See https://tools.ietf.org/html/rfc6749#section-4.1.1.\n */\nfunction generateState() {\n  return random.generateHexString(16);\n}\n\n/**\n * OAuthClient configuration.\n *\n * @typedef {Object} Config\n * @property {string} clientId - OAuth client ID\n * @property {string} tokenEndpoint - OAuth token exchange/refresh endpoint\n * @property {string} authorizationEndpoint - OAuth authorization endpoint\n * @property {string} revokeEndpoint - RFC 7009 token revocation endpoint\n * @property {() => string} [generateState] - Authorization \"state\" parameter generator\n */\n\n/**\n * OAuthClient handles interaction with the annotation service's OAuth\n * endpoints.\n */\nclass OAuthClient {\n  /**\n   * Create a new OAuthClient\n   *\n   * @param {Object} $http - HTTP client\n   * @param {Config} config\n   */\n  constructor($http, config) {\n    this.$http = $http;\n    this.clientId='65f447f6-22f1-11e8-b7ea-3b8fad378121';\n    this.tokenEndpoint = config.tokenEndpoint;\n    this.authorizationEndpoint = config.authorizationEndpoint;\n    this.revokeEndpoint = config.revokeEndpoint;\n    // Test seam\n    this.generateState = config.generateState || generateState;\n  }\n\n  /**\n   * Exchange an authorization code for access and refresh tokens.\n   *\n   * @param {string} code\n   * @return {Promise<TokenInfo>}\n   */\n  exchangeAuthCode(code) {\n    var data = {\n      client_id: this.clientId,\n      grant_type: 'authorization_code',\n      code,\n    };\n    return this._formPost(this.tokenEndpoint, data).then((response) => {\n      if (response.status !== 200) {\n        throw new Error('Authorization code exchange failed');\n      }\n      return tokenInfoFrom(response);\n    });\n  }\n\n  /**\n   * Exchange a grant token for access and refresh tokens.\n   *\n   * See https://tools.ietf.org/html/rfc7523#section-4\n   *\n   * @param {string} token\n   * @return {Promise<TokenInfo>}\n   */\n  exchangeGrantToken(token) {\n    var data = {\n      grant_type: 'urn:ietf:params:oauth:grant-type:jwt-bearer',\n      assertion: token,\n    };\n    return this._formPost(this.tokenEndpoint, data).then(response => {\n      if (response.status !== 200) {\n        throw new Error('Failed to retrieve access token');\n      }\n      return tokenInfoFrom(response);\n    });\n  }\n\n  /**\n   * Refresh an access and refresh token pair.\n   *\n   * See https://tools.ietf.org/html/rfc6749#section-6\n   *\n   * @param {string} refreshToken\n   * @return {Promise<TokenInfo>}\n   */\n  refreshToken(refreshToken) {\n    var data = { grant_type: 'refresh_token', refresh_token: refreshToken };\n    return this._formPost(this.tokenEndpoint, data).then((response) => {\n      if (response.status !== 200) {\n        throw new Error('Failed to refresh access token');\n      }\n      return tokenInfoFrom(response);\n    });\n  }\n\n  /**\n   * Revoke an access and refresh token pair.\n   *\n   * @param {string} accessToken\n   * @return {Promise}\n   */\n  revokeToken(accessToken) {\n    return this._formPost(this.revokeEndpoint, { token: accessToken });\n  }\n\n  /**\n   * Prompt the user for permission to access their data.\n   *\n   * Returns an authorization code which can be passed to `exchangeAuthCode`.\n   *\n   * @param {Window} $window\n   * @return {Promise<string>}\n   */\n  authorize($window) {\n    // Random state string used to check that auth messages came from the popup\n    // window that we opened.\n    var state = this.generateState();\n\n    // Promise which resolves or rejects when the user accepts or closes the\n    // auth popup.\n    var authResponse = new Promise((resolve, reject) => {\n      function authRespListener(event) {\n        if (typeof event.data !== 'object') {\n          return;\n        }\n\n        if (event.data.state !== state) {\n          // This message came from a different popup window.\n          return;\n        }\n\n        if (event.data.type === 'authorization_response') {\n          resolve(event.data);\n        }\n        if (event.data.type === 'authorization_canceled') {\n          reject(new Error('Authorization window was closed'));\n        }\n        $window.removeEventListener('message', authRespListener);\n      }\n      $window.addEventListener('message', authRespListener);\n    });\n\n    // Authorize user and retrieve grant token\n\n    // In Chrome & Firefox the sizes passed to `window.open` are used for the\n    // viewport size. In Safari the size is used for the window size including\n    // title bar etc. There is enough vertical space at the bottom to allow for\n    // this.\n    //\n    // See https://bugs.webkit.org/show_bug.cgi?id=143678\n    var width  = 475;\n    var height = 430;\n    var left   = $window.screen.width / 2 - width / 2;\n    var top    = $window.screen.height /2 - height / 2;\n\n    // Generate settings for `window.open` in the required comma-separated\n    // key=value format.\n    var authWindowSettings = queryString.stringify({\n      left: left,\n      top: top,\n      width: width,\n      height: height,\n    }).replace(/&/g, ',');\n\n    // Open the auth window before fetching the `oauth.authorize` URL to ensure\n    // that the `window.open` call happens in the same turn of the event loop\n    // that was initiated by the user clicking the \"Log in\" link.\n    //\n    // Otherwise the `window.open` call is not deemed to be in response to a\n    // user gesture in Firefox & IE 11 and their popup blocking heuristics will\n    // prevent the window being opened. See\n    // https://github.com/hypothesis/client/issues/534 and\n    // https://github.com/hypothesis/client/issues/535.\n    //\n    // Chrome, Safari & Edge have different heuristics and are not affected by\n    // this problem.\n\n    var authWindow = $window.open('about:blank', 'Login to Hypothesis', authWindowSettings);\n\n    var authUrl = this.authorizationEndpoint;\n    authUrl += '?' + queryString.stringify({\n      client_id: this.clientId,\n      origin: $window.location.origin,\n      response_mode: 'web_message',\n      response_type: 'code',\n      state: state,\n    });\n    authWindow.location = authUrl;\n    return authResponse.then(rsp => rsp.code);\n  }\n\n  /**\n   * Make an `application/x-www-form-urlencoded` POST request.\n   *\n   * @param {string} url\n   * @param {Object} data - Parameter dictionary\n   */\n  _formPost(url, data) {\n    data = queryString.stringify(data);\n    var requestConfig = {\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n    };\n    return this.$http.post(url, data, requestConfig);\n  }\n}\n\nmodule.exports = OAuthClient;\n",
    "'use strict';\n\n/* global Uint8Array */\n\nfunction byteToHex(val) {\n  var str = val.toString(16);\n  return str.length === 1 ? '0' + str : str;\n}\n\n/**\n * Generate a random hex string of `len` chars.\n *\n * @param {number} - An even-numbered length string to generate.\n * @return {string}\n */\nfunction generateHexString(len) {\n  var crypto = window.crypto || window.msCrypto /* IE 11 */;\n  var bytes = new Uint8Array(len / 2);\n  crypto.getRandomValues(bytes);\n  return Array.from(bytes).map(byteToHex).join('');\n}\n\nmodule.exports = {\n  generateHexString,\n};\n",
    "'use strict';\n\n/**\n * Sets a timeout which is linked to the lifetime of an Angular scope.\n *\n * When the scope is destroyed, the timeout will be cleared if it has\n * not already fired.\n *\n * The callback is not invoked within a $scope.$apply() context. It is up\n * to the caller to do that if necessary.\n *\n * @param {Scope} $scope - An Angular scope\n * @param {Function} fn - Callback to invoke with setTimeout\n * @param {number} delay - Delay argument to pass to setTimeout\n */\nmodule.exports = function ($scope, fn, delay, setTimeoutFn, clearTimeoutFn) {\n  setTimeoutFn = setTimeoutFn || setTimeout;\n  clearTimeoutFn = clearTimeoutFn || clearTimeout;\n\n  var removeDestroyHandler;\n  var id = setTimeoutFn(function () {\n    removeDestroyHandler();\n    fn();\n  }, delay);\n  removeDestroyHandler = $scope.$on('$destroy', function () {\n    clearTimeoutFn(id);\n  });\n};\n",
    "'use strict';\n\n/**\n * Returns true if the sidebar tutorial has to be shown to a user for a given session.\n */\nfunction shouldShowSidebarTutorial(sessionState) {\n  if (sessionState.preferences.show_sidebar_tutorial) {\n    return true;\n  }\n  return false;\n}\n\nmodule.exports = {\n  shouldShowSidebarTutorial: shouldShowSidebarTutorial,\n};\n",
    "'use strict';\n\n/**\n * Replace parameters in a URL template with values from a `params` object.\n *\n * Returns an object containing the expanded URL and a dictionary of unused\n * parameters.\n *\n *   replaceURLParams('/things/:id', {id: 'foo', q: 'bar'}) =>\n *     {url: '/things/foo', params: {q: 'bar'}}\n */\nfunction replaceURLParams(url, params) {\n  var unusedParams = {};\n  for (var param in params) {\n    if (params.hasOwnProperty(param)) {\n      var value = params[param];\n      var urlParam = ':' + param;\n      if (url.indexOf(urlParam) !== -1) {\n        url = url.replace(urlParam, encodeURIComponent(value));\n      } else {\n        unusedParams[param] = value;\n      }\n    }\n  }\n  return {url: url, params: unusedParams};\n}\n\n/**\n * Resolve a relative URL against a base URL to get an absolute URL.\n *\n * @param {string} relativeURL\n * @param {string} baseURL\n */\nfunction resolve(relativeURL, baseURL) {\n  return new URL(relativeURL, baseURL).href;\n}\n\nmodule.exports = {\n  replaceURLParams: replaceURLParams,\n  resolve: resolve,\n};\n",
    "/*\n * angular-ui-bootstrap\n * http://angular-ui.github.io/bootstrap/\n\n * Version: 0.13.4 - 2015-09-03\n * License: MIT\n */\nangular.module(\"ui.bootstrap\", [\"ui.bootstrap.tpls\",\"ui.bootstrap.dropdown\",\"ui.bootstrap.position\"]);\nangular.module(\"ui.bootstrap.tpls\", []);\nangular.module('ui.bootstrap.dropdown', ['ui.bootstrap.position'])\n\n.constant('dropdownConfig', {\n  openClass: 'open'\n})\n\n.service('dropdownService', ['$document', '$rootScope', function($document, $rootScope) {\n  var openScope = null;\n\n  this.open = function(dropdownScope) {\n    if (!openScope) {\n      $document.bind('click', closeDropdown);\n      $document.bind('keydown', keybindFilter);\n    }\n\n    if (openScope && openScope !== dropdownScope) {\n      openScope.isOpen = false;\n    }\n\n    openScope = dropdownScope;\n  };\n\n  this.close = function(dropdownScope) {\n    if (openScope === dropdownScope) {\n      openScope = null;\n      $document.unbind('click', closeDropdown);\n      $document.unbind('keydown', keybindFilter);\n    }\n  };\n\n  var closeDropdown = function(evt) {\n    // This method may still be called during the same mouse event that\n    // unbound this event handler. So check openScope before proceeding.\n    if (!openScope) { return; }\n\n    if (evt && openScope.getAutoClose() === 'disabled')  { return ; }\n\n    var toggleElement = openScope.getToggleElement();\n    if (evt && toggleElement && toggleElement[0].contains(evt.target)) {\n      return;\n    }\n\n    var dropdownElement = openScope.getDropdownElement();\n    if (evt && openScope.getAutoClose() === 'outsideClick' &&\n      dropdownElement && dropdownElement[0].contains(evt.target)) {\n      return;\n    }\n\n    openScope.isOpen = false;\n\n    if (!$rootScope.$$phase) {\n      openScope.$apply();\n    }\n  };\n\n  var keybindFilter = function(evt) {\n    if (evt.which === 27) {\n      openScope.focusToggleElement();\n      closeDropdown();\n    } else if (openScope.isKeynavEnabled() && /(38|40)/.test(evt.which) && openScope.isOpen) {\n      evt.preventDefault();\n      evt.stopPropagation();\n      openScope.focusDropdownEntry(evt.which);\n    }\n  };\n}])\n\n.controller('DropdownController', ['$scope', '$attrs', '$parse', 'dropdownConfig', 'dropdownService', '$animate', '$position', '$document', '$compile', '$templateRequest', function($scope, $attrs, $parse, dropdownConfig, dropdownService, $animate, $position, $document, $compile, $templateRequest) {\n  var self = this,\n    scope = $scope.$new(), // create a child scope so we are not polluting original one\n    templateScope,\n    openClass = dropdownConfig.openClass,\n    getIsOpen,\n    setIsOpen = angular.noop,\n    toggleInvoker = $attrs.onToggle ? $parse($attrs.onToggle) : angular.noop,\n    appendToBody = false,\n    keynavEnabled = false,\n    selectedOption = null,\n    body = $document.find('body');\n\n  this.init = function(element) {\n    self.$element = element;\n\n    if ($attrs.isOpen) {\n      getIsOpen = $parse($attrs.isOpen);\n      setIsOpen = getIsOpen.assign;\n\n      $scope.$watch(getIsOpen, function(value) {\n        scope.isOpen = !!value;\n      });\n    }\n\n    appendToBody = angular.isDefined($attrs.dropdownAppendToBody);\n    keynavEnabled = angular.isDefined($attrs.keyboardNav);\n\n    if (appendToBody && self.dropdownMenu) {\n      body.append(self.dropdownMenu);\n      body.addClass('dropdown');\n      element.on('$destroy', function handleDestroyEvent() {\n        self.dropdownMenu.remove();\n      });\n    }\n  };\n\n  this.toggle = function(open) {\n    return scope.isOpen = arguments.length ? !!open : !scope.isOpen;\n  };\n\n  // Allow other directives to watch status\n  this.isOpen = function() {\n    return scope.isOpen;\n  };\n\n  scope.getToggleElement = function() {\n    return self.toggleElement;\n  };\n\n  scope.getAutoClose = function() {\n    return $attrs.autoClose || 'always'; //or 'outsideClick' or 'disabled'\n  };\n\n  scope.getElement = function() {\n    return self.$element;\n  };\n\n  scope.isKeynavEnabled = function() {\n    return keynavEnabled;\n  };\n\n  scope.focusDropdownEntry = function(keyCode) {\n    var elems = self.dropdownMenu ? //If append to body is used.\n      (angular.element(self.dropdownMenu).find('a')) :\n      (angular.element(self.$element).find('ul').eq(0).find('a'));\n\n    switch (keyCode) {\n      case (40): {\n        if (!angular.isNumber(self.selectedOption)) {\n          self.selectedOption = 0;\n        } else {\n          self.selectedOption = (self.selectedOption === elems.length -1 ?\n            self.selectedOption :\n            self.selectedOption + 1);\n        }\n        break;\n      }\n      case (38): {\n        if (!angular.isNumber(self.selectedOption)) {\n          self.selectedOption = elems.length - 1;\n        } else {\n          self.selectedOption = self.selectedOption === 0 ?\n            0 : self.selectedOption - 1;\n        }\n        break;\n      }\n    }\n    elems[self.selectedOption].focus();\n  };\n\n  scope.getDropdownElement = function() {\n    return self.dropdownMenu;\n  };\n\n  scope.focusToggleElement = function() {\n    if (self.toggleElement) {\n      self.toggleElement[0].focus();\n    }\n  };\n\n  scope.$watch('isOpen', function(isOpen, wasOpen) {\n    if (appendToBody && self.dropdownMenu) {\n      var pos = $position.positionElements(self.$element, self.dropdownMenu, 'bottom-left', true);\n      var css = {\n        top: pos.top + 'px',\n        display: isOpen ? 'block' : 'none'\n      };\n\n      var rightalign = self.dropdownMenu.hasClass('dropdown-menu-right');\n      if (!rightalign) {\n        css.left = pos.left + 'px';\n        css.right = 'auto';\n      } else {\n        css.left = 'auto';\n        css.right = (window.innerWidth - (pos.left + self.$element.prop('offsetWidth'))) + 'px';\n      }\n\n      self.dropdownMenu.css(css);\n    }\n\n    var openContainer = appendToBody ? body : self.$element;\n\n    $animate[isOpen ? 'addClass' : 'removeClass'](openContainer, openClass).then(function() {\n      if (angular.isDefined(isOpen) && isOpen !== wasOpen) {\n        toggleInvoker($scope, { open: !!isOpen });\n      }\n    });\n\n    if (isOpen) {\n      if (self.dropdownMenuTemplateUrl) {\n        $templateRequest(self.dropdownMenuTemplateUrl).then(function(tplContent) {\n          templateScope = scope.$new();\n          $compile(tplContent.trim())(templateScope, function(dropdownElement) {\n            var newEl = dropdownElement;\n            self.dropdownMenu.replaceWith(newEl);\n            self.dropdownMenu = newEl;\n          });\n        });\n      }\n\n      scope.focusToggleElement();\n      dropdownService.open(scope);\n    } else {\n      if (self.dropdownMenuTemplateUrl) {\n        if (templateScope) {\n          templateScope.$destroy();\n        }\n        var newEl = angular.element('<ul class=\"dropdown-menu\"></ul>');\n        self.dropdownMenu.replaceWith(newEl);\n        self.dropdownMenu = newEl;\n      }\n\n      dropdownService.close(scope);\n      self.selectedOption = null;\n    }\n\n    if (angular.isFunction(setIsOpen)) {\n      setIsOpen($scope, isOpen);\n    }\n  });\n\n  $scope.$on('$locationChangeSuccess', function() {\n    if (scope.getAutoClose() !== 'disabled') {\n      scope.isOpen = false;\n    }\n  });\n\n  var offDestroy = $scope.$on('$destroy', function() {\n    scope.$destroy();\n  });\n  scope.$on('$destroy', offDestroy);\n}])\n\n.directive('dropdown', function() {\n  return {\n    controller: 'DropdownController',\n    link: function(scope, element, attrs, dropdownCtrl) {\n      dropdownCtrl.init( element );\n      element.addClass('dropdown');\n    }\n  };\n})\n\n.directive('dropdownMenu', function() {\n  return {\n    restrict: 'AC',\n    require: '?^dropdown',\n    link: function(scope, element, attrs, dropdownCtrl) {\n      if (!dropdownCtrl) {\n        return;\n      }\n      var tplUrl = attrs.templateUrl;\n      if (tplUrl) {\n        dropdownCtrl.dropdownMenuTemplateUrl = tplUrl;\n      }\n      if (!dropdownCtrl.dropdownMenu) {\n        dropdownCtrl.dropdownMenu = element;\n      }\n    }\n  };\n})\n\n.directive('keyboardNav', function() {\n  return {\n    restrict: 'A',\n    require: '?^dropdown',\n    link: function (scope, element, attrs, dropdownCtrl) {\n\n      element.bind('keydown', function(e) {\n        if ([38, 40].indexOf(e.which) !== -1) {\n          e.preventDefault();\n          e.stopPropagation();\n\n          var elems = dropdownCtrl.dropdownMenu.find('a');\n\n          switch (e.which) {\n            case (40): { // Down\n              if (!angular.isNumber(dropdownCtrl.selectedOption)) {\n                dropdownCtrl.selectedOption = 0;\n              } else {\n                dropdownCtrl.selectedOption = dropdownCtrl.selectedOption === elems.length -1 ?\n                  dropdownCtrl.selectedOption : dropdownCtrl.selectedOption + 1;\n              }\n              break;\n            }\n            case (38): { // Up\n              if (!angular.isNumber(dropdownCtrl.selectedOption)) {\n                dropdownCtrl.selectedOption = elems.length - 1;\n              } else {\n                dropdownCtrl.selectedOption = dropdownCtrl.selectedOption === 0 ?\n                  0 : dropdownCtrl.selectedOption - 1;\n              }\n              break;\n            }\n          }\n          elems[dropdownCtrl.selectedOption].focus();\n        }\n      });\n    }\n  };\n})\n\n.directive('dropdownToggle', function() {\n  return {\n    require: '?^dropdown',\n    link: function(scope, element, attrs, dropdownCtrl) {\n      if (!dropdownCtrl) {\n        return;\n      }\n\n      element.addClass('dropdown-toggle');\n\n      dropdownCtrl.toggleElement = element;\n\n      var toggleDropdown = function(event) {\n        event.preventDefault();\n\n        if (!element.hasClass('disabled') && !attrs.disabled) {\n          scope.$apply(function() {\n            dropdownCtrl.toggle();\n          });\n        }\n      };\n\n      element.bind('click', toggleDropdown);\n\n      // WAI-ARIA\n      element.attr({ 'aria-haspopup': true, 'aria-expanded': false });\n      scope.$watch(dropdownCtrl.isOpen, function( isOpen ) {\n        element.attr('aria-expanded', !!isOpen);\n      });\n\n      scope.$on('$destroy', function() {\n        element.unbind('click', toggleDropdown);\n      });\n    }\n  };\n});\n\nangular.module('ui.bootstrap.position', [])\n\n/**\n * A set of utility methods that can be use to retrieve position of DOM elements.\n * It is meant to be used where we need to absolute-position DOM elements in\n * relation to other, existing elements (this is the case for tooltips, popovers,\n * typeahead suggestions etc.).\n */\n  .factory('$position', ['$document', '$window', function($document, $window) {\n    function getStyle(el, cssprop) {\n      if (el.currentStyle) { //IE\n        return el.currentStyle[cssprop];\n      } else if ($window.getComputedStyle) {\n        return $window.getComputedStyle(el)[cssprop];\n      }\n      // finally try and get inline style\n      return el.style[cssprop];\n    }\n\n    /**\n     * Checks if a given element is statically positioned\n     * @param element - raw DOM element\n     */\n    function isStaticPositioned(element) {\n      return (getStyle(element, 'position') || 'static' ) === 'static';\n    }\n\n    /**\n     * returns the closest, non-statically positioned parentOffset of a given element\n     * @param element\n     */\n    var parentOffsetEl = function(element) {\n      var docDomEl = $document[0];\n      var offsetParent = element.offsetParent || docDomEl;\n      while (offsetParent && offsetParent !== docDomEl && isStaticPositioned(offsetParent) ) {\n        offsetParent = offsetParent.offsetParent;\n      }\n      return offsetParent || docDomEl;\n    };\n\n    return {\n      /**\n       * Provides read-only equivalent of jQuery's position function:\n       * http://api.jquery.com/position/\n       */\n      position: function(element) {\n        var elBCR = this.offset(element);\n        var offsetParentBCR = { top: 0, left: 0 };\n        var offsetParentEl = parentOffsetEl(element[0]);\n        if (offsetParentEl != $document[0]) {\n          offsetParentBCR = this.offset(angular.element(offsetParentEl));\n          offsetParentBCR.top += offsetParentEl.clientTop - offsetParentEl.scrollTop;\n          offsetParentBCR.left += offsetParentEl.clientLeft - offsetParentEl.scrollLeft;\n        }\n\n        var boundingClientRect = element[0].getBoundingClientRect();\n        return {\n          width: boundingClientRect.width || element.prop('offsetWidth'),\n          height: boundingClientRect.height || element.prop('offsetHeight'),\n          top: elBCR.top - offsetParentBCR.top,\n          left: elBCR.left - offsetParentBCR.left\n        };\n      },\n\n      /**\n       * Provides read-only equivalent of jQuery's offset function:\n       * http://api.jquery.com/offset/\n       */\n      offset: function(element) {\n        var boundingClientRect = element[0].getBoundingClientRect();\n        return {\n          width: boundingClientRect.width || element.prop('offsetWidth'),\n          height: boundingClientRect.height || element.prop('offsetHeight'),\n          top: boundingClientRect.top + ($window.pageYOffset || $document[0].documentElement.scrollTop),\n          left: boundingClientRect.left + ($window.pageXOffset || $document[0].documentElement.scrollLeft)\n        };\n      },\n\n      /**\n       * Provides coordinates for the targetEl in relation to hostEl\n       */\n      positionElements: function(hostEl, targetEl, positionStr, appendToBody) {\n        var positionStrParts = positionStr.split('-');\n        var pos0 = positionStrParts[0], pos1 = positionStrParts[1] || 'center';\n\n        var hostElPos,\n          targetElWidth,\n          targetElHeight,\n          targetElPos;\n\n        hostElPos = appendToBody ? this.offset(hostEl) : this.position(hostEl);\n\n        targetElWidth = targetEl.prop('offsetWidth');\n        targetElHeight = targetEl.prop('offsetHeight');\n\n        var shiftWidth = {\n          center: function() {\n            return hostElPos.left + hostElPos.width / 2 - targetElWidth / 2;\n          },\n          left: function() {\n            return hostElPos.left;\n          },\n          right: function() {\n            return hostElPos.left + hostElPos.width;\n          }\n        };\n\n        var shiftHeight = {\n          center: function() {\n            return hostElPos.top + hostElPos.height / 2 - targetElHeight / 2;\n          },\n          top: function() {\n            return hostElPos.top;\n          },\n          bottom: function() {\n            return hostElPos.top + hostElPos.height;\n          }\n        };\n\n        switch (pos0) {\n          case 'right':\n            targetElPos = {\n              top: shiftHeight[pos1](),\n              left: shiftWidth[pos0]()\n            };\n            break;\n          case 'left':\n            targetElPos = {\n              top: shiftHeight[pos1](),\n              left: hostElPos.left - targetElWidth\n            };\n            break;\n          case 'bottom':\n            targetElPos = {\n              top: shiftHeight[pos0](),\n              left: shiftWidth[pos1]()\n            };\n            break;\n          default:\n            targetElPos = {\n              top: hostElPos.top - targetElHeight,\n              left: shiftWidth[pos1]()\n            };\n            break;\n        }\n\n        return targetElPos;\n      }\n    };\n  }]);\n\n",
    "'use strict';\n\n// Prevent Babel inserting helper code after `@ngInject` comment below which\n// breaks browserify-ngannotate.\nvar unused; // eslint-disable-line\n\n// @ngInject\nfunction viewFilter(unicode) {\n  /**\n   * Normalize a field value or query term for comparison.\n   */\n  function normalize(val) {\n    if (typeof val !== 'string') {\n      return val;\n    }\n    return unicode.fold(unicode.normalize(val)).toLowerCase();\n  }\n\n  /**\n   * Filter that matches annotations against a single field & term.\n   *\n   * eg. \"quote:foo\" or \"text:bar\"\n   */\n  class TermFilter {\n    /**\n     * @param {string} field - Name of field to match\n     * @param {string} term - Query term\n     * @param {Checker} checker - Functions for extracting term values from\n     *   an annotation and checking whether they match a query term.\n     */\n    constructor(field, term, checker) {\n      this.field = field;\n      this.term = term;\n      this.checker = checker;\n    }\n\n    matches(ann) {\n      var checker = this.checker;\n      if (checker.autofalse && checker.autofalse(ann)) {\n        return false;\n      }\n\n      var value = checker.value(ann);\n      if (Array.isArray(value)) {\n        value = value.map(normalize);\n      } else {\n        value = normalize(value);\n      }\n      return checker.match(this.term, value);\n    }\n  }\n\n  /**\n   * Filter that combines other filters using AND or OR combinators.\n   */\n  class BinaryOpFilter {\n    /**\n     * @param {'and'|'or'} op - Binary operator\n     * @param {Filter[]} - Array of filters to test against\n     */\n    constructor(op, filters) {\n      this.operator = op;\n      this.filters = filters;\n    }\n\n    matches(ann) {\n      if (this.operator === 'and') {\n        return this.filters.every(filter => filter.matches(ann));\n      } else {\n        return this.filters.some(filter => filter.matches(ann));\n      }\n    }\n  }\n\n  /**\n   * Functions for extracting field values from annotations and testing whether\n   * they match a query term.\n   *\n   * [facet_name]:\n   *   autofalse: a function for a preliminary false match result\n   *   value: a function to extract to facet value for the annotation.\n   *   match: a function to check if the extracted value matches the facet value\n   */\n  this.fields = {\n    quote: {\n      autofalse: ann => (ann.references || []).length > 0,\n      value(annotation) {\n        if (!annotation.target) {\n          // FIXME: All annotations *must* have a target, so this check should\n          // not be required.\n          return '';\n        }\n        var target = annotation.target[0];\n        var selectors = target.selector || [];\n\n        return selectors\n          .filter(s => s.type === 'TextQuoteSelector')\n          .map(s => s.exact)\n          .join('\\n');\n      },\n      match: (term, value) => value.indexOf(term) > -1,\n    },\n    since: {\n      autofalse: ann => typeof ann.updated !== 'string',\n      value: ann => new Date(ann.updated),\n      match(term, value) {\n        var delta = (Date.now() - value) / 1000;\n        return delta <= term;\n      },\n    },\n    tag: {\n      autofalse: ann => !Array.isArray(ann.tags),\n      value: ann => ann.tags,\n      match: (term, value) => value.includes(term),\n    },\n    text: {\n      autofalse: ann => typeof ann.text !== 'string',\n      value: ann => ann.text,\n      match: (term, value) => value.indexOf(term) > -1,\n    },\n    uri: {\n      autofalse: ann => typeof ann.uri !== 'string',\n      value: ann => ann.uri,\n      match: (term, value) => value.indexOf(term) > -1,\n    },\n    user: {\n      autofalse: ann => typeof ann.user !== 'string',\n      value: ann => ann.user,\n      match: (term, value) => value.indexOf(term) > -1,\n    },\n  };\n\n  /**\n   * Filters a set of annotations.\n   *\n   * @param {Annotation[]} annotations\n   * @param {Object} filters - Faceted filter generated by\n   * `generateFacetedFilter`.\n   * @return {string[]} IDs of matching annotations.\n   */\n  this.filter = (annotations, filters) => {\n    // Convert the input filter object into a filter tree, expanding \"any\"\n    // filters.\n    var fieldFilters = Object.entries(filters).filter(([, filter]) =>\n      filter.terms.length > 0)\n    .map(([field, filter]) => {\n      var terms = filter.terms.map(normalize);\n      var termFilters;\n      if (field === 'any') {\n        var anyFields = ['quote', 'text', 'tag', 'user'];\n        termFilters = terms.map(term => new BinaryOpFilter('or', anyFields.map(field =>\n          new TermFilter(field, term, this.fields[field])\n        )));\n      } else {\n        termFilters = terms.map(term => new TermFilter(field, term, this.fields[field]));\n      }\n      return new BinaryOpFilter(filter.operator, termFilters);\n    });\n\n    var rootFilter = new BinaryOpFilter('and', fieldFilters);\n\n    return annotations\n      .filter(ann => rootFilter.matches(ann))\n      .map(ann => ann.id);\n  };\n}\n\nmodule.exports = viewFilter;\n",
    "'use strict';\n\nvar EventEmitter = require('tiny-emitter');\nvar debounce = require('lodash.debounce');\nvar inherits = require('inherits');\n\n/**\n * @typedef Options\n * @property {Function} [invisibleThreadFilter] - Function used to determine\n *   whether an off-screen thread should be rendered or not.  Called with a\n *   `Thread` and if it returns `true`, the thread is rendered even if offscreen.\n * @property {Element} [scrollRoot] - The scrollable Element which contains the\n *   thread list. The set of on-screen threads is determined based on the scroll\n *   position and height of this element.\n */\n\n/**\n * VirtualThreadList is a helper for virtualizing the annotation thread list.\n *\n * 'Virtualizing' the thread list improves UI performance by only creating\n * annotation cards for annotations which are either in or near the viewport.\n *\n * Reducing the number of annotation cards that are actually created optimizes\n * the initial population of the list, since annotation cards are big components\n * that are expensive to create and consume a lot of memory. For Angular\n * applications this also helps significantly with UI responsiveness by limiting\n * the number of watchers (functions created by template expressions or\n * '$scope.$watch' calls) that have to be run on every '$scope.$digest()' cycle.\n *\n * @param {Window} container - The Window displaying the list of annotation threads.\n * @param {Thread} rootThread - The initial Thread object for the top-level\n *        threads.\n * @param {Options} options\n */\nfunction VirtualThreadList($scope, window_, rootThread, options) {\n  var self = this;\n\n  this._rootThread = rootThread;\n\n  this._options = Object.assign({}, options);\n\n  // Cache of thread ID -> last-seen height\n  this._heights = {};\n\n  this.window = window_;\n  this.scrollRoot = options.scrollRoot || document.body;\n\n  var debouncedUpdate = debounce(function () {\n    self._updateVisibleThreads();\n    $scope.$digest();\n  }, 20);\n  this.scrollRoot.addEventListener('scroll', debouncedUpdate);\n  this.window.addEventListener('resize', debouncedUpdate);\n\n  this._detach = function () {\n    this.scrollRoot.removeEventListener('scroll', debouncedUpdate);\n    this.window.removeEventListener('resize', debouncedUpdate);\n  };\n}\ninherits(VirtualThreadList, EventEmitter);\n\n/**\n * Detach event listeners and clear any pending timeouts.\n *\n * This should be invoked when the UI view presenting the virtual thread list\n * is torn down.\n */\nVirtualThreadList.prototype.detach = function () {\n  this._detach();\n};\n\n/**\n * Sets the root thread containing all conversations matching the current\n * filters.\n *\n * This should be called with the current Thread object whenever the set of\n * matching annotations changes.\n */\nVirtualThreadList.prototype.setRootThread = function (thread) {\n  if (thread === this._rootThread) {\n    return;\n  }\n  this._rootThread = thread;\n  this._updateVisibleThreads();\n};\n\n/**\n * Sets the actual height for a thread.\n *\n * When calculating the amount of space required for offscreen threads,\n * the actual or 'last-seen' height is used if known. Otherwise an estimate\n * is used.\n *\n * @param {string} id - The annotation ID or $tag\n * @param {number} height - The height of the annotation thread.\n */\nVirtualThreadList.prototype.setThreadHeight = function (id, height) {\n  if (isNaN(height) || height <= 0) {\n    throw new Error('Invalid thread height %d', height);\n  }\n  this._heights[id] = height;\n};\n\nVirtualThreadList.prototype._height = function (id) {\n  // Default guess of the height required for a threads that have not been\n  // measured\n  var DEFAULT_HEIGHT = 200;\n  return this._heights[id] || DEFAULT_HEIGHT;\n};\n\n/** Return the vertical offset of an annotation card from the top of the list. */\nVirtualThreadList.prototype.yOffsetOf = function (id) {\n  var self = this;\n  var allThreads = this._rootThread.children;\n  var matchIndex = allThreads.findIndex(function (thread) {\n    return thread.id === id;\n  });\n  if (matchIndex === -1) {\n    return 0;\n  }\n  return allThreads.slice(0, matchIndex).reduce(function (offset, thread) {\n    return offset + self._height(thread.id);\n  }, 0);\n};\n\n/**\n * Recalculates the set of visible threads and estimates of the amount of space\n * required for offscreen threads above and below the viewport.\n *\n * Emits a `changed` event with the recalculated set of visible threads.\n */\nVirtualThreadList.prototype._updateVisibleThreads = function () {\n  // Space above the viewport in pixels which should be considered 'on-screen'\n  // when calculating the set of visible threads\n  var MARGIN_ABOVE = 800;\n  // Same as MARGIN_ABOVE but for the space below the viewport\n  var MARGIN_BELOW = 800;\n\n  // Estimated height in pixels of annotation cards which are below the\n  // viewport and not actually created. This is used to create an empty spacer\n  // element below visible cards in order to give the list's scrollbar the\n  // correct dimensions.\n  var offscreenLowerHeight = 0;\n  // Same as offscreenLowerHeight but for cards above the viewport.\n  var offscreenUpperHeight = 0;\n  // List of annotations which are in or near the viewport and need to\n  // actually be created.\n  var visibleThreads = [];\n\n  // List of annotations which are required to be rendered but we do not\n  // want them visible. This is to ensure that we allow items to be rendered\n  // and initialized (for saving purposes) without having them be presented\n  // in out of context scenarios (i.e. in wrong order for sort)\n  var invisibleThreads = [];\n\n  var allThreads = this._rootThread.children;\n  var visibleHeight = this.window.innerHeight;\n  var usedHeight = 0;\n  var thread;\n\n  for (var i = 0; i < allThreads.length; i++) {\n    thread = allThreads[i];\n    var threadHeight = this._height(thread.id);\n\n    var added = false;\n\n    if (usedHeight + threadHeight < this.scrollRoot.scrollTop - MARGIN_ABOVE) {\n      // Thread is above viewport\n      offscreenUpperHeight += threadHeight;\n    } else if (usedHeight <\n      this.scrollRoot.scrollTop + visibleHeight + MARGIN_BELOW) {\n\n      // Thread is either in or close to the viewport\n      visibleThreads.push(thread);\n      added = true;\n    } else {\n\n      // Thread is below viewport\n      offscreenLowerHeight += threadHeight;\n    }\n\n    // any thread that is not going to go through the render process\n    // because it is already outside of the viewport should be checked\n    // to see if it needs to be added as an invisible render. So it will\n    // be available to go through rendering but not visible to the user\n    if(!added &&\n        this._options.invisibleThreadFilter &&\n        this._options.invisibleThreadFilter(thread)){\n      invisibleThreads.push(thread);\n    }\n\n    usedHeight += threadHeight;\n  }\n\n  this.emit('changed', {\n    offscreenLowerHeight: offscreenLowerHeight,\n    offscreenUpperHeight: offscreenUpperHeight,\n    visibleThreads: visibleThreads,\n    invisibleThreads: invisibleThreads,\n  });\n};\n\nmodule.exports = VirtualThreadList;\n",
    "'use strict';\n\nvar retry = require('retry');\nvar EventEmitter = require('tiny-emitter');\nvar inherits = require('inherits');\n\n// see https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\nvar CLOSE_NORMAL = 1000;\n\n// Minimum delay, in ms, before reconnecting after an abnormal connection close.\nvar RECONNECT_MIN_DELAY = 1000;\n\n/**\n * Socket is a minimal wrapper around WebSocket which provides:\n *\n * - Automatic reconnection in the event of an abnormal close\n * - Queuing of messages passed to send() whilst the socket is\n *   connecting\n * - Uses the standard EventEmitter API for reporting open, close, error\n *   and message events.\n */\nfunction Socket(url) {\n  var self = this;\n\n  // queue of JSON objects which have not yet been submitted\n  var messageQueue = [];\n\n  // the current WebSocket instance\n  var socket;\n\n  // a pending operation to connect a WebSocket\n  var operation;\n\n  function sendMessages() {\n    while (messageQueue.length > 0) {\n      var messageString = JSON.stringify(messageQueue.shift());\n      socket.send(messageString);\n    }\n  }\n\n  // Connect the websocket immediately. If a connection attempt is already in\n  // progress, do nothing.\n  function connect() {\n    if (operation) {\n      return;\n    }\n\n    operation = retry.operation({\n      minTimeout: RECONNECT_MIN_DELAY * 2,\n      // Don't retry forever -- fail permanently after 10 retries\n      retries: 10,\n      // Randomize retry times to minimise the thundering herd effect\n      randomize: true,\n    });\n\n    operation.attempt(function () {\n      socket = new WebSocket(url);\n      socket.onopen = function (event) {\n        onOpen();\n        self.emit('open', event);\n      };\n      socket.onclose = function (event) {\n        if (event.code === CLOSE_NORMAL) {\n          self.emit('close', event);\n          return;\n        }\n        var err = new Error('WebSocket closed abnormally, code: ' + event.code);\n        console.warn(err);\n        onAbnormalClose(err);\n      };\n      socket.onerror = function (event) {\n        self.emit('error', event);\n      };\n      socket.onmessage = function (event) {\n        self.emit('message', event);\n      };\n    });\n  }\n\n  // onOpen is called when a websocket connection is successfully established.\n  function onOpen() {\n    operation = null;\n    sendMessages();\n  }\n\n  // onAbnormalClose is called when a websocket connection closes abnormally.\n  // This may be the result of a failure to connect, or an abnormal close after\n  // a previous successful connection.\n  function onAbnormalClose(error) {\n    // If we're already in a reconnection loop, trigger a retry...\n    if (operation) {\n      if (!operation.retry(error)) {\n        console.error('reached max retries attempting to reconnect websocket');\n      }\n      return;\n    }\n    // ...otherwise reconnect the websocket after a short delay.\n    var delay = RECONNECT_MIN_DELAY;\n    delay += Math.floor(Math.random() * delay);\n    operation = setTimeout(function () {\n      operation = null;\n      connect();\n    }, delay);\n  }\n\n  /** Close the underlying WebSocket connection */\n  this.close = function () {\n    socket.close();\n  };\n\n  /**\n   * Send a JSON object via the WebSocket connection, or queue it\n   * for later delivery if not currently connected.\n   */\n  this.send = function (message) {\n    messageQueue.push(message);\n    if (this.isConnected()) {\n      sendMessages();\n    }\n  };\n\n  /** Returns true if the WebSocket is currently connected. */\n  this.isConnected = function () {\n    return socket.readyState === WebSocket.OPEN;\n  };\n\n  connect();\n}\n\ninherits(Socket, EventEmitter);\n\nmodule.exports = Socket;\n"
  ]
}